!function(t,e){"use strict";t.kha=t.kha||{},t.kha.input=t.kha.input||{},t.kha._Color=t.kha._Color||{};var a,i={},n=function(){return f_.__string_rec(this,"")},v={};function s(t,e){function a(){}a.prototype=t;var i=new a;for(var n in e)i[n]=e[n];return e.toString!==Object.prototype.toString&&(i.toString=e.toString),i}var r=function(t,e){this.r=new RegExp(t,e.split("u").join(""))};(i.EReg=r).__name__=!0,r.prototype={r:null,match:function(t){return this.r.global&&(this.r.lastIndex=0),this.r.m=this.r.exec(t),this.r.s=t,null!=this.r.m},matched:function(t){if(null!=this.r.m&&0<=t&&t<this.r.m.length)return this.r.m[t];throw new Ot("EReg::matched")},__class__:r};var q=function(){};(i.HxOverrides=q).__name__=!0,q.strDate=function(t){switch(t.length){case 8:var e=t.split(":"),a=new Date;return a.setTime(0),a.setUTCHours(e[0]),a.setUTCMinutes(e[1]),a.setUTCSeconds(e[2]),a;case 10:var i=t.split("-");return new Date(i[0],i[1]-1,i[2],0,0,0);case 19:var n=t.split(" "),s=n[0].split("-"),r=n[1].split(":");return new Date(s[0],s[1]-1,s[2],r[0],r[1],r[2]);default:throw new Ot("Invalid date format : "+t)}},q.cca=function(t,e){var a=t.charCodeAt(e);if(a==a)return a},q.substr=function(t,e,a){if(null==a)a=t.length;else if(a<0){if(0!=e)return"";a=t.length+a}return t.substr(e,a)},q.remove=function(t,e){var a=t.indexOf(e);return-1!=a&&(t.splice(a,1),!0)},q.iter=function(t){return{cur:0,arr:t,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};var o=function(){};(i.Main=o).__name__=!0,o.main=function(){c_.skinMaxBones=67,I.numAssets=26,I.drawLoading=C.render,I.main("Scene",0,!1,!0,!1,960,540,1,!0,m.get)},Math.__name__=!0;var Ze=function(){};(i.Reflect=Ze).__name__=!0,Ze.field=function(t,e){try{return t[e]}catch(t){t instanceof Ot&&t.val;return null}},Ze.setProperty=function(t,e,a){var i;!!t.__properties__&&(i=t.__properties__["set_"+e])?t[i](a):t[e]=a},Ze.isFunction=function(t){return"function"==typeof t&&!(t.__name__||t.__ename__)};var k=function(){};(i.Std=k).__name__=!0,k.string=function(t){return f_.__string_rec(t,"")},k.parseInt=function(t){var e=parseInt(t,10);return 0!=e||120!=q.cca(t,1)&&88!=q.cca(t,1)||(e=parseInt(t)),isNaN(e)?null:e},k.random=function(t){return t<=0?0:Math.floor(Math.random()*t)};var P=function(){};(i.StringTools=P).__name__=!0,P.endsWith=function(t,e){var a=e.length,i=t.length;return a<=i&&q.substr(t,i-a,a)==e},P.replace=function(t,e,a){return t.split(e).join(a)};var J=function(){};(i.Type=J).__name__=!0,J.createInstance=function(t,e){return new(Function.prototype.bind.apply(t,[null].concat(e)))},J.createEnum=function(t,e,a){var i=Ze.field(t,e);if(null==i)throw new Ot("No such constructor "+e);if(Ze.isFunction(i)){if(null==a)throw new Ot("Constructor "+e+" need parameters");return i.apply(t,a)}if(null!=a&&0!=a.length)throw new Ot("Constructor "+e+" does not need parameters");return i},J.getInstanceFields=function(t){var e=[];for(var a in t.prototype)e.push(a);return q.remove(e,"__class__"),q.remove(e,"__properties__"),e};var Xt={};(i["_UInt.UInt_Impl_"]=Xt).__name__=!0,Xt.gt=function(t,e){var a=t<0;return a!=e<0?a:e<t},Xt.gte=function(t,e){var a=t<0;return a!=e<0?a:e<=t},Xt.toFloat=function(t){return t<0?4294967296+t:t+0};var u=function(){this._render2D=null,this._render=null,this._lateUpdate=null,this._update=null,this._remove=null,this._init=null,this._add=null};(i["iron.Trait"]=u).__name__=!0,u.prototype={object:null,_add:null,_init:null,_remove:null,_update:null,_lateUpdate:null,_render:null,_render2D:null,remove:function(){this.object.removeTrait(this)},notifyOnAdd:function(t){null==this._add&&(this._add=[]),this._add.push(t)},notifyOnInit:function(t){null==this._init&&(this._init=[]),this._init.push(t),L.notifyOnInit(t)},notifyOnRemove:function(t){null==this._remove&&(this._remove=[]),this._remove.push(t)},notifyOnUpdate:function(t){null==this._update&&(this._update=[]),this._update.push(t),L.notifyOnUpdate(t)},__class__:u};var l=function(){this.soundFire1=null,this.soundFire0=null,this.lastFire=0,this.fireFreq=.15;var e=this;u.call(this);var t=wt.getMouse(),a=wt.getGamepad(0);this.notifyOnInit(function(){e.firePoint=e.object.getChild("ProjectileSpawn").transform,R.getSound("fire0.wav",function(t){e.soundFire0=t}),R.getSound("fire1.wav",function(t){e.soundFire1=t})}),this.notifyOnUpdate(function(){e.lastFire+=.016666666666666666*co.scale,e.lastFire>e.fireFreq&&(t.down("left")||null!=a&&0<a.down("r2"))&&e.shoot()})};(i["arm.GunController"]=l).__name__=!0,l.__super__=u,l.prototype=s(u.prototype,{fireFreq:null,firePoint:null,lastFire:null,soundFire0:null,soundFire1:null,shoot:function(){var l=this;h_.active.spawnObject("Projectile",null,function(t){t.transform.loc.x=l.firePoint.world.self._30,t.transform.loc.y=l.firePoint.world.self._31,t.transform.loc.z=l.firePoint.world.self._32,t.transform.buildMatrix();var e=t.getTrait(Ie);e.syncTransform();var a=l.object.transform.world,i=a.self._10,n=a.self._11,s=a.self._12,r=Math.sqrt(i*i+n*n+s*s);if(0<r){var o=1/r;i*=o,n*=o,s*=o}e.setLinearVelocity(15*i,15*n,15*s),go.addTimeTask($n(t,t.remove),10)}),yt.play(0==k.random(3)?this.soundFire1:this.soundFire0),this.lastFire=0},__class__:l});var _=function(){this.state="idle",this.dir=new ho,this.turnTime=0,this.stepTime=0,this.gamepad=null,this.keyboard=null,this.mouse=null,this.soundStep1=null,this.soundStep0=null,u.call(this),this.notifyOnInit($n(this,this.init)),this.notifyOnUpdate($n(this,this.update))};(i["arm.PlayerController"]=_).__name__=!0,_.__super__=u,_.prototype=s(u.prototype,{soundStep0:null,soundStep1:null,mouse:null,keyboard:null,gamepad:null,body:null,anim:null,armature:null,stepTime:null,turnTime:null,dir:null,lastLook:null,state:null,init:function(){var e=this;this.mouse=wt.getMouse(),this.keyboard=wt.getKeyboard(),this.gamepad=wt.getGamepad(0),this.body=this.object.getTrait(Ie),this.armature=this.object.getChild("Armature"),this.anim=this.armature.children[0].animation;var t=this.armature.transform.world,a=new ho(t.self._10,t.self._11,t.self._12),i=Math.sqrt(a.x*a.x+a.y*a.y+a.z*a.z);if(0<i){var n=1/i;a.x*=n,a.y*=n,a.z*=n}this.lastLook=a,R.getSound("step0.wav",function(t){e.soundStep0=t}),R.getSound("step1.wav",function(t){e.soundStep1=t})},update:function(){var t=this.dir;t.x=0,t.y=0,t.z=0,t.w=1,this.keyboard.down("w")&&(this.dir.y=1),this.keyboard.down("s")&&(this.dir.y=-1),this.keyboard.down("a")&&(this.dir.x=-1),this.keyboard.down("d")&&(this.dir.x=1),null!=this.gamepad&&.1<Math.abs(this.gamepad.leftStick.x)&&(this.dir.x=this.gamepad.leftStick.x),null!=this.gamepad&&.1<Math.abs(this.gamepad.leftStick.y)&&(this.dir.y=this.gamepad.leftStick.y);var e=this.dir,a=Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z);if(0<a){var i=1/a;e.x*=i,e.y*=i,e.z*=i}var n=2*(-(uo.windowWidth()/2-this.mouse.x)/uo.windowWidth()),s=2*((uo.windowHeight()/2-this.mouse.y)/uo.windowHeight()),r=0,o=Math.sqrt(n*n+s*s+r*r);if(0<o){var l=1/o;n*=l,s*=l,r*=l}var _=this.armature.transform.rot,h=gt.helpVec0,c=0*n+1*s+0*r;if(c<-.999999){var g=gt.xAxis,u=g.x,f=g.y,d=g.z;if(h.x=0*f-1*d,h.y=0*d-0*u,h.z=1*u-0*f,Math.sqrt(h.x*h.x+h.y*h.y+h.z*h.z)<1e-6){var b=gt.yAxis,p=b.x,m=b.y,I=b.z;h.x=0*m-1*I,h.y=0*I-0*p,h.z=1*p-0*m}var v=Math.sqrt(h.x*h.x+h.y*h.y+h.z*h.z);if(0<v){var M=1/v;h.x*=M,h.y*=M,h.z*=M}var C=Math.sin(1.5707963267948966);_.x=h.x*C,_.y=h.y*C,_.z=h.z*C,_.w=Math.cos(1.5707963267948966);var y=Math.sqrt(_.x*_.x+_.y*_.y+_.z*_.z+_.w*_.w);0==y?(_.x=0,_.y=0,_.z=0,_.w=0):(y=1/y,_.x*=y,_.y*=y,_.z*=y,_.w*=y)}else if(.999999<c)_.x=0,_.y=0,_.z=0,_.w=1;else{var w=n,A=s,x=r;h.x=1*x-0*A,h.y=0*w-0*x,h.z=0*A-1*w,_.x=h.x,_.y=h.y,_.z=h.z,_.w=1+c;var Z=Math.sqrt(_.x*_.x+_.y*_.y+_.z*_.z+_.w*_.w);0==Z?(_.x=0,_.y=0,_.z=0,_.w=0):(Z=1/Z,_.x*=Z,_.y*=Z,_.z*=Z,_.w*=Z)}if(null!=this.gamepad&&(.7<Math.abs(this.gamepad.rightStick.x)||.7<Math.abs(this.gamepad.rightStick.y))){var z=this.armature.transform.rot,B=this.gamepad.rightStick.x,N=this.gamepad.rightStick.y,G=gt.helpVec0,k=0*B+1*N+0;if(k<-.999999){var S=gt.xAxis,W=S.x,X=S.y,Y=S.z;if(G.x=0*X-1*Y,G.y=0*Y-0*W,G.z=1*W-0*X,Math.sqrt(G.x*G.x+G.y*G.y+G.z*G.z)<1e-6){var D=gt.yAxis,K=D.x,L=D.y,V=D.z;G.x=0*L-1*V,G.y=0*V-0*K,G.z=1*K-0*L}var H=Math.sqrt(G.x*G.x+G.y*G.y+G.z*G.z);if(0<H){var j=1/H;G.x*=j,G.y*=j,G.z*=j}var T=Math.sin(1.5707963267948966);z.x=G.x*T,z.y=G.y*T,z.z=G.z*T,z.w=Math.cos(1.5707963267948966);var R=Math.sqrt(z.x*z.x+z.y*z.y+z.z*z.z+z.w*z.w);0==R?(z.x=0,z.y=0,z.z=0,z.w=0):(R=1/R,z.x*=R,z.y*=R,z.z*=R,z.w*=R)}else if(.999999<k)z.x=0,z.y=0,z.z=0,z.w=1;else{var F=B,O=N;G.x=0-0*O,G.y=0*F-0,G.z=0*O-1*F,z.x=G.x,z.y=G.y,z.z=G.z,z.w=1+k;var P=Math.sqrt(z.x*z.x+z.y*z.y+z.z*z.z+z.w*z.w);0==P?(z.x=0,z.y=0,z.z=0,z.w=0):(P=1/P,z.x*=P,z.y*=P,z.z*=P,z.w*=P)}}this.armature.transform.buildMatrix(),this.updateAnim(),this.updateBody()},getAngle:function(t,e){var a=t.x*e.x+t.y*e.y+t.z*e.z,i=t.x*e.y*1+0*e.x*t.z+0*t.y*e.z-t.z*e.y*0-0*e.z*t.x-1*t.y*e.x;return Math.atan2(i,a)},updateAnim:function(){var t=this.armature.transform.world,e=new ho(t.self._10,t.self._11,t.self._12),a=Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z);if(0<a){var i=1/a;e.x*=i,e.y*=i,e.z*=i}var n=e,s=this.dir;if(0<Math.sqrt(s.x*s.x+s.y*s.y+s.z*s.z)){var r="",o=this.getAngle(this.dir,n)+Math.PI,l=Math.PI/4;r=o<l?"back":o<3*l?"left":o<5*l?"run":o<7*l?"right":"back",this.setState(r,1),this.stepTime+=.016666666666666666*co.scale,.3<this.stepTime&&(this.stepTime=0,yt.play(0==k.random(2)?this.soundStep0:this.soundStep1))}else if(this.mouse.down("left")||null!=this.gamepad&&0<this.gamepad.down("r2"))this.setState("fire",2);else{var _=this.getAngle(n,this.lastLook);.02<Math.abs(_)?(this.setState("turn",0<_?1:-1,0),this.turnTime=0):.1<this.turnTime?this.setState("idle",2):this.turnTime+=.016666666666666666*co.scale}var h=this.lastLook;h.x=n.x,h.y=n.y,h.z=n.z},updateBody:function(){if(this.body.ready){this.body.syncTransform(),this.body.activate();var t=this.body.getLinearVelocity();this.body.setLinearVelocity(6*this.dir.x,6*this.dir.y,t.z-1),this.body.setAngularFactor(0,0,0)}},setState:function(t,e,a){null==a&&(a=.2),t!=this.state&&(this.state=t,this.anim.play(t,null,a,e))},__class__:_});var b=function(){};(i["armory.data.Config"]=b).__name__=!0;var p=function(){};(i["armory.object.Uniforms"]=p).__name__=!0,p.register=function(){u_.externalTextureLinks=[p.textureLink],u_.externalVec3Links=[p.vec3Link],u_.externalFloatLinks=[p.floatLink]},p.textureLink=function(t,e,a){if("_smaaSearch"==a){var i=h_.active.embedded;return null!=rs["smaa_search.png"]?i.getReserved("smaa_search.png"):i.h["smaa_search.png"]}if("_smaaArea"==a){var n=h_.active.embedded;return null!=rs["smaa_area.png"]?n.getReserved("smaa_area.png"):n.h["smaa_area.png"]}if("_lensTexture"==a){var s=h_.active.embedded;return null!=rs["lenstexture.jpg"]?s.getReserved("lenstexture.jpg"):s.h["lenstexture.jpg"]}if("_lutTexture"==a){var r=h_.active.embedded;return null!=rs["luttexture.jpg"]?r.getReserved("luttexture.jpg"):r.h["luttexture.jpg"]}if("_cloudsTexture"==a){var o=h_.active.embedded;return null!=rs["cloudstexture.png"]?o.getReserved("cloudstexture.png"):o.h["cloudstexture.png"]}return null},p.vec3Link=function(t,e,a){var i=null;return"_hosekA"==a?(null==c.data&&c.recompute(h_.active.world),null!=c.data&&((i=u_.helpVec).x=c.data.A.x,i.y=c.data.A.y,i.z=c.data.A.z)):"_hosekB"==a?(null==c.data&&c.recompute(h_.active.world),null!=c.data&&((i=u_.helpVec).x=c.data.B.x,i.y=c.data.B.y,i.z=c.data.B.z)):"_hosekC"==a?(null==c.data&&c.recompute(h_.active.world),null!=c.data&&((i=u_.helpVec).x=c.data.C.x,i.y=c.data.C.y,i.z=c.data.C.z)):"_hosekD"==a?(null==c.data&&c.recompute(h_.active.world),null!=c.data&&((i=u_.helpVec).x=c.data.D.x,i.y=c.data.D.y,i.z=c.data.D.z)):"_hosekE"==a?(null==c.data&&c.recompute(h_.active.world),null!=c.data&&((i=u_.helpVec).x=c.data.E.x,i.y=c.data.E.y,i.z=c.data.E.z)):"_hosekF"==a?(null==c.data&&c.recompute(h_.active.world),null!=c.data&&((i=u_.helpVec).x=c.data.F.x,i.y=c.data.F.y,i.z=c.data.F.z)):"_hosekG"==a?(null==c.data&&c.recompute(h_.active.world),null!=c.data&&((i=u_.helpVec).x=c.data.G.x,i.y=c.data.G.y,i.z=c.data.G.z)):"_hosekH"==a?(null==c.data&&c.recompute(h_.active.world),null!=c.data&&((i=u_.helpVec).x=c.data.H.x,i.y=c.data.H.y,i.z=c.data.H.z)):"_hosekI"==a?(null==c.data&&c.recompute(h_.active.world),null!=c.data&&((i=u_.helpVec).x=c.data.I.x,i.y=c.data.I.y,i.z=c.data.I.z)):"_hosekZ"==a&&(null==c.data&&c.recompute(h_.active.world),null!=c.data&&((i=u_.helpVec).x=c.data.Z.x,i.y=c.data.Z.y,i.z=c.data.Z.z)),i},p.floatLink=function(t,e,a){return null};var h=function(){this.Z=new ui,this.I=new ui,this.H=new ui,this.G=new ui,this.F=new ui,this.E=new ui,this.D=new ui,this.C=new ui,this.B=new ui,this.A=new ui};(i["armory.renderpath.HosekWilkieRadianceData"]=h).__name__=!0,h.prototype={A:null,B:null,C:null,D:null,E:null,F:null,G:null,H:null,I:null,Z:null,evaluateSpline:function(t,e,a,i){return Math.pow(1-i,5)*t[e+0*a]+5*Math.pow(1-i,4)*Math.pow(i,1)*t[e+a]+10*Math.pow(1-i,3)*Math.pow(i,2)*t[e+2*a]+10*Math.pow(1-i,2)*Math.pow(i,3)*t[e+3*a]+5*Math.pow(1-i,1)*Math.pow(i,4)*t[e+4*a]+Math.pow(i,5)*t[e+5*a]},clamp:function(t,e,a){return t<=e?e:a<=t?a:t},clampF:function(t,e,a){return t<=e?e:a<=t?a:t},evaluate:function(t,e,a,i,n,s){var r=Math.pow(Math.max(0,1-s/(Math.PI/2)),.3333333333333333),o=this.clamp(0|i,1,10),l=0|Math.min(o+1,10),_=this.clampF(i-o,0,1),h=e,c=e+6*a*10;return this.evaluateSpline(t,h+6*a*(o-1),a,r)*(1-n)*(1-_)+this.evaluateSpline(t,c+6*a*(o-1),a,r)*n*(1-_)+this.evaluateSpline(t,h+6*a*(l-1),a,r)*(1-n)*_+this.evaluateSpline(t,c+6*a*(l-1),a,r)*n*_},hosek_wilkie:function(t,e,a,i,n,s,r,o,l,_,h,c){var g=1+a*a,u=g/Math.pow(1+h.x*h.x-2*a*h.x,1.5),f=g/Math.pow(1+h.y*h.y-2*a*h.y,1.5),d=g/Math.pow(1+h.z*h.z-2*a*h.z,1.5),b=(1+i.x*Math.exp(n.x/(t+.01)))*(s.x+r.x*Math.exp(o.x*e)+l.x*(a*a)+_.x*u+c.x*Math.sqrt(Math.max(0,t))),p=(1+i.y*Math.exp(n.y/(t+.01)))*(s.y+r.y*Math.exp(o.y*e)+l.y*(a*a)+_.y*f+c.y*Math.sqrt(Math.max(0,t))),m=(1+i.z*Math.exp(n.z/(t+.01)))*(s.z+r.z*Math.exp(o.z*e)+l.z*(a*a)+_.z*d+c.z*Math.sqrt(Math.max(0,t)));return new ui(b,p,m)},setVector:function(t,e,a){0==e?t.x=a:1==e?t.y=a:t.z=a},recompute:function(t,e,a,i){for(var n=0;n<3;){var s=n++;this.setVector(this.A,s,this.evaluate(g.datasetsRGB[s],0,9,e,a,t)),this.setVector(this.B,s,this.evaluate(g.datasetsRGB[s],1,9,e,a,t)),this.setVector(this.C,s,this.evaluate(g.datasetsRGB[s],2,9,e,a,t)),this.setVector(this.D,s,this.evaluate(g.datasetsRGB[s],3,9,e,a,t)),this.setVector(this.E,s,this.evaluate(g.datasetsRGB[s],4,9,e,a,t)),this.setVector(this.F,s,this.evaluate(g.datasetsRGB[s],5,9,e,a,t)),this.setVector(this.G,s,this.evaluate(g.datasetsRGB[s],6,9,e,a,t)),this.setVector(this.H,s,this.evaluate(g.datasetsRGB[s],8,9,e,a,t)),this.setVector(this.I,s,this.evaluate(g.datasetsRGB[s],7,9,e,a,t)),this.setVector(this.Z,s,this.evaluate(g.datasetsRGBRad[s],0,1,e,a,t))}if(0!=i){var r=this.hosek_wilkie(Math.cos(t),0,1,this.A,this.B,this.C,this.D,this.E,this.F,this.G,this.H,this.I);r.x*=this.Z.x,r.y*=this.Z.y,r.z*=this.Z.z;var o=.2126*r.x+.7152*r.y+.0722*r.z;this.Z.x/=o,this.Z.y/=o,this.Z.z/=o;var l=this.Z;this.Z=new ui(l.x*i,l.y*i,l.z*i)}},__class__:h};var c=function(){};(i["armory.renderpath.HosekWilkie"]=c).__name__=!0,c.recompute=function(t){if(null!=t&&null!=t.raw.sun_direction){null==c.data&&(c.data=new h);var e=Math.acos(t.raw.sun_direction[2]);c.data.recompute(e,t.raw.turbidity,t.raw.ground_albedo,1.15)}};var g=function(){};(i["armory.renderpath.HosekWilkieData"]=g).__name__=!0;var f=function(){};(i["armory.renderpath.Inc"]=f).__name__=!0,f.init=function(t){f.path=t},f.bindShadowMap=function(){"shadowMapCube"==f.shadowMapName()?(f.path.bindTarget("arm_empty","shadowMap"),f.path.bindTarget("shadowMapCube","shadowMapCube")):(f.path.bindTarget("arm_empty_cube","shadowMapCube"),f.path.bindTarget("shadowMap","shadowMap"))},f.shadowMapName=function(){return(0<h_.active.lights.length?h_.active.lights[f.path.currentLightIndex]:null).data.raw.shadowmap_cube?"shadowMapCube":"shadowMap"},f.getShadowMap=function(){var t=f.shadowMapName(),e=f.path.renderTargets,a=null!=rs[t]?e.getReserved(t):e.h[t];if(null==a)if((0<h_.active.lights.length?h_.active.lights[f.path.currentLightIndex]:null).data.raw.shadowmap_cube){var i=0|(0<h_.active.lights.length?h_.active.lights[f.path.currentLightIndex]:null).data.raw.shadowmap_size,n=new V;n.name=t,n.width=i,n.height=i,n.format="DEPTH16",n.is_cubemap=!0,a=f.path.createRenderTarget(n)}else{var s=(0<h_.active.lights.length?h_.active.lights[f.path.currentLightIndex]:null).data.raw.shadowmap_size,r=s,o=new V;o.name=t,o.width=s,o.height=r,o.format="DEPTH16",a=f.path.createRenderTarget(o)}return t},f.initEmpty=function(){var t=new V;t.name="arm_empty",t.width=1,t.height=1,t.format="DEPTH16",f.path.createRenderTarget(t);var e=new V;e.name="arm_empty_cube",e.width=1,e.height=1,e.format="DEPTH16",e.is_cubemap=!0,f.path.createRenderTarget(e)},f.drawShadowMap=function(t){for(var e=(0<h_.active.lights.length?h_.active.lights[f.path.currentLightIndex]:null).data.raw.shadowmap_cube?6:1,a=0,i=e;a<i;){var n=a++;1<e&&(f.path.currentFace=n),f.path.setTarget(f.getShadowMap()),f.path.clearTarget(null,1),f.path.drawMeshes("shadowmap")}f.path.currentFace=-1};var d=function(){};(i["armory.renderpath.RenderPathForward"]=d).__name__=!0,d.drawMeshes=function(){d.path.drawMeshes("mesh")},d.init=function(t){d.path=t,f.initEmpty(),d.path.createDepthBuffer("main","DEPTH24");var e=new V;e.name="lbuf",e.width=0,e.height=0,e.format="RGBA64",e.displayp=null;e.depth_buffer="main",d.path.createRenderTarget(e),d.path.loadShader("shader_datas/compositor_pass/compositor_pass")},d.commands=function(){var t=0<h_.active.lights.length;t&&f.drawShadowMap(h_.active.lights[0]),d.path.setTarget("lbuf"),d.path.clearTarget(-1,1),t&&f.bindShadowMap(),m.drawMeshes();m.finalTarget=d.path.currentTarget,d.path.setTarget(""),d.path.bindTarget("lbuf","tex"),d.path.drawShader("shader_datas/compositor_pass/compositor_pass")};var m=function(){};(i["armory.renderpath.RenderPathCreator"]=m).__name__=!0,m.get=function(){return m.path=new lo,f.init(m.path),d.init(m.path),m.path.commands=d.commands,m.path};var I=function(){};(i["armory.system.Starter"]=I).__name__=!0,I.main=function(r,o,l,_,h,c,g,u,f,d){I.tasks=1,I.tasks--,function(){if(!(0<I.tasks)){null==b.raw&&(b.raw={});var t=b.raw;null==t.window_mode&&(t.window_mode=o),null==t.window_resizable&&(t.window_resizable=l),null==t.window_minimizable&&(t.window_minimizable=_),null==t.window_maximizable&&(t.window_maximizable=h),null==t.window_w&&(t.window_w=c),null==t.window_h&&(t.window_h=g),null==t.window_msaa&&(t.window_msaa=u),null==t.window_vsync&&(t.window_vsync=f),p.register();var e=0==t.window_mode?0:1,a=0;t.window_resizable&&(a|=1),t.window_maximizable&&(a|=4),t.window_minimizable&&(a|=2);var i=t.window_w,n=t.window_h,s=new fe(null,null,null,null,null,null,null,a,e);uo.start(new le("game",i,n,s,new ee(null,t.window_vsync,null,null,null,t.window_msaa)),function(t){L.init(function(){var e=null;e=function(t){null!=h_.active&&h_.active.ready?L.removeRender2D(e):I.drawLoading(t,R.assetsLoaded,I.numAssets)},L.notifyOnRender2D(e),h_.setActive(r,function(t){lo.setActive(d())})})})}}()};var M=function(){this.speed=.1;var e=this;u.call(this),this.notifyOnInit(function(){e.rb=e.object.getTrait(Ie),e.keyboard=wt.getKeyboard()}),this.notifyOnUpdate(function(){var t=new ho(0,0,0);e.keyboard.down("r")&&(t.x+=1),e.keyboard.down("t")&&(t.x-=1),e.keyboard.down("f")&&(t.y+=1),e.keyboard.down("g")&&(t.y-=1),e.keyboard.down("v")&&(t.z+=1),e.keyboard.down("b")&&(t.z-=1);0==t.x&&0==t.y&&0==t.z||e.rotateObject(t)})};(i["armory.trait.SimpleRotateObject"]=M).__name__=!0,M.__super__=u,M.prototype=s(u.prototype,{speed:null,keyboard:null,rb:null,rotateObject:function(t){null!=this.rb?(this.rb.setAngularVelocity(0,0,0),this.rb.transform.rotate(t,this.speed),this.rb.syncTransform()):this.object.transform.rotate(t,this.speed)},__class__:M});var C=function(){};(i["armory.trait.internal.LoadingScreen"]=C).__name__=!0,C.render=function(t,e,a){t.set_color(-3200189),t.fillRect(0,uo.windowHeight()-6,uo.windowWidth()/a*e,6)};var y=function(t,e){this.a=t,this.b=e};(i["armory.trait.physics.oimo.ContactPair"]=y).__name__=!0,y.prototype={a:null,b:null,posA:null,posB:null,nor:null,impulse:null,__class__:y};var Pt=function(){if(this.hitPointWorld=new ho,this.preUpdates=null,u.call(this),null==Pt.active)this.createPhysics();else{for(var t=Pt.active.rbMap.iterator();t.hasNext();){var e=t.next();this.removeRigidBody(e)}this.world=Pt.active.world}this.rbMap=new $,(Pt.active=this)._lateUpdate=[$n(this,this.lateUpdate)],L.traitLateUpdates.splice(0,0,$n(this,this.lateUpdate))};(i["armory.trait.physics.oimo.PhysicsWorld"]=Pt).__name__=!0,Pt.__super__=u,Pt.prototype=s(u.prototype,{world:null,rbMap:null,preUpdates:null,hitPointWorld:null,createPhysics:function(){var t=h_.active.raw.gravity,e=null==t?new Jt(0,0,-9.81):new Jt(t[0],t[1],t[2]);this.world=new gn(2,e)},addRigidBody:function(t){this.world.addRigidBody(t.body),this.rbMap.h[t.id]=t},removeRigidBody:function(t){null!=this.world&&this.world.removeRigidBody(t.body),this.rbMap.remove(t.id)},getContacts:function(t){return[]},getContactPairs:function(t){return[]},lateUpdate:function(){if(null!=this.preUpdates)for(var t=0,e=this.preUpdates;t<e.length;){var a=e[t];++t,a()}this.world.step(.016666666666666666);for(var i=this.rbMap.iterator();i.hasNext();){i.next().physicsUpdate()}},pickClosest:function(t,e){return null},rayCast:function(t,e){return null},notifyOnPreUpdate:function(t){null==this.preUpdates&&(this.preUpdates=[]),this.preUpdates.push(t)},removePreUpdate:function(t){q.remove(this.preUpdates,t)},__class__:Pt});var w=function(t,e,a,i){null==i&&(i=1),null==a&&(a=0),null==e&&(e=0),null==t&&(t=0),this.x=t,this.y=e,this.z=a,this.w=i,w.numCreations++};(i["oimo.common.Quat"]=w).__name__=!0,w.prototype={x:null,y:null,z:null,w:null,__class__:w};var Jt=function(t,e,a){null==a&&(a=0),null==e&&(e=0),null==t&&(t=0),this.x=t,this.y=e,this.z=a,Jt.numCreations++};(i["oimo.common.Vec3"]=Jt).__name__=!0,Jt.prototype={x:null,y:null,z:null,init:function(t,e,a){return this.x=t,this.y=e,this.z=a,this},zero:function(){return this.x=0,this.y=0,this.z=0,this},__class__:Jt};var Ie=function(t,e,a,i,n,s,r,o,l,_,h,c,g){null==c&&(c=!1),null==h&&(h=1),null==o&&(o=!1),null==r&&(r=.1),null==s&&(s=.04),null==n&&(n=0),null==i&&(i=0),null==a&&(a=.5),null==e&&(e=0),null==t&&(t=1),this.onReady=null,this.id=0,this.ready=!1,this.body=null,this.transform=null,u.call(this),this.mass=t,this.shape=e,this.friction=a,this.restitution=i,this.collisionMargin=n,this.linearDamping=s,this.angularDamping=r,this.animated=o,this.notifyOnAdd($n(this,this.init))};(i["armory.trait.physics.oimo.RigidBody"]=Ie).__name__=!0,Ie.__super__=u,Ie.prototype=s(u.prototype,{shape:null,physics:null,transform:null,mass:null,friction:null,restitution:null,collisionMargin:null,linearDamping:null,angularDamping:null,animated:null,body:null,ready:null,id:null,onReady:null,withMargin:function(t){return t-t*this.collisionMargin},notifyOnReady:function(t){this.onReady=t,this.ready&&this.onReady()},init:function(){if(!this.ready){this.ready=!0,this.transform=this.object.transform,this.physics=Pt.active;var t=new Qn;if(t.friction=this.friction,t.restitution=this.restitution,t.density=0<this.mass?this.mass:1,0==this.shape){var e=this.transform.dim.x,a=this.transform.dim.y,i=this.transform.dim.z;Ie.v1.init((e-e*this.collisionMargin)/2,(a-a*this.collisionMargin)/2,(i-i*this.collisionMargin)/2),t.geometry=new Gi(Ie.v1)}else if(1==this.shape){var n=this.transform.dim.x;t.geometry=new Di((n-n*this.collisionMargin)/2)}else if(2==this.shape||3==this.shape){for(var s=f_.__cast(this.object,g_).data.geom.positions,r=this.transform.scale.x*(1-this.collisionMargin),o=this.transform.scale.y*(1-this.collisionMargin),l=this.transform.scale.z*(1-this.collisionMargin),_=[],h=0,c=s.length/3|0;h<c;){var g=h++;_.push(new Jt(s[3*g]*r,s[3*g+1]*o,s[3*g+2]*l))}t.geometry=new Wi(_)}else if(4==this.shape){var u=this.transform.dim.x,f=this.transform.dim.y;t.geometry=new Si((u-u*this.collisionMargin)/2,(f-f*this.collisionMargin)/2)}else if(5==this.shape){var d=this.transform.dim.x,b=this.transform.dim.y;t.geometry=new Xi((d-d*this.collisionMargin)/2,(b-b*this.collisionMargin)/2)}else if(6==this.shape){var p=this.transform.dim.x,m=this.transform.dim.y;t.geometry=new ki((p-p*this.collisionMargin)/2,(m-m*this.collisionMargin)/2)}var I=new Jn;I.type=0<this.mass?En.DYNAMIC:En.STATIC,I.position.init(this.transform.world.self._30,this.transform.world.self._31,this.transform.world.self._32),this.body=new Pn(I);var v=Ie.q1;v.x=this.transform.rot.x,v.y=this.transform.rot.y,v.z=this.transform.rot.z,v.w=this.transform.rot.w;var M,C,y,w,A,x,Z,z,B,N,G,k,S,W,X,Y,D,K,L,V,H,j,T=this.body,R=Ie.q1,F=(M=R.x,C=R.y,y=R.z,w=R.w,2*M),O=2*C,P=2*y,J=M*F,E=C*O,U=y*P,Q=M*O,q=C*P,$=M*P,tt=w*F,et=w*O,at=w*P;T._transform._rotation00=1-E-U,T._transform._rotation01=Q-at,T._transform._rotation02=$+et,T._transform._rotation10=Q+at,T._transform._rotation11=1-J-U,T._transform._rotation12=q-tt,T._transform._rotation20=$-et,T._transform._rotation21=q+tt,T._transform._rotation22=1-J-E,A=T._transform._rotation00*T._invLocalInertia00+T._transform._rotation01*T._invLocalInertia10+T._transform._rotation02*T._invLocalInertia20,x=T._transform._rotation00*T._invLocalInertia01+T._transform._rotation01*T._invLocalInertia11+T._transform._rotation02*T._invLocalInertia21,Z=T._transform._rotation00*T._invLocalInertia02+T._transform._rotation01*T._invLocalInertia12+T._transform._rotation02*T._invLocalInertia22,z=T._transform._rotation10*T._invLocalInertia00+T._transform._rotation11*T._invLocalInertia10+T._transform._rotation12*T._invLocalInertia20,B=T._transform._rotation10*T._invLocalInertia01+T._transform._rotation11*T._invLocalInertia11+T._transform._rotation12*T._invLocalInertia21,N=T._transform._rotation10*T._invLocalInertia02+T._transform._rotation11*T._invLocalInertia12+T._transform._rotation12*T._invLocalInertia22,G=T._transform._rotation20*T._invLocalInertia00+T._transform._rotation21*T._invLocalInertia10+T._transform._rotation22*T._invLocalInertia20,k=T._transform._rotation20*T._invLocalInertia01+T._transform._rotation21*T._invLocalInertia11+T._transform._rotation22*T._invLocalInertia21,S=T._transform._rotation20*T._invLocalInertia02+T._transform._rotation21*T._invLocalInertia12+T._transform._rotation22*T._invLocalInertia22,T._invInertia00=A,T._invInertia01=x,T._invInertia02=Z,T._invInertia10=z,T._invInertia11=B,T._invInertia12=N,T._invInertia20=G,T._invInertia21=k,T._invInertia22=S,W=T._invInertia00*T._transform._rotation00+T._invInertia01*T._transform._rotation01+T._invInertia02*T._transform._rotation02,X=T._invInertia00*T._transform._rotation10+T._invInertia01*T._transform._rotation11+T._invInertia02*T._transform._rotation12,Y=T._invInertia00*T._transform._rotation20+T._invInertia01*T._transform._rotation21+T._invInertia02*T._transform._rotation22,D=T._invInertia10*T._transform._rotation00+T._invInertia11*T._transform._rotation01+T._invInertia12*T._transform._rotation02,K=T._invInertia10*T._transform._rotation10+T._invInertia11*T._transform._rotation11+T._invInertia12*T._transform._rotation12,L=T._invInertia10*T._transform._rotation20+T._invInertia11*T._transform._rotation21+T._invInertia12*T._transform._rotation22,V=T._invInertia20*T._transform._rotation00+T._invInertia21*T._transform._rotation01+T._invInertia22*T._transform._rotation02,H=T._invInertia20*T._transform._rotation10+T._invInertia21*T._transform._rotation11+T._invInertia22*T._transform._rotation12,j=T._invInertia20*T._transform._rotation20+T._invInertia21*T._transform._rotation21+T._invInertia22*T._transform._rotation22,T._invInertia00=W,T._invInertia01=X,T._invInertia02=Y,T._invInertia10=D,T._invInertia11=K,T._invInertia12=L,T._invInertia20=V,T._invInertia21=H,T._invInertia22=j,T._invInertia00*=T._rotFactor.x,T._invInertia01*=T._rotFactor.x,T._invInertia02*=T._rotFactor.x,T._invInertia10*=T._rotFactor.y,T._invInertia11*=T._rotFactor.y,T._invInertia12*=T._rotFactor.y,T._invInertia20*=T._rotFactor.z,T._invInertia21*=T._rotFactor.z,T._invInertia22*=T._rotFactor.z;var it=T._ptransform,nt=T._transform;it._positionX=nt._positionX,it._positionY=nt._positionY,it._positionZ=nt._positionZ,it._rotation00=nt._rotation00,it._rotation01=nt._rotation01,it._rotation02=nt._rotation02,it._rotation10=nt._rotation10,it._rotation11=nt._rotation11,it._rotation12=nt._rotation12,it._rotation20=nt._rotation20,it._rotation21=nt._rotation21,it._rotation22=nt._rotation22;for(var st=T._shapeList;null!=st;){var rt,ot,lt,_t,ht,ct,gt,ut,ft,dt,bt,pt,mt=st._next,It=st._ptransform,vt=st._localTransform,Mt=T._ptransform;rt=Mt._rotation00*vt._rotation00+Mt._rotation01*vt._rotation10+Mt._rotation02*vt._rotation20,ot=Mt._rotation00*vt._rotation01+Mt._rotation01*vt._rotation11+Mt._rotation02*vt._rotation21,lt=Mt._rotation00*vt._rotation02+Mt._rotation01*vt._rotation12+Mt._rotation02*vt._rotation22,_t=Mt._rotation10*vt._rotation00+Mt._rotation11*vt._rotation10+Mt._rotation12*vt._rotation20,ht=Mt._rotation10*vt._rotation01+Mt._rotation11*vt._rotation11+Mt._rotation12*vt._rotation21,ct=Mt._rotation10*vt._rotation02+Mt._rotation11*vt._rotation12+Mt._rotation12*vt._rotation22,gt=Mt._rotation20*vt._rotation00+Mt._rotation21*vt._rotation10+Mt._rotation22*vt._rotation20,ut=Mt._rotation20*vt._rotation01+Mt._rotation21*vt._rotation11+Mt._rotation22*vt._rotation21,ft=Mt._rotation20*vt._rotation02+Mt._rotation21*vt._rotation12+Mt._rotation22*vt._rotation22,It._rotation00=rt,It._rotation01=ot,It._rotation02=lt,It._rotation10=_t,It._rotation11=ht,It._rotation12=ct,It._rotation20=gt,It._rotation21=ut,It._rotation22=ft,dt=Mt._rotation00*vt._positionX+Mt._rotation01*vt._positionY+Mt._rotation02*vt._positionZ,bt=Mt._rotation10*vt._positionX+Mt._rotation11*vt._positionY+Mt._rotation12*vt._positionZ,pt=Mt._rotation20*vt._positionX+Mt._rotation21*vt._positionY+Mt._rotation22*vt._positionZ,It._positionX=dt,It._positionY=bt,It._positionZ=pt,It._positionX+=Mt._positionX,It._positionY+=Mt._positionY,It._positionZ+=Mt._positionZ;var Ct,yt,wt,At,xt,Zt,zt,Bt,Nt,Gt,kt,St,Wt,Xt,Yt,Dt,Kt,Lt,Vt=st._transform,Ht=st._localTransform,jt=T._transform;if(Ct=jt._rotation00*Ht._rotation00+jt._rotation01*Ht._rotation10+jt._rotation02*Ht._rotation20,yt=jt._rotation00*Ht._rotation01+jt._rotation01*Ht._rotation11+jt._rotation02*Ht._rotation21,wt=jt._rotation00*Ht._rotation02+jt._rotation01*Ht._rotation12+jt._rotation02*Ht._rotation22,At=jt._rotation10*Ht._rotation00+jt._rotation11*Ht._rotation10+jt._rotation12*Ht._rotation20,xt=jt._rotation10*Ht._rotation01+jt._rotation11*Ht._rotation11+jt._rotation12*Ht._rotation21,Zt=jt._rotation10*Ht._rotation02+jt._rotation11*Ht._rotation12+jt._rotation12*Ht._rotation22,zt=jt._rotation20*Ht._rotation00+jt._rotation21*Ht._rotation10+jt._rotation22*Ht._rotation20,Bt=jt._rotation20*Ht._rotation01+jt._rotation21*Ht._rotation11+jt._rotation22*Ht._rotation21,Nt=jt._rotation20*Ht._rotation02+jt._rotation21*Ht._rotation12+jt._rotation22*Ht._rotation22,Vt._rotation00=Ct,Vt._rotation01=yt,Vt._rotation02=wt,Vt._rotation10=At,Vt._rotation11=xt,Vt._rotation12=Zt,Vt._rotation20=zt,Vt._rotation21=Bt,Vt._rotation22=Nt,Gt=jt._rotation00*Ht._positionX+jt._rotation01*Ht._positionY+jt._rotation02*Ht._positionZ,kt=jt._rotation10*Ht._positionX+jt._rotation11*Ht._positionY+jt._rotation12*Ht._positionZ,St=jt._rotation20*Ht._positionX+jt._rotation21*Ht._positionY+jt._rotation22*Ht._positionZ,Vt._positionX=Gt,Vt._positionY=kt,Vt._positionZ=St,Vt._positionX+=jt._positionX,Vt._positionY+=jt._positionY,Vt._positionZ+=jt._positionZ,st._geom._computeAabb(st._aabb,st._ptransform),Wt=st._aabb._minX,Xt=st._aabb._minY,Yt=st._aabb._minZ,Dt=st._aabb._maxX,Kt=st._aabb._maxY,Lt=st._aabb._maxZ,st._geom._computeAabb(st._aabb,st._transform),st._aabb._minX=Wt<st._aabb._minX?Wt:st._aabb._minX,st._aabb._minY=Xt<st._aabb._minY?Xt:st._aabb._minY,st._aabb._minZ=Yt<st._aabb._minZ?Yt:st._aabb._minZ,st._aabb._maxX=Dt>st._aabb._maxX?Dt:st._aabb._maxX,st._aabb._maxY=Kt>st._aabb._maxY?Kt:st._aabb._maxY,st._aabb._maxZ=Lt>st._aabb._maxZ?Lt:st._aabb._maxZ,null!=st._proxy){var Tt,Rt,Ft;Tt=st._transform._positionX-st._ptransform._positionX,Rt=st._transform._positionY-st._ptransform._positionY,Ft=st._transform._positionZ-st._ptransform._positionZ;var Ot=st.displacement;Ot.x=Tt,Ot.y=Rt,Ot.z=Ft,st._rigidBody._world._broadPhase.moveProxy(st._proxy,st._aabb,st.displacement)}st=mt}T._sleeping=!1,T._sleepTime=0,this.body.addShape(new Un(t)),this.id=Ie.nextId++,this.physics.addRigidBody(this),this.notifyOnRemove($n(this,this.removeFromWorld)),null!=this.onReady&&this.onReady()}},physicsUpdate:function(){if(this.ready)if(null!=this.object.animation||this.animated)this.syncTransform();else{var t,e,a,i=this.body;Jt.numCreations++,t=i._transform._positionX,e=i._transform._positionY,a=i._transform._positionZ;var n,s,r,o,l,_,h,c,g=this.body;w.numCreations++;var u,f=g._transform._rotation00,d=g._transform._rotation11,b=g._transform._rotation22,p=f+d+b;0<p?(c=.5*(u=Math.sqrt(p+1)),u=.5/u,l=(g._transform._rotation21-g._transform._rotation12)*u,_=(g._transform._rotation02-g._transform._rotation20)*u,h=(g._transform._rotation10-g._transform._rotation01)*u):d<f?b<f?(l=.5*(u=Math.sqrt(f-d-b+1)),u=.5/u,_=(g._transform._rotation01+g._transform._rotation10)*u,h=(g._transform._rotation02+g._transform._rotation20)*u,c=(g._transform._rotation21-g._transform._rotation12)*u):(h=.5*(u=Math.sqrt(b-f-d+1)),u=.5/u,l=(g._transform._rotation02+g._transform._rotation20)*u,_=(g._transform._rotation12+g._transform._rotation21)*u,c=(g._transform._rotation10-g._transform._rotation01)*u):b<d?(_=.5*(u=Math.sqrt(d-b-f+1)),u=.5/u,l=(g._transform._rotation01+g._transform._rotation10)*u,h=(g._transform._rotation12+g._transform._rotation21)*u,c=(g._transform._rotation02-g._transform._rotation20)*u):(h=.5*(u=Math.sqrt(b-f-d+1)),u=.5/u,l=(g._transform._rotation02+g._transform._rotation20)*u,_=(g._transform._rotation12+g._transform._rotation21)*u,c=(g._transform._rotation10-g._transform._rotation01)*u),n=l,s=_,r=h,o=c;var m=this.transform.loc;m.x=t,m.y=e,m.z=a,m.w=1;var I=this.transform.rot;if(I.x=n,I.y=s,I.z=r,I.w=o,null!=this.object.parent){var v=this.object.parent.transform;this.transform.loc.x-=v.world.self._30,this.transform.loc.y-=v.world.self._31,this.transform.loc.z-=v.world.self._32}this.transform.buildMatrix()}},removeFromWorld:function(){null!=this.physics&&this.physics.removeRigidBody(this)},activate:function(){var t=this.body;t._sleeping=!1,t._sleepTime=0},disableGravity:function(){},setActivationState:function(t){},applyImpulse:function(t,e){this.activate(),null==e&&(e=this.transform.loc),Ie.v1.init(e.x,e.y,e.z),Ie.v2.init(t.x,t.y,t.z),this.body.applyImpulse(Ie.v1,Ie.v2)},setLinearFactor:function(t,e,a){},setAngularFactor:function(t,e,a){Ie.v1.init(t,e,a);var i,n,s,r,o,l,_,h,c,g,u,f,d,b,p,m,I,v,M=this.body,C=Ie.v1,y=M._rotFactor;y.x=C.x,y.y=C.y,y.z=C.z,i=M._transform._rotation00*M._invLocalInertia00+M._transform._rotation01*M._invLocalInertia10+M._transform._rotation02*M._invLocalInertia20,n=M._transform._rotation00*M._invLocalInertia01+M._transform._rotation01*M._invLocalInertia11+M._transform._rotation02*M._invLocalInertia21,s=M._transform._rotation00*M._invLocalInertia02+M._transform._rotation01*M._invLocalInertia12+M._transform._rotation02*M._invLocalInertia22,r=M._transform._rotation10*M._invLocalInertia00+M._transform._rotation11*M._invLocalInertia10+M._transform._rotation12*M._invLocalInertia20,o=M._transform._rotation10*M._invLocalInertia01+M._transform._rotation11*M._invLocalInertia11+M._transform._rotation12*M._invLocalInertia21,l=M._transform._rotation10*M._invLocalInertia02+M._transform._rotation11*M._invLocalInertia12+M._transform._rotation12*M._invLocalInertia22,_=M._transform._rotation20*M._invLocalInertia00+M._transform._rotation21*M._invLocalInertia10+M._transform._rotation22*M._invLocalInertia20,h=M._transform._rotation20*M._invLocalInertia01+M._transform._rotation21*M._invLocalInertia11+M._transform._rotation22*M._invLocalInertia21,c=M._transform._rotation20*M._invLocalInertia02+M._transform._rotation21*M._invLocalInertia12+M._transform._rotation22*M._invLocalInertia22,M._invInertia00=i,M._invInertia01=n,M._invInertia02=s,M._invInertia10=r,M._invInertia11=o,M._invInertia12=l,M._invInertia20=_,M._invInertia21=h,M._invInertia22=c,g=M._invInertia00*M._transform._rotation00+M._invInertia01*M._transform._rotation01+M._invInertia02*M._transform._rotation02,u=M._invInertia00*M._transform._rotation10+M._invInertia01*M._transform._rotation11+M._invInertia02*M._transform._rotation12,f=M._invInertia00*M._transform._rotation20+M._invInertia01*M._transform._rotation21+M._invInertia02*M._transform._rotation22,d=M._invInertia10*M._transform._rotation00+M._invInertia11*M._transform._rotation01+M._invInertia12*M._transform._rotation02,b=M._invInertia10*M._transform._rotation10+M._invInertia11*M._transform._rotation11+M._invInertia12*M._transform._rotation12,p=M._invInertia10*M._transform._rotation20+M._invInertia11*M._transform._rotation21+M._invInertia12*M._transform._rotation22,m=M._invInertia20*M._transform._rotation00+M._invInertia21*M._transform._rotation01+M._invInertia22*M._transform._rotation02,I=M._invInertia20*M._transform._rotation10+M._invInertia21*M._transform._rotation11+M._invInertia22*M._transform._rotation12,v=M._invInertia20*M._transform._rotation20+M._invInertia21*M._transform._rotation21+M._invInertia22*M._transform._rotation22,M._invInertia00=g,M._invInertia01=u,M._invInertia02=f,M._invInertia10=d,M._invInertia11=b,M._invInertia12=p,M._invInertia20=m,M._invInertia21=I,M._invInertia22=v,M._invInertia00*=M._rotFactor.x,M._invInertia01*=M._rotFactor.x,M._invInertia02*=M._rotFactor.x,M._invInertia10*=M._rotFactor.y,M._invInertia11*=M._rotFactor.y,M._invInertia12*=M._rotFactor.y,M._invInertia20*=M._rotFactor.z,M._invInertia21*=M._rotFactor.z,M._invInertia22*=M._rotFactor.z,M._sleeping=!1,M._sleepTime=0},getLinearVelocity:function(){var t,e,a,i=this.body;return Jt.numCreations++,t=i._velX,e=i._velY,a=i._velZ,new ho(t,e,a)},setLinearVelocity:function(t,e,a){Ie.v1.init(t,e,a);var i=this.body;if(1==i._type)i._velX=0,i._velY=0,i._velZ=0;else{var n=Ie.v1;i._velX=n.x,i._velY=n.y,i._velZ=n.z}i._sleeping=!1,i._sleepTime=0},setAngularVelocity:function(t,e,a){Ie.v1.init(t,e,a);var i=this.body;if(1==i._type)i._angVelX=0,i._angVelY=0,i._angVelZ=0;else{var n=Ie.v1;i._angVelX=n.x,i._angVelY=n.y,i._angVelZ=n.z}i._sleeping=!1,i._sleepTime=0},setFriction:function(t){},syncTransform:function(){Ie.v1.init(this.transform.world.self._30,this.transform.world.self._31,this.transform.world.self._32);var t=this.body,e=Ie.v1;t._transform._positionX=e.x,t._transform._positionY=e.y,t._transform._positionZ=e.z;var a=t._ptransform,i=t._transform;a._positionX=i._positionX,a._positionY=i._positionY,a._positionZ=i._positionZ,a._rotation00=i._rotation00,a._rotation01=i._rotation01,a._rotation02=i._rotation02,a._rotation10=i._rotation10,a._rotation11=i._rotation11,a._rotation12=i._rotation12,a._rotation20=i._rotation20,a._rotation21=i._rotation21,a._rotation22=i._rotation22;for(var n=t._shapeList;null!=n;){var s,r,o,l,_,h,c,g,u,f,d,b,p=n._next,m=n._ptransform,I=n._localTransform,v=t._ptransform;s=v._rotation00*I._rotation00+v._rotation01*I._rotation10+v._rotation02*I._rotation20,r=v._rotation00*I._rotation01+v._rotation01*I._rotation11+v._rotation02*I._rotation21,o=v._rotation00*I._rotation02+v._rotation01*I._rotation12+v._rotation02*I._rotation22,l=v._rotation10*I._rotation00+v._rotation11*I._rotation10+v._rotation12*I._rotation20,_=v._rotation10*I._rotation01+v._rotation11*I._rotation11+v._rotation12*I._rotation21,h=v._rotation10*I._rotation02+v._rotation11*I._rotation12+v._rotation12*I._rotation22,c=v._rotation20*I._rotation00+v._rotation21*I._rotation10+v._rotation22*I._rotation20,g=v._rotation20*I._rotation01+v._rotation21*I._rotation11+v._rotation22*I._rotation21,u=v._rotation20*I._rotation02+v._rotation21*I._rotation12+v._rotation22*I._rotation22,m._rotation00=s,m._rotation01=r,m._rotation02=o,m._rotation10=l,m._rotation11=_,m._rotation12=h,m._rotation20=c,m._rotation21=g,m._rotation22=u,f=v._rotation00*I._positionX+v._rotation01*I._positionY+v._rotation02*I._positionZ,d=v._rotation10*I._positionX+v._rotation11*I._positionY+v._rotation12*I._positionZ,b=v._rotation20*I._positionX+v._rotation21*I._positionY+v._rotation22*I._positionZ,m._positionX=f,m._positionY=d,m._positionZ=b,m._positionX+=v._positionX,m._positionY+=v._positionY,m._positionZ+=v._positionZ;var M,C,y,w,A,x,Z,z,B,N,G,k,S,W,X,Y,D,K,L=n._transform,V=n._localTransform,H=t._transform;if(M=H._rotation00*V._rotation00+H._rotation01*V._rotation10+H._rotation02*V._rotation20,C=H._rotation00*V._rotation01+H._rotation01*V._rotation11+H._rotation02*V._rotation21,y=H._rotation00*V._rotation02+H._rotation01*V._rotation12+H._rotation02*V._rotation22,w=H._rotation10*V._rotation00+H._rotation11*V._rotation10+H._rotation12*V._rotation20,A=H._rotation10*V._rotation01+H._rotation11*V._rotation11+H._rotation12*V._rotation21,x=H._rotation10*V._rotation02+H._rotation11*V._rotation12+H._rotation12*V._rotation22,Z=H._rotation20*V._rotation00+H._rotation21*V._rotation10+H._rotation22*V._rotation20,z=H._rotation20*V._rotation01+H._rotation21*V._rotation11+H._rotation22*V._rotation21,B=H._rotation20*V._rotation02+H._rotation21*V._rotation12+H._rotation22*V._rotation22,L._rotation00=M,L._rotation01=C,L._rotation02=y,L._rotation10=w,L._rotation11=A,L._rotation12=x,L._rotation20=Z,L._rotation21=z,L._rotation22=B,N=H._rotation00*V._positionX+H._rotation01*V._positionY+H._rotation02*V._positionZ,G=H._rotation10*V._positionX+H._rotation11*V._positionY+H._rotation12*V._positionZ,k=H._rotation20*V._positionX+H._rotation21*V._positionY+H._rotation22*V._positionZ,L._positionX=N,L._positionY=G,L._positionZ=k,L._positionX+=H._positionX,L._positionY+=H._positionY,L._positionZ+=H._positionZ,n._geom._computeAabb(n._aabb,n._ptransform),S=n._aabb._minX,W=n._aabb._minY,X=n._aabb._minZ,Y=n._aabb._maxX,D=n._aabb._maxY,K=n._aabb._maxZ,n._geom._computeAabb(n._aabb,n._transform),n._aabb._minX=S<n._aabb._minX?S:n._aabb._minX,n._aabb._minY=W<n._aabb._minY?W:n._aabb._minY,n._aabb._minZ=X<n._aabb._minZ?X:n._aabb._minZ,n._aabb._maxX=Y>n._aabb._maxX?Y:n._aabb._maxX,n._aabb._maxY=D>n._aabb._maxY?D:n._aabb._maxY,n._aabb._maxZ=K>n._aabb._maxZ?K:n._aabb._maxZ,null!=n._proxy){var j,T,R;j=n._transform._positionX-n._ptransform._positionX,T=n._transform._positionY-n._ptransform._positionY,R=n._transform._positionZ-n._ptransform._positionZ;var F=n.displacement;F.x=j,F.y=T,F.z=R,n._rigidBody._world._broadPhase.moveProxy(n._proxy,n._aabb,n.displacement)}n=p}t._sleeping=!1,t._sleepTime=0;var O=Ie.q1;O.x=this.transform.rot.x,O.y=this.transform.rot.y,O.z=this.transform.rot.z,O.w=this.transform.rot.w;var P,J,E,U,Q,q,$,tt,et,at,it,nt,st,rt,ot,lt,_t,ht,ct,gt,ut,ft,dt=this.body,bt=Ie.q1,pt=(P=bt.x,J=bt.y,E=bt.z,U=bt.w,2*P),mt=2*J,It=2*E,vt=P*pt,Mt=J*mt,Ct=E*It,yt=P*mt,wt=J*It,At=P*It,xt=U*pt,Zt=U*mt,zt=U*It;dt._transform._rotation00=1-Mt-Ct,dt._transform._rotation01=yt-zt,dt._transform._rotation02=At+Zt,dt._transform._rotation10=yt+zt,dt._transform._rotation11=1-vt-Ct,dt._transform._rotation12=wt-xt,dt._transform._rotation20=At-Zt,dt._transform._rotation21=wt+xt,dt._transform._rotation22=1-vt-Mt,Q=dt._transform._rotation00*dt._invLocalInertia00+dt._transform._rotation01*dt._invLocalInertia10+dt._transform._rotation02*dt._invLocalInertia20,q=dt._transform._rotation00*dt._invLocalInertia01+dt._transform._rotation01*dt._invLocalInertia11+dt._transform._rotation02*dt._invLocalInertia21,$=dt._transform._rotation00*dt._invLocalInertia02+dt._transform._rotation01*dt._invLocalInertia12+dt._transform._rotation02*dt._invLocalInertia22,tt=dt._transform._rotation10*dt._invLocalInertia00+dt._transform._rotation11*dt._invLocalInertia10+dt._transform._rotation12*dt._invLocalInertia20,et=dt._transform._rotation10*dt._invLocalInertia01+dt._transform._rotation11*dt._invLocalInertia11+dt._transform._rotation12*dt._invLocalInertia21,at=dt._transform._rotation10*dt._invLocalInertia02+dt._transform._rotation11*dt._invLocalInertia12+dt._transform._rotation12*dt._invLocalInertia22,it=dt._transform._rotation20*dt._invLocalInertia00+dt._transform._rotation21*dt._invLocalInertia10+dt._transform._rotation22*dt._invLocalInertia20,nt=dt._transform._rotation20*dt._invLocalInertia01+dt._transform._rotation21*dt._invLocalInertia11+dt._transform._rotation22*dt._invLocalInertia21,st=dt._transform._rotation20*dt._invLocalInertia02+dt._transform._rotation21*dt._invLocalInertia12+dt._transform._rotation22*dt._invLocalInertia22,dt._invInertia00=Q,dt._invInertia01=q,dt._invInertia02=$,dt._invInertia10=tt,dt._invInertia11=et,dt._invInertia12=at,dt._invInertia20=it,dt._invInertia21=nt,dt._invInertia22=st,rt=dt._invInertia00*dt._transform._rotation00+dt._invInertia01*dt._transform._rotation01+dt._invInertia02*dt._transform._rotation02,ot=dt._invInertia00*dt._transform._rotation10+dt._invInertia01*dt._transform._rotation11+dt._invInertia02*dt._transform._rotation12,lt=dt._invInertia00*dt._transform._rotation20+dt._invInertia01*dt._transform._rotation21+dt._invInertia02*dt._transform._rotation22,_t=dt._invInertia10*dt._transform._rotation00+dt._invInertia11*dt._transform._rotation01+dt._invInertia12*dt._transform._rotation02,ht=dt._invInertia10*dt._transform._rotation10+dt._invInertia11*dt._transform._rotation11+dt._invInertia12*dt._transform._rotation12,ct=dt._invInertia10*dt._transform._rotation20+dt._invInertia11*dt._transform._rotation21+dt._invInertia12*dt._transform._rotation22,gt=dt._invInertia20*dt._transform._rotation00+dt._invInertia21*dt._transform._rotation01+dt._invInertia22*dt._transform._rotation02,ut=dt._invInertia20*dt._transform._rotation10+dt._invInertia21*dt._transform._rotation11+dt._invInertia22*dt._transform._rotation12,ft=dt._invInertia20*dt._transform._rotation20+dt._invInertia21*dt._transform._rotation21+dt._invInertia22*dt._transform._rotation22,dt._invInertia00=rt,dt._invInertia01=ot,dt._invInertia02=lt,dt._invInertia10=_t,dt._invInertia11=ht,dt._invInertia12=ct,dt._invInertia20=gt,dt._invInertia21=ut,dt._invInertia22=ft,dt._invInertia00*=dt._rotFactor.x,dt._invInertia01*=dt._rotFactor.x,dt._invInertia02*=dt._rotFactor.x,dt._invInertia10*=dt._rotFactor.y,dt._invInertia11*=dt._rotFactor.y,dt._invInertia12*=dt._rotFactor.y,dt._invInertia20*=dt._rotFactor.z,dt._invInertia21*=dt._rotFactor.z,dt._invInertia22*=dt._rotFactor.z;var Bt=dt._ptransform,Nt=dt._transform;Bt._positionX=Nt._positionX,Bt._positionY=Nt._positionY,Bt._positionZ=Nt._positionZ,Bt._rotation00=Nt._rotation00,Bt._rotation01=Nt._rotation01,Bt._rotation02=Nt._rotation02,Bt._rotation10=Nt._rotation10,Bt._rotation11=Nt._rotation11,Bt._rotation12=Nt._rotation12,Bt._rotation20=Nt._rotation20,Bt._rotation21=Nt._rotation21,Bt._rotation22=Nt._rotation22;for(var Gt=dt._shapeList;null!=Gt;){var kt,St,Wt,Xt,Yt,Dt,Kt,Lt,Vt,Ht,jt,Tt,Rt=Gt._next,Ft=Gt._ptransform,Ot=Gt._localTransform,Pt=dt._ptransform;kt=Pt._rotation00*Ot._rotation00+Pt._rotation01*Ot._rotation10+Pt._rotation02*Ot._rotation20,St=Pt._rotation00*Ot._rotation01+Pt._rotation01*Ot._rotation11+Pt._rotation02*Ot._rotation21,Wt=Pt._rotation00*Ot._rotation02+Pt._rotation01*Ot._rotation12+Pt._rotation02*Ot._rotation22,Xt=Pt._rotation10*Ot._rotation00+Pt._rotation11*Ot._rotation10+Pt._rotation12*Ot._rotation20,Yt=Pt._rotation10*Ot._rotation01+Pt._rotation11*Ot._rotation11+Pt._rotation12*Ot._rotation21,Dt=Pt._rotation10*Ot._rotation02+Pt._rotation11*Ot._rotation12+Pt._rotation12*Ot._rotation22,Kt=Pt._rotation20*Ot._rotation00+Pt._rotation21*Ot._rotation10+Pt._rotation22*Ot._rotation20,Lt=Pt._rotation20*Ot._rotation01+Pt._rotation21*Ot._rotation11+Pt._rotation22*Ot._rotation21,Vt=Pt._rotation20*Ot._rotation02+Pt._rotation21*Ot._rotation12+Pt._rotation22*Ot._rotation22,Ft._rotation00=kt,Ft._rotation01=St,Ft._rotation02=Wt,Ft._rotation10=Xt,Ft._rotation11=Yt,Ft._rotation12=Dt,Ft._rotation20=Kt,Ft._rotation21=Lt,Ft._rotation22=Vt,Ht=Pt._rotation00*Ot._positionX+Pt._rotation01*Ot._positionY+Pt._rotation02*Ot._positionZ,jt=Pt._rotation10*Ot._positionX+Pt._rotation11*Ot._positionY+Pt._rotation12*Ot._positionZ,Tt=Pt._rotation20*Ot._positionX+Pt._rotation21*Ot._positionY+Pt._rotation22*Ot._positionZ,Ft._positionX=Ht,Ft._positionY=jt,Ft._positionZ=Tt,Ft._positionX+=Pt._positionX,Ft._positionY+=Pt._positionY,Ft._positionZ+=Pt._positionZ;var Jt,Et,Ut,Qt,qt,$t,te,ee,ae,ie,ne,se,re,oe,le,_e,he,ce,ge=Gt._transform,ue=Gt._localTransform,fe=dt._transform;if(Jt=fe._rotation00*ue._rotation00+fe._rotation01*ue._rotation10+fe._rotation02*ue._rotation20,Et=fe._rotation00*ue._rotation01+fe._rotation01*ue._rotation11+fe._rotation02*ue._rotation21,Ut=fe._rotation00*ue._rotation02+fe._rotation01*ue._rotation12+fe._rotation02*ue._rotation22,Qt=fe._rotation10*ue._rotation00+fe._rotation11*ue._rotation10+fe._rotation12*ue._rotation20,qt=fe._rotation10*ue._rotation01+fe._rotation11*ue._rotation11+fe._rotation12*ue._rotation21,$t=fe._rotation10*ue._rotation02+fe._rotation11*ue._rotation12+fe._rotation12*ue._rotation22,te=fe._rotation20*ue._rotation00+fe._rotation21*ue._rotation10+fe._rotation22*ue._rotation20,ee=fe._rotation20*ue._rotation01+fe._rotation21*ue._rotation11+fe._rotation22*ue._rotation21,ae=fe._rotation20*ue._rotation02+fe._rotation21*ue._rotation12+fe._rotation22*ue._rotation22,ge._rotation00=Jt,ge._rotation01=Et,ge._rotation02=Ut,ge._rotation10=Qt,ge._rotation11=qt,ge._rotation12=$t,ge._rotation20=te,ge._rotation21=ee,ge._rotation22=ae,ie=fe._rotation00*ue._positionX+fe._rotation01*ue._positionY+fe._rotation02*ue._positionZ,ne=fe._rotation10*ue._positionX+fe._rotation11*ue._positionY+fe._rotation12*ue._positionZ,se=fe._rotation20*ue._positionX+fe._rotation21*ue._positionY+fe._rotation22*ue._positionZ,ge._positionX=ie,ge._positionY=ne,ge._positionZ=se,ge._positionX+=fe._positionX,ge._positionY+=fe._positionY,ge._positionZ+=fe._positionZ,Gt._geom._computeAabb(Gt._aabb,Gt._ptransform),re=Gt._aabb._minX,oe=Gt._aabb._minY,le=Gt._aabb._minZ,_e=Gt._aabb._maxX,he=Gt._aabb._maxY,ce=Gt._aabb._maxZ,Gt._geom._computeAabb(Gt._aabb,Gt._transform),Gt._aabb._minX=re<Gt._aabb._minX?re:Gt._aabb._minX,Gt._aabb._minY=oe<Gt._aabb._minY?oe:Gt._aabb._minY,Gt._aabb._minZ=le<Gt._aabb._minZ?le:Gt._aabb._minZ,Gt._aabb._maxX=_e>Gt._aabb._maxX?_e:Gt._aabb._maxX,Gt._aabb._maxY=he>Gt._aabb._maxY?he:Gt._aabb._maxY,Gt._aabb._maxZ=ce>Gt._aabb._maxZ?ce:Gt._aabb._maxZ,null!=Gt._proxy){var de,be,pe;de=Gt._transform._positionX-Gt._ptransform._positionX,be=Gt._transform._positionY-Gt._ptransform._positionY,pe=Gt._transform._positionZ-Gt._ptransform._positionZ;var me=Gt.displacement;me.x=de,me.y=be,me.z=pe,Gt._rigidBody._world._broadPhase.moveProxy(Gt._proxy,Gt._aabb,Gt.displacement)}Gt=Rt}dt._sleeping=!1,dt._sleepTime=0,this.activate()},__class__:Ie});var A=function(){};(i["haxe.IMap"]=A).__name__=!0;var x=function(t,e){this.high=t,this.low=e};(i["haxe._Int64.___Int64"]=x).__name__=!0,x.prototype={high:null,low:null,__class__:x};var Oe=function(){};(i["haxe.Log"]=Oe).__name__=!0,Oe.formatOutput=function(t,e){var a=k.string(t);if(null==e)return a;var i=e.fileName+":"+e.lineNumber;if(null!=e&&null!=e.customParams)for(var n=0,s=e.customParams;n<s.length;){var r=s[n];++n,a+=", "+k.string(r)}return i+": "+a},Oe.trace=function(t,e){var a=Oe.formatOutput(t,e);"undefined"!=typeof console&&null!=console.log&&console.log(a)};var Z=function(){};(i["haxe._Unserializer.DefaultResolver"]=Z).__name__=!0,Z.prototype={resolveClass:function(t){return i[t]},resolveEnum:function(t){return v[t]},__class__:Z};var ze=function(t){this.buf=t,this.length=t.length,this.pos=0,this.scache=[],this.cache=[];var e=ze.DEFAULT_RESOLVER;null==e&&(e=new Z,ze.DEFAULT_RESOLVER=e),this.resolver=e};(i["haxe.Unserializer"]=ze).__name__=!0,ze.initCodes=function(){for(var t=[],e=0,a=ze.BASE64.length;e<a;){var i=e++;t[ze.BASE64.charCodeAt(i)]=i}return t},ze.run=function(t){return new ze(t).unserialize()},ze.prototype={buf:null,pos:null,length:null,cache:null,scache:null,resolver:null,readDigits:function(){for(var t=0,e=!1,a=this.pos;;){var i=this.buf.charCodeAt(this.pos);if(i!=i)break;if(45!=i){if(i<48||57<i)break;t=10*t+(i-48),this.pos++}else{if(this.pos!=a)break;e=!0,this.pos++}}return e&&(t*=-1),t},readFloat:function(){for(var t=this.pos;;){var e=this.buf.charCodeAt(this.pos);if(e!=e)break;if(!(43<=e&&e<58||101==e||69==e))break;this.pos++}return parseFloat(q.substr(this.buf,t,this.pos-t))},unserializeObject:function(t){for(;;){if(this.pos>=this.length)throw new Ot("Invalid object");if(103==this.buf.charCodeAt(this.pos))break;var e=this.unserialize();if("string"!=typeof e)throw new Ot("Invalid object key");var a=this.unserialize();t[e]=a}this.pos++},unserializeEnum:function(t,e){if(58!=this.buf.charCodeAt(this.pos++))throw new Ot("Invalid enum format");var a=this.readDigits();if(0==a)return J.createEnum(t,e);for(var i=[];0<a--;)i.push(this.unserialize());return J.createEnum(t,e,i)},unserialize:function(){switch(this.buf.charCodeAt(this.pos++)){case 65:var t=this.unserialize(),e=this.resolver.resolveClass(t);if(null==e)throw new Ot("Class not found "+t);return e;case 66:var a=this.unserialize(),i=this.resolver.resolveEnum(a);if(null==i)throw new Ot("Enum not found "+a);return i;case 67:var n=this.unserialize(),s=this.resolver.resolveClass(n);if(null==s)throw new Ot("Class not found "+n);var r=Object.create(s.prototype);if(this.cache.push(r),r.hxUnserialize(this),103!=this.buf.charCodeAt(this.pos++))throw new Ot("Invalid custom data");return r;case 77:var o=new Be;this.cache.push(o);for(this.buf;104!=this.buf.charCodeAt(this.pos);){var l=this.unserialize();o.set(l,this.unserialize())}return this.pos++,o;case 82:var _=this.readDigits();if(_<0||_>=this.scache.length)throw new Ot("Invalid string reference");return this.scache[_];case 97:this.buf;var h=[];for(this.cache.push(h);;){var c=this.buf.charCodeAt(this.pos);if(104==c){this.pos++;break}if(117==c){this.pos++;var g=this.readDigits();h[h.length+g-1]=null}else h.push(this.unserialize())}return h;case 98:var u=new et;this.cache.push(u);for(this.buf;104!=this.buf.charCodeAt(this.pos);){var f=this.unserialize(),d=this.unserialize();null!=rs[f]?u.setReserved(f,d):u.h[f]=d}return this.pos++,u;case 99:var b=this.unserialize(),p=this.resolver.resolveClass(b);if(null==p)throw new Ot("Class not found "+b);var m=Object.create(p.prototype);return this.cache.push(m),this.unserializeObject(m),m;case 100:return this.readFloat();case 102:return!1;case 105:return this.readDigits();case 106:var I=this.unserialize(),v=this.resolver.resolveEnum(I);if(null==v)throw new Ot("Enum not found "+I);this.pos++;var M=this.readDigits(),C=v.__constructs__.slice()[M];if(null==C)throw new Ot("Unknown enum index "+I+"@"+M);var y=this.unserializeEnum(v,C);return this.cache.push(y),y;case 107:return NaN;case 108:var w=new tt;this.cache.push(w);for(this.buf;104!=this.buf.charCodeAt(this.pos);)w.add(this.unserialize());return this.pos++,w;case 109:return-1/0;case 110:return null;case 111:var A={};return this.cache.push(A),this.unserializeObject(A),A;case 112:return 1/0;case 113:var x=new $;this.cache.push(x);this.buf;for(var Z=this.buf.charCodeAt(this.pos++);58==Z;){var z=this.readDigits(),B=this.unserialize();x.h[z]=B,Z=this.buf.charCodeAt(this.pos++)}if(104!=Z)throw new Ot("Invalid IntMap format");return x;case 114:var N=this.readDigits();if(N<0||N>=this.cache.length)throw new Ot("Invalid reference");return this.cache[N];case 115:var G=this.readDigits(),k=this.buf;if(58!=this.buf.charCodeAt(this.pos++)||this.length-this.pos<G)throw new Ot("Invalid bytes length");var S=ze.CODES;null==S&&(S=ze.initCodes(),ze.CODES=S);for(var W=this.pos,X=3&G,Y=W+(G-X),D=new nt(new os(3*(G>>2)+(2<=X?X-1:0))),K=0;W<Y;){var L=S[k.charCodeAt(W++)],V=S[k.charCodeAt(W++)];D.b[K++]=255&(L<<2|V>>4);var H=S[k.charCodeAt(W++)];D.b[K++]=255&(V<<4|H>>2);var j=S[k.charCodeAt(W++)];D.b[K++]=255&(H<<6|j)}if(2<=X){var T=S[k.charCodeAt(W++)],R=S[k.charCodeAt(W++)];if(D.b[K++]=255&(T<<2|R>>4),3==X){var F=S[k.charCodeAt(W++)];D.b[K++]=255&(R<<4|F>>2)}}return this.pos+=G,this.cache.push(D),D;case 116:return!0;case 118:var O;return 48<=this.buf.charCodeAt(this.pos)&&this.buf.charCodeAt(this.pos)<=57&&48<=this.buf.charCodeAt(this.pos+1)&&this.buf.charCodeAt(this.pos+1)<=57&&48<=this.buf.charCodeAt(this.pos+2)&&this.buf.charCodeAt(this.pos+2)<=57&&48<=this.buf.charCodeAt(this.pos+3)&&this.buf.charCodeAt(this.pos+3)<=57&&45==this.buf.charCodeAt(this.pos+4)?(O=q.strDate(q.substr(this.buf,this.pos,19)),this.pos+=19):O=new Date(this.readFloat()),this.cache.push(O),O;case 119:var P=this.unserialize(),J=this.resolver.resolveEnum(P);if(null==J)throw new Ot("Enum not found "+P);var E=this.unserializeEnum(J,this.unserialize());return this.cache.push(E),E;case 120:throw Ot.wrap(this.unserialize());case 121:var U=this.readDigits();if(58!=this.buf.charCodeAt(this.pos++)||this.length-this.pos<U)throw new Ot("Invalid string length");var Q=q.substr(this.buf,this.pos,U);return this.pos+=U,Q=decodeURIComponent(Q.split("+").join(" ")),this.scache.push(Q),Q;case 122:return 0}throw this.pos--,new Ot("Invalid char "+this.buf.charAt(this.pos)+" at position "+this.pos)},__class__:ze};var nt=function(t){this.length=t.byteLength,this.b=new hs(t),(this.b.bufferValue=t).hxBytes=this,t.bytes=this.b};(i["haxe.io.Bytes"]=nt).__name__=!0,nt.ofData=function(t){var e=t.hxBytes;return null!=e?e:new nt(t)},nt.prototype={length:null,b:null,data:null,blit:function(t,e,a,i){if(t<0||a<0||i<0||t+i>this.length||a+i>e.length)throw new Ot(Y.OutsideBounds);0==a&&i==e.b.byteLength?this.b.set(e.b,t):this.b.set(e.b.subarray(a,a+i),t)},sub:function(t,e){if(t<0||e<0||t+e>this.length)throw new Ot(Y.OutsideBounds);return new nt(this.b.buffer.slice(t+this.b.byteOffset,t+this.b.byteOffset+e))},getFloat:function(t){return null==this.data&&(this.data=new ls(this.b.buffer,this.b.byteOffset,this.b.byteLength)),this.data.getFloat32(t,!0)},setInt32:function(t,e){null==this.data&&(this.data=new ls(this.b.buffer,this.b.byteOffset,this.b.byteLength)),this.data.setInt32(t,e,!0)},getString:function(t,e){if(t<0||e<0||t+e>this.length)throw new Ot(Y.OutsideBounds);for(var a="",i=this.b,n=String.fromCharCode,s=t,r=t+e;s<r;){var o=i[s++];if(o<128){if(0==o)break;a+=n(o)}else if(o<224)a+=n((63&o)<<6|127&i[s++]);else if(o<240){a+=n((31&o)<<12|(127&i[s++])<<6|127&i[s++])}else{var l=(15&o)<<18|(127&i[s++])<<12|(127&i[s++])<<6|127&i[s++];a+=n(55232+(l>>10)),a+=n(1023&l|56320)}}return a},toString:function(){return this.getString(0,this.length)},__class__:nt};var $=function(){this.h={}};(i["haxe.ds.IntMap"]=$).__name__=!0,$.__interfaces__=[A],$.prototype={h:null,remove:function(t){return!!this.h.hasOwnProperty(t)&&(delete this.h[t],!0)},keys:function(){var t=[];for(var e in this.h)this.h.hasOwnProperty(e)&&t.push(0|e);return q.iter(t)},iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){var t=this.it.next();return this.ref[t]}}},__class__:$};var tt=function(){this.length=0};(i["haxe.ds.List"]=tt).__name__=!0,tt.prototype={h:null,q:null,length:null,add:function(t){var e=new z(t,null);null==this.h?this.h=e:this.q.next=e,this.q=e,this.length++},iterator:function(){return new B(this.h)},__class__:tt};var z=function(t,e){this.item=t,this.next=e};(i["haxe.ds._List.ListNode"]=z).__name__=!0,z.prototype={item:null,next:null,__class__:z};var B=function(t){this.head=t};(i["haxe.ds._List.ListIterator"]=B).__name__=!0,B.prototype={head:null,hasNext:function(){return null!=this.head},next:function(){var t=this.head.item;return this.head=this.head.next,t},__class__:B};var Be=function(){this.h={__keys__:{}}};(i["haxe.ds.ObjectMap"]=Be).__name__=!0,Be.__interfaces__=[A],Be.prototype={h:null,set:function(t,e){var a=t.__id__||(t.__id__=++Be.count);this.h[a]=e,this.h.__keys__[a]=t},__class__:Be};var N=function(t,e){this.map=t,this.keys=e,this.index=0,this.count=e.length};(i["haxe.ds._StringMap.StringMapIterator"]=N).__name__=!0,N.prototype={map:null,keys:null,index:null,count:null,hasNext:function(){return this.index<this.count},next:function(){var t=this.map,e=this.keys[this.index++];return null!=rs[e]?t.getReserved(e):t.h[e]},__class__:N};var et=function(){this.h={}};(i["haxe.ds.StringMap"]=et).__name__=!0,et.__interfaces__=[A],et.prototype={h:null,rh:null,setReserved:function(t,e){null==this.rh&&(this.rh={}),this.rh["$"+t]=e},getReserved:function(t){return null==this.rh?null:this.rh["$"+t]},existsReserved:function(t){return null!=this.rh&&this.rh.hasOwnProperty("$"+t)},remove:function(t){return null!=rs[t]?(t="$"+t,!(null==this.rh||!this.rh.hasOwnProperty(t))&&(delete this.rh[t],!0)):!!this.h.hasOwnProperty(t)&&(delete this.h[t],!0)},arrayKeys:function(){var t=[];for(var e in this.h)this.h.hasOwnProperty(e)&&t.push(e);if(null!=this.rh)for(var e in this.rh)36==e.charCodeAt(0)&&t.push(e.substr(1));return t},__class__:et};var G=function(){this.pos=0,this.size=0};(i["haxe.io.BytesBuffer"]=G).__name__=!0,G.prototype={buffer:null,view:null,u8:null,pos:null,size:null,addByte:function(t){this.pos==this.size&&this.grow(1),this.view.setUint8(this.pos++,t)},addBytes:function(t,e,a){if(e<0||a<0||e+a>t.length)throw new Ot(Y.OutsideBounds);if(this.pos+a>this.size&&this.grow(a),0!=this.size){var i=new hs(t.b.buffer,t.b.byteOffset+e,a);this.u8.set(i,this.pos),this.pos+=a}},grow:function(t){for(var e=this.pos+t,a=0==this.size?16:this.size;a<e;)a=3*a>>1;var i=new os(a),n=new hs(i);0<this.size&&n.set(this.u8),this.size=a,this.buffer=i,this.u8=n,this.view=new ls(this.buffer)},getBytes:function(){if(0==this.size)return new nt(new os(0));var t=new nt(this.buffer);return t.length=this.pos,t},__class__:G};var S=function(){};(i["haxe.io.Input"]=S).__name__=!0,S.prototype={bigEndian:null,readByte:function(){throw new Ot("Not implemented")},readBytes:function(t,e,a){var i=a,n=t.b;if(e<0||a<0||e+a>t.length)throw new Ot(Y.OutsideBounds);try{for(;0<i;)n[e]=this.readByte(),++e,--i}catch(t){var s=t instanceof Ot?t.val:t;if(!(s instanceof X))throw t}return a-i},set_bigEndian:function(t){return this.bigEndian=t},readFullBytes:function(t,e,a){for(;0<a;){var i=this.readBytes(t,e,a);if(0==i)throw new Ot(Y.Blocked);e+=i,a-=i}},read:function(t){for(var e=new nt(new os(t)),a=0;0<t;){var i=this.readBytes(e,a,t);if(0==i)throw new Ot(Y.Blocked);a+=i,t-=i}return e},readFloat:function(){return D.i32ToFloat(this.readInt32())},readInt8:function(){var t=this.readByte();return 128<=t?t-256:t},readInt16:function(){var t=this.readByte(),e=this.readByte(),a=this.bigEndian?e|t<<8:t|e<<8;return 0!=(32768&a)?a-65536:a},readUInt16:function(){var t=this.readByte(),e=this.readByte();return this.bigEndian?e|t<<8:t|e<<8},readInt32:function(){var t=this.readByte(),e=this.readByte(),a=this.readByte(),i=this.readByte();return this.bigEndian?i|a<<8|e<<16|t<<24:t|e<<8|a<<16|i<<24},readString:function(t){var e=new nt(new os(t));return this.readFullBytes(e,0,t),e.toString()},__class__:S,__properties__:{set_bigEndian:"set_bigEndian"}};var st=function(t,e,a){if(null==e&&(e=0),null==a&&(a=t.length-e),e<0||a<0||e+a>t.length)throw new Ot(Y.OutsideBounds);this.b=t.b,this.pos=e,this.len=a,this.totlen=a};(i["haxe.io.BytesInput"]=st).__name__=!0,st.__super__=S,st.prototype=s(S.prototype,{b:null,pos:null,len:null,totlen:null,set_position:function(t){return t<0?t=0:t>this.totlen&&(t=this.totlen),this.len=this.totlen-t,this.pos=t},readByte:function(){if(0==this.len)throw new Ot(new X);return this.len--,this.b[this.pos++]},readBytes:function(t,e,a){if(e<0||a<0||e+a>t.length)throw new Ot(Y.OutsideBounds);if(0==this.len&&0<a)throw new Ot(new X);this.len<a&&(a=this.len);for(var i=this.b,n=t.b,s=0,r=a;s<r;){var o=s++;n[e+o]=i[this.pos+o]}return this.pos+=a,this.len-=a,a},__class__:st,__properties__:s(S.prototype.__properties__,{set_position:"set_position"})});var W=function(){};(i["haxe.io.Output"]=W).__name__=!0,W.prototype={bigEndian:null,writeByte:function(t){throw new Ot("Not implemented")},writeBytes:function(t,e,a){if(e<0||a<0||e+a>t.length)throw new Ot(Y.OutsideBounds);for(var i=t.b,n=a;0<n;)this.writeByte(i[e]),++e,--n;return a},write:function(t){for(var e=t.length,a=0;0<e;){var i=this.writeBytes(t,a,e);if(0==i)throw new Ot(Y.Blocked);a+=i,e-=i}},writeFloat:function(t){this.writeInt32(D.floatToI32(t))},writeInt32:function(t){this.bigEndian?(this.writeByte(t>>>24),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)):(this.writeByte(255&t),this.writeByte(t>>8&255),this.writeByte(t>>16&255),this.writeByte(t>>>24))},__class__:W};var rt=function(){this.b=new G};(i["haxe.io.BytesOutput"]=rt).__name__=!0,rt.__super__=W,rt.prototype=s(W.prototype,{b:null,writeByte:function(t){this.b.addByte(t)},writeBytes:function(t,e,a){return this.b.addBytes(t,e,a),a},getBytes:function(){return this.b.getBytes()},__class__:rt});var X=function(){};(i["haxe.io.Eof"]=X).__name__=!0,X.prototype={toString:function(){return"Eof"},__class__:X};var Y=v["haxe.io.Error"]={__ename__:!0,__constructs__:["Blocked","Overflow","OutsideBounds","Custom"],Blocked:{_hx_index:0,__enum__:"haxe.io.Error",toString:n},Overflow:{_hx_index:1,__enum__:"haxe.io.Error",toString:n},OutsideBounds:{_hx_index:2,__enum__:"haxe.io.Error",toString:n},Custom:(a=function(t){return{_hx_index:3,e:t,__enum__:"haxe.io.Error",toString:n}},a.__params__=["e"],a)},D=function(){};(i["haxe.io.FPHelper"]=D).__name__=!0,D.i32ToFloat=function(t){return D.helper.setInt32(0,t,!0),D.helper.getFloat32(0,!0)},D.floatToI32=function(t){return D.helper.setFloat32(0,t,!0),D.helper.getInt32(0,!0)};var K={};(i["haxe.io._UInt8Array.UInt8Array_Impl_"]=K).__name__=!0,K.fromBytes=function(t,e,a){return null==e&&(e=0),null==a&&(a=t.length-e),new hs(t.b.bufferValue,e,a)};var L=function(t){t(),uo.notifyOnFrames(L.render),go.addTimeTask(L.update,0,.016666666666666666*co.scale)};(i["iron.App"]=L).__name__=!0,L.init=function(t){new L(t)},L.update=function(){if(null!=h_.active&&h_.active.ready&&!L.pauseUpdates){co.update(),h_.active.updateFrame();for(var t=0,e=L.traitUpdates.length;t<e;){if(0<L.traitInits.length){for(var a=0,i=L.traitInits;a<i.length;){var n=i[a];if(++a,!(0<L.traitInits.length))break;n()}L.traitInits.splice(0,L.traitInits.length)}L.traitUpdates[t](),e<=L.traitUpdates.length?++t:e=L.traitUpdates.length}for(t=0,e=L.traitLateUpdates.length;t<e;)L.traitLateUpdates[t](),e<=L.traitLateUpdates.length?++t:e=L.traitLateUpdates.length;if(null!=L.onEndFrames)for(var s=0,r=L.onEndFrames;s<r.length;){var o=r[s];++s,o()}-1==L.lastw&&(L.lastw=uo.windowWidth(),L.lasth=uo.windowHeight()),L.lastw==uo.windowWidth()&&L.lasth==uo.windowHeight()||null!=h_.active&&null!=h_.active.camera&&h_.active.camera.buildProjection(),L.lastw=uo.windowWidth(),L.lasth=uo.windowHeight()}},L.render=function(t){var e=t[0];if(L.framebuffer=e,null!=h_.active&&h_.active.ready){if(0<L.traitInits.length){for(var a=0,i=L.traitInits;a<i.length;){var n=i[a];if(++a,!(0<L.traitInits.length))break;n()}L.traitInits.splice(0,L.traitInits.length)}h_.active.renderFrame(e.get_g4());for(var s=0,r=L.traitRenders;s<r.length;){var o=r[s];if(++s,!(0<L.traitRenders.length))break;o(e.get_g4())}L.render2D(e)}else L.render2D(e)},L.render2D=function(t){if(0<L.traitRenders2D.length){t.get_g2().begin(!1);for(var e=0,a=L.traitRenders2D;e<a.length;){var i=a[e];if(++e,!(0<L.traitRenders2D.length))break;i(t.get_g2())}t.get_g2().end()}},L.notifyOnInit=function(t){L.traitInits.push(t)},L.removeInit=function(t){q.remove(L.traitInits,t)},L.notifyOnUpdate=function(t){L.traitUpdates.push(t)},L.removeUpdate=function(t){q.remove(L.traitUpdates,t)},L.removeLateUpdate=function(t){q.remove(L.traitLateUpdates,t)},L.removeRender=function(t){q.remove(L.traitRenders,t)},L.notifyOnRender2D=function(t){L.traitRenders2D.push(t)},L.removeRender2D=function(t){q.remove(L.traitRenders2D,t)},L.notifyOnReset=function(t){null==L.onResets&&(L.onResets=[]),L.onResets.push(t)},L.notifyOnEndFrame=function(t){null==L.onEndFrames&&(L.onEndFrames=[]),L.onEndFrames.push(t)},L.prototype={__class__:L};var lo=function(){this.depthBuffers=[],this.depthToRenderTarget=new et,this.renderTargets=new et,this.commands=null,this.cachedShaderContexts=new et,this.loading=0,this.paused=!1,this.drawOrder=1,this.lastFrameTime=0,this.viewportScaled=!1,this.scissorSet=!1,this.lastH=0,this.lastW=0,this.currentLightIndex=0,this.currentTarget=null,this.frameTime=0,this.frameScissorH=0,this.frameScissorW=0,this.frameScissorY=0,this.frameScissorX=0,this.frameScissor=!1};(i["iron.RenderPath"]=lo).__name__=!0,lo.setActive=function(t){lo.active=t},lo.sortMeshesDistance=function(t,e){for(var a=e.transform.world.self._30,i=e.transform.world.self._31,n=e.transform.world.self._32,s=0;s<t.length;){var r=t[s];++s;var o=a-r.transform.world.self._30,l=i-r.transform.world.self._31,_=n-r.transform.world.self._32;r.cameraDistance=Math.sqrt(o*o+l*l+_*_)}t.sort(function(t,e){return t.cameraDistance>=e.cameraDistance?1:-1})},lo.sortMeshesShader=function(t){h_.active.meshes.sort(function(t,e){return t.materials[0].name>=e.materials[0].name?1:-1})},lo.prototype={frameScissor:null,frameScissorX:null,frameScissorY:null,frameScissorW:null,frameScissorH:null,frameTime:null,currentTarget:null,currentCube:null,currentFace:null,currentLightIndex:null,currentW:null,currentH:null,currentD:null,lastW:null,lastH:null,bindParams:null,meshesSorted:null,scissorSet:null,viewportScaled:null,currentG:null,frameG:null,lastFrameTime:null,drawOrder:null,paused:null,get_ready:function(){return 0==this.loading},loading:null,cachedShaderContexts:null,commands:null,renderTargets:null,depthToRenderTarget:null,renderFrame:function(t){if(this.get_ready()&&!this.paused&&0!=uo.windowWidth()&&0!=uo.windowHeight()){0<this.lastW&&(this.lastW!=uo.windowWidth()||this.lastH!=uo.windowHeight())&&this.resize(),this.lastW=uo.windowWidth(),this.lastH=uo.windowHeight(),this.frameTime=go.time()-this.lastFrameTime,this.lastFrameTime=go.time(),this.frameG=null==h_.active.camera||null==h_.active.camera.data.renderTarget?t:h_.active.camera.data.renderTarget.get_g4(),this.currentG=this.frameG,this.currentW=uo.windowWidth(),this.currentH=uo.windowHeight(),this.currentD=1,this.currentCube=!1,this.currentFace=-1,this.meshesSorted=!1;for(var e=this.currentLightIndex=0,a=h_.active.lights;e<a.length;){var i=a[e];++e,i.visible&&i.buildMatrices(h_.active.camera)}this.commands()}},setTarget:function(t,e,a){if(null==a&&(a=1),""==t){this.currentG=this.frameG,this.currentW=uo.windowWidth(),this.currentH=uo.windowHeight(),this.currentD=1,this.currentTarget=null,this.currentCube=!1,this.currentFace=-1,this.frameScissor&&this.setFrameScissor(),this.currentG.begin(null)}else{var i=this.renderTargets,n=null!=rs[t]?i.getReserved(t):i.h[t];this.currentTarget=n;var s=null;if(null!=e){s=[];for(var r=0;r<e.length;){var o=e[r];++r;var l=this.renderTargets,_=null!=rs[o]?l.getReserved(o):l.h[o];s.push(_.image)}}this.currentG=n.isCubeMap?n.cubeMap.get_g4():n.image.get_g4(),this.currentW=n.isCubeMap?n.cubeMap.get_width():n.image.get_width(),this.currentH=n.isCubeMap?n.cubeMap.get_height():n.image.get_height(),n.is3D&&(this.currentD=n.image.get_depth()),this.currentCube=n.isCubeMap;var h=this.currentG,c=this.currentFace;0<=c?h.beginFace(5-c):h.begin(s)}if(1!=a){this.viewportScaled=!0;var g=this.currentW*a|0,u=this.currentH*a|0;this.currentG.viewport(0,u,g,u),this.currentG.scissor(0,u,g,u)}else this.viewportScaled&&(this.viewportScaled=!1,this.setCurrentViewport(this.currentW,this.currentH),this.setCurrentScissor(this.currentW,this.currentH));this.bindParams=null},setCurrentViewport:function(t,e){this.currentG.viewport(0,this.currentH-e,t,e)},setCurrentScissor:function(t,e){this.currentG.scissor(0,this.currentH-e,t,e),this.scissorSet=!0},setFrameScissor:function(){this.frameG.scissor(this.frameScissorX,this.currentH-(this.frameScissorH-this.frameScissorY),this.frameScissorW,this.frameScissorH)},clearTarget:function(t,e){if(-1==t)if(null!=h_.active.world)t=h_.active.world.raw.background_color;else if(null!=h_.active.camera){var a=h_.active.camera.data.raw.clear_color;null!=a&&(t=Ut.fromFloats(a[0],a[1],a[2]))}this.currentG.clear(t,e,null)},drawMeshes:function(t){var e=0<h_.active.lights.length?h_.active.lights[this.currentLightIndex]:null;if((null==e||e.visible||!(0<this.currentLightIndex))&&(!("shadowmap"==t)||null!=e&&e.data.raw.cast_shadow)){0<=this.currentFace&&null!=e&&e.setCubeFace(5-this.currentFace,h_.active.camera);var a=this.currentG;this.submitDraw(t),a.end(),this.scissorSet&&(a.disableScissor(),this.scissorSet=!1),this.bindParams=null}},submitDraw:function(t){var e=0<h_.active.lights.length?h_.active.lights[this.currentLightIndex]:null,a=this.currentG;g_.lastPipeline=null,this.meshesSorted||null==h_.active.camera||(1==this.drawOrder?lo.sortMeshesShader(h_.active.meshes):lo.sortMeshesDistance(h_.active.meshes,h_.active.camera),this.meshesSorted=!0);for(var i=0,n=h_.active.meshes;i<n.length;){var s=n[i];++i,s.render(a,t,h_.active.camera,e,this.bindParams)}},bindTarget:function(t,e){null!=this.bindParams?(this.bindParams.push(t),this.bindParams.push(e)):this.bindParams=[t,e]},drawShader:function(t){var e=this.cachedShaderContexts,a=null!=rs[t]?e.getReserved(t):e.h[t];null==O.screenAlignedVB&&O.createScreenAlignedData();var i=this.currentG;i.setPipeline(a.context.pipeState);var n=0<h_.active.lights.length?h_.active.lights[this.currentLightIndex]:null;u_.setContextConstants(i,a.context,h_.active.camera,n,this.bindParams),u_.setObjectConstants(i,a.context,null,h_.active.camera,n),i.setVertexBuffer(O.screenAlignedVB),i.setIndexBuffer(O.screenAlignedIB),i.drawIndexedVertices(),i.end(),this.scissorSet&&(i.disableScissor(),this.scissorSet=!1),this.bindParams=null},loadShader:function(t){var e=this;this.loading++;var a=this.cachedShaderContexts,i=null!=rs[t]?a.getReserved(t):a.h[t];if(null==i){i=new j;var n=this.cachedShaderContexts;null!=rs[t]?n.setReserved(t,i):n.h[t]=i;var s=t.split("/");R.getShader(s[0],s[1],function(t){i.context=t.getContext(s[2]),e.loading--})}else this.loading--},resize:function(){for(var t=this.renderTargets,e=new N(t,t.arrayKeys());e.hasNext();){var a=e.next();if(0==a.raw.width&&(a.image.unload(),a.image=this.createImage(a.raw,a.depthStencil),""!=a.depthStencilFrom)){var i=a.depthStencilFrom,n=this.depthToRenderTarget;a.image.setDepthStencilFrom((null!=rs[i]?n.getReserved(i):n.h[i]).image)}}},createRenderTarget:function(t){var e=this.createTarget(t),a=t.name,i=this.renderTargets;return null!=rs[a]?i.setReserved(a,e):i.h[a]=e,e},depthBuffers:null,createDepthBuffer:function(t,e){this.depthBuffers.push({name:t,format:e})},createTarget:function(t){var e=new H(t);if(null!=t.depth_buffer){e.hasDepth=!0;var a=t.depth_buffer,i=this.depthToRenderTarget,n=null!=rs[a]?i.getReserved(a):i.h[a];if(null==n)for(var s=0,r=this.depthBuffers;s<r.length;){var o=r[s];if(++s,o.name==t.depth_buffer){var l=o.name,_=this.depthToRenderTarget;null!=rs[l]?_.setReserved(l,e):_.h[l]=e;var h,c=o.format;if(null==c||""==c)h=1;else switch(c){case"DEPTH16":h=5;break;case"DEPTH24":h=1;break;default:h=1}e.depthStencil=h,e.image=this.createImage(t,e.depthStencil);break}}else e.depthStencil=0,e.depthStencilFrom=t.depth_buffer,e.image=this.createImage(t,e.depthStencil),e.image.setDepthStencilFrom(n.image)}else e.hasDepth=!1,null!=t.depth&&1<t.depth&&(e.is3D=!0),t.is_cubemap?(e.isCubeMap=!0,e.depthStencil=0,e.cubeMap=this.createCubeMap(t,e.depthStencil)):(e.depthStencil=0,e.image=this.createImage(t,e.depthStencil));return e},createImage:function(t,e){var a,i=0==t.width?uo.windowWidth():t.width,n=0==t.height?uo.windowHeight():t.height,s=null!=t.depth?t.depth:0;if(null!=t.displayp&&(n<i?(i=i*(t.displayp/n)|0,n=t.displayp):(n=n*(t.displayp/i)|0,i=t.displayp)),null!=t.scale&&(i=i*t.scale|0,n=n*t.scale|0,s=s*t.scale|0),null!=t.depth&&1<t.depth){var r;if(null!=t.format){var o;switch(t.format){case"A16":o=Xa.A16;break;case"A32":o=Xa.A32;break;case"A8":o=Xa.L8;break;case"DEPTH16":o=Xa.DEPTH16;break;case"R16":o=Xa.A16;break;case"R32":o=Xa.A32;break;case"R8":o=Xa.L8;break;case"RGBA128":o=Xa.RGBA128;break;case"RGBA32":o=Xa.RGBA32;break;case"RGBA64":o=Xa.RGBA64;break;default:o=Xa.RGBA32}r=o}else r=Xa.RGBA32;var l=Ft.create3D(i,n,s,r);return t.mipmaps&&l.generateMipmaps(1e3),l}if(null!=t.is_image&&t.is_image){var _;if(null!=t.format){var h;switch(t.format){case"A16":h=Xa.A16;break;case"A32":h=Xa.A32;break;case"A8":h=Xa.L8;break;case"DEPTH16":h=Xa.DEPTH16;break;case"R16":h=Xa.A16;break;case"R32":h=Xa.A32;break;case"R8":h=Xa.L8;break;case"RGBA128":h=Xa.RGBA128;break;case"RGBA32":h=Xa.RGBA32;break;case"RGBA64":h=Xa.RGBA64;break;default:h=Xa.RGBA32}_=h}else _=Xa.RGBA32;return Ft.create(i,n,_)}if(null!=t.format){var c;switch(t.format){case"A16":c=Xa.A16;break;case"A32":c=Xa.A32;break;case"A8":c=Xa.L8;break;case"DEPTH16":c=Xa.DEPTH16;break;case"R16":c=Xa.A16;break;case"R32":c=Xa.A32;break;case"R8":c=Xa.L8;break;case"RGBA128":c=Xa.RGBA128;break;case"RGBA32":c=Xa.RGBA32;break;case"RGBA64":c=Xa.RGBA64;break;default:c=Xa.RGBA32}a=c}else a=Xa.RGBA32;return Ft.createRenderTarget(i,n,a,e)},createCubeMap:function(t,e){var a;if(null!=t.format){var i;switch(t.format){case"A16":i=Xa.A16;break;case"A32":i=Xa.A32;break;case"A8":i=Xa.L8;break;case"DEPTH16":i=Xa.DEPTH16;break;case"R16":i=Xa.A16;break;case"R32":i=Xa.A32;break;case"R8":i=Xa.L8;break;case"RGBA128":i=Xa.RGBA128;break;case"RGBA32":i=Xa.RGBA32;break;case"RGBA64":i=Xa.RGBA64;break;default:i=Xa.RGBA32}a=i}else a=Xa.RGBA32;return pa.createRenderTarget(t.width,a,e)},__class__:lo,__properties__:{get_ready:"get_ready"}};var V=function(){this.is_cubemap=null,this.is_image=null,this.depth=null,this.mipmaps=null,this.depth_buffer=null,this.displayp=null,this.scale=null,this.format=null};(i["iron.RenderTargetRaw"]=V).__name__=!0,V.prototype={name:null,width:null,height:null,format:null,scale:null,displayp:null,depth_buffer:null,mipmaps:null,depth:null,is_image:null,is_cubemap:null,__class__:V};var H=function(t){this.isCubeMap=!1,this.is3D=!1,this.hasDepth=!1,this.cubeMap=null,this.image=null,this.depthStencilFrom="",this.raw=t};(i["iron.RenderTarget"]=H).__name__=!0,H.prototype={raw:null,depthStencil:null,depthStencilFrom:null,image:null,cubeMap:null,hasDepth:null,is3D:null,isCubeMap:null,__class__:H};var j=function(){};(i["iron.CachedShaderContext"]=j).__name__=!0,j.prototype={context:null,__class__:j};var h_=function(){this.traitRemoves=[],this.traitInits=[],this.groups=null,this.uid=h_.uidCounter++,this.meshes=[],this.lights=[],this.cameras=[],this.speakers=[],this.decals=[],this.empties=[],this.animations=[],this.armatures=[],this.embedded=new et,this.root=new ut,this.root.name="Root",this.traitInits=[],this.traitRemoves=[],null==h_.global&&(h_.global=new ut)};(i["iron.Scene"]=h_).__name__=!0,h_.create=function(n,s){h_.active=new h_,h_.active.ready=!1,h_.active.raw=n,R.getWorld(n.name,n.world_ref,function(t){h_.active.world=t,h_.active.addScene(n.name,null,function(t){0==h_.active.cameras.length&&Oe.trace('No camera found for scene "'+n.name+'"',{fileName:"Sources/iron/Scene.hx",lineNumber:81,className:"iron.Scene",methodName:"create"}),h_.active.camera=h_.active.getCamera(n.camera_ref),h_.active.ready=!0;for(var e=0,a=h_.active.traitInits;e<a.length;){var i=a[e];++e,i()}h_.active.traitInits=[],h_.active.sceneParent=t,s(t)})})},h_.setActive=function(t,e){h_.framePassed&&(h_.framePassed=!1,null!=h_.active&&h_.active.remove(),R.getSceneRaw(t,function(t){h_.create(t,function(t){null!=e&&e(t)})}))},h_.generateTransform=function(t,e){var a;if(null!=t.transform){var i=t.transform.values;a=new fa(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8],i[9],i[10],i[11],i[12],i[13],i[14],i[15])}else a=new fa(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);e.world=a;var n=e.world,s=e.loc,r=e.rot,o=e.scale;s.x=n.self._30,s.y=n.self._31,s.z=n.self._32;var l=fa.helpVec;l.x=n.self._00,l.y=n.self._01,l.z=n.self._02,l.w=1;var _=l;o.x=Math.sqrt(_.x*_.x+_.y*_.y+_.z*_.z);var h=fa.helpVec;h.x=n.self._10,h.y=n.self._11,h.z=n.self._12,h.w=1;var c=h;o.y=Math.sqrt(c.x*c.x+c.y*c.y+c.z*c.z);var g=fa.helpVec;g.x=n.self._20,g.y=n.self._21,g.z=n.self._22,g.w=1;var u=g;o.z=Math.sqrt(u.x*u.x+u.y*u.y+u.z*u.z);var f=n.self,d=f._12,b=f._22,p=f._32,m=f._13,I=f._23,v=f._33,M=f._11*(b*v-p*I)-f._21*(d*v-p*m)+f._31*(d*I-b*m),C=f._12,y=f._22,w=f._32,A=f._13,x=f._23,Z=f._33,z=f._10*(y*Z-w*x)-f._20*(C*Z-w*A)+f._30*(C*x-y*A),B=f._11,N=f._21,G=f._31,k=f._13,S=f._23,W=f._33,X=f._10*(N*W-G*S)-f._20*(B*W-G*k)+f._30*(B*S-N*k),Y=f._11,D=f._21,K=f._31,L=f._12,V=f._22,H=f._32,j=f._10*(D*H-K*V)-f._20*(Y*H-K*L)+f._30*(Y*V-D*L);f._00*M-f._01*z+f._02*X-f._03*j<0&&(o.x=-o.x);var T=1/o.x;fa.helpMat.self._00=n.self._00*T,fa.helpMat.self._01=n.self._01*T,fa.helpMat.self._02=n.self._02*T,T=1/o.y,fa.helpMat.self._10=n.self._10*T,fa.helpMat.self._11=n.self._11*T,fa.helpMat.self._12=n.self._12*T,T=1/o.z,fa.helpMat.self._20=n.self._20*T,fa.helpMat.self._21=n.self._21*T,fa.helpMat.self._22=n.self._22*T;var R=fa.helpMat,F=R.self._00,O=R.self._10,P=R.self._20,J=R.self._01,E=R.self._11,U=R.self._21,Q=R.self._02,q=R.self._12,$=R.self._22,tt=F+E+$,et=0;0<tt?(et=.5/Math.sqrt(tt+1),r.w=.25/et,r.x=(q-U)*et,r.y=(P-Q)*et,r.z=(J-O)*et):E<F&&$<F?(et=2*Math.sqrt(1+F-E-$),r.w=(q-U)/et,r.x=.25*et,r.y=(O+J)/et,r.z=(P+Q)/et):$<E?(et=2*Math.sqrt(1+E-F-$),r.w=(P-Q)/et,r.x=(O+J)/et,r.y=.25*et,r.z=(U+q)/et):(et=2*Math.sqrt(1+$-F-E),r.w=(J-O)/et,r.x=(P+Q)/et,r.y=(U+q)/et,r.z=.25*et),null!=t.local_only&&(e.localOnly=t.local_only),null!=e.object.parent&&e.update()},h_.createTraits=function(t,e){if(null!=t)for(var a=0;a<t.length;){var i=t[a];if(++a,"Script"==i.type){var n=[];if(null!=i.parameters)for(var s=0,r=i.parameters;s<r.length;){var o=r[s];++s,n.push(h_.parseArg(o))}var l=h_.createTraitClassInstance(i.class_name,n);if(null==l){Oe.trace("Error: Trait '"+i.class_name+"' referenced in object '"+e.name+"' not found",{fileName:"Sources/iron/Scene.hx",lineNumber:597,className:"iron.Scene",methodName:"createTraits"});continue}if(null!=i.props)for(var _=0,h=i.props.length/2|0;_<h;){var c=_++,g=i.props[2*c],u=i.props[2*c+1];""!=u&&Ze.setProperty(l,g,h_.parseArg(u))}e.addTrait(l)}}},h_.parseArg=function(t){if("true"==t)return!0;if("false"==t)return!1;if("null"==t)return null;if("'"==t.charAt(0))return P.replace(t,"'","");if('"'==t.charAt(0))return P.replace(t,'"',"");if("["==t.charAt(0)){t=P.replace(t,"[",""),t=P.replace(t,"]","");for(var e=[],a=(t=P.replace(t," ","")).split(","),i=0;i<a.length;){var n=a[i];++i,e.push(h_.parseArg(n))}return e}var s=parseFloat(t),r=k.parseInt(t);return s==r?r:s},h_.createConstraints=function(t,e){if(null!=t){e.constraints=[];for(var a=0;a<t.length;){var i=t[a];++a;var n=new bt(i);e.constraints.push(n)}}},h_.createTraitClassInstance=function(t,e){var a=i[t];return null==a?null:J.createInstance(a,e)},h_.prototype={uid:null,raw:null,root:null,sceneParent:null,camera:null,world:null,meshes:null,lights:null,cameras:null,speakers:null,decals:null,empties:null,animations:null,armatures:null,groups:null,embedded:null,ready:null,traitInits:null,traitRemoves:null,remove:function(){for(var t=0,e=this.traitRemoves;t<e.length;){var a=e[t];++t,a()}for(var i=0,n=this.meshes;i<n.length;){var s=n[i];++i,s.remove()}for(var r=0,o=this.lights;r<o.length;){var l=o[r];++r,l.remove()}for(var _=0,h=this.cameras;_<h.length;){var c=h[_];++_,c.remove()}for(var g=0,u=this.speakers;g<u.length;){var f=u[g];++g,f.remove()}for(var d=0,b=this.decals;d<b.length;){var p=b[d];++d,p.remove()}for(var m=0,I=this.empties;m<I.length;){var v=I[m];++m,v.remove()}this.groups=null,this.root.remove()},updateFrame:function(){if(this.ready){for(var t=0,e=this.animations;t<e.length;){var a=e[t];++t,a.update(.016666666666666666*co.scale)}for(var i=0,n=this.empties;i<n.length;){var s=n[i];++i,null!=s&&null!=s.parent&&s.transform.update()}}},renderFrame:function(t){if(this.ready&&null!=lo.active){h_.framePassed=!0;for(var e=this.camera,a=0,i=this.cameras;a<i.length;){var n=i[a];++a,null!=n.data.renderTarget&&(this.camera=n,this.camera.renderFrame(t))}this.camera=e,null!=this.camera?this.camera.renderFrame(t):lo.active.renderFrame(t)}},addObject:function(t){var e=new ut;return null!=t?t.addChild(e):this.root.addChild(e),e},getChild:function(t){return this.root.getChild(t)},getCamera:function(t){for(var e=0,a=this.cameras;e<a.length;){var i=a[e];if(++e,i.name==t)return i}return null},addMeshObject:function(t,e,a){var i=new g_(t,e);return null!=a?a.addChild(i):this.root.addChild(i),i},addLightObject:function(t,e){var a=new sa(t);return null!=e?e.addChild(a):this.root.addChild(a),a},addCameraObject:function(t,e){var a=new ft(t);return null!=e?e.addChild(a):this.root.addChild(a),a},addSpeakerObject:function(t,e){var a=new It(t);return null!=e?e.addChild(a):this.root.addChild(a),a},addScene:function(t,e,a){var u=this;null==e&&((e=this.addObject()).name=t),R.getSceneRaw(t,function(g){h_.createTraits(g.traits,e),u.loadEmbeddedData(g.embedded_datas,function(){var _=0,h=u.getObjectsCount(g.objects),c=null;c=function(t,e,a,i){if(null!=e)for(var n=0,s=e.length;n<s;){var r=[e[n++]];if(null==r[0].spawn||0!=r[0].spawn){var o=r[0],l=function(e){return function(t){null!=t&&c(t,e[0].children,e[0],i),(_+=1)==h&&i()}}(r);u.createObject(o,g,t,a,l)}else(_+=1)==h&&i()}},null==g.objects||0==g.objects.length?a(e):c(e,g.objects,null,function(){a(e)})})})},getObjectsCount:function(t,e){if(null==e&&(e=!0),null==t)return 0;for(var a=t.length,i=0;i<t.length;){var n=t[i];++i,e&&null!=n.spawn&&0==n.spawn||null!=n.children&&(a+=this.getObjectsCount(n.children))}return a},spawnObject:function(t,e,a,r){null==r&&(r=!0);var i=this,o=0,n=this.getObj(this.raw,t),l=r?this.getObjectsCount([n],!1):1,_=null;(_=function(n,t,s){i.createObject(n,i.raw,t,null,function(t){if(r&&null!=n.children)for(var e=0,a=n.children;e<a.length;){var i=a[e];++e,_(i,t,s)}(o+=1)==l&&null!=s&&s(t)})})(n,e,a)},getObj:function(t,e){return this.traverseObjs(t.objects,e)},traverseObjs:function(t,e){for(var a=0;a<t.length;){var i=t[a];if(++a,i.name==e)return i;if(null!=i.children){var n=this.traverseObjs(i.children,e);if(null!=n)return n}}return null},createObject:function(_,t,h,c,g){var u=this,f=t.name;if("camera_object"==_.type)R.getCamera(f,_.data_ref,function(t){var e=u.addCameraObject(t,h);u.returnObject(e,_,g)});else if("light_object"==_.type)R.getLight(f,_.data_ref,function(t){var e=u.addLightObject(t,h);u.returnObject(e,_,g)});else if("mesh_object"==_.type)if(null==_.material_refs||0==_.material_refs.length){var e=this.addObject(h);this.returnObject(e,_,g)}else for(var d=new Array(_.material_refs.length),b=0,a=0,i=_.material_refs.length;a<i;){var n=[a++],s=_.material_refs[n[0]],r=function(l){return function(t){if(d[l[0]]=t,(b+=1)==_.material_refs.length){var e=_.data_ref.split("/"),a="",i="";if(2==e.length?(a=e[0],i=e[1]):(a=f,i=_.data_ref),null!=c&&null!=c.bone_actions)for(var n=[],s=0,r=c.bone_actions;s<r.length;){var o=r[s];++s,R.getSceneRaw(o,function(t){if(n.push(t),n.length==c.bone_actions.length){var e=new T(c.name,n);u.armatures.push(e),u.returnMeshObject(a,i,f,e,d,h,_,g)}})}else u.returnMeshObject(a,i,f,null,d,h,_,g)}}}(n);R.getMaterial(f,s,r)}else if("speaker_object"==_.type){var o=this.addSpeakerObject(R.getSpeakerRawByName(t.speaker_datas,_.data_ref),h);this.returnObject(o,_,g)}else if("object"==_.type){var l=this.addObject(h);this.returnObject(l,_,function(e){if(null!=_.group_ref){var a=0,i=u.getGroupObjectRefs(_.group_ref);if(0==i.length)g(e);else for(var t=0;t<i.length;){var n=i[t];++t,u.spawnObject(n,e,function(t){(a+=1)==i.length&&g(e)})}}else g(e)})}else g(null)},getGroupObjectRefs:function(t){for(var e=0,a=this.raw.groups;e<a.length;){var i=a[e];if(++e,i.name==t)return i.object_refs}return null},returnMeshObject:function(t,e,i,n,s,r,o,l){var _=this;R.getMesh(t,e,function(t){if(t.isSkinned){var e=t.geom;null!=n?e.addArmature(n):e.addAction(t.format.objects,"none")}var a=_.addMeshObject(t,s,r);null!=o.tilesheet_ref&&f_.__cast(a,g_).setupTilesheet(i,o.tilesheet_ref,o.tilesheet_action_ref),_.returnObject(a,o,l)})},returnObject:function(a,i,n){var s=this;if(null!=a&&null!=i.object_actions){for(var r=[];r.length<i.object_actions.length;)r.push(null);for(var o=0,t=0,e=i.object_actions.length;t<e;){var l=[t++],_=i.object_actions[l[0]];"null"!=_?R.getSceneRaw(_,function(e){return function(t){r[e[0]]=t,(o+=1)==i.object_actions.length&&s.returnObjectLoaded(a,i,r,n)}}(l)):o+=1}}else this.returnObjectLoaded(a,i,null,n)},returnObjectLoaded:function(t,e,a,i){if(null!=t){if(t.raw=e,t.name=e.name,null!=e.visible&&(t.visible=e.visible),null!=e.visible_mesh&&(t.visibleMesh=e.visible_mesh),null!=e.visible_shadow&&(t.visibleShadow=e.visible_shadow),h_.createConstraints(e.constraints,t),h_.generateTransform(e,t.transform),t.setupAnimation(a),null!=e.groups){null==this.groups&&(this.groups=new et);for(var n=0,s=e.groups;n<s.length;){var r=s[n];++n;var o=this.groups,l=null!=rs[r]?o.getReserved(r):o.h[r];if(null==l){l=[];var _=this.groups;null!=rs[r]?_.setReserved(r,l):_.h[r]=l}l.push(t)}}h_.createTraits(e.traits,t)}i(t)},loadEmbeddedData:function(i,n){var s=this;if(null!=i)for(var r=0,t=0;t<i.length;){var e=[i[t]];++t,R.getImage(e[0],function(a){return function(t){var e=s.embedded;null!=rs[a[0]]?e.setReserved(a[0],t):e.h[a[0]]=t,(r+=1)==i.length&&n()}}(e))}else n()},notifyOnInit:function(t){this.ready?t():this.traitInits.push(t)},__class__:h_};var T=function(t,e){this.matsReady=!1,this.actions=[],this.name=t;for(var a=0;a<e.length;){var i=e[a];++a;for(var n=0,s=i.objects;n<s.length;){var r=s[n];++n,T.setParents(r)}var o=[[]];T.traverseBones(i.objects,function(e){return function(t){e[0].push(t)}}(o)),this.actions.push({name:i.name,bones:o[0],mats:null})}};(i["iron.data.Armature"]=T).__name__=!0,T.setParents=function(t){if(null!=t.children)for(var e=0,a=t.children;e<a.length;){var i=a[e];++e,i.parent=t,T.setParents(i)}},T.traverseBones=function(t,e){for(var a=0,i=t.length;a<i;){var n=a++;T.traverseBonesStep(t[n],e)}},T.traverseBonesStep=function(t,e){if("bone_object"==t.type&&e(t),null!=t.children)for(var a=0,i=t.children.length;a<i;){var n=a++;T.traverseBonesStep(t.children[n],e)}},T.prototype={name:null,actions:null,matsReady:null,initMats:function(){if(!this.matsReady){this.matsReady=!0;for(var t=0,e=this.actions;t<e.length;){var a=e[t];if(++t,null==a.mats){a.mats=[];for(var i=0,n=a.bones;i<n.length;){var s=n[i];++i;var r=s.transform.values;a.mats.push(new fa(r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8],r[9],r[10],r[11],r[12],r[13],r[14],r[15]))}}}}},getAction:function(t){for(var e=0,a=this.actions;e<a.length;){var i=a[e];if(++e,i.name==t)return i}return null},__class__:T};var R=function(){};(i["iron.data.Data"]=R).__name__=!0,R.getMesh=function(l,_,t){var h=l+_,e=R.cachedMeshes,a=null!=rs[h]?e.getReserved(h):e.h[h];if(null==a){var i=R.loadingMeshes,n=null!=rs[h]?i.getReserved(h):i.h[h];if(null==n){var s=R.loadingMeshes,r=l+_,o=[t];null!=rs[r]?s.setReserved(r,o):s.h[r]=o,it.parse(l,_,function(t){var e=R.cachedMeshes,a=l+_;null!=rs[a]?e.setReserved(a,t):e.h[a]=t,t.handle=h;for(var i=0,n=R.loadingMeshes,s=l+_,r=null!=rs[s]?n.getReserved(s):n.h[s];i<r.length;){var o=r[i];++i,o(t)}R.loadingMeshes.remove(l+_)})}else n.push(t)}else t(a)},R.getLight=function(l,_,t){var e=R.cachedLights,a=l+_,i=null!=rs[a]?e.getReserved(a):e.h[a];if(null==i){var n=R.loadingLights,s=l+_,r=null!=rs[s]?n.getReserved(s):n.h[s];if(null==r){var o=R.loadingLights,h=l+_,c=[t];null!=rs[h]?o.setReserved(h,c):o.h[h]=c,U.parse(l,_,function(t){var e=R.cachedLights,a=l+_;null!=rs[a]?e.setReserved(a,t):e.h[a]=t;for(var i=0,n=R.loadingLights,s=l+_,r=null!=rs[s]?n.getReserved(s):n.h[s];i<r.length;){var o=r[i];++i,o(t)}R.loadingLights.remove(l+_)})}else r.push(t)}else t(i)},R.getCamera=function(l,_,t){var e=R.cachedCameras,a=l+_,i=null!=rs[a]?e.getReserved(a):e.h[a];if(null==i){var n=R.loadingCameras,s=l+_,r=null!=rs[s]?n.getReserved(s):n.h[s];if(null==r){var o=R.loadingCameras,h=l+_,c=[t];null!=rs[h]?o.setReserved(h,c):o.h[h]=c,F.parse(l,_,function(t){var e=R.cachedCameras,a=l+_;null!=rs[a]?e.setReserved(a,t):e.h[a]=t;for(var i=0,n=R.loadingCameras,s=l+_,r=null!=rs[s]?n.getReserved(s):n.h[s];i<r.length;){var o=r[i];++i,o(t)}R.loadingCameras.remove(l+_)})}else r.push(t)}else t(i)},R.getMaterial=function(l,_,t){var e=R.cachedMaterials,a=l+_,i=null!=rs[a]?e.getReserved(a):e.h[a];if(null==i){var n=R.loadingMaterials,s=l+_,r=null!=rs[s]?n.getReserved(s):n.h[s];if(null==r){var o=R.loadingMaterials,h=l+_,c=[t];null!=rs[h]?o.setReserved(h,c):o.h[h]=c,Q.parse(l,_,function(t){var e=R.cachedMaterials,a=l+_;null!=rs[a]?e.setReserved(a,t):e.h[a]=t;for(var i=0,n=R.loadingMaterials,s=l+_,r=null!=rs[s]?n.getReserved(s):n.h[s];i<r.length;){var o=r[i];++i,o(t)}R.loadingMaterials.remove(l+_)})}else r.push(t)}else t(i)},R.getWorld=function(l,_,t){if(null!=_){var e=R.cachedWorlds,a=l+_,i=null!=rs[a]?e.getReserved(a):e.h[a];if(null==i){var n=R.loadingWorlds,s=l+_,r=null!=rs[s]?n.getReserved(s):n.h[s];if(null==r){var o=R.loadingWorlds,h=l+_,c=[t];null!=rs[h]?o.setReserved(h,c):o.h[h]=c,_o.parse(l,_,function(t){var e=R.cachedWorlds,a=l+_;null!=rs[a]?e.setReserved(a,t):e.h[a]=t;for(var i=0,n=R.loadingWorlds,s=l+_,r=null!=rs[s]?n.getReserved(s):n.h[s];i<r.length;){var o=r[i];++i,o(t)}R.loadingWorlds.remove(l+_)})}else r.push(t)}else t(i)}else t(null)},R.getShader=function(t,e,a,i){var r=e;null!=i&&(r+="2");var n=R.cachedShaders,s=null!=rs[r]?n.getReserved(r):n.h[r];if(null==s){var o=R.loadingShaders,l=null!=rs[r]?o.getReserved(r):o.h[r];if(null==l){var _=R.loadingShaders,h=[a];null!=rs[r]?_.setReserved(r,h):_.h[r]=h,ot.parse(t,e,function(t){var e=R.cachedShaders;null!=rs[r]?e.setReserved(r,t):e.h[r]=t;for(var a=0,i=R.loadingShaders,n=null!=rs[r]?i.getReserved(r):i.h[r];a<n.length;){var s=n[a];++a,s(t)}R.loadingShaders.remove(r)},i)}else l.push(a)}else a(s)},R.getSceneRaw=function(s,t){var e=R.cachedSceneRaws,a=null!=rs[s]?e.getReserved(s):e.h[s];if(null==a){var i=R.loadingSceneRaws,n=null!=rs[s]?i.getReserved(s):i.h[s];if(null==n){var r=R.loadingSceneRaws,o=[t];null!=rs[s]?r.setReserved(s,o):r.h[s]=o;var l=P.endsWith(s,".zip"),_=P.endsWith(s,".json"),h=l||_||P.endsWith(s,".arm")?"":".arm";R.getBlob(s+h,function(t){var e=null;if(_){var a=t.toString();if("{"==a.charAt(0))e=JSON.parse(a);else{var i=new st(t.toBytes());i.set_bigEndian(!0),e=Ct.read(i)}}else{var n=new st(t.toBytes());n.set_bigEndian(!0),e=Ct.read(n)}R.returnSceneRaw(s,e)})}else n.push(t)}else t(a)},R.returnSceneRaw=function(t,e){var a=R.cachedSceneRaws;null!=rs[t]?a.setReserved(t,e):a.h[t]=e;for(var i=0,n=R.loadingSceneRaws,s=null!=rs[t]?n.getReserved(t):n.h[t];i<s.length;){var r=s[i];++i,r(e)}R.loadingSceneRaws.remove(t)},R.getMeshRawByName=function(t,e){if(""==e)return t[0];for(var a=0;a<t.length;){var i=t[a];if(++a,i.name==e)return i}return null},R.getLightRawByName=function(t,e){if(""==e)return t[0];for(var a=0;a<t.length;){var i=t[a];if(++a,i.name==e)return i}return null},R.getCameraRawByName=function(t,e){if(""==e)return t[0];for(var a=0;a<t.length;){var i=t[a];if(++a,i.name==e)return i}return null},R.getMaterialRawByName=function(t,e){if(""==e)return t[0];for(var a=0;a<t.length;){var i=t[a];if(++a,i.name==e)return i}return null},R.getWorldRawByName=function(t,e){if(""==e)return t[0];for(var a=0;a<t.length;){var i=t[a];if(++a,i.name==e)return i}return null},R.getShaderRawByName=function(t,e){if(""==e)return t[0];for(var a=0;a<t.length;){var i=t[a];if(++a,i.name==e)return i}return null},R.getSpeakerRawByName=function(t,e){if(""==e)return t[0];for(var a=0;a<t.length;){var i=t[a];if(++a,i.name==e)return i}return null},R.getBlob=function(r,t){var e=R.cachedBlobs,a=null!=rs[r]?e.getReserved(r):e.h[r];if(null==a){var i=R.loadingBlobs,n=null!=rs[r]?i.getReserved(r):i.h[r];if(null==n){var s=R.loadingBlobs,o=[t];null!=rs[r]?s.setReserved(r,o):s.h[r]=o;var l="/"==r.charAt(0)||":"==r.charAt(1)?r:R.dataPath+r;jt.loadBlobFromPath(l,function(t){var e=R.cachedBlobs;null!=rs[r]?e.setReserved(r,t):e.h[r]=t;for(var a=0,i=R.loadingBlobs,n=null!=rs[r]?i.getReserved(r):i.h[r];a<n.length;){var s=n[a];++a,s(t)}R.loadingBlobs.remove(r),R.assetsLoaded++},null,{fileName:"Sources/iron/data/Data.hx",lineNumber:393,className:"iron.data.Data",methodName:"getBlob"})}else n.push(t)}else t(a)},R.getImage=function(r,t,e,a){null==a&&(a="RGBA32"),null==e&&(e=!1);var i=R.cachedImages,n=null!=rs[r]?i.getReserved(r):i.h[r];if(null==n){var s=R.loadingImages,o=null!=rs[r]?s.getReserved(r):s.h[r];if(null==o){var l=R.loadingImages,_=[t];null!=rs[r]?l.setReserved(r,_):l.h[r]=_;var h="/"==r.charAt(0)||":"==r.charAt(1)?r:R.dataPath+r;jt.loadImageFromPath(h,e,function(t){var e=R.cachedImages;null!=rs[r]?e.setReserved(r,t):e.h[r]=t;for(var a=0,i=R.loadingImages,n=null!=rs[r]?i.getReserved(r):i.h[r];a<n.length;){var s=n[a];++a,s(t)}R.loadingImages.remove(r),R.assetsLoaded++},null,{fileName:"Sources/iron/data/Data.hx",lineNumber:418,className:"iron.data.Data",methodName:"getImage"})}else o.push(t)}else t(n)},R.getSound=function(r,t){P.endsWith(r,".wav")&&(r=r.substring(0,r.length-4)+".ogg");var e=R.cachedSounds,a=null!=rs[r]?e.getReserved(r):e.h[r];if(null==a){var i=R.loadingSounds,n=null!=rs[r]?i.getReserved(r):i.h[r];if(null==n){var s=R.loadingSounds,o=[t];null!=rs[r]?s.setReserved(r,o):s.h[r]=o;var l="/"==r.charAt(0)||":"==r.charAt(1)?r:R.dataPath+r;jt.loadSoundFromPath(l,function(s){s.uncompress(function(){var t=R.cachedSounds;null!=rs[r]?t.setReserved(r,s):t.h[r]=s;for(var e=0,a=R.loadingSounds,i=null!=rs[r]?a.getReserved(r):a.h[r];e<i.length;){var n=i[e];++e,n(s)}R.loadingSounds.remove(r),R.assetsLoaded++})},null,{fileName:"Sources/iron/data/Data.hx",lineNumber:453,className:"iron.data.Data",methodName:"getSound"})}else n.push(t)}else t(a)},R.prototype={__class__:R};var F=function(t,e,a){null==a&&(a=""),this.renderTarget=null,R.call(this),this.raw=t,this.name=t.name,t.render_to_texture&&(this.renderTarget=Ft.createRenderTarget(t.texture_resolution_x,t.texture_resolution_y,Xa.RGBA32,0)),e(this)};(i["iron.data.CameraData"]=F).__name__=!0,F.parse=function(a,i,n){R.getSceneRaw(a,function(t){var e=R.getCameraRawByName(t.camera_datas,i);null==e&&(Oe.trace('Camera data "'+i+'" not found!',{fileName:"Sources/iron/data/CameraData.hx",lineNumber:30,className:"iron.data.CameraData",methodName:"parse"}),n(null)),new F(e,n,a)})},F.__super__=R,F.prototype=s(R.prototype,{name:null,raw:null,renderTarget:null,__class__:F});var O=function(){};(i["iron.data.ConstData"]=O).__name__=!0,O.createScreenAlignedData=function(){var t=[-1,-1,3,-1,-1,3],e=[0,1,2],a=new Ha;a.add("pos",1),O.screenAlignedVB=new Ka(t.length/(a.byteSize()/4|0)|0,a,Da.StaticUsage);for(var i=O.screenAlignedVB.lock(),n=0,s=i.length;n<s;){var r=n++;i[r]=t[r]}O.screenAlignedVB.unlock(),O.screenAlignedIB=new xa(e.length,Da.StaticUsage);for(var o=O.screenAlignedIB.lock(),l=0,_=o.length;l<_;){var h=l++;o[h]=e[h]}O.screenAlignedIB.unlock()};var E=function(t,e,a,i,n,s,r,o,l,_,h,c,g){this.mats=null,this.actions=null,this.skeletonBoneLens=null,this.skeletonBoneRefs=null,this.skeletonTransformsI=null,this.skinBoneWeights=null,this.skinBoneIndices=null,this.skinBoneCounts=null,this.instanceCount=0,this.instanced=!1,this.instancedVB=null,this.numTris=0,this.ready=!1,this.name="",this.count=-1,this.start=0,this.vertexBufferMap=new et,null==h&&(h=Da.StaticUsage),this.indices=t,this.materialIndices=e,this.usage=h,this.positions=a,this.normals=i,this.uvs=n,this.uvs1=s,this.cols=r,this.tangents=o,this.bones=l,this.weights=_,this.instancedData=c,this.instancedType=g,this.struct=E.getVertexStructure(null!=a,null!=i,null!=n,null!=s,null!=r,null!=o,null!=l,null!=_),this.structLength=this.struct.byteSize()/4|0,this.structStr="";for(var u=0,f=this.struct.elements;u<f.length;){var d=f[u];++u,this.structStr+=d.name}};(i["iron.data.Geometry"]=E).__name__=!0,E.getVertexStructure=function(t,e,a,i,n,s,r,o){null==o&&(o=!1),null==r&&(r=!1),null==s&&(s=!1),null==n&&(n=!1),null==i&&(i=!1),null==a&&(a=!1),null==e&&(e=!1),null==t&&(t=!1);var l=new Ha;return t&&l.add("pos",2),e&&l.add("nor",2),a&&l.add("tex",1),i&&l.add("tex1",1),n&&l.add("col",2),s&&l.add("tang",2),r&&l.add("bone",3),o&&l.add("weight",3),l},E.buildVertices=function(t,e,a,i,n,s,r,o,l,_,h){null==h&&(h=!1),null==_&&(_=0);for(var c=-1+_,g=0,u=e.length/3|0;g<u;){var f=g++;t[++c]=e[3*f],t[++c]=e[3*f+1],t[++c]=e[3*f+2],null!=a&&(t[++c]=a[3*f],t[++c]=a[3*f+1],t[++c]=a[3*f+2]),null!=i?(t[++c]=i[2*f],t[++c]=i[2*f+1]):h&&(t[++c]=0,t[++c]=0),null!=n&&(t[++c]=n[2*f],t[++c]=n[2*f+1]),null!=s&&(t[++c]=s[3*f],t[++c]=s[3*f+1],t[++c]=s[3*f+2]),null!=r&&(t[++c]=r[3*f],t[++c]=r[3*f+1],t[++c]=r[3*f+2]),null!=o&&(t[++c]=o[4*f],t[++c]=o[4*f+1],t[++c]=o[4*f+2],t[++c]=o[4*f+3]),null!=l&&(t[++c]=l[4*f],t[++c]=l[4*f+1],t[++c]=l[4*f+2],t[++c]=l[4*f+3])}},E.prototype={vertexBuffer:null,vertexBufferMap:null,indexBuffers:null,start:null,count:null,name:null,ready:null,vertices:null,indices:null,numTris:null,materialIndices:null,struct:null,structLength:null,structStr:null,usage:null,instancedVB:null,instanced:null,instanceCount:null,positions:null,normals:null,uvs:null,uvs1:null,cols:null,tangents:null,bones:null,weights:null,instancedData:null,instancedType:null,skinBoneCounts:null,skinBoneIndices:null,skinBoneWeights:null,skeletonTransformsI:null,skeletonBoneRefs:null,skeletonBoneLens:null,actions:null,mats:null,setupInstanced:function(t,e,a){this.instanced=!0,this.instanceCount=t.length/3|0;var i=new Ha;i.instanced=!0,i.add("ipos",2),2!=e&&4!=e||i.add("irot",2),3!=e&&4!=e||i.add("iscl",2),this.instancedVB=new Ka(this.instanceCount,i,a,1);for(var n=this.instancedVB.lock(),s=0,r=n.length;s<r;){var o=s++;n[o]=t[o]}this.instancedVB.unlock()},hasAttrib:function(t,e){for(var a=0;a<e.length;){var i=e[a];if(++a,i.name==t)return!0}return!1},get:function(t){for(var e="",a=0;a<t.length;){var i=t[a];++a,e+=i.name}var n=this.vertexBufferMap,s=null!=rs[e]?n.getReserved(e):n.h[e];if(null==s){var r=this.hasAttrib("pos",t),o=this.hasAttrib("nor",t),l=this.hasAttrib("tex",t),_=this.hasAttrib("tex1",t),h=this.hasAttrib("col",t),c=this.hasAttrib("tang",t),g=this.hasAttrib("bone",t),u=this.hasAttrib("weight",t),f=E.getVertexStructure(r,o,l,_,h,c,g,u);s=new Ka(this.positions.length/3|0,f,this.usage),this.vertices=s.lock(),E.buildVertices(this.vertices,r?this.positions:null,o?this.normals:null,l?this.uvs:null,_?this.uvs1:null,h?this.cols:null,c?this.tangents:null,g?this.bones:null,u?this.weights:null,0,l&&null==this.uvs),s.unlock();var d=this.vertexBufferMap;null!=rs[e]?d.setReserved(e,s):d.h[e]=s,l&&null==this.uvs&&Oe.trace("Armory Warning: Geometry "+this.name+" is missing UV map",{fileName:"Sources/iron/data/Geometry.hx",lineNumber:320,className:"iron.data.Geometry",methodName:"get"}),h&&null==this.cols&&Oe.trace("Armory Warning: Geometry "+this.name+" is missing vertex colors",{fileName:"Sources/iron/data/Geometry.hx",lineNumber:321,className:"iron.data.Geometry",methodName:"get"})}return s},build:function(){if(!this.ready){this.vertexBuffer=new Ka(this.positions.length/3|0,this.struct,this.usage),this.vertices=this.vertexBuffer.lock(),E.buildVertices(this.vertices,this.positions,this.normals,this.uvs,this.uvs1,this.cols,this.tangents,this.bones,this.weights),this.vertexBuffer.unlock();var t=this.structStr,e=this.vertexBuffer,a=this.vertexBufferMap;null!=rs[t]?a.setReserved(t,e):a.h[t]=e,this.indexBuffers=[];for(var i=0,n=this.indices;i<n.length;){var s=n[i];if(++i,0!=s.length){var r=new xa(s.length,this.usage);this.numTris+=s.length/3|0,r._data=s,r.unlock(),this.indexBuffers.push(r)}}null!=this.instancedData&&this.setupInstanced(this.instancedData,this.instancedType,this.usage),this.ready=!0}},addArmature:function(t){for(var e=0,a=t.actions;e<a.length;){var i=a[e];++e,this.addAction(i.bones,i.name)}},addAction:function(t,e){if(null!=t){null==this.actions&&(this.actions=new et,this.mats=new et);var a=this.actions;if(null==(null!=rs[e]?a.getReserved(e):a.h[e])){for(var i=[],n=0,s=this.skeletonBoneRefs;n<s.length;){var r=s[n];++n;for(var o=0;o<t.length;){var l=t[o];++o,l.name==r&&i.push(l)}}var _=this.actions;null!=rs[e]?_.setReserved(e,i):_.h[e]=i;for(var h=[],c=0;c<i.length;){var g=i[c];++c;var u=g.transform.values;h.push(new fa(u[0],u[1],u[2],u[3],u[4],u[5],u[6],u[7],u[8],u[9],u[10],u[11],u[12],u[13],u[14],u[15]))}var f=this.mats;null!=rs[e]?f.setReserved(e,h):f.h[e]=h}}},initSkeletonTransforms:function(t){this.skeletonTransformsI=[];for(var e=0;e<t.length;){var a=t[e];++e;var i=new fa(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15]);this.skeletonTransformsI.push(i)}},__class__:E};var U=function(t,e){this.colorTexture=null;var a=this;R.call(this),this.raw=t,this.name=t.name,null!=t.color_texture?R.getImage(t.color_texture,function(t){a.colorTexture=t,e(a)}):e(this)};(i["iron.data.LightData"]=U).__name__=!0,U.parse=function(t,a,i){R.getSceneRaw(t,function(t){var e=R.getLightRawByName(t.light_datas,a);null==e&&(Oe.trace('Light data "'+a+'" not found!',{fileName:"Sources/iron/data/LightData.hx",lineNumber:42,className:"iron.data.LightData",methodName:"parse"}),i(null)),new U(e,i)})},U.__super__=R,U.prototype=s(R.prototype,{name:null,raw:null,colorTexture:null,__class__:U});var Q=function(r,o,t){null==t&&(t=""),this.contexts=null;var l=this;R.call(this),this.uid=++Q.uidCounter,this.raw=r,this.name=r.name;var e=r.shader.split("/"),a="",i="";2==e.length?(a=e[0],i=e[1]):(a=t,i=r.shader),R.getShader(a,i,function(t){for(l.shader=t,l.contexts=[];l.contexts.length<r.contexts.length;)l.contexts.push(null);for(var a=0,e=0,i=r.contexts.length;e<i;){var n=[e++],s=r.contexts[n[0]];new at(s,function(e){return function(t){l.contexts[e[0]]=t,(a+=1)==r.contexts.length&&o(l)}}(n))}},r.override_context)};(i["iron.data.MaterialData"]=Q).__name__=!0,Q.parse=function(a,i,n){R.getSceneRaw(a,function(t){var e=R.getMaterialRawByName(t.material_datas,i);null==e&&(Oe.trace('Material data "'+i+'" not found!',{fileName:"Sources/iron/data/MaterialData.hx",lineNumber:60,className:"iron.data.MaterialData",methodName:"parse"}),n(null)),new Q(e,n,a)})},Q.__super__=R,Q.prototype=s(R.prototype,{uid:null,name:null,raw:null,shader:null,contexts:null,getContext:function(t){for(var e=0,a=this.contexts;e<a.length;){var i=a[e];if(++e,q.substr(i.raw.name,0,t.length)==t)return i}return null},__class__:Q});var at=function(_,h){this.id=0,this.textures=null;var c=this;if(this.raw=_,this.id=at.num++,null!=_.bind_textures&&0<_.bind_textures.length){var t=new Array(_.bind_textures.length);this.textures=t;for(var g=0,e=0,a=_.bind_textures.length;e<a;){var i=[e++],n=[_.bind_textures[i[0]]];""!=n[0].file?R.getImage(n[0].file,function(o,l){return function(i){if(c.textures[l[0]]=i,g+=1,null!=o[0].mipmaps){for(var n=[];n.length<o[0].mipmaps.length;)n.push(null);for(var s=0,t=0,e=o[0].mipmaps.length;t<e;){var a=[t++],r=o[0].mipmaps[a[0]];R.getImage(r,function(e,a){return function(t){n[e[0]]=t,(s+=1)==a[0].mipmaps.length&&(i.setMipmaps(n),a[0].mipmaps=null,a[0].generate_mipmaps=!1,g==_.bind_textures.length&&h(c))}}(a,o))}}else 1==o[0].generate_mipmaps&&null!=i&&(i.generateMipmaps(1e3),o[0].mipmaps=null,o[0].generate_mipmaps=!1),g==_.bind_textures.length&&h(c)}}(n,i),!1,null!=n[0].format?n[0].format:"RGBA32"):(g+=1)==_.bind_textures.length&&h(this)}}else h(this)};(i["iron.data.MaterialContext"]=at).__name__=!0,at.prototype={raw:null,textures:null,id:null,setTextureParameters:function(t,e,a,i){a.setTextureParameters(t,i,this.raw.bind_textures[e])},__class__:at};var it=function(t,e){this.refcount=0,R.call(this),this.raw=t,this.name=t.name;for(var a=[],i=[],n=0,s=t.index_arrays;n<s.length;){var r=s[n];++n,a.push(r.values),i.push(r.material)}var o=this.getVertexArrayValues("pos"),l=this.getVertexArrayValues("nor"),_=this.getVertexArrayValues("tex"),h=this.getVertexArrayValues("tex1"),c=this.getVertexArrayValues("col"),g=this.getVertexArrayValues("tang");this.isSkinned=null!=t.skin;var u=Da.StaticUsage;null!=t.dynamic_usage&&1==t.dynamic_usage&&(u=Da.DynamicUsage);var f=u,d=null,b=null;if(this.isSkinned){var p=4*(o.length/3|0);d=new _s(p),b=new _s(p);for(var m=0,I=0,v=0,M=o.length/3|0;v<M;){for(var C=v++,y=t.skin.bone_count_array[C],w=m,A=m+y;w<A;){var x=w++;d[I]=t.skin.bone_index_array[x],b[I]=t.skin.bone_weight_array[x],++I}for(var Z=y;Z<4;){Z++;d[I]=0,b[I]=0,++I}m+=y}}this.geom=new E(a,i,o,l,_,h,c,g,d,b,f,t.instanced_data,t.instanced_type),this.geom.name=this.name,e(this)};(i["iron.data.MeshData"]=it).__name__=!0,it.parse=function(t,i,n){R.getSceneRaw(t,function(e){var a=R.getMeshRawByName(e.mesh_datas,i);null==a&&(Oe.trace('Mesh data "'+i+'" not found!',{fileName:"Sources/iron/data/MeshData.hx",lineNumber:104,className:"iron.data.MeshData",methodName:"parse"}),n(null)),new it(a,function(t){t.format=e,null!=a.skin&&(t.geom.skinBoneCounts=a.skin.bone_count_array,t.geom.skinBoneIndices=a.skin.bone_index_array,t.geom.skinBoneWeights=a.skin.bone_weight_array,t.geom.skeletonBoneRefs=a.skin.bone_ref_array,t.geom.skeletonBoneLens=a.skin.bone_len_array,t.geom.initSkeletonTransforms(a.skin.transformsI)),n(t)})})},it.__super__=R,it.prototype=s(R.prototype,{name:null,raw:null,format:null,geom:null,refcount:null,handle:null,isSkinned:null,getVertexArrayValues:function(t){for(var e=0,a=this.raw.vertex_arrays;e<a.length;){var i=a[e];if(++e,i.attrib==t)return i.values}return null},__class__:it});var ot=function(a,i,t){this.contexts=[];var n=this;R.call(this),this.raw=a,this.name=a.name;for(var e=0,s=a.contexts;e<s.length;){s[e];++e,this.contexts.push(null)}for(var r=0,o=0,l=a.contexts.length;o<l;){var _=[o++],h=a.contexts[_[0]];new lt(h,function(e){return function(t){n.contexts[e[0]]=t,(r+=1)==a.contexts.length&&i(n)}}(_),t)}};(i["iron.data.ShaderData"]=ot).__name__=!0,ot.parse=function(t,a,i,n){R.getSceneRaw(t,function(t){var e=R.getShaderRawByName(t.shader_datas,a);null==e&&(Oe.trace('Shader data "'+a+'" not found!',{fileName:"Sources/iron/data/ShaderData.hx",lineNumber:49,className:"iron.data.ShaderData",methodName:"parse"}),i(null)),new ot(e,i,n)})},ot.__super__=R,ot.prototype=s(R.prototype,{name:null,raw:null,contexts:null,getContext:function(t){for(var e=0,a=this.contexts;e<a.length;){var i=a[e];if(++e,i.raw.name==t)return i}return null},__class__:ot});var lt=function(t,e,a){this.instancingType=0,this.raw=t,this.overrideContext=a,"rect"==t.name?(this.structure=lt.getStructureRect(),this.instancingType=0):this.parseVertexStructure(),this.compile(e)};(i["iron.data.ShaderContext"]=lt).__name__=!0,lt.getStructureRect=function(){return null==lt.structureRect&&(lt.structureRect=new Ha,lt.structureRect.add("pos",1)),lt.structureRect},lt.prototype={raw:null,pipeState:null,constants:null,textureUnits:null,paramsSet:null,structure:null,instancingType:null,overrideContext:null,compile:function(t){if(null!=this.pipeState&&this.pipeState.delete(),this.pipeState=new Ba,this.constants=[],this.textureUnits=[],this.paramsSet=[],0<this.instancingType){var e=new Ha;e.add("ipos",2),2!=this.instancingType&&4!=this.instancingType||e.add("irot",2),3!=this.instancingType&&4!=this.instancingType||e.add("iscl",2),e.instanced=!0,this.pipeState.inputLayout=[this.structure,e]}else this.pipeState.inputLayout=[this.structure];if(this.pipeState.depthWrite=this.raw.depth_write,this.pipeState.depthMode=this.getCompareMode(this.raw.compare_mode),null!=this.raw.stencil_mode&&("always"==this.raw.stencil_mode?this.pipeState.stencilMode=da.Always:"equal"==this.raw.stencil_mode?this.pipeState.stencilMode=da.Equal:"not_equal"==this.raw.stencil_mode&&(this.pipeState.stencilMode=da.NotEqual)),null!=this.raw.stencil_pass&&("replace"==this.raw.stencil_pass?this.pipeState.stencilBothPass=Na.Replace:"keep"==this.raw.stencil_pass&&(this.pipeState.stencilBothPass=Na.Keep)),null!=this.raw.stencil_fail&&"keep"==this.raw.stencil_fail&&(this.pipeState.stencilDepthFail=Na.Keep,this.pipeState.stencilFail=Na.Keep),null!=this.raw.stencil_reference_value&&(this.pipeState.stencilReferenceValue=this.raw.stencil_reference_value),this.pipeState.cullMode=this.getCullMode(this.raw.cull_mode),null!=this.raw.blend_source&&(this.pipeState.blendSource=this.getBlendingFactor(this.raw.blend_source)),null!=this.raw.blend_destination&&(this.pipeState.blendDestination=this.getBlendingFactor(this.raw.blend_destination)),null!=this.raw.blend_operation&&(this.pipeState.blendOperation=this.getBlendingOperation(this.raw.blend_operation)),null!=this.raw.alpha_blend_source&&(this.pipeState.alphaBlendSource=this.getBlendingFactor(this.raw.alpha_blend_source)),null!=this.raw.alpha_blend_destination&&(this.pipeState.alphaBlendDestination=this.getBlendingFactor(this.raw.alpha_blend_destination)),null!=this.raw.alpha_blend_operation&&(this.pipeState.alphaBlendOperation=this.getBlendingOperation(this.raw.alpha_blend_operation)),null!=this.raw.color_write_red&&(this.pipeState.colorWriteMaskRed=this.raw.color_write_red),null!=this.raw.color_write_green&&(this.pipeState.colorWriteMaskGreen=this.raw.color_write_green),null!=this.raw.color_write_blue&&(this.pipeState.colorWriteMaskBlue=this.raw.color_write_blue),null!=this.raw.color_write_alpha&&(this.pipeState.colorWriteMaskAlpha=this.raw.color_write_alpha),null!=this.raw.conservative_raster&&(this.pipeState.conservativeRasterization=this.raw.conservative_raster),this.raw.shader_from_source)this.pipeState.fragmentShader=Ia.fromSource(this.raw.fragment_shader),this.pipeState.vertexShader=Va.fromSource(this.raw.vertex_shader),this.finishCompile(t);else{var a=P.replace(this.raw.fragment_shader,".","_");this.pipeState.fragmentShader=Ze.field(Ne,a);var i=P.replace(this.raw.vertex_shader,".","_");if(this.pipeState.vertexShader=Ze.field(Ne,i),null!=this.raw.geometry_shader){var n=P.replace(this.raw.geometry_shader,".","_");this.pipeState.geometryShader=Ze.field(Ne,n)}if(null!=this.raw.tesscontrol_shader){var s=P.replace(this.raw.tesscontrol_shader,".","_");this.pipeState.tessellationControlShader=Ze.field(Ne,s)}if(null!=this.raw.tesseval_shader){var r=P.replace(this.raw.tesseval_shader,".","_");this.pipeState.tessellationEvaluationShader=Ze.field(Ne,r)}this.finishCompile(t)}},finishCompile:function(t){if(null!=this.overrideContext&&null!=this.overrideContext.cull_mode&&(this.pipeState.cullMode=this.getCullMode(this.overrideContext.cull_mode)),this.pipeState.compile(),null!=this.raw.constants)for(var e=0,a=this.raw.constants;e<a.length;){var i=a[e];++e,this.addConstant(i)}if(null!=this.raw.texture_units)for(var n=0,s=this.raw.texture_units;n<s.length;){var r=s[n];++n,this.addTexture(r)}t(this)},sizeToVD:function(t){return 1==t?0:2==t?1:3==t?2:4==t?3:0},parseVertexStructure:function(){this.structure=new Ha;for(var t=!1,e=0,a=this.raw.vertex_structure;e<a.length;){var i=a[e];++e,"ipos"!=i.name?"irot"!=i.name&&"iscl"!=i.name?this.structure.add(i.name,this.sizeToVD(i.size)):t=!0:t=!0}t&&(this.instancingType=1)},getCompareMode:function(t){switch(t){case"always":return da.Always;case"equal":return da.Equal;case"greater":return da.Greater;case"greater_equal":return da.GreaterEqual;case"less":return da.Less;case"less_equal":return da.LessEqual;case"never":return da.Never;case"not_equal":return da.NotEqual;default:return da.Less}},getCullMode:function(t){switch(t){case"clockwise":return ma.Clockwise;case"none":return ma.None;default:return ma.CounterClockwise}},getBlendingOperation:function(t){switch(t){case"add":return ua.Add;case"max":return ua.Max;case"min":return ua.Min;case"reverse_subtract":return ua.ReverseSubtract;case"subtract":return ua.Subtract;default:return ua.Add}},getBlendingFactor:function(t){switch(t){case"blend_one":return ga.BlendOne;case"blend_zero":return ga.BlendZero;case"destination_alpha":return ga.DestinationAlpha;case"destination_color":return ga.DestinationColor;case"inverse_destination_alpha":return ga.InverseDestinationAlpha;case"inverse_destination_color":return ga.InverseDestinationColor;case"inverse_source_alpha":return ga.InverseSourceAlpha;case"inverse_source_color":return ga.InverseSourceColor;case"source_alpha":return ga.SourceAlpha;case"source_color":return ga.SourceColor;default:return ga.Undefined}},getTextureAddresing:function(t){switch(t){case"mirror":return Sa.Mirror;case"repeat":return Sa.Repeat;default:return Sa.Clamp}},getTextureFilter:function(t){switch(t){case"linear":return Wa.LinearFilter;case"point":return Wa.PointFilter;default:return Wa.AnisotropicFilter}},getMipmapFilter:function(t){switch(t){case"no":return Za.NoMipFilter;case"point":return Za.PointMipFilter;default:return Za.LinearMipFilter}},addConstant:function(t){this.constants.push(this.pipeState.getConstantLocation(t.name))},addTexture:function(t){var e=this.pipeState.getTextureUnit(t.name);this.textureUnits.push(e),this.paramsSet.push(!1)},setTextureParameters:function(t,e,a){var i=this.textureUnits[e];t.setTextureParameters(i,null==a.u_addressing?Sa.Repeat:this.getTextureAddresing(a.u_addressing),null==a.v_addressing?Sa.Repeat:this.getTextureAddresing(a.v_addressing),null==a.min_filter?Wa.LinearFilter:this.getTextureFilter(a.min_filter),null==a.mag_filter?Wa.LinearFilter:this.getTextureFilter(a.mag_filter),null==a.mipmap_filter?Za.NoMipFilter:this.getMipmapFilter(a.mipmap_filter))},__class__:lt};var _o=function(e,a){this.vec=new ho,this.shirr=null;var i=this;if(R.call(this),this.raw=e,this.name=e.name,null!=e.probes&&0<e.probes.length){this.probes=[];for(var t=0,n=e.probes;t<n.length;){var s=n[t];++t,new _t(s,function(t){i.probes.push(t),i.probes.length==e.probes.length&&i.loadEnvmap(a)})}}else this.loadEnvmap(a)};(i["iron.data.WorldData"]=_o).__name__=!0,_o.parse=function(t,a,i){R.getSceneRaw(t,function(t){var e=R.getWorldRawByName(t.world_datas,a);null==e&&(Oe.trace('World data "'+a+'" not found!',{fileName:"Sources/iron/data/WorldData.hx",lineNumber:51,className:"iron.data.WorldData",methodName:"parse"}),i(null)),new _o(e,i)})},_o.getEmptyIrradiance=function(){if(null==_o.emptyIrr){var t=new _s(28);_o.emptyIrr=t;for(var e=0,a=_o.emptyIrr.length;e<a;){var i=e++;_o.emptyIrr[i]=0}}return _o.emptyIrr},_o.__super__=R,_o.prototype=s(R.prototype,{name:null,raw:null,envmap:null,probes:null,loadEnvmap:function(e){var a=this;null!=this.raw.envmap?R.getImage(this.raw.envmap,function(t){a.envmap=t,e(a)}):e(this)},getGlobalProbe:function(){return this.probes[0]},shirr:null,getSHIrradiance:function(){if(null==this.shirr){var t=new _s(28);this.shirr=t;for(var e=this.probes[0],a=0,i=e.irradiance.length;a<i;){var n=a++;this.shirr[n]=e.irradiance[n]}}return this.shirr},vec:null,getProbeID:function(t){this.vec.x=t.world.self._30,this.vec.y=t.world.self._31,this.vec.z=t.world.self._32;for(var e=t.dim,a=1,i=this.probes.length;a<i;){var n=a++,s=this.probes[n];if(!(this.vec.x+e.x/2<s.volumeMin.x||this.vec.x-e.x/2>s.volumeMax.x||this.vec.y+e.y/2<s.volumeMin.y||this.vec.y-e.y/2>s.volumeMax.y||this.vec.z+e.z/2<s.volumeMin.z||this.vec.z-e.z/2>s.volumeMax.z))return n}return 0},getProbeVolumeCenter:function(t){return this.probes[this.getProbeID(t)].volumeCenter},getProbeVolumeSize:function(t){return this.probes[this.getProbeID(t)].volume},getProbeStrength:function(t){return this.probes[this.getProbeID(t)].raw.strength},getProbeBlending:function(t){return this.probes[this.getProbeID(t)].raw.blending},__class__:_o});var _t=function(l,_){var h=this;this.raw=l,this.setIrradiance(function(t){h.irradiance=t,null!=l.radiance?R.getImage(l.radiance,function(t){h.radiance=t;for(var a=[];a.length<l.radiance_mipmaps;)a.push(null);for(var e=l.radiance.substring(l.radiance.length-4),i=l.radiance.substring(0,l.radiance.length-4),n=0,s=0,r=l.radiance_mipmaps;s<r;){var o=[s++];R.getImage(i+"_"+o[0]+e,function(e){return function(t){a[e[0]]=t,(n+=1)==l.radiance_mipmaps&&(h.radiance.setMipmaps(a),h.mipsSet(_))}}(o),!0)}}):h.mipsSet(_)})};(i["iron.data.Probe"]=_t).__name__=!0,_t.prototype={raw:null,radiance:null,irradiance:null,volume:null,volumeCenter:null,volumeMin:null,volumeMax:null,mipsSet:function(t){this.volume=new ho(this.raw.volume[0],this.raw.volume[1],this.raw.volume[2]),this.volumeCenter=new ho(this.raw.volume_center[0],this.raw.volume_center[1],this.raw.volume_center[2]),this.volumeMin=new ho(this.volumeCenter.x-this.volume.x,this.volumeCenter.y-this.volume.y,this.volumeCenter.z-this.volume.z),this.volumeMax=new ho(this.volumeCenter.x+this.volume.x,this.volumeCenter.y+this.volume.y,this.volumeCenter.z+this.volume.z),t(this)},setIrradiance:function(r){if(""==this.raw.irradiance){for(var t=[.775966,1.16761,1.498638,.133694,.215281,.056659,-.022268,-.019376,-.010651,279e-6,185e-6,0,0,-393e-6,-775e-6,.010973,.027268,.043918,.085267,.07367,.038877,0,0,0,.135177,.115614,.060794],e=new _s(t.length),a=0,i=e.length;a<i;){var n=a++;e[n]=t[n]}r(e)}else{var o=P.endsWith(this.raw.irradiance,".json")?"":".arm";R.getBlob(this.raw.irradiance+o,function(t){var e;if(""==o)e=JSON.parse(t.toString());else{var a=new st(t.toBytes());a.set_bigEndian(!0),e=Ct.read(a)}for(var i=new _s(28),n=0;n<27;){var s=n++;i[s]=e.irradiance[s]}i[27]=0,r(i)})}},__class__:_t};var ht=function(t,e,a,i,n,s,r,o,l){this.self=new Mt(t,e,a,i,n,s,r,o,l)};(i["iron.math.Mat3"]=ht).__name__=!0,ht.prototype={self:null,__class__:ht};var ct=function(t,e,a,i,n,s,r,o,l,_,h,c,g,u,f,d){this._00=t,this._10=e,this._20=a,this._30=i,this._01=n,this._11=s,this._21=r,this._31=o,this._02=l,this._12=_,this._22=h,this._32=c,this._03=g,this._13=u,this._23=f,this._33=d};(i["kha.math.FastMatrix4"]=ct).__name__=!0,ct.orthogonalProjection=function(t,e,a,i,n,s){return new ct(2/(e-t),0,0,-(e+t)/(e-t),0,2/(i-a),0,-(i+a)/(i-a),0,0,-2/(s-n),-(s+n)/(s-n),0,0,0,1)},ct.prototype={_00:null,_10:null,_20:null,_30:null,_01:null,_11:null,_21:null,_31:null,_02:null,_12:null,_22:null,_32:null,_03:null,_13:null,_23:null,_33:null,__class__:ct};var ho=function(t,e,a,i){null==i&&(i=1),null==a&&(a=0),null==e&&(e=0),null==t&&(t=0),this.x=t,this.y=e,this.z=a,this.w=i};(i["iron.math.Vec4"]=ho).__name__=!0,ho.prototype={x:null,y:null,z:null,w:null,__class__:ho};var fa=function(t,e,a,i,n,s,r,o,l,_,h,c,g,u,f,d){this.self=new ct(t,e,a,i,n,s,r,o,l,_,h,c,g,u,f,d)};(i["iron.math.Mat4"]=fa).__name__=!0,fa.prototype={self:null,__class__:fa};var gt=function(t,e,a,i){null==i&&(i=1),null==a&&(a=0),null==e&&(e=0),null==t&&(t=0),this.x=t,this.y=e,this.z=a,this.w=i};(i["iron.math.Quat"]=gt).__name__=!0,gt.prototype={x:null,y:null,z:null,w:null,__class__:gt};var Fe=function(){this.markerEvents=null,this.lastFrameIndex=-1,this.blendFactor=0,this.blendAction="",this.blendCurrent=0,this.blendTime=0,this.paused=!1,this.onComplete=null,this.frameIndex=0,this.loop=!0,this.speed=1,this.time=0,this.action="",h_.active.animations.push(this),this.frameTime=h_.active.raw.frame_time,this.play()};(i["iron.object.Animation"]=Fe).__name__=!0,Fe.prototype={isSkinned:null,isSampled:null,action:null,armature:null,time:null,speed:null,loop:null,frameIndex:null,onComplete:null,paused:null,frameTime:null,blendTime:null,blendCurrent:null,blendAction:null,blendFactor:null,lastFrameIndex:null,markerEvents:null,play:function(t,e,a,i,n){null==n&&(n=!0),null==i&&(i=1),null==a&&(a=0),null==t&&(t=""),0<a?(this.blendTime=a,this.blendCurrent=0,this.blendAction=this.action):this.frameIndex=-1,this.action=t,this.onComplete=e,this.speed=i,this.loop=n,this.paused=!1},remove:function(){q.remove(h_.active.animations,this)},update:function(t){this.paused||0==this.speed||(this.time+=t*this.speed,0<this.blendTime&&0==this.blendFactor&&(this.blendCurrent+=t,this.blendCurrent>=this.blendTime&&(this.blendTime=0)))},isTrackEnd:function(t){return 0<this.speed?this.frameIndex>=t.frames.length-1:this.frameIndex<=0},rewind:function(t){this.frameIndex=0<this.speed?0:t.frames.length-1,this.time=t.frames[this.frameIndex]*this.frameTime},updateTrack:function(t){if(null!=t){var e=t.tracks[0];-1==this.frameIndex&&this.rewind(e);for(var a=0<this.speed?1:-1;;){var i=e.frames;if(!(0<this.speed?this.frameIndex+1<i.length&&this.time>i[this.frameIndex+1]*this.frameTime:-1<this.frameIndex-1&&this.time<i[this.frameIndex-1]*this.frameTime))break;this.frameIndex+=a}if(null!=this.markerEvents&&null!=t.marker_names&&this.frameIndex!=this.lastFrameIndex){for(var n=0,s=t.marker_frames.length;n<s;){var r=n++;if(this.frameIndex==t.marker_frames[r])for(var o=t.marker_names[r],l=this.markerEvents,_=null!=rs[o]?l.getReserved(o):l.h[o],h=0;h<_.length;){var c=_[h];++h,c()}}this.lastFrameIndex=this.frameIndex}this.isTrackEnd(e)&&(this.loop||0<this.blendTime?this.rewind(e):(this.frameIndex-=a,this.paused=!0),null!=this.onComplete&&0==this.blendTime&&this.onComplete())}},updateAnimSampled:function(t,e){if(null!=t){var a=t.tracks[0],i=0<this.speed?1:-1,n=this.time,s=this.frameIndex,r=a.frames[s]*this.frameTime,o=(n-r)/(a.frames[s+i]*this.frameTime-r),l=Fe.m1,_=a.values,h=16*s;l.self._00=_[h],l.self._10=_[1+h],l.self._20=_[2+h],l.self._30=_[3+h],l.self._01=_[4+h],l.self._11=_[5+h],l.self._21=_[6+h],l.self._31=_[7+h],l.self._02=_[8+h],l.self._12=_[9+h],l.self._22=_[10+h],l.self._32=_[11+h],l.self._03=_[12+h],l.self._13=_[13+h],l.self._23=_[14+h],l.self._33=_[15+h];var c=Fe.m2,g=a.values,u=16*(s+i);c.self._00=g[u],c.self._10=g[1+u],c.self._20=g[2+u],c.self._30=g[3+u],c.self._01=g[4+u],c.self._11=g[5+u],c.self._21=g[6+u],c.self._31=g[7+u],c.self._02=g[8+u],c.self._12=g[9+u],c.self._22=g[10+u],c.self._32=g[11+u],c.self._03=g[12+u],c.self._13=g[13+u],c.self._23=g[14+u],c.self._33=g[15+u];var f=Fe.m1,d=Fe.vpos,b=Fe.q1,p=Fe.vscl;d.x=f.self._30,d.y=f.self._31,d.z=f.self._32;var m=fa.helpVec;m.x=f.self._00,m.y=f.self._01,m.z=f.self._02,m.w=1;var I=m;p.x=Math.sqrt(I.x*I.x+I.y*I.y+I.z*I.z);var v=fa.helpVec;v.x=f.self._10,v.y=f.self._11,v.z=f.self._12,v.w=1;var M=v;p.y=Math.sqrt(M.x*M.x+M.y*M.y+M.z*M.z);var C=fa.helpVec;C.x=f.self._20,C.y=f.self._21,C.z=f.self._22,C.w=1;var y=C;p.z=Math.sqrt(y.x*y.x+y.y*y.y+y.z*y.z);var w=f.self,A=w._12,x=w._22,Z=w._32,z=w._13,B=w._23,N=w._33,G=w._11*(x*N-Z*B)-w._21*(A*N-Z*z)+w._31*(A*B-x*z),k=w._12,S=w._22,W=w._32,X=w._13,Y=w._23,D=w._33,K=w._10*(S*D-W*Y)-w._20*(k*D-W*X)+w._30*(k*Y-S*X),L=w._11,V=w._21,H=w._31,j=w._13,T=w._23,R=w._33,F=w._10*(V*R-H*T)-w._20*(L*R-H*j)+w._30*(L*T-V*j),O=w._11,P=w._21,J=w._31,E=w._12,U=w._22,Q=w._32,q=w._10*(P*Q-J*U)-w._20*(O*Q-J*E)+w._30*(O*U-P*E);w._00*G-w._01*K+w._02*F-w._03*q<0&&(p.x=-p.x);var $=1/p.x;fa.helpMat.self._00=f.self._00*$,fa.helpMat.self._01=f.self._01*$,fa.helpMat.self._02=f.self._02*$,$=1/p.y,fa.helpMat.self._10=f.self._10*$,fa.helpMat.self._11=f.self._11*$,fa.helpMat.self._12=f.self._12*$,$=1/p.z,fa.helpMat.self._20=f.self._20*$,fa.helpMat.self._21=f.self._21*$,fa.helpMat.self._22=f.self._22*$;var tt=fa.helpMat,et=tt.self._00,at=tt.self._10,it=tt.self._20,nt=tt.self._01,st=tt.self._11,rt=tt.self._21,ot=tt.self._02,lt=tt.self._12,_t=tt.self._22,ht=et+st+_t,ct=0;0<ht?(ct=.5/Math.sqrt(ht+1),b.w=.25/ct,b.x=(lt-rt)*ct,b.y=(it-ot)*ct,b.z=(nt-at)*ct):st<et&&_t<et?(ct=2*Math.sqrt(1+et-st-_t),b.w=(lt-rt)/ct,b.x=.25*ct,b.y=(at+nt)/ct,b.z=(it+ot)/ct):_t<st?(ct=2*Math.sqrt(1+st-et-_t),b.w=(it-ot)/ct,b.x=(at+nt)/ct,b.y=.25*ct,b.z=(rt+lt)/ct):(ct=2*Math.sqrt(1+_t-et-st),b.w=(nt-at)/ct,b.x=(it+ot)/ct,b.y=(rt+lt)/ct,b.z=.25*ct);var gt=Fe.m2,ut=Fe.vpos2,ft=Fe.q2,dt=Fe.vscl2;ut.x=gt.self._30,ut.y=gt.self._31,ut.z=gt.self._32;var bt=fa.helpVec;bt.x=gt.self._00,bt.y=gt.self._01,bt.z=gt.self._02,bt.w=1;var pt=bt;dt.x=Math.sqrt(pt.x*pt.x+pt.y*pt.y+pt.z*pt.z);var mt=fa.helpVec;mt.x=gt.self._10,mt.y=gt.self._11,mt.z=gt.self._12,mt.w=1;var It=mt;dt.y=Math.sqrt(It.x*It.x+It.y*It.y+It.z*It.z);var vt=fa.helpVec;vt.x=gt.self._20,vt.y=gt.self._21,vt.z=gt.self._22,vt.w=1;var Mt=vt;dt.z=Math.sqrt(Mt.x*Mt.x+Mt.y*Mt.y+Mt.z*Mt.z);var Ct=gt.self,yt=Ct._12,wt=Ct._22,At=Ct._32,xt=Ct._13,Zt=Ct._23,zt=Ct._33,Bt=Ct._11*(wt*zt-At*Zt)-Ct._21*(yt*zt-At*xt)+Ct._31*(yt*Zt-wt*xt),Nt=Ct._12,Gt=Ct._22,kt=Ct._32,St=Ct._13,Wt=Ct._23,Xt=Ct._33,Yt=Ct._10*(Gt*Xt-kt*Wt)-Ct._20*(Nt*Xt-kt*St)+Ct._30*(Nt*Wt-Gt*St),Dt=Ct._11,Kt=Ct._21,Lt=Ct._31,Vt=Ct._13,Ht=Ct._23,jt=Ct._33,Tt=Ct._10*(Kt*jt-Lt*Ht)-Ct._20*(Dt*jt-Lt*Vt)+Ct._30*(Dt*Ht-Kt*Vt),Rt=Ct._11,Ft=Ct._21,Ot=Ct._31,Pt=Ct._12,Jt=Ct._22,Et=Ct._32,Ut=Ct._10*(Ft*Et-Ot*Jt)-Ct._20*(Rt*Et-Ot*Pt)+Ct._30*(Rt*Jt-Ft*Pt);Ct._00*Bt-Ct._01*Yt+Ct._02*Tt-Ct._03*Ut<0&&(dt.x=-dt.x);var Qt=1/dt.x;fa.helpMat.self._00=gt.self._00*Qt,fa.helpMat.self._01=gt.self._01*Qt,fa.helpMat.self._02=gt.self._02*Qt,Qt=1/dt.y,fa.helpMat.self._10=gt.self._10*Qt,fa.helpMat.self._11=gt.self._11*Qt,fa.helpMat.self._12=gt.self._12*Qt,Qt=1/dt.z,fa.helpMat.self._20=gt.self._20*Qt,fa.helpMat.self._21=gt.self._21*Qt,fa.helpMat.self._22=gt.self._22*Qt;var qt=fa.helpMat,$t=qt.self._00,te=qt.self._10,ee=qt.self._20,ae=qt.self._01,ie=qt.self._11,ne=qt.self._21,se=qt.self._02,re=qt.self._12,oe=qt.self._22,le=$t+ie+oe,_e=0;0<le?(_e=.5/Math.sqrt(le+1),ft.w=.25/_e,ft.x=(re-ne)*_e,ft.y=(ee-se)*_e,ft.z=(ae-te)*_e):ie<$t&&oe<$t?(_e=2*Math.sqrt(1+$t-ie-oe),ft.w=(re-ne)/_e,ft.x=.25*_e,ft.y=(te+ae)/_e,ft.z=(ee+se)/_e):oe<ie?(_e=2*Math.sqrt(1+ie-$t-oe),ft.w=(ee-se)/_e,ft.x=(te+ae)/_e,ft.y=.25*_e,ft.z=(ne+re)/_e):(_e=2*Math.sqrt(1+oe-$t-ie),ft.w=(ae-te)/_e,ft.x=(ee+se)/_e,ft.y=(ne+re)/_e,ft.z=.25*_e);var he=Fe.vp,ce=Fe.vpos,ge=Fe.vpos2;he.x=ce.x+(ge.x-ce.x)*o,he.y=ce.y+(ge.y-ce.y)*o,he.z=ce.z+(ge.z-ce.z)*o;var ue=Fe.vs,fe=Fe.vscl,de=Fe.vscl2;ue.x=fe.x+(de.x-fe.x)*o,ue.y=fe.y+(de.y-fe.y)*o,ue.z=fe.z+(de.z-fe.z)*o;var be=Fe.q3,pe=Fe.q1,me=Fe.q2,Ie=pe.x,ve=pe.y,Me=pe.z,Ce=pe.w;pe.x*me.x+pe.y*me.y+pe.z*me.z+pe.w*me.w<0&&(Ie=-Ie,ve=-ve,Me=-Me,Ce=-Ce),be.x=Ie+(me.x-Ie)*o,be.y=ve+(me.y-ve)*o,be.z=Me+(me.z-Me)*o,be.w=Ce+(me.w-Ce)*o;var ye=Math.sqrt(be.x*be.x+be.y*be.y+be.z*be.z+be.w*be.w);0==ye?(be.x=0,be.y=0,be.z=0,be.w=0):(ye=1/ye,be.x*=ye,be.y*=ye,be.z*=ye,be.w*=ye);var we=Fe.q3,Ae=we.x,xe=we.y,Ze=we.z,ze=we.w,Be=Ae+Ae,Ne=xe+xe,Ge=Ze+Ze,ke=Ae*Be,Se=Ae*Ne,We=Ae*Ge,Xe=xe*Ne,Ye=xe*Ge,De=Ze*Ge,Ke=ze*Be,Le=ze*Ne,Ve=ze*Ge;e.self._00=1-(Xe+De),e.self._10=Se-Ve,e.self._20=We+Le,e.self._01=Se+Ve,e.self._11=1-(ke+De),e.self._21=Ye-Ke,e.self._02=We-Le,e.self._12=Ye+Ke,e.self._22=1-(ke+Xe),e.self._03=0,e.self._13=0,e.self._23=0,e.self._30=0,e.self._31=0,e.self._32=0,e.self._33=1;var He=Fe.vs,je=He.x,Te=He.y,Re=He.z;e.self._00*=je,e.self._01*=je,e.self._02*=je,e.self._03*=je,e.self._10*=Te,e.self._11*=Te,e.self._12*=Te,e.self._13*=Te,e.self._20*=Re,e.self._21*=Re,e.self._22*=Re,e.self._23*=Re,e.self._30=Fe.vp.x,e.self._31=Fe.vp.y,e.self._32=Fe.vp.z}},__class__:Fe};var c_=function(t){null==t&&(t=""),this.onUpdates=null,this.constraintMats=null,this.constraintTargetsI=null,this.constraintTargets=null,this.boneChildren=null,this.matsFastBlendSort=[],this.matsFastBlend=[],this.matsFastSort=[],this.matsFast=[],this.applyParent=null,this.absMats=null,this.skeletonMatsBlend=null,this.skeletonBonesBlend=null,this.skeletonMats=null,this.skeletonBones=null,Fe.call(this),this.isSampled=!1;for(var e=0,a=h_.active.armatures;e<a.length;){var i=a[e];if(++e,i.name==t){this.armature=i;break}}};(i["iron.object.BoneAnimation"]=c_).__name__=!0,c_.__super__=Fe,c_.prototype=s(Fe.prototype,{object:null,data:null,skinBuffer:null,skeletonBones:null,skeletonMats:null,skeletonBonesBlend:null,skeletonMatsBlend:null,absMats:null,applyParent:null,matsFast:null,matsFastSort:null,matsFastBlend:null,matsFastBlendSort:null,boneChildren:null,constraintTargets:null,constraintTargetsI:null,constraintMats:null,setSkin:function(t){var e=this;if(this.object=t,this.data=null!=t?t.data:null,this.isSkinned=null!=this.data&&this.data.isSkinned,this.isSkinned){var a=new _s(8*c_.skinMaxBones);this.skinBuffer=a;for(var i=0,n=this.skinBuffer.length;i<n;){var s=i++;this.skinBuffer[s]=0}var r=this.object.transform.rot;r.x=0,r.y=0,r.z=0,r.w=1,this.object.transform.buildMatrix();var o=t.parent.raw.bone_actions;null!=o&&0<o.length&&R.getSceneRaw(o[0],function(t){e.play(t.name)})}},addBoneChild:function(t,e){null==this.boneChildren&&(this.boneChildren=new et);var a=this.boneChildren,i=null!=rs[t]?a.getReserved(t):a.h[t];if(null==i){i=[];var n=this.boneChildren;null!=rs[t]?n.setReserved(t,i):n.h[t]=i}i.push(e)},updateBoneChildren:function(t,e){var a=t.name,i=this.boneChildren,n=null!=rs[a]?i.getReserved(a):i.h[a];if(null!=n)for(var s=0;s<n.length;){var r=n[s];++s;var o=r.transform;if(null==o.boneParent&&(o.boneParent=new fa(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)),null!=r.raw.parent_bone_tail)if(r.raw.parent_bone_connected||this.isSkinned){var l=r.raw.parent_bone_tail,_=o.boneParent;_.self._00=1,_.self._01=0,_.self._02=0,_.self._03=0,_.self._10=0,_.self._11=1,_.self._12=0,_.self._13=0,_.self._20=0,_.self._21=0,_.self._22=1,_.self._23=0,_.self._30=l[0],_.self._31=l[1],_.self._32=l[2],_.self._33=1;var h=o.boneParent,c=h.self._00,g=h.self._01,u=h.self._02,f=h.self._03,d=h.self._10,b=h.self._11,p=h.self._12,m=h.self._13,I=h.self._20,v=h.self._21,M=h.self._22,C=h.self._23,y=h.self._30,w=h.self._31,A=h.self._32,x=h.self._33,Z=e.self._00,z=e.self._10,B=e.self._20,N=e.self._30;h.self._00=c*Z+g*z+u*B+f*N,h.self._10=d*Z+b*z+p*B+m*N,h.self._20=I*Z+v*z+M*B+C*N,h.self._30=y*Z+w*z+A*B+x*N,Z=e.self._01,z=e.self._11,B=e.self._21,N=e.self._31,h.self._01=c*Z+g*z+u*B+f*N,h.self._11=d*Z+b*z+p*B+m*N,h.self._21=I*Z+v*z+M*B+C*N,h.self._31=y*Z+w*z+A*B+x*N,Z=e.self._02,z=e.self._12,B=e.self._22,N=e.self._32,h.self._02=c*Z+g*z+u*B+f*N,h.self._12=d*Z+b*z+p*B+m*N,h.self._22=I*Z+v*z+M*B+C*N,h.self._32=y*Z+w*z+A*B+x*N,Z=e.self._03,z=e.self._13,B=e.self._23,N=e.self._33,h.self._03=c*Z+g*z+u*B+f*N,h.self._13=d*Z+b*z+p*B+m*N,h.self._23=I*Z+v*z+M*B+C*N,h.self._33=y*Z+w*z+A*B+x*N}else{var G=r.raw.parent_bone_tail_pose,k=o.boneParent;k.self._00=e.self._00,k.self._01=e.self._01,k.self._02=e.self._02,k.self._03=e.self._03,k.self._10=e.self._10,k.self._11=e.self._11,k.self._12=e.self._12,k.self._13=e.self._13,k.self._20=e.self._20,k.self._21=e.self._21,k.self._22=e.self._22,k.self._23=e.self._23,k.self._30=e.self._30,k.self._31=e.self._31,k.self._32=e.self._32,k.self._33=e.self._33;var S=o.boneParent,W=G[0],X=G[1],Y=G[2];S.self._00+=W*S.self._03,S.self._01+=X*S.self._03,S.self._02+=Y*S.self._03,S.self._10+=W*S.self._13,S.self._11+=X*S.self._13,S.self._12+=Y*S.self._13,S.self._20+=W*S.self._23,S.self._21+=X*S.self._23,S.self._22+=Y*S.self._23,S.self._30+=W*S.self._33,S.self._31+=X*S.self._33,S.self._32+=Y*S.self._33}else{var D=o.boneParent;D.self._00=e.self._00,D.self._01=e.self._01,D.self._02=e.self._02,D.self._03=e.self._03,D.self._10=e.self._10,D.self._11=e.self._11,D.self._12=e.self._12,D.self._13=e.self._13,D.self._20=e.self._20,D.self._21=e.self._21,D.self._22=e.self._22,D.self._23=e.self._23,D.self._30=e.self._30,D.self._31=e.self._31,D.self._32=e.self._32,D.self._33=e.self._33}o.buildMatrix()}},numParents:function(t){for(var e=0,a=t.parent;null!=a;)++e,a=a.parent;return e},setMats:function(){for(var n=this;this.matsFast.length<this.skeletonBones.length;)this.matsFast.push(new fa(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)),this.matsFastSort.push(this.matsFastSort.length);if(this.matsFastSort.sort(function(t,e){var a=n.numParents(n.skeletonBones[t]),i=n.numParents(n.skeletonBones[e]);return a<i?-1:i<a?1:0}),null!=this.skeletonBonesBlend){for(;this.matsFastBlend.length<this.skeletonBonesBlend.length;)this.matsFastBlend.push(new fa(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)),this.matsFastBlendSort.push(this.matsFastBlendSort.length);this.matsFastBlendSort.sort(function(t,e){var a=n.numParents(n.skeletonBonesBlend[t]),i=n.numParents(n.skeletonBonesBlend[e]);return a<i?-1:i<a?1:0})}},setAction:function(t){if(this.isSkinned){var e=this.data.geom.actions;this.skeletonBones=null!=rs[t]?e.getReserved(t):e.h[t];var a=this.data.geom.mats;this.skeletonMats=null!=rs[t]?a.getReserved(t):a.h[t],this.skeletonBonesBlend=null,this.skeletonMatsBlend=null}else{this.armature.initMats();var i=this.armature.getAction(t);this.skeletonBones=i.bones,this.skeletonMats=i.mats}this.setMats()},setActionBlend:function(t){if(this.isSkinned){this.skeletonBonesBlend=this.skeletonBones,this.skeletonMatsBlend=this.skeletonMats;var e=this.data.geom.actions;this.skeletonBones=null!=rs[t]?e.getReserved(t):e.h[t];var a=this.data.geom.mats;this.skeletonMats=null!=rs[t]?a.getReserved(t):a.h[t]}else{this.armature.initMats();var i=this.armature.getAction(t);this.skeletonBones=i.bones,this.skeletonMats=i.mats}this.setMats()},play:function(t,e,a,i,n){null==n&&(n=!0),null==i&&(i=1),null==a&&(a=.2),null==t&&(t=""),Fe.prototype.play.call(this,t,e,a,i,n),""!=t&&(0<a?this.setActionBlend(t):this.setAction(t)),this.blendFactor=0},update:function(t){if(this.isSkinned||null!=this.skeletonBones||this.setAction(this.armature.actions[0].name),(null==this.object||this.object.visible&&!this.object.culled)&&null!=this.skeletonBones&&0!=this.skeletonBones.length&&(Fe.prototype.update.call(this,t),!this.paused&&0!=this.speed)){for(var e=this.skeletonBones,a=0,i=this.skeletonBones;a<i.length;){var n=i[a];if(++a,null!=n.anim){this.updateTrack(n.anim);break}}if(e==this.skeletonBones){for(var s=0,r=this.skeletonBones.length;s<r;){var o=s++;this.updateAnimSampled(this.skeletonBones[o].anim,this.skeletonMats[o])}if(0<this.blendTime&&null!=this.skeletonBonesBlend){for(var l=0,_=this.skeletonBonesBlend;l<_.length;){var h=_[l];if(++l,null!=h.anim){this.updateTrack(h.anim);break}}for(var c=0,g=this.skeletonBonesBlend.length;c<g;){var u=c++;this.updateAnimSampled(this.skeletonBonesBlend[u].anim,this.skeletonMatsBlend[u])}}if(this.updateConstraints(),null!=this.onUpdates)for(var f=0,d=this.onUpdates;f<d.length;){var b=d[f];++f,b()}for(var p=0,m=this.skeletonBones.length;p<m;){var I=p++;this.multParent(this.matsFastSort[I],this.matsFast,this.skeletonBones,this.skeletonMats)}if(null!=this.skeletonBonesBlend)for(var v=0,M=this.skeletonBonesBlend.length;v<M;){var C=v++;this.multParent(this.matsFastBlendSort[C],this.matsFastBlend,this.skeletonBonesBlend,this.skeletonMatsBlend)}this.isSkinned?this.updateSkinGpu():this.updateBonesOnly()}}},multParent:function(t,e,a,i){var n=e[t];if(null!=this.applyParent&&!this.applyParent[t]){var s=i[t];return n.self._00=s.self._00,n.self._01=s.self._01,n.self._02=s.self._02,n.self._03=s.self._03,n.self._10=s.self._10,n.self._11=s.self._11,n.self._12=s.self._12,n.self._13=s.self._13,n.self._20=s.self._20,n.self._21=s.self._21,n.self._22=s.self._22,n.self._23=s.self._23,n.self._30=s.self._30,n.self._31=s.self._31,n.self._32=s.self._32,void(n.self._33=s.self._33)}var r=a[t].parent,o=this.getBoneIndex(r,a);if(null==r||-1==o){var l=i[t];n.self._00=l.self._00,n.self._01=l.self._01,n.self._02=l.self._02,n.self._03=l.self._03,n.self._10=l.self._10,n.self._11=l.self._11,n.self._12=l.self._12,n.self._13=l.self._13,n.self._20=l.self._20,n.self._21=l.self._21,n.self._22=l.self._22,n.self._23=l.self._23,n.self._30=l.self._30,n.self._31=l.self._31,n.self._32=l.self._32,n.self._33=l.self._33}else{var _=e[o],h=i[t],c=h.self._00,g=h.self._01,u=h.self._02,f=h.self._03,d=h.self._10,b=h.self._11,p=h.self._12,m=h.self._13,I=h.self._20,v=h.self._21,M=h.self._22,C=h.self._23,y=h.self._30,w=h.self._31,A=h.self._32,x=h.self._33,Z=_.self._00,z=_.self._10,B=_.self._20,N=_.self._30;n.self._00=c*Z+g*z+u*B+f*N,n.self._10=d*Z+b*z+p*B+m*N,n.self._20=I*Z+v*z+M*B+C*N,n.self._30=y*Z+w*z+A*B+x*N,Z=_.self._01,z=_.self._11,B=_.self._21,N=_.self._31,n.self._01=c*Z+g*z+u*B+f*N,n.self._11=d*Z+b*z+p*B+m*N,n.self._21=I*Z+v*z+M*B+C*N,n.self._31=y*Z+w*z+A*B+x*N,Z=_.self._02,z=_.self._12,B=_.self._22,N=_.self._32,n.self._02=c*Z+g*z+u*B+f*N,n.self._12=d*Z+b*z+p*B+m*N,n.self._22=I*Z+v*z+M*B+C*N,n.self._32=y*Z+w*z+A*B+x*N,Z=_.self._03,z=_.self._13,B=_.self._23,N=_.self._33,n.self._03=c*Z+g*z+u*B+f*N,n.self._13=d*Z+b*z+p*B+m*N,n.self._23=I*Z+v*z+M*B+C*N,n.self._33=y*Z+w*z+A*B+x*N}},updateConstraints:function(){if(null!=this.data){var t=this.data.raw.skin.constraints;if(null!=t){if(null==this.constraintTargets){this.constraintTargets=[],this.constraintTargetsI=[];for(var e=0;e<t.length;){var a=t[e];++e;var i=h_.active.getChild(a.target);this.constraintTargets.push(i);var n=null;if(null!=i){var s=i.raw.transform.values,r=(n=new fa(s[0],s[1],s[2],s[3],s[4],s[5],s[6],s[7],s[8],s[9],s[10],s[11],s[12],s[13],s[14],s[15])).self._00,o=n.self._01,l=n.self._02,_=n.self._03,h=n.self._10,c=n.self._11,g=n.self._12,u=n.self._13,f=n.self._20,d=n.self._21,b=n.self._22,p=n.self._23,m=n.self._30,I=n.self._31,v=n.self._32,M=n.self._33,C=r*c-o*h,y=r*g-l*h,w=r*u-_*h,A=o*g-l*c,x=o*u-_*c,Z=l*u-_*g,z=f*I-d*m,B=f*v-b*m,N=f*M-p*m,G=d*v-b*I,k=d*M-p*I,S=b*M-p*v,W=C*S-y*k+w*G+A*N-x*B+Z*z;0==W?(n.self._00=1,n.self._01=0,n.self._02=0,n.self._03=0,n.self._10=0,n.self._11=1,n.self._12=0,n.self._13=0,n.self._20=0,n.self._21=0,n.self._22=1,n.self._23=0,n.self._30=0,n.self._31=0,n.self._32=0,n.self._33=1):(W=1/W,n.self._00=(c*S-g*k+u*G)*W,n.self._01=(l*k-o*S-_*G)*W,n.self._02=(I*Z-v*x+M*A)*W,n.self._03=(b*x-d*Z-p*A)*W,n.self._10=(g*N-h*S-u*B)*W,n.self._11=(r*S-l*N+_*B)*W,n.self._12=(v*w-m*Z-M*y)*W,n.self._13=(f*Z-b*w+p*y)*W,n.self._20=(h*k-c*N+u*z)*W,n.self._21=(o*N-r*k-_*z)*W,n.self._22=(m*x-I*w+M*C)*W,n.self._23=(d*w-f*x-p*C)*W,n.self._30=(c*B-h*G-g*z)*W,n.self._31=(r*G-o*B+l*z)*W,n.self._32=(I*y-m*A-v*C)*W,n.self._33=(f*A-d*y+b*C)*W)}this.constraintTargetsI.push(n)}this.constraintMats=new Be}for(var X=0,Y=t.length;X<Y;){var D=X++,K=t[D],L=this.getBone(K.bone);if(null!=L){var V=this.constraintTargets[D];if(null!=V&&"CHILD_OF"==K.type){var H=this.constraintMats.h[L.__id__];null==H&&(H=new fa(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this.constraintMats.set(L,H));var j=this.object.parent.transform.world;H.self._00=j.self._00,H.self._01=j.self._01,H.self._02=j.self._02,H.self._03=j.self._03,H.self._10=j.self._10,H.self._11=j.self._11,H.self._12=j.self._12,H.self._13=j.self._13,H.self._20=j.self._20,H.self._21=j.self._21,H.self._22=j.self._22,H.self._23=j.self._23,H.self._30=j.self._30,H.self._31=j.self._31,H.self._32=j.self._32,H.self._33=j.self._33;var T=this.constraintTargetsI[D],R=H.self._00,F=H.self._01,O=H.self._02,P=H.self._03,J=H.self._10,E=H.self._11,U=H.self._12,Q=H.self._13,q=H.self._20,$=H.self._21,tt=H.self._22,et=H.self._23,at=H.self._30,it=H.self._31,nt=H.self._32,st=H.self._33,rt=T.self._00,ot=T.self._10,lt=T.self._20,_t=T.self._30;H.self._00=R*rt+F*ot+O*lt+P*_t,H.self._10=J*rt+E*ot+U*lt+Q*_t,H.self._20=q*rt+$*ot+tt*lt+et*_t,H.self._30=at*rt+it*ot+nt*lt+st*_t,rt=T.self._01,ot=T.self._11,lt=T.self._21,_t=T.self._31,H.self._01=R*rt+F*ot+O*lt+P*_t,H.self._11=J*rt+E*ot+U*lt+Q*_t,H.self._21=q*rt+$*ot+tt*lt+et*_t,H.self._31=at*rt+it*ot+nt*lt+st*_t,rt=T.self._02,ot=T.self._12,lt=T.self._22,_t=T.self._32,H.self._02=R*rt+F*ot+O*lt+P*_t,H.self._12=J*rt+E*ot+U*lt+Q*_t,H.self._22=q*rt+$*ot+tt*lt+et*_t,H.self._32=at*rt+it*ot+nt*lt+st*_t,rt=T.self._03,ot=T.self._13,lt=T.self._23,_t=T.self._33,H.self._03=R*rt+F*ot+O*lt+P*_t,H.self._13=J*rt+E*ot+U*lt+Q*_t,H.self._23=q*rt+$*ot+tt*lt+et*_t,H.self._33=at*rt+it*ot+nt*lt+st*_t;var ht=V.transform.world,ct=H.self._00,gt=H.self._01,ut=H.self._02,ft=H.self._03,dt=H.self._10,bt=H.self._11,pt=H.self._12,mt=H.self._13,It=H.self._20,vt=H.self._21,Mt=H.self._22,Ct=H.self._23,yt=H.self._30,wt=H.self._31,At=H.self._32,xt=H.self._33,Zt=ht.self._00,zt=ht.self._10,Bt=ht.self._20,Nt=ht.self._30;H.self._00=ct*Zt+gt*zt+ut*Bt+ft*Nt,H.self._10=dt*Zt+bt*zt+pt*Bt+mt*Nt,H.self._20=It*Zt+vt*zt+Mt*Bt+Ct*Nt,H.self._30=yt*Zt+wt*zt+At*Bt+xt*Nt,Zt=ht.self._01,zt=ht.self._11,Bt=ht.self._21,Nt=ht.self._31,H.self._01=ct*Zt+gt*zt+ut*Bt+ft*Nt,H.self._11=dt*Zt+bt*zt+pt*Bt+mt*Nt,H.self._21=It*Zt+vt*zt+Mt*Bt+Ct*Nt,H.self._31=yt*Zt+wt*zt+At*Bt+xt*Nt,Zt=ht.self._02,zt=ht.self._12,Bt=ht.self._22,Nt=ht.self._32,H.self._02=ct*Zt+gt*zt+ut*Bt+ft*Nt,H.self._12=dt*Zt+bt*zt+pt*Bt+mt*Nt,H.self._22=It*Zt+vt*zt+Mt*Bt+Ct*Nt,H.self._32=yt*Zt+wt*zt+At*Bt+xt*Nt,Zt=ht.self._03,zt=ht.self._13,Bt=ht.self._23,Nt=ht.self._33,H.self._03=ct*Zt+gt*zt+ut*Bt+ft*Nt,H.self._13=dt*Zt+bt*zt+pt*Bt+mt*Nt,H.self._23=It*Zt+vt*zt+Mt*Bt+Ct*Nt,H.self._33=yt*Zt+wt*zt+At*Bt+xt*Nt;var Gt=c_.m1,kt=this.object.parent.transform.world,St=kt.self._00,Wt=kt.self._01,Xt=kt.self._02,Yt=kt.self._03,Dt=kt.self._10,Kt=kt.self._11,Lt=kt.self._12,Vt=kt.self._13,Ht=kt.self._20,jt=kt.self._21,Tt=kt.self._22,Rt=kt.self._23,Ft=kt.self._30,Ot=kt.self._31,Pt=kt.self._32,Jt=kt.self._33,Et=St*Kt-Wt*Dt,Ut=St*Lt-Xt*Dt,Qt=St*Vt-Yt*Dt,qt=Wt*Lt-Xt*Kt,$t=Wt*Vt-Yt*Kt,te=Xt*Vt-Yt*Lt,ee=Ht*Ot-jt*Ft,ae=Ht*Pt-Tt*Ft,ie=Ht*Jt-Rt*Ft,ne=jt*Pt-Tt*Ot,se=jt*Jt-Rt*Ot,re=Tt*Jt-Rt*Pt,oe=Et*re-Ut*se+Qt*ne+qt*ie-$t*ae+te*ee;0==oe?(Gt.self._00=1,Gt.self._01=0,Gt.self._02=0,Gt.self._03=0,Gt.self._10=0,Gt.self._11=1,Gt.self._12=0,Gt.self._13=0,Gt.self._20=0,Gt.self._21=0,Gt.self._22=1,Gt.self._23=0,Gt.self._30=0,Gt.self._31=0,Gt.self._32=0,Gt.self._33=1):(oe=1/oe,Gt.self._00=(Kt*re-Lt*se+Vt*ne)*oe,Gt.self._01=(Xt*se-Wt*re-Yt*ne)*oe,Gt.self._02=(Ot*te-Pt*$t+Jt*qt)*oe,Gt.self._03=(Tt*$t-jt*te-Rt*qt)*oe,Gt.self._10=(Lt*ie-Dt*re-Vt*ae)*oe,Gt.self._11=(St*re-Xt*ie+Yt*ae)*oe,Gt.self._12=(Pt*Qt-Ft*te-Jt*Ut)*oe,Gt.self._13=(Ht*te-Tt*Qt+Rt*Ut)*oe,Gt.self._20=(Dt*se-Kt*ie+Vt*ee)*oe,Gt.self._21=(Wt*ie-St*se-Yt*ee)*oe,Gt.self._22=(Ft*$t-Ot*Qt+Jt*Et)*oe,Gt.self._23=(jt*Qt-Ht*$t-Rt*Et)*oe,Gt.self._30=(Kt*ae-Dt*ne-Lt*ee)*oe,Gt.self._31=(St*ne-Wt*ae+Xt*ee)*oe,Gt.self._32=(Ot*Ut-Ft*qt-Pt*Et)*oe,Gt.self._33=(Ht*qt-jt*Ut+Tt*Et)*oe);var le=c_.m1,_e=H.self._00,he=H.self._01,ce=H.self._02,ge=H.self._03,ue=H.self._10,fe=H.self._11,de=H.self._12,be=H.self._13,pe=H.self._20,me=H.self._21,Ie=H.self._22,ve=H.self._23,Me=H.self._30,Ce=H.self._31,ye=H.self._32,we=H.self._33,Ae=le.self._00,xe=le.self._10,Ze=le.self._20,ze=le.self._30;H.self._00=_e*Ae+he*xe+ce*Ze+ge*ze,H.self._10=ue*Ae+fe*xe+de*Ze+be*ze,H.self._20=pe*Ae+me*xe+Ie*Ze+ve*ze,H.self._30=Me*Ae+Ce*xe+ye*Ze+we*ze,Ae=le.self._01,xe=le.self._11,Ze=le.self._21,ze=le.self._31,H.self._01=_e*Ae+he*xe+ce*Ze+ge*ze,H.self._11=ue*Ae+fe*xe+de*Ze+be*ze,H.self._21=pe*Ae+me*xe+Ie*Ze+ve*ze,H.self._31=Me*Ae+Ce*xe+ye*Ze+we*ze,Ae=le.self._02,xe=le.self._12,Ze=le.self._22,ze=le.self._32,H.self._02=_e*Ae+he*xe+ce*Ze+ge*ze,H.self._12=ue*Ae+fe*xe+de*Ze+be*ze,H.self._22=pe*Ae+me*xe+Ie*Ze+ve*ze,H.self._32=Me*Ae+Ce*xe+ye*Ze+we*ze,Ae=le.self._03,xe=le.self._13,Ze=le.self._23,ze=le.self._33,H.self._03=_e*Ae+he*xe+ce*Ze+ge*ze,H.self._13=ue*Ae+fe*xe+de*Ze+be*ze,H.self._23=pe*Ae+me*xe+Ie*Ze+ve*ze,H.self._33=Me*Ae+Ce*xe+ye*Ze+we*ze}}}}}},onUpdates:null,updateBonesOnly:function(){if(null!=this.boneChildren)for(var t=0,e=this.skeletonBones.length;t<e;){var a=t++,i=this.skeletonBones[a],n=c_.m,s=this.matsFast[a];n.self._00=s.self._00,n.self._01=s.self._01,n.self._02=s.self._02,n.self._03=s.self._03,n.self._10=s.self._10,n.self._11=s.self._11,n.self._12=s.self._12,n.self._13=s.self._13,n.self._20=s.self._20,n.self._21=s.self._21,n.self._22=s.self._22,n.self._23=s.self._23,n.self._30=s.self._30,n.self._31=s.self._31,n.self._32=s.self._32,n.self._33=s.self._33,this.updateBoneChildren(i,c_.m)}},updateSkinGpu:function(){var t=this.skeletonBones,e=this.blendCurrent/this.blendTime;e=e*e*(3-2*e),0!=this.blendFactor&&(e=1-this.blendFactor);for(var a=0,i=t.length;a<i;){var n=a++;if(null!=this.constraintMats){var s=this.constraintMats.h[t[n].__id__];if(null!=s){this.updateSkinBuffer(s,n);continue}}var r=c_.m,o=this.matsFast[n];if(r.self._00=o.self._00,r.self._01=o.self._01,r.self._02=o.self._02,r.self._03=o.self._03,r.self._10=o.self._10,r.self._11=o.self._11,r.self._12=o.self._12,r.self._13=o.self._13,r.self._20=o.self._20,r.self._21=o.self._21,r.self._22=o.self._22,r.self._23=o.self._23,r.self._30=o.self._30,r.self._31=o.self._31,r.self._32=o.self._32,r.self._33=o.self._33,0<this.blendTime&&null!=this.skeletonBonesBlend){var l=c_.m1,_=this.matsFastBlend[n];l.self._00=_.self._00,l.self._01=_.self._01,l.self._02=_.self._02,l.self._03=_.self._03,l.self._10=_.self._10,l.self._11=_.self._11,l.self._12=_.self._12,l.self._13=_.self._13,l.self._20=_.self._20,l.self._21=_.self._21,l.self._22=_.self._22,l.self._23=_.self._23,l.self._30=_.self._30,l.self._31=_.self._31,l.self._32=_.self._32,l.self._33=_.self._33;var h=c_.m1,c=c_.vpos,g=c_.q1,u=c_.vscl;c.x=h.self._30,c.y=h.self._31,c.z=h.self._32;var f=fa.helpVec;f.x=h.self._00,f.y=h.self._01,f.z=h.self._02,f.w=1;var d=f;u.x=Math.sqrt(d.x*d.x+d.y*d.y+d.z*d.z);var b=fa.helpVec;b.x=h.self._10,b.y=h.self._11,b.z=h.self._12,b.w=1;var p=b;u.y=Math.sqrt(p.x*p.x+p.y*p.y+p.z*p.z);var m=fa.helpVec;m.x=h.self._20,m.y=h.self._21,m.z=h.self._22,m.w=1;var I=m;u.z=Math.sqrt(I.x*I.x+I.y*I.y+I.z*I.z);var v=h.self,M=v._12,C=v._22,y=v._32,w=v._13,A=v._23,x=v._33,Z=v._11*(C*x-y*A)-v._21*(M*x-y*w)+v._31*(M*A-C*w),z=v._12,B=v._22,N=v._32,G=v._13,k=v._23,S=v._33,W=v._10*(B*S-N*k)-v._20*(z*S-N*G)+v._30*(z*k-B*G),X=v._11,Y=v._21,D=v._31,K=v._13,L=v._23,V=v._33,H=v._10*(Y*V-D*L)-v._20*(X*V-D*K)+v._30*(X*L-Y*K),j=v._11,T=v._21,R=v._31,F=v._12,O=v._22,P=v._32,J=v._10*(T*P-R*O)-v._20*(j*P-R*F)+v._30*(j*O-T*F);v._00*Z-v._01*W+v._02*H-v._03*J<0&&(u.x=-u.x);var E=1/u.x;fa.helpMat.self._00=h.self._00*E,fa.helpMat.self._01=h.self._01*E,fa.helpMat.self._02=h.self._02*E,E=1/u.y,fa.helpMat.self._10=h.self._10*E,fa.helpMat.self._11=h.self._11*E,fa.helpMat.self._12=h.self._12*E,E=1/u.z,fa.helpMat.self._20=h.self._20*E,fa.helpMat.self._21=h.self._21*E,fa.helpMat.self._22=h.self._22*E;var U=fa.helpMat,Q=U.self._00,q=U.self._10,$=U.self._20,tt=U.self._01,et=U.self._11,at=U.self._21,it=U.self._02,nt=U.self._12,st=U.self._22,rt=Q+et+st,ot=0;0<rt?(ot=.5/Math.sqrt(rt+1),g.w=.25/ot,g.x=(nt-at)*ot,g.y=($-it)*ot,g.z=(tt-q)*ot):et<Q&&st<Q?(ot=2*Math.sqrt(1+Q-et-st),g.w=(nt-at)/ot,g.x=.25*ot,g.y=(q+tt)/ot,g.z=($+it)/ot):st<et?(ot=2*Math.sqrt(1+et-Q-st),g.w=($-it)/ot,g.x=(q+tt)/ot,g.y=.25*ot,g.z=(at+nt)/ot):(ot=2*Math.sqrt(1+st-Q-et),g.w=(tt-q)/ot,g.x=($+it)/ot,g.y=(at+nt)/ot,g.z=.25*ot);var lt=c_.m,_t=c_.vpos2,ht=c_.q2,ct=c_.vscl2;_t.x=lt.self._30,_t.y=lt.self._31,_t.z=lt.self._32;var gt=fa.helpVec;gt.x=lt.self._00,gt.y=lt.self._01,gt.z=lt.self._02,gt.w=1;var ut=gt;ct.x=Math.sqrt(ut.x*ut.x+ut.y*ut.y+ut.z*ut.z);var ft=fa.helpVec;ft.x=lt.self._10,ft.y=lt.self._11,ft.z=lt.self._12,ft.w=1;var dt=ft;ct.y=Math.sqrt(dt.x*dt.x+dt.y*dt.y+dt.z*dt.z);var bt=fa.helpVec;bt.x=lt.self._20,bt.y=lt.self._21,bt.z=lt.self._22,bt.w=1;var pt=bt;ct.z=Math.sqrt(pt.x*pt.x+pt.y*pt.y+pt.z*pt.z);var mt=lt.self,It=mt._12,vt=mt._22,Mt=mt._32,Ct=mt._13,yt=mt._23,wt=mt._33,At=mt._11*(vt*wt-Mt*yt)-mt._21*(It*wt-Mt*Ct)+mt._31*(It*yt-vt*Ct),xt=mt._12,Zt=mt._22,zt=mt._32,Bt=mt._13,Nt=mt._23,Gt=mt._33,kt=mt._10*(Zt*Gt-zt*Nt)-mt._20*(xt*Gt-zt*Bt)+mt._30*(xt*Nt-Zt*Bt),St=mt._11,Wt=mt._21,Xt=mt._31,Yt=mt._13,Dt=mt._23,Kt=mt._33,Lt=mt._10*(Wt*Kt-Xt*Dt)-mt._20*(St*Kt-Xt*Yt)+mt._30*(St*Dt-Wt*Yt),Vt=mt._11,Ht=mt._21,jt=mt._31,Tt=mt._12,Rt=mt._22,Ft=mt._32,Ot=mt._10*(Ht*Ft-jt*Rt)-mt._20*(Vt*Ft-jt*Tt)+mt._30*(Vt*Rt-Ht*Tt);mt._00*At-mt._01*kt+mt._02*Lt-mt._03*Ot<0&&(ct.x=-ct.x);var Pt=1/ct.x;fa.helpMat.self._00=lt.self._00*Pt,fa.helpMat.self._01=lt.self._01*Pt,fa.helpMat.self._02=lt.self._02*Pt,Pt=1/ct.y,fa.helpMat.self._10=lt.self._10*Pt,fa.helpMat.self._11=lt.self._11*Pt,fa.helpMat.self._12=lt.self._12*Pt,Pt=1/ct.z,fa.helpMat.self._20=lt.self._20*Pt,fa.helpMat.self._21=lt.self._21*Pt,fa.helpMat.self._22=lt.self._22*Pt;var Jt=fa.helpMat,Et=Jt.self._00,Ut=Jt.self._10,Qt=Jt.self._20,qt=Jt.self._01,$t=Jt.self._11,te=Jt.self._21,ee=Jt.self._02,ae=Jt.self._12,ie=Jt.self._22,ne=Et+$t+ie,se=0;0<ne?(se=.5/Math.sqrt(ne+1),ht.w=.25/se,ht.x=(ae-te)*se,ht.y=(Qt-ee)*se,ht.z=(qt-Ut)*se):$t<Et&&ie<Et?(se=2*Math.sqrt(1+Et-$t-ie),ht.w=(ae-te)/se,ht.x=.25*se,ht.y=(Ut+qt)/se,ht.z=(Qt+ee)/se):ie<$t?(se=2*Math.sqrt(1+$t-Et-ie),ht.w=(Qt-ee)/se,ht.x=(Ut+qt)/se,ht.y=.25*se,ht.z=(te+ae)/se):(se=2*Math.sqrt(1+ie-Et-$t),ht.w=(qt-Ut)/se,ht.x=(Qt+ee)/se,ht.y=(te+ae)/se,ht.z=.25*se);var re=c_.v1,oe=c_.vpos,le=c_.vpos2;re.x=oe.x+(le.x-oe.x)*e,re.y=oe.y+(le.y-oe.y)*e,re.z=oe.z+(le.z-oe.z)*e;var _e=c_.v2,he=c_.vscl,ce=c_.vscl2;_e.x=he.x+(ce.x-he.x)*e,_e.y=he.y+(ce.y-he.y)*e,_e.z=he.z+(ce.z-he.z)*e;var ge=c_.q3,ue=c_.q1,fe=c_.q2,de=ue.x,be=ue.y,pe=ue.z,me=ue.w;ue.x*fe.x+ue.y*fe.y+ue.z*fe.z+ue.w*fe.w<0&&(de=-de,be=-be,pe=-pe,me=-me),ge.x=de+(fe.x-de)*e,ge.y=be+(fe.y-be)*e,ge.z=pe+(fe.z-pe)*e,ge.w=me+(fe.w-me)*e;var Ie=Math.sqrt(ge.x*ge.x+ge.y*ge.y+ge.z*ge.z+ge.w*ge.w);0==Ie?(ge.x=0,ge.y=0,ge.z=0,ge.w=0):(Ie=1/Ie,ge.x*=Ie,ge.y*=Ie,ge.z*=Ie,ge.w*=Ie);var ve=c_.m,Me=c_.q3,Ce=Me.x,ye=Me.y,we=Me.z,Ae=Me.w,xe=Ce+Ce,Ze=ye+ye,ze=we+we,Be=Ce*xe,Ne=Ce*Ze,Ge=Ce*ze,ke=ye*Ze,Se=ye*ze,We=we*ze,Xe=Ae*xe,Ye=Ae*Ze,De=Ae*ze;ve.self._00=1-(ke+We),ve.self._10=Ne-De,ve.self._20=Ge+Ye,ve.self._01=Ne+De,ve.self._11=1-(Be+We),ve.self._21=Se-Xe,ve.self._02=Ge-Ye,ve.self._12=Se+Xe,ve.self._22=1-(Be+ke),ve.self._03=0,ve.self._13=0,ve.self._23=0,ve.self._30=0,ve.self._31=0,ve.self._32=0,ve.self._33=1;var Ke=c_.m,Le=c_.v2,Ve=Le.x,He=Le.y,je=Le.z;Ke.self._00*=Ve,Ke.self._01*=Ve,Ke.self._02*=Ve,Ke.self._03*=Ve,Ke.self._10*=He,Ke.self._11*=He,Ke.self._12*=He,Ke.self._13*=He,Ke.self._20*=je,Ke.self._21*=je,Ke.self._22*=je,Ke.self._23*=je,c_.m.self._30=c_.v1.x,c_.m.self._31=c_.v1.y,c_.m.self._32=c_.v1.z}if(null!=this.absMats&&n<this.absMats.length){var Te=this.absMats[n],Re=c_.m;Te.self._00=Re.self._00,Te.self._01=Re.self._01,Te.self._02=Re.self._02,Te.self._03=Re.self._03,Te.self._10=Re.self._10,Te.self._11=Re.self._11,Te.self._12=Re.self._12,Te.self._13=Re.self._13,Te.self._20=Re.self._20,Te.self._21=Re.self._21,Te.self._22=Re.self._22,Te.self._23=Re.self._23,Te.self._30=Re.self._30,Te.self._31=Re.self._31,Te.self._32=Re.self._32,Te.self._33=Re.self._33}null!=this.boneChildren&&this.updateBoneChildren(t[n],c_.m);var Fe=c_.m,Oe=c_.m,Pe=this.data.geom.skeletonTransformsI[n],Je=Pe.self._00,Ee=Pe.self._01,Ue=Pe.self._02,Qe=Pe.self._03,qe=Pe.self._10,$e=Pe.self._11,ta=Pe.self._12,ea=Pe.self._13,aa=Pe.self._20,ia=Pe.self._21,na=Pe.self._22,sa=Pe.self._23,ra=Pe.self._30,oa=Pe.self._31,la=Pe.self._32,_a=Pe.self._33,ha=Oe.self._00,ca=Oe.self._10,ga=Oe.self._20,ua=Oe.self._30;Fe.self._00=Je*ha+Ee*ca+Ue*ga+Qe*ua,Fe.self._10=qe*ha+$e*ca+ta*ga+ea*ua,Fe.self._20=aa*ha+ia*ca+na*ga+sa*ua,Fe.self._30=ra*ha+oa*ca+la*ga+_a*ua,ha=Oe.self._01,ca=Oe.self._11,ga=Oe.self._21,ua=Oe.self._31,Fe.self._01=Je*ha+Ee*ca+Ue*ga+Qe*ua,Fe.self._11=qe*ha+$e*ca+ta*ga+ea*ua,Fe.self._21=aa*ha+ia*ca+na*ga+sa*ua,Fe.self._31=ra*ha+oa*ca+la*ga+_a*ua,ha=Oe.self._02,ca=Oe.self._12,ga=Oe.self._22,ua=Oe.self._32,Fe.self._02=Je*ha+Ee*ca+Ue*ga+Qe*ua,Fe.self._12=qe*ha+$e*ca+ta*ga+ea*ua,Fe.self._22=aa*ha+ia*ca+na*ga+sa*ua,Fe.self._32=ra*ha+oa*ca+la*ga+_a*ua,ha=Oe.self._03,ca=Oe.self._13,ga=Oe.self._23,ua=Oe.self._33,Fe.self._03=Je*ha+Ee*ca+Ue*ga+Qe*ua,Fe.self._13=qe*ha+$e*ca+ta*ga+ea*ua,Fe.self._23=aa*ha+ia*ca+na*ga+sa*ua,Fe.self._33=ra*ha+oa*ca+la*ga+_a*ua,this.updateSkinBuffer(c_.m,n)}},updateSkinBuffer:function(t,e){var a=c_.vpos,i=c_.q1,n=c_.vscl;a.x=t.self._30,a.y=t.self._31,a.z=t.self._32;var s=fa.helpVec;s.x=t.self._00,s.y=t.self._01,s.z=t.self._02,s.w=1;var r=s;n.x=Math.sqrt(r.x*r.x+r.y*r.y+r.z*r.z);var o=fa.helpVec;o.x=t.self._10,o.y=t.self._11,o.z=t.self._12,o.w=1;var l=o;n.y=Math.sqrt(l.x*l.x+l.y*l.y+l.z*l.z);var _=fa.helpVec;_.x=t.self._20,_.y=t.self._21,_.z=t.self._22,_.w=1;var h=_;n.z=Math.sqrt(h.x*h.x+h.y*h.y+h.z*h.z);var c=t.self,g=c._12,u=c._22,f=c._32,d=c._13,b=c._23,p=c._33,m=c._11*(u*p-f*b)-c._21*(g*p-f*d)+c._31*(g*b-u*d),I=c._12,v=c._22,M=c._32,C=c._13,y=c._23,w=c._33,A=c._10*(v*w-M*y)-c._20*(I*w-M*C)+c._30*(I*y-v*C),x=c._11,Z=c._21,z=c._31,B=c._13,N=c._23,G=c._33,k=c._10*(Z*G-z*N)-c._20*(x*G-z*B)+c._30*(x*N-Z*B),S=c._11,W=c._21,X=c._31,Y=c._12,D=c._22,K=c._32,L=c._10*(W*K-X*D)-c._20*(S*K-X*Y)+c._30*(S*D-W*Y);c._00*m-c._01*A+c._02*k-c._03*L<0&&(n.x=-n.x);var V=1/n.x;fa.helpMat.self._00=t.self._00*V,fa.helpMat.self._01=t.self._01*V,fa.helpMat.self._02=t.self._02*V,V=1/n.y,fa.helpMat.self._10=t.self._10*V,fa.helpMat.self._11=t.self._11*V,fa.helpMat.self._12=t.self._12*V,V=1/n.z,fa.helpMat.self._20=t.self._20*V,fa.helpMat.self._21=t.self._21*V,fa.helpMat.self._22=t.self._22*V;var H=fa.helpMat,j=H.self._00,T=H.self._10,R=H.self._20,F=H.self._01,O=H.self._11,P=H.self._21,J=H.self._02,E=H.self._12,U=H.self._22,Q=j+O+U,q=0;0<Q?(q=.5/Math.sqrt(Q+1),i.w=.25/q,i.x=(E-P)*q,i.y=(R-J)*q,i.z=(F-T)*q):O<j&&U<j?(q=2*Math.sqrt(1+j-O-U),i.w=(E-P)/q,i.x=.25*q,i.y=(T+F)/q,i.z=(R+J)/q):U<O?(q=2*Math.sqrt(1+O-j-U),i.w=(R-J)/q,i.x=(T+F)/q,i.y=.25*q,i.z=(P+E)/q):(q=2*Math.sqrt(1+U-j-O),i.w=(F-T)/q,i.x=(R+J)/q,i.y=(P+E)/q,i.z=.25*q);var $=c_.q1,tt=Math.sqrt($.x*$.x+$.y*$.y+$.z*$.z+$.w*$.w);0==tt?($.x=0,$.y=0,$.z=0,$.w=0):(tt=1/tt,$.x*=tt,$.y*=tt,$.z*=tt,$.w*=tt);var et=c_.q2;et.x=c_.vpos.x,et.y=c_.vpos.y,et.z=c_.vpos.z,et.w=0;var at=c_.q2,it=c_.q2,nt=c_.q1,st=it.x,rt=it.y,ot=it.z,lt=it.w,_t=nt.x,ht=nt.y,ct=nt.z,gt=nt.w;at.x=st*gt+lt*_t+rt*ct-ot*ht,at.y=lt*ht-st*ct+rt*gt+ot*_t,at.z=lt*ct+st*ht-rt*_t+ot*gt,at.w=lt*gt-st*_t-rt*ht-ot*ct,this.skinBuffer[8*e]=c_.q1.x,this.skinBuffer[8*e+1]=c_.q1.y,this.skinBuffer[8*e+2]=c_.q1.z,this.skinBuffer[8*e+3]=c_.q1.w,this.skinBuffer[8*e+4]=.5*c_.q2.x,this.skinBuffer[8*e+5]=.5*c_.q2.y,this.skinBuffer[8*e+6]=.5*c_.q2.z,this.skinBuffer[8*e+7]=.5*c_.q2.w},getBone:function(t){if(null==this.skeletonBones)return null;for(var e=0,a=this.skeletonBones;e<a.length;){var i=a[e];if(++e,i.name==t)return i}return null},getBoneIndex:function(t,e){if(null==e&&(e=this.skeletonBones),null!=e)for(var a=0,i=e.length;a<i;){var n=a++;if(e[n]==t)return n}return-1},__class__:c_});var ut=function(){this.isEmpty=!1,this.culledShadow=!1,this.culledMesh=!1,this.culled=!1,this.visibleShadow=!0,this.visibleMesh=!0,this.visible=!0,this.animation=null,this.lods=null,this.children=[],this.parent=null,this.traits=[],this.constraints=null,this.name="",this.raw=null,this.uid=ut.uidCounter++,this.urandom=ut.seededRandom(),this.transform=new je(this),this.isEmpty=f_.getClass(this)==ut,this.isEmpty&&null!=h_.active&&h_.active.empties.push(this)};(i["iron.object.Object"]=ut).__name__=!0,ut.seededRandom=function(){return ut.seed=(9301*ut.seed+49297)%233280,ut.seed/233280},ut.prototype={uid:null,urandom:null,raw:null,name:null,transform:null,constraints:null,traits:null,parent:null,children:null,lods:null,animation:null,visible:null,visibleMesh:null,visibleShadow:null,culled:null,culledMesh:null,culledShadow:null,isEmpty:null,addChild:function(t,e){null==e&&(e=!1),t.parent!=this&&(this.children.push(t),t.parent=this,e&&t.transform.applyParentInverse())},remove:function(){for(this.isEmpty&&null!=h_.active&&q.remove(h_.active.empties,this),null!=this.animation&&this.animation.remove();0<this.children.length;)this.children[0].remove();for(;0<this.traits.length;)this.traits[0].remove();null!=this.parent&&(q.remove(this.parent.children,this),this.parent=null)},getChild:function(t){if(this.name==t)return this;for(var e=0,a=this.children;e<a.length;){var i=a[e];++e;var n=i.getChild(t);if(null!=n)return n}return null},addTrait:function(t){if(this.traits.push(t),t.object=this,null!=t._add){for(var e=0,a=t._add;e<a.length;){var i=a[e];++e,i()}t._add=null}},removeTrait:function(t){if(null!=t._init){for(var e=0,a=t._init;e<a.length;){var i=a[e];++e,L.removeInit(i)}t._init=null}if(null!=t._update){for(var n=0,s=t._update;n<s.length;){var r=s[n];++n,L.removeUpdate(r)}t._update=null}if(null!=t._lateUpdate){for(var o=0,l=t._lateUpdate;o<l.length;){var _=l[o];++o,L.removeLateUpdate(_)}t._lateUpdate=null}if(null!=t._render){for(var h=0,c=t._render;h<c.length;){var g=c[h];++h,L.removeRender(g)}t._render=null}if(null!=t._render2D){for(var u=0,f=t._render2D;u<f.length;){var d=f[u];++u,L.removeRender2D(d)}t._render2D=null}if(null!=t._remove){for(var b=0,p=t._remove;b<p.length;){var m=p[b];++b,m()}t._remove=null}q.remove(this.traits,t)},getTrait:function(t){for(var e=0,a=this.traits;e<a.length;){var i=a[e];if(++e,(null==i?null:f_.getClass(i))==t)return i}return null},getParentArmature:function(t){for(var e=0,a=h_.active.animations;e<a.length;){var i=a[e];if(++e,null!=i.armature&&i.armature.name==t)return i}return null},setupAnimation:function(t){var e=this;null!=this.raw.parent_bone&&h_.active.notifyOnInit(function(){var t=e.getParentArmature(e.parent.name);null!=t&&t.addBoneChild(e.raw.parent_bone,e)}),null!=t&&(this.animation=new mt(this,t))},__class__:ut};var ft=function(t){if(this.frustumPlanes=null,this.prevV=null,ut.call(this),this.data=t,this.buildProjection(),this.V=new fa(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this.VP=new fa(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),t.raw.frustum_culling){this.frustumPlanes=[];for(var e=0;e<6;){e++;this.frustumPlanes.push(new dt)}}h_.active.cameras.push(this)};(i["iron.object.CameraObject"]=ft).__name__=!0,ft.buildViewFrustum=function(t,e){var a=e[0],i=a.normal;i.x=t.self._03+t.self._00,i.y=t.self._13+t.self._10,i.z=t.self._23+t.self._20,i.w=1,a.constant=t.self._33+t.self._30;var n=e[1],s=n.normal;s.x=t.self._03-t.self._00,s.y=t.self._13-t.self._10,s.z=t.self._23-t.self._20,s.w=1,n.constant=t.self._33-t.self._30;var r=e[2],o=r.normal;o.x=t.self._03-t.self._01,o.y=t.self._13-t.self._11,o.z=t.self._23-t.self._21,o.w=1,r.constant=t.self._33-t.self._31;var l=e[3],_=l.normal;_.x=t.self._03+t.self._01,_.y=t.self._13+t.self._11,_.z=t.self._23+t.self._21,_.w=1,l.constant=t.self._33+t.self._31;var h=e[4],c=h.normal;c.x=t.self._02,c.y=t.self._12,c.z=t.self._22,c.w=1,h.constant=t.self._32;var g=e[5],u=g.normal;u.x=t.self._03-t.self._02,u.y=t.self._13-t.self._12,u.z=t.self._23-t.self._22,u.w=1,g.constant=t.self._33-t.self._32;for(var f=0;f<e.length;){var d=e[f];++f,d.normalize()}},ft.sphereInFrustum=function(t,e,a,i,n,s){null==s&&(s=0),null==n&&(n=0),null==i&&(i=0),null==a&&(a=1);for(var r=e.radius*a,o=0;o<t.length;){var l=t[o];++o;var _=ft.sphereCenter;if(_.x=e.world.self._30+i,_.y=e.world.self._31+n,_.z=e.world.self._32+s,_.w=1,l.distanceToSphere(ft.sphereCenter,r)+2*r<0)return!1}return!0},ft.__super__=ut,ft.prototype=s(ut.prototype,{data:null,P:null,V:null,prevV:null,VP:null,frustumPlanes:null,buildProjection:function(t){null==t&&(t=uo.windowWidth()/uo.windowHeight());var e=null!=this.data.raw.aspect?this.data.raw.aspect:t;if(null!=this.data.raw.ortho_scale){var a=this.data.raw.ortho_scale,i=-1*e*a,n=e*a,s=-1*a,r=-1*this.data.raw.far_plane,o=this.data.raw.far_plane,l=n-i,_=a-s,h=o-r,c=-(n+i)/l,g=-(a+s)/_,u=-(o+r)/h;this.P=new fa(2/l,0,0,c,0,2/_,0,g,0,0,-2/h,u,0,0,0,1)}else{var f=this.data.raw.near_plane,d=this.data.raw.far_plane,b=1/Math.tan(this.data.raw.fov/2),p=b/e;this.P=new fa(p,0,0,0,0,b,0,0,0,0,(d+f)/(f-d),2*d*f/(f-d),0,0,-1,0)}},remove:function(){q.remove(h_.active.cameras,this),ut.prototype.remove.call(this)},renderFrame:function(t){if(this.buildMatrix(),null==this.prevV){this.prevV=new fa(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);var e=this.prevV,a=this.V;e.self._00=a.self._00,e.self._01=a.self._01,e.self._02=a.self._02,e.self._03=a.self._03,e.self._10=a.self._10,e.self._11=a.self._11,e.self._12=a.self._12,e.self._13=a.self._13,e.self._20=a.self._20,e.self._21=a.self._21,e.self._22=a.self._22,e.self._23=a.self._23,e.self._30=a.self._30,e.self._31=a.self._31,e.self._32=a.self._32,e.self._33=a.self._33}lo.active.renderFrame(t);var i=this.prevV,n=this.V;i.self._00=n.self._00,i.self._01=n.self._01,i.self._02=n.self._02,i.self._03=n.self._03,i.self._10=n.self._10,i.self._11=n.self._11,i.self._12=n.self._12,i.self._13=n.self._13,i.self._20=n.self._20,i.self._21=n.self._21,i.self._22=n.self._22,i.self._23=n.self._23,i.self._30=n.self._30,i.self._31=n.self._31,i.self._32=n.self._32,i.self._33=n.self._33},buildMatrix:function(){this.transform.buildMatrix();var t=this.transform.world,e=Math.sqrt(t.self._00*t.self._00+t.self._10*t.self._10+t.self._20*t.self._20),a=Math.sqrt(t.self._01*t.self._01+t.self._11*t.self._11+t.self._21*t.self._21),i=Math.sqrt(t.self._02*t.self._02+t.self._12*t.self._12+t.self._22*t.self._22),n=ft.temp;n.x=1/e,n.y=1/a,n.z=1/i,n.w=1;var s=this.transform.world,r=ft.temp,o=r.x,l=r.y,_=r.z;s.self._00*=o,s.self._01*=o,s.self._02*=o,s.self._03*=o,s.self._10*=l,s.self._11*=l,s.self._12*=l,s.self._13*=l,s.self._20*=_,s.self._21*=_,s.self._22*=_,s.self._23*=_;var h=this.V,c=this.transform.world,g=c.self._00,u=c.self._01,f=c.self._02,d=c.self._03,b=c.self._10,p=c.self._11,m=c.self._12,I=c.self._13,v=c.self._20,M=c.self._21,C=c.self._22,y=c.self._23,w=c.self._30,A=c.self._31,x=c.self._32,Z=c.self._33,z=g*p-u*b,B=g*m-f*b,N=g*I-d*b,G=u*m-f*p,k=u*I-d*p,S=f*I-d*m,W=v*A-M*w,X=v*x-C*w,Y=v*Z-y*w,D=M*x-C*A,K=M*Z-y*A,L=C*Z-y*x,V=z*L-B*K+N*D+G*Y-k*X+S*W;0==V?(h.self._00=1,h.self._01=0,h.self._02=0,h.self._03=0,h.self._10=0,h.self._11=1,h.self._12=0,h.self._13=0,h.self._20=0,h.self._21=0,h.self._22=1,h.self._23=0,h.self._30=0,h.self._31=0,h.self._32=0,h.self._33=1):(V=1/V,h.self._00=(p*L-m*K+I*D)*V,h.self._01=(f*K-u*L-d*D)*V,h.self._02=(A*S-x*k+Z*G)*V,h.self._03=(C*k-M*S-y*G)*V,h.self._10=(m*Y-b*L-I*X)*V,h.self._11=(g*L-f*Y+d*X)*V,h.self._12=(x*N-w*S-Z*B)*V,h.self._13=(v*S-C*N+y*B)*V,h.self._20=(b*K-p*Y+I*W)*V,h.self._21=(u*Y-g*K-d*W)*V,h.self._22=(w*k-A*N+Z*z)*V,h.self._23=(M*N-v*k-y*z)*V,h.self._30=(p*X-b*D-m*W)*V,h.self._31=(g*D-u*X+f*W)*V,h.self._32=(A*B-w*G-x*z)*V,h.self._33=(v*G-M*B+C*z)*V);var H=this.VP,j=this.P,T=this.V,R=T.self._00,F=T.self._01,O=T.self._02,P=T.self._03,J=T.self._10,E=T.self._11,U=T.self._12,Q=T.self._13,q=T.self._20,$=T.self._21,tt=T.self._22,et=T.self._23,at=T.self._30,it=T.self._31,nt=T.self._32,st=T.self._33,rt=j.self._00,ot=j.self._10,lt=j.self._20,_t=j.self._30;H.self._00=R*rt+F*ot+O*lt+P*_t,H.self._10=J*rt+E*ot+U*lt+Q*_t,H.self._20=q*rt+$*ot+tt*lt+et*_t,H.self._30=at*rt+it*ot+nt*lt+st*_t,rt=j.self._01,ot=j.self._11,lt=j.self._21,_t=j.self._31,H.self._01=R*rt+F*ot+O*lt+P*_t,H.self._11=J*rt+E*ot+U*lt+Q*_t,H.self._21=q*rt+$*ot+tt*lt+et*_t,H.self._31=at*rt+it*ot+nt*lt+st*_t,rt=j.self._02,ot=j.self._12,lt=j.self._22,_t=j.self._32,H.self._02=R*rt+F*ot+O*lt+P*_t,H.self._12=J*rt+E*ot+U*lt+Q*_t,H.self._22=q*rt+$*ot+tt*lt+et*_t,H.self._32=at*rt+it*ot+nt*lt+st*_t,rt=j.self._03,ot=j.self._13,lt=j.self._23,_t=j.self._33,H.self._03=R*rt+F*ot+O*lt+P*_t,H.self._13=J*rt+E*ot+U*lt+Q*_t,H.self._23=q*rt+$*ot+tt*lt+et*_t,H.self._33=at*rt+it*ot+nt*lt+st*_t,this.data.raw.frustum_culling&&ft.buildViewFrustum(this.VP,this.frustumPlanes)},__class__:ft});var dt=function(){this.constant=0,this.normal=new ho(1,0,0)};(i["iron.object.FrustumPlane"]=dt).__name__=!0,dt.prototype={normal:null,constant:null,normalize:function(){var t=this.normal,e=1/Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z),a=this.normal;a.x*=e,a.y*=e,a.z*=e,this.constant*=e},distanceToSphere:function(t,e){var a=this.normal;return a.x*t.x+a.y*t.y+a.z*t.z+this.constant-e},__class__:dt};var bt=function(t){this.target=null,this.raw=t};(i["iron.object.Constraint"]=bt).__name__=!0,bt.prototype={raw:null,target:null,apply:function(t){if(null==this.target&&null!=this.raw.target&&(this.target=h_.active.getChild(this.raw.target).transform),"COPY_LOCATION"==this.raw.type){if(this.raw.use_x)if(t.world.self._30=this.target.loc.x,this.raw.use_offset)t.world.self._30+=t.loc.x;if(this.raw.use_y)if(t.world.self._31=this.target.loc.y,this.raw.use_offset)t.world.self._31+=t.loc.y;if(this.raw.use_z)if(t.world.self._32=this.target.loc.z,this.raw.use_offset)t.world.self._32+=t.loc.z}},__class__:bt};var pt=function(){ut.call(this)};(i["iron.object.DecalObject"]=pt).__name__=!0,pt.__super__=ut,pt.prototype=s(ut.prototype,{__class__:pt});var sa=function(t){this.frustumPlanes=null,this.VP=new fa(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this.P=null,this.V=new fa(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this.camSlicedP=null,ut.call(this);var e=(this.data=t).raw.type,a=t.raw.fov;if("sun"==e){if(null==sa.corners){sa.corners=[];for(var i=0;i<8;){i++;sa.corners.push(new ho)}}this.P=new fa(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)}else if("point"==e||"area"==e){var n=t.raw.near_plane,s=t.raw.far_plane,r=1/Math.tan(a/2),o=r/1;this.P=new fa(o,0,0,0,0,r,0,0,0,0,(s+n)/(n-s),2*s*n/(n-s),0,0,-1,0)}else if("spot"==e){var l=t.raw.near_plane,_=t.raw.far_plane,h=1/Math.tan(a/2),c=h/1;this.P=new fa(c,0,0,0,0,h,0,0,0,0,(_+l)/(l-_),2*_*l/(l-_),0,0,-1,0)}h_.active.lights.push(this)};(i["iron.object.LightObject"]=sa).__name__=!0,sa.setCorners=function(){var t=sa.corners[0];t.x=-1,t.y=-1,t.z=1,t.w=1;var e=sa.corners[1];e.x=-1,e.y=-1,e.z=-1,e.w=1;var a=sa.corners[2];a.x=-1,a.y=1,a.z=1,a.w=1;var i=sa.corners[3];i.x=-1,i.y=1,i.z=-1,i.w=1;var n=sa.corners[4];n.x=1,n.y=-1,n.z=1,n.w=1;var s=sa.corners[5];s.x=1,s.y=-1,s.z=-1,s.w=1;var r=sa.corners[6];r.x=1,r.y=1,r.z=1,r.w=1;var o=sa.corners[7];o.x=1,o.y=1,o.z=-1,o.w=1},sa.__super__=ut,sa.prototype=s(ut.prototype,{camSlicedP:null,data:null,V:null,P:null,VP:null,frustumPlanes:null,remove:function(){null!=h_.active&&q.remove(h_.active.lights,this),ut.prototype.remove.call(this)},buildMatrices:function(t){if(this.transform.buildMatrix(),"sun"==this.data.raw.type)this.setCascade(t,0);else{var e=this.V,a=this.transform.world,i=a.self._00,n=a.self._01,s=a.self._02,r=a.self._03,o=a.self._10,l=a.self._11,_=a.self._12,h=a.self._13,c=a.self._20,g=a.self._21,u=a.self._22,f=a.self._23,d=a.self._30,b=a.self._31,p=a.self._32,m=a.self._33,I=i*l-n*o,v=i*_-s*o,M=i*h-r*o,C=n*_-s*l,y=n*h-r*l,w=s*h-r*_,A=c*b-g*d,x=c*p-u*d,Z=c*m-f*d,z=g*p-u*b,B=g*m-f*b,N=u*m-f*p,G=I*N-v*B+M*z+C*Z-y*x+w*A;0==G?(e.self._00=1,e.self._01=0,e.self._02=0,e.self._03=0,e.self._10=0,e.self._11=1,e.self._12=0,e.self._13=0,e.self._20=0,e.self._21=0,e.self._22=1,e.self._23=0,e.self._30=0,e.self._31=0,e.self._32=0,e.self._33=1):(G=1/G,e.self._00=(l*N-_*B+h*z)*G,e.self._01=(s*B-n*N-r*z)*G,e.self._02=(b*w-p*y+m*C)*G,e.self._03=(u*y-g*w-f*C)*G,e.self._10=(_*Z-o*N-h*x)*G,e.self._11=(i*N-s*Z+r*x)*G,e.self._12=(p*M-d*w-m*v)*G,e.self._13=(c*w-u*M+f*v)*G,e.self._20=(o*B-l*Z+h*A)*G,e.self._21=(n*Z-i*B-r*A)*G,e.self._22=(d*y-b*M+m*I)*G,e.self._23=(g*M-c*y-f*I)*G,e.self._30=(l*x-o*z-_*A)*G,e.self._31=(i*z-n*x+s*A)*G,e.self._32=(b*v-d*C-p*I)*G,e.self._33=(c*C-g*v+u*I)*G),this.updateViewFrustum(t)}},setCascade:function(t,e){var a=sa.m,i=t.V;if(a.self._00=i.self._00,a.self._01=i.self._01,a.self._02=i.self._02,a.self._03=i.self._03,a.self._10=i.self._10,a.self._11=i.self._11,a.self._12=i.self._12,a.self._13=i.self._13,a.self._20=i.self._20,a.self._21=i.self._21,a.self._22=i.self._22,a.self._23=i.self._23,a.self._30=i.self._30,a.self._31=i.self._31,a.self._32=i.self._32,a.self._33=i.self._33,null==this.camSlicedP){var n=t.data.raw.fov,s=this.data.raw.near_plane,r=this.data.raw.far_plane,o=null!=t.data.raw.aspect?t.data.raw.aspect:uo.windowWidth()/uo.windowHeight(),l=1/Math.tan(n/2),_=l/o;this.camSlicedP=new fa(_,0,0,0,0,l,0,0,0,0,(r+s)/(s-r),2*r*s/(s-r),0,0,-1,0)}var h=sa.m,c=this.camSlicedP,g=h.self._00,u=h.self._01,f=h.self._02,d=h.self._03,b=h.self._10,p=h.self._11,m=h.self._12,I=h.self._13,v=h.self._20,M=h.self._21,C=h.self._22,y=h.self._23,w=h.self._30,A=h.self._31,x=h.self._32,Z=h.self._33,z=c.self._00,B=c.self._10,N=c.self._20,G=c.self._30;h.self._00=g*z+u*B+f*N+d*G,h.self._10=b*z+p*B+m*N+I*G,h.self._20=v*z+M*B+C*N+y*G,h.self._30=w*z+A*B+x*N+Z*G,z=c.self._01,B=c.self._11,N=c.self._21,G=c.self._31,h.self._01=g*z+u*B+f*N+d*G,h.self._11=b*z+p*B+m*N+I*G,h.self._21=v*z+M*B+C*N+y*G,h.self._31=w*z+A*B+x*N+Z*G,z=c.self._02,B=c.self._12,N=c.self._22,G=c.self._32,h.self._02=g*z+u*B+f*N+d*G,h.self._12=b*z+p*B+m*N+I*G,h.self._22=v*z+M*B+C*N+y*G,h.self._32=w*z+A*B+x*N+Z*G,z=c.self._03,B=c.self._13,N=c.self._23,G=c.self._33,h.self._03=g*z+u*B+f*N+d*G,h.self._13=b*z+p*B+m*N+I*G,h.self._23=v*z+M*B+C*N+y*G,h.self._33=w*z+A*B+x*N+Z*G;var k=sa.m,S=sa.m,W=S.self._00,X=S.self._01,Y=S.self._02,D=S.self._03,K=S.self._10,L=S.self._11,V=S.self._12,H=S.self._13,j=S.self._20,T=S.self._21,R=S.self._22,F=S.self._23,O=S.self._30,P=S.self._31,J=S.self._32,E=S.self._33,U=W*L-X*K,Q=W*V-Y*K,q=W*H-D*K,$=X*V-Y*L,tt=X*H-D*L,et=Y*H-D*V,at=j*P-T*O,it=j*J-R*O,nt=j*E-F*O,st=T*J-R*P,rt=T*E-F*P,ot=R*E-F*J,lt=U*ot-Q*rt+q*st+$*nt-tt*it+et*at;0==lt?(k.self._00=1,k.self._01=0,k.self._02=0,k.self._03=0,k.self._10=0,k.self._11=1,k.self._12=0,k.self._13=0,k.self._20=0,k.self._21=0,k.self._22=1,k.self._23=0,k.self._30=0,k.self._31=0,k.self._32=0,k.self._33=1):(lt=1/lt,k.self._00=(L*ot-V*rt+H*st)*lt,k.self._01=(Y*rt-X*ot-D*st)*lt,k.self._02=(P*et-J*tt+E*$)*lt,k.self._03=(R*tt-T*et-F*$)*lt,k.self._10=(V*nt-K*ot-H*it)*lt,k.self._11=(W*ot-Y*nt+D*it)*lt,k.self._12=(J*q-O*et-E*Q)*lt,k.self._13=(j*et-R*q+F*Q)*lt,k.self._20=(K*rt-L*nt+H*at)*lt,k.self._21=(X*nt-W*rt-D*at)*lt,k.self._22=(O*tt-P*q+E*U)*lt,k.self._23=(T*q-j*tt-F*U)*lt,k.self._30=(L*it-K*st-V*at)*lt,k.self._31=(W*st-X*it+Y*at)*lt,k.self._32=(P*Q-O*$-J*U)*lt,k.self._33=(j*$-T*Q+R*U)*lt);var _t=this.V,ht=this.transform.world,ct=ht.self._00,gt=ht.self._01,ut=ht.self._02,ft=ht.self._03,dt=ht.self._10,bt=ht.self._11,pt=ht.self._12,mt=ht.self._13,It=ht.self._20,vt=ht.self._21,Mt=ht.self._22,Ct=ht.self._23,yt=ht.self._30,wt=ht.self._31,At=ht.self._32,xt=ht.self._33,Zt=ct*bt-gt*dt,zt=ct*pt-ut*dt,Bt=ct*mt-ft*dt,Nt=gt*pt-ut*bt,Gt=gt*mt-ft*bt,kt=ut*mt-ft*pt,St=It*wt-vt*yt,Wt=It*At-Mt*yt,Xt=It*xt-Ct*yt,Yt=vt*At-Mt*wt,Dt=vt*xt-Ct*wt,Kt=Mt*xt-Ct*At,Lt=Zt*Kt-zt*Dt+Bt*Yt+Nt*Xt-Gt*Wt+kt*St;0==Lt?(_t.self._00=1,_t.self._01=0,_t.self._02=0,_t.self._03=0,_t.self._10=0,_t.self._11=1,_t.self._12=0,_t.self._13=0,_t.self._20=0,_t.self._21=0,_t.self._22=1,_t.self._23=0,_t.self._30=0,_t.self._31=0,_t.self._32=0,_t.self._33=1):(Lt=1/Lt,_t.self._00=(bt*Kt-pt*Dt+mt*Yt)*Lt,_t.self._01=(ut*Dt-gt*Kt-ft*Yt)*Lt,_t.self._02=(wt*kt-At*Gt+xt*Nt)*Lt,_t.self._03=(Mt*Gt-vt*kt-Ct*Nt)*Lt,_t.self._10=(pt*Xt-dt*Kt-mt*Wt)*Lt,_t.self._11=(ct*Kt-ut*Xt+ft*Wt)*Lt,_t.self._12=(At*Bt-yt*kt-xt*zt)*Lt,_t.self._13=(It*kt-Mt*Bt+Ct*zt)*Lt,_t.self._20=(dt*Dt-bt*Xt+mt*St)*Lt,_t.self._21=(gt*Xt-ct*Dt-ft*St)*Lt,_t.self._22=(yt*Gt-wt*Bt+xt*Zt)*Lt,_t.self._23=(vt*Bt-It*Gt-Ct*Zt)*Lt,_t.self._30=(bt*Wt-dt*Yt-pt*St)*Lt,_t.self._31=(ct*Yt-gt*Wt+ut*St)*Lt,_t.self._32=(wt*zt-yt*Nt-At*Zt)*Lt,_t.self._33=(It*Nt-vt*zt+Mt*Zt)*Lt);var Vt=this.V,Ht=fa.helpVec;Ht.x=Vt.self._00,Ht.y=Vt.self._01,Ht.z=Vt.self._02,Ht.w=1;var jt=Ht,Tt=1/Math.sqrt(jt.x*jt.x+jt.y*jt.y+jt.z*jt.z);Vt.self._00*=Tt,Vt.self._01*=Tt,Vt.self._02*=Tt;var Rt=fa.helpVec;Rt.x=Vt.self._10,Rt.y=Vt.self._11,Rt.z=Vt.self._12,Rt.w=1;var Ft=Rt;Tt=1/Math.sqrt(Ft.x*Ft.x+Ft.y*Ft.y+Ft.z*Ft.z),Vt.self._10*=Tt,Vt.self._11*=Tt,Vt.self._12*=Tt;var Ot=fa.helpVec;Ot.x=Vt.self._20,Ot.y=Vt.self._21,Ot.z=Vt.self._22,Ot.w=1;var Pt=Ot;Tt=1/Math.sqrt(Pt.x*Pt.x+Pt.y*Pt.y+Pt.z*Pt.z),Vt.self._20*=Tt,Vt.self._21*=Tt,Vt.self._22*=Tt,Vt.self._03=0,Vt.self._13=0,Vt.self._23=0,Vt.self._30=0,Vt.self._31=0,Vt.self._32=0,Vt.self._33=1;var Jt=sa.m,Et=this.V,Ut=Jt.self._00,Qt=Jt.self._01,qt=Jt.self._02,$t=Jt.self._03,te=Jt.self._10,ee=Jt.self._11,ae=Jt.self._12,ie=Jt.self._13,ne=Jt.self._20,se=Jt.self._21,re=Jt.self._22,oe=Jt.self._23,le=Jt.self._30,_e=Jt.self._31,he=Jt.self._32,ce=Jt.self._33,ge=Et.self._00,ue=Et.self._10,fe=Et.self._20,de=Et.self._30;Jt.self._00=Ut*ge+Qt*ue+qt*fe+$t*de,Jt.self._10=te*ge+ee*ue+ae*fe+ie*de,Jt.self._20=ne*ge+se*ue+re*fe+oe*de,Jt.self._30=le*ge+_e*ue+he*fe+ce*de,ge=Et.self._01,ue=Et.self._11,fe=Et.self._21,de=Et.self._31,Jt.self._01=Ut*ge+Qt*ue+qt*fe+$t*de,Jt.self._11=te*ge+ee*ue+ae*fe+ie*de,Jt.self._21=ne*ge+se*ue+re*fe+oe*de,Jt.self._31=le*ge+_e*ue+he*fe+ce*de,ge=Et.self._02,ue=Et.self._12,fe=Et.self._22,de=Et.self._32,Jt.self._02=Ut*ge+Qt*ue+qt*fe+$t*de,Jt.self._12=te*ge+ee*ue+ae*fe+ie*de,Jt.self._22=ne*ge+se*ue+re*fe+oe*de,Jt.self._32=le*ge+_e*ue+he*fe+ce*de,ge=Et.self._03,ue=Et.self._13,fe=Et.self._23,de=Et.self._33,Jt.self._03=Ut*ge+Qt*ue+qt*fe+$t*de,Jt.self._13=te*ge+ee*ue+ae*fe+ie*de,Jt.self._23=ne*ge+se*ue+re*fe+oe*de,Jt.self._33=le*ge+_e*ue+he*fe+ce*de,sa.setCorners();for(var be=0,pe=sa.corners;be<pe.length;){var me=pe[be];++be;var Ie=sa.m,ve=me.x,Me=me.y,Ce=me.z,ye=me.w;me.x=Ie.self._00*ve+Ie.self._10*Me+Ie.self._20*Ce+Ie.self._30*ye,me.y=Ie.self._01*ve+Ie.self._11*Me+Ie.self._21*Ce+Ie.self._31*ye,me.z=Ie.self._02*ve+Ie.self._12*Me+Ie.self._22*Ce+Ie.self._32*ye,me.w=Ie.self._03*ve+Ie.self._13*Me+Ie.self._23*Ce+Ie.self._33*ye,me.x/=me.w,me.y/=me.w,me.z/=me.w,me.w=1}for(var we=sa.corners[0].x,Ae=sa.corners[0].y,xe=sa.corners[0].z,Ze=sa.corners[0].x,ze=sa.corners[0].y,Be=sa.corners[0].z,Ne=0,Ge=sa.corners;Ne<Ge.length;){var ke=Ge[Ne];++Ne,ke.x<we&&(we=ke.x),ke.x>Ze&&(Ze=ke.x),ke.y<Ae&&(Ae=ke.y),ke.y>ze&&(ze=ke.y),ke.z<xe&&(xe=ke.z),ke.z>Be&&(Be=ke.z)}var Se=sa.corners[0],We=sa.corners[7],Xe=Se.x-We.x,Ye=Se.y-We.y,De=Se.z-We.z,Ke=Math.sqrt(Xe*Xe+Ye*Ye+De*De),Le=.5*(Ke-(Ze-we)),Ve=.5*(Ke-(ze-Ae));we-=Le,Ze+=Le,Ae-=Ve,ze+=Ve;var He=this.data.raw.shadowmap_size,je=(Ze-we)/He,Te=(ze-Ae)/He,Re=(Be-xe)/He;we=Math.floor(we/je)*je,Ae=Math.floor(Ae/Te)*Te,xe=Math.floor(xe/Re)*Re,Ze=Math.floor(Ze/je)*je,ze=Math.floor(ze/Te)*Te,Be=Math.floor(Be/Re)*Re;var Fe=(Ze-we)/2*sa.cascadeBounds,Oe=(ze-Ae)/2*sa.cascadeBounds,Pe=(Be-xe)/2*sa.cascadeBounds;this.V.self._30=-(we+Fe),this.V.self._31=-(Ae+Oe),this.V.self._32=-(xe+Pe);var Je=-Fe,Ee=-Oe,Ue=4*-Pe,Qe=Fe-Je,qe=Oe-Ee,$e=Pe-Ue,ta=-(Fe+Je)/Qe,ea=-(Oe+Ee)/qe,aa=-(Pe+Ue)/$e;sa.m=new fa(2/Qe,0,0,ta,0,2/qe,0,ea,0,0,-2/$e,aa,0,0,0,1);var ia=this.P,na=sa.m;ia.self._00=na.self._00,ia.self._01=na.self._01,ia.self._02=na.self._02,ia.self._03=na.self._03,ia.self._10=na.self._10,ia.self._11=na.self._11,ia.self._12=na.self._12,ia.self._13=na.self._13,ia.self._20=na.self._20,ia.self._21=na.self._21,ia.self._22=na.self._22,ia.self._23=na.self._23,ia.self._30=na.self._30,ia.self._31=na.self._31,ia.self._32=na.self._32,ia.self._33=na.self._33,this.updateViewFrustum(t)},updateViewFrustum:function(t){var e=this.VP,a=this.P,i=this.V,n=i.self._00,s=i.self._01,r=i.self._02,o=i.self._03,l=i.self._10,_=i.self._11,h=i.self._12,c=i.self._13,g=i.self._20,u=i.self._21,f=i.self._22,d=i.self._23,b=i.self._30,p=i.self._31,m=i.self._32,I=i.self._33,v=a.self._00,M=a.self._10,C=a.self._20,y=a.self._30;if(e.self._00=n*v+s*M+r*C+o*y,e.self._10=l*v+_*M+h*C+c*y,e.self._20=g*v+u*M+f*C+d*y,e.self._30=b*v+p*M+m*C+I*y,v=a.self._01,M=a.self._11,C=a.self._21,y=a.self._31,e.self._01=n*v+s*M+r*C+o*y,e.self._11=l*v+_*M+h*C+c*y,e.self._21=g*v+u*M+f*C+d*y,e.self._31=b*v+p*M+m*C+I*y,v=a.self._02,M=a.self._12,C=a.self._22,y=a.self._32,e.self._02=n*v+s*M+r*C+o*y,e.self._12=l*v+_*M+h*C+c*y,e.self._22=g*v+u*M+f*C+d*y,e.self._32=b*v+p*M+m*C+I*y,v=a.self._03,M=a.self._13,C=a.self._23,y=a.self._33,e.self._03=n*v+s*M+r*C+o*y,e.self._13=l*v+_*M+h*C+c*y,e.self._23=g*v+u*M+f*C+d*y,e.self._33=b*v+p*M+m*C+I*y,t.data.raw.frustum_culling){if(null==this.frustumPlanes){this.frustumPlanes=[];for(var w=0;w<6;){w++;this.frustumPlanes.push(new dt)}}ft.buildViewFrustum(this.VP,this.frustumPlanes)}},setCubeFace:function(t,e){var a=sa.p1;a.x=this.transform.world.self._30,a.y=this.transform.world.self._31,a.z=this.transform.world.self._32,a.w=1;var i=sa.p2,n=sa.p1;switch(i.x=n.x,i.y=n.y,i.z=n.z,t){case 0:var s=sa.p2;s.x+=1,s.y+=0,s.z+=0;var r=sa.p3;r.x=0,r.y=-1,r.z=0,r.w=1;break;case 1:var o=sa.p2;o.x+=-1,o.y+=0,o.z+=0;var l=sa.p3;l.x=0,l.y=-1,l.z=0,l.w=1;break;case 2:var _=sa.p2;_.x+=0,_.y+=1,_.z+=0;var h=sa.p3;h.x=0,h.y=0,h.z=1,h.w=1;break;case 3:var c=sa.p2;c.x+=0,c.y+=-1,c.z+=0;var g=sa.p3;g.x=0,g.y=0,g.z=-1,g.w=1;break;case 4:var u=sa.p2;u.x+=0,u.y+=0,u.z+=1;var f=sa.p3;f.x=0,f.y=-1,f.z=0,f.w=1;break;case 5:var d=sa.p2;d.x+=0,d.y+=0,d.z+=-1;var b=sa.p3;b.x=0,b.y=-1,b.z=0,b.w=1}var p=this.V,m=sa.p1,I=sa.p2,v=sa.p3,M=I.x-m.x,C=I.y-m.y,y=I.z-m.z,w=1/Math.sqrt(M*M+C*C+y*y);M*=w,y*=w;var A=(C*=w)*v.z-y*v.y,x=y*v.x-M*v.z,Z=M*v.y-C*v.x,z=(x*=w=1/Math.sqrt(A*A+x*x+Z*Z))*y-(Z*=w)*C,B=Z*M-(A*=w)*y,N=A*C-x*M,G=-m.x*A-m.y*x-m.z*Z,k=-m.x*z-m.y*B-m.z*N,S=m.x*M+m.y*C+m.z*y;p.self._00=A,p.self._10=x,p.self._20=Z,p.self._30=G,p.self._01=z,p.self._11=B,p.self._21=N,p.self._31=k,p.self._02=-M,p.self._12=-C,p.self._22=-y,p.self._32=S,p.self._03=0,p.self._13=0,p.self._23=0,p.self._33=1,this.updateViewFrustum(e)},__class__:sa});var g_=function(t,e){this.tilesheet=null,this.frustumCulling=!0,this.screenSize=0,this.data=null,ut.call(this),this.materials=e,this.setData(t),h_.active.meshes.push(this)};(i["iron.object.MeshObject"]=g_).__name__=!0,g_.__super__=ut,g_.prototype=s(ut.prototype,{data:null,materials:null,cameraDistance:null,screenSize:null,frustumCulling:null,tilesheet:null,setData:function(t){(this.data=t).refcount++,t.geom.build()},remove:function(){null!=this.tilesheet&&this.tilesheet.remove(),null!=h_.active&&q.remove(h_.active.meshes,this),this.data.refcount--,ut.prototype.remove.call(this)},setupAnimation:function(t){if(null!=this.parent&&null!=this.parent.raw&&null!=this.parent.raw.bone_actions){var e=this.parent.name;this.animation=this.getParentArmature(e),null==this.animation&&(this.animation=new c_(e)),this.data.isSkinned&&f_.__cast(this.animation,c_).setSkin(this)}ut.prototype.setupAnimation.call(this,t)},setupTilesheet:function(t,e,a){this.tilesheet=new vt(t,e,a)},setCulled:function(t,e){return t?this.culledShadow=e:this.culledMesh=e,this.culled=this.culledMesh&&this.culledShadow,e},cullMaterial:function(t){var e=this.materials;if((null==this.raw||null==this.raw.lod_material||1!=this.raw.lod_material)&&null==e[0].getContext(t))return!0;var a="shadowmap"==t;return this.visibleMesh||a?!this.visibleShadow&&a?this.setCulled(a,!0):this.skipContext(t)?this.setCulled(a,!0):this.setCulled(a,!1):this.setCulled(a,!0)},cullMesh:function(t,e,a){if(null==e)return!1;if(e.data.raw.frustum_culling&&this.frustumCulling){var i=this.data.isSkinned?2:1;"voxel"==t&&(i*=100);var n="shadowmap"==t,s=n?a.frustumPlanes:e.frustumPlanes;if(n&&"sun"!=a.data.raw.type&&(a.transform.radius=a.data.raw.far_plane,!ft.sphereInFrustum(e.frustumPlanes,a.transform)))return this.setCulled(n,!0);if(!this.data.geom.instanced&&!ft.sphereInFrustum(s,this.transform,i))return this.setCulled(n,!0)}return this.culled=!1,this.culled},skipContext:function(t){for(var e=0,a=this.materials;e<a.length;){var i=a[e];if(++e,null!=i.raw.skip_context&&i.raw.skip_context==t)return!0}return!1},getContexts:function(t,e,a,i){for(var n=0;n<e.length;){var s=e[n];++n;for(var r=0,o=s.raw.contexts.length;r<o;){var l=r++;if(q.substr(s.raw.contexts[l].name,0,t.length)==t){a.push(s.contexts[l]),i.push(s.shader.getContext(t));break}}}},render:function(t,e,a,i,n){if(null!=this.data&&this.data.geom.ready&&this.visible&&!this.cullMesh(e,a,i)){this.raw;if(null!=this.tilesheet&&this.tilesheet.update(),!this.cullMaterial(e)){var s=this.materials,r=this;if(null!=this.raw&&null!=this.raw.lods&&0<this.raw.lods.length){var o=this.transform,l=o.dim.x*o.dim.y*o.dim.z;if(this.screenSize=l*(1/this.cameraDistance),this.screenSize=1<this.screenSize?1:this.screenSize,null==this.lods){this.lods=[];for(var _=0,h=this.raw.lods;_<h.length;){var c=h[_];++_,""==c.object_ref?this.lods.push(null):this.lods.push(h_.active.getChild(c.object_ref))}}if("voxel"==e)r=this.lods[this.lods.length-1];else for(var g=0,u=this.raw.lods.length;g<u;){var f=g++;if(this.screenSize>this.raw.lods[f].screen_size)break;r=this.lods[f],null!=this.raw&&null!=this.raw.lod_material&&1==this.raw.lod_material&&(s=r.materials)}if(null==r)return}if(null==this.raw||null==this.raw.lod_material||1!=this.raw.lod_material||null!=s[0].getContext(e)){var d=[],b=[];this.getContexts(e,s,d,b),this.transform.update();for(var p=r.data,m=0,I=p.geom.indexBuffers.length;m<I;){var v=m++,M=p.geom.materialIndices[v];if(!(b.length<=M)){var C=b[M],y=C.raw.vertex_structure;C.pipeState!=g_.lastPipeline&&(t.setPipeline(C.pipeState),g_.lastPipeline=C.pipeState,u_.setContextConstants(t,C,a,i,n)),u_.setObjectConstants(t,C,this,a,i),M<d.length&&u_.setMaterialConstants(t,C,d[M]),p.geom.instanced?t.setVertexBuffers([p.geom.get(y),p.geom.instancedVB]):t.setVertexBuffer(p.geom.get(y)),t.setIndexBuffer(p.geom.indexBuffers[v]),p.geom.instanced?t.drawIndexedVerticesInstanced(p.geom.instanceCount,p.geom.start,p.geom.count):t.drawIndexedVertices(p.geom.start,p.geom.count)}}}}}},__class__:g_});var mt=function(t,e){this.bezierFrameIndex=-1,this.s0=0,this.object=t,this.oactions=e,this.isSkinned=!1,Fe.call(this)};(i["iron.object.ObjectAnimation"]=mt).__name__=!0,mt.__super__=Fe,mt.prototype=s(Fe.prototype,{object:null,oactions:null,oaction:null,getAction:function(t){for(var e=0,a=this.oactions;e<a.length;){var i=a[e];if(++e,null!=i&&i.objects[0].name==t)return i.objects[0]}return null},play:function(t,e,a,i,n){null==n&&(n=!0),null==i&&(i=1),null==a&&(a=0),null==t&&(t=""),Fe.prototype.play.call(this,t,e,a,i,n),""==this.action&&null!=this.oactions[0]&&(this.action=this.oactions[0].objects[0].name),this.oaction=this.getAction(this.action),null!=this.oaction&&(this.isSampled=null!=this.oaction.sampled&&this.oaction.sampled)},update:function(t){this.object.visible&&!this.object.culled&&null!=this.oaction&&(Fe.prototype.update.call(this,t),this.paused||this.isSkinned||this.updateObjectAnim())},updateObjectAnim:function(){if(this.isSampled){this.updateTrack(this.oaction.anim),this.updateAnimSampled(this.oaction.anim,this.object.transform.world);var t=this.object.transform.world,e=this.object.transform.loc,a=this.object.transform.rot,i=this.object.transform.scale;e.x=t.self._30,e.y=t.self._31,e.z=t.self._32;var n=fa.helpVec;n.x=t.self._00,n.y=t.self._01,n.z=t.self._02,n.w=1;var s=n;i.x=Math.sqrt(s.x*s.x+s.y*s.y+s.z*s.z);var r=fa.helpVec;r.x=t.self._10,r.y=t.self._11,r.z=t.self._12,r.w=1;var o=r;i.y=Math.sqrt(o.x*o.x+o.y*o.y+o.z*o.z);var l=fa.helpVec;l.x=t.self._20,l.y=t.self._21,l.z=t.self._22,l.w=1;var _=l;i.z=Math.sqrt(_.x*_.x+_.y*_.y+_.z*_.z);var h=t.self,c=h._12,g=h._22,u=h._32,f=h._13,d=h._23,b=h._33,p=h._11*(g*b-u*d)-h._21*(c*b-u*f)+h._31*(c*d-g*f),m=h._12,I=h._22,v=h._32,M=h._13,C=h._23,y=h._33,w=h._10*(I*y-v*C)-h._20*(m*y-v*M)+h._30*(m*C-I*M),A=h._11,x=h._21,Z=h._31,z=h._13,B=h._23,N=h._33,G=h._10*(x*N-Z*B)-h._20*(A*N-Z*z)+h._30*(A*B-x*z),k=h._11,S=h._21,W=h._31,X=h._12,Y=h._22,D=h._32,K=h._10*(S*D-W*Y)-h._20*(k*D-W*X)+h._30*(k*Y-S*X);h._00*p-h._01*w+h._02*G-h._03*K<0&&(i.x=-i.x);var L=1/i.x;fa.helpMat.self._00=t.self._00*L,fa.helpMat.self._01=t.self._01*L,fa.helpMat.self._02=t.self._02*L,L=1/i.y,fa.helpMat.self._10=t.self._10*L,fa.helpMat.self._11=t.self._11*L,fa.helpMat.self._12=t.self._12*L,L=1/i.z,fa.helpMat.self._20=t.self._20*L,fa.helpMat.self._21=t.self._21*L,fa.helpMat.self._22=t.self._22*L;var V=fa.helpMat,H=V.self._00,j=V.self._10,T=V.self._20,R=V.self._01,F=V.self._11,O=V.self._21,P=V.self._02,J=V.self._12,E=V.self._22,U=H+F+E,Q=0;0<U?(Q=.5/Math.sqrt(U+1),a.w=.25/Q,a.x=(J-O)*Q,a.y=(T-P)*Q,a.z=(R-j)*Q):F<H&&E<H?(Q=2*Math.sqrt(1+H-F-E),a.w=(J-O)/Q,a.x=.25*Q,a.y=(j+R)/Q,a.z=(T+P)/Q):E<F?(Q=2*Math.sqrt(1+F-H-E),a.w=(T-P)/Q,a.x=(j+R)/Q,a.y=.25*Q,a.z=(O+J)/Q):(Q=2*Math.sqrt(1+E-H-F),a.w=(R-j)/Q,a.x=(T+P)/Q,a.y=(O+J)/Q,a.z=.25*Q);for(var q=0,$=this.object.children;q<$.length;){var tt=$[q];++q,tt.transform.buildMatrix()}}else this.updateAnimNonSampled(this.oaction.anim,this.object.transform),this.object.transform.buildMatrix()},s0:null,bezierFrameIndex:null,isTrackEnd:function(t){return 0<this.speed?this.frameIndex>=t.frames.length-2:this.frameIndex<=0},updateAnimNonSampled:function(t,e){if(null!=t){var a=t.end*this.frameTime-t.begin*this.frameTime;if(t.has_delta){var i=e;null==i.dloc&&(i.dloc=new ho,i.drot=new gt,i.dscale=new ho);var n=i.dloc;n.x=0,n.y=0,n.z=0,n.w=1;var s=i.dscale;s.x=0,s.y=0,s.z=0,s.w=1,i._deulerX=i._deulerY=i._deulerZ=0}for(var r=0,o=t.tracks;r<o.length;){var l=o[r];++r,-1==this.frameIndex&&this.rewind(l);for(var _=0<this.speed?1:-1,h=this.time+t.begin*this.frameTime;;){var c=l.frames;if(!(0<this.speed?this.frameIndex<c.length-2&&h>c[this.frameIndex+1]*this.frameTime:1<this.frameIndex&&h>c[this.frameIndex-1]*this.frameTime))break;this.frameIndex+=_}if(!(this.frameIndex>=l.frames.length)){if(this.time>a)return null!=this.onComplete&&this.onComplete(),void this.rewind(l);var g=this.frameIndex,u=l.frames[g]*this.frameTime,f=l.frames[g+_]*this.frameTime,d=l.values[g],b=l.values[g+_],p=0;switch(l.curve){case"bezier":var m=l.frames_control_plus[g]*this.frameTime,I=l.frames_control_minus[g+_]*this.frameTime,v=l.values_control_plus[g],M=l.values_control_minus[g+_];this.frameIndex!=this.bezierFrameIndex&&(this.bezierFrameIndex=this.frameIndex,this.s0=(h-u)/(f-u));var C=(f-3*I+3*m-u)*(this.s0*this.s0*this.s0)+3*(I-2*m+u)*(this.s0*this.s0)+3*(m-u)*this.s0+u-h,y=3*(f-3*I+3*m-u)*(this.s0*this.s0)+6*(I-2*m+u)*this.s0+3*(m-u),w=this.s0-C/y;p=(1-(this.s0=w))*(1-w)*(1-w)*d+3*w*(1-w)*(1-w)*v+w*w*3*(1-w)*M+w*w*w*b;break;case"linear":var A=(h-u)/(f-u);p=(1-A)*d+A*b}switch(l.target){case"dxloc":e.dloc.x=p;break;case"dxrot":e._deulerX=p;break;case"dxscl":e.dscale.x=p;break;case"dyloc":e.dloc.y=p;break;case"dyrot":e._deulerY=p;break;case"dyscl":e.dscale.y=p;break;case"dzloc":e.dloc.z=p;break;case"dzrot":e._deulerZ=p;break;case"dzscl":e.dscale.z=p;break;case"xloc":e.loc.x=p;break;case"xrot":e.setRotation(p,e._eulerY,e._eulerZ);break;case"xscl":e.scale.x=p;break;case"yloc":e.loc.y=p;break;case"yrot":e.setRotation(e._eulerX,p,e._eulerZ);break;case"yscl":e.scale.y=p;break;case"zloc":e.loc.z=p;break;case"zrot":e.setRotation(e._eulerX,e._eulerY,p);break;case"zscl":e.scale.z=p}}}}},__class__:mt});var It=function(t){this.paused=!1,this.channels=[],this.sound=null;var e=this;ut.call(this),this.data=t,h_.active.speakers.push(this),""!=t.sound&&R.getSound(t.sound,function(t){e.sound=t,L.notifyOnInit($n(e,e.init))})};(i["iron.object.SpeakerObject"]=It).__name__=!0,It.__super__=ut,It.prototype=s(ut.prototype,{data:null,sound:null,channels:null,paused:null,init:function(){this.visible&&this.data.play_on_start&&this.play()},play:function(){if(null!=this.sound&&!this.data.muted)if(this.paused){for(var t=0,e=this.channels;t<e.length;){var a=e[t];++t,a.play()}this.paused=!1}else{var i=yt.play(this.sound,this.data.loop,this.data.stream);this.channels.push(i),0<this.data.attenuation&&1==this.channels.length&&L.notifyOnUpdate($n(this,this.update))}},update:function(){if(!this.paused){for(var t=0,e=this.channels;t<e.length;){var a=e[t];++t,a.get_finished()&&q.remove(this.channels,a)}if(0!=this.channels.length){var i=h_.active.camera.transform.world,n=i.self._30,s=i.self._31,r=i.self._32,o=(i.self._33,this.transform.world),l=o.self._30,_=o.self._31,h=o.self._32,c=(o.self._33,n-l),g=s-_,u=r-h,f=Math.sqrt(c*c+g*g+u*u);f*=this.data.attenuation;for(var d=1-Math.min(f/100,1),b=0,p=this.channels;b<p.length;){var m=p[b];++b,m.set_volume(d*this.data.volume)}}else L.removeUpdate($n(this,this.update))}},remove:function(){null!=h_.active&&q.remove(h_.active.speakers,this),ut.prototype.remove.call(this)},__class__:It});var vt=function(t,n,s){this.onActionComplete=null,this.time=0,this.frame=0,this.paused=!1,this.action=null,this.tileY=0,this.tileX=0;var r=this;this.ready=!1,R.getSceneRaw(t,function(t){for(var e=0,a=t.tilesheet_datas;e<a.length;){var i=a[e];if(++e,i.name==n){r.raw=i,r.play(s),r.ready=!0;break}}})};(i["iron.object.Tilesheet"]=vt).__name__=!0,vt.prototype={tileX:null,tileY:null,raw:null,action:null,ready:null,paused:null,frame:null,time:null,onActionComplete:null,play:function(t,e){this.onActionComplete=e;for(var a=0,i=this.raw.actions;a<i.length;){var n=i[a];if(++a,n.name==t){this.action=n;break}}this.setFrame(this.action.start),this.paused=!1},remove:function(){},update:function(){!this.ready||this.paused||this.action.start>=this.action.end||(this.time+=.016666666666666666*co.scale,this.time>=1/this.raw.framerate&&this.setFrame(this.frame+1))},setFrame:function(t){this.frame=t,this.time=0;var e=this.frame%this.raw.tilesx,a=this.frame/this.raw.tilesx|0;this.tileX=e*(1/this.raw.tilesx),this.tileY=a*(1/this.raw.tilesy),this.frame>=this.action.end&&this.action.start<this.action.end&&(null!=this.onActionComplete&&this.onActionComplete(),this.action.loop?this.setFrame(this.action.start):this.paused=!0)},__class__:vt};var je=function(t){this.dscale=null,this.drot=null,this.dloc=null,this.boneParent=null,this.appendMats=null,this.prependMats=null,this.localOnly=!1,this.object=t,this.reset()};(i["iron.object.Transform"]=je).__name__=!0,je.prototype={world:null,localOnly:null,local:null,loc:null,rot:null,scale:null,dirty:null,object:null,dim:null,radius:null,prependMats:null,appendMats:null,boneParent:null,reset:function(){this.world=new fa(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this.local=new fa(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this.loc=new ho,this.rot=new gt,this.scale=new ho(1,1,1),this.dim=new ho(2,2,2),this.radius=1,this.dirty=!0},update:function(){this.dirty&&this.buildMatrix()},composeDelta:function(){var t=this.dloc,e=this.loc,a=this.dloc;t.x=e.x+a.x,t.y=e.y+a.y,t.z=e.z+a.z;var i=this.dscale,n=this.dscale,s=this.scale;i.x=n.x+s.x,i.y=n.y+s.y,i.z=n.z+s.z;var r=this.drot,o=this._deulerX/2,l=Math.cos(o),_=Math.sin(o);o=this._deulerY/2;var h=Math.cos(o),c=Math.sin(o);o=this._deulerZ/2;var g=Math.cos(o),u=Math.sin(o);r.x=_*h*g+l*c*u,r.y=l*c*g+_*h*u,r.z=l*h*u-_*c*g,r.w=l*h*g-_*c*u;var f=this.drot,d=this.rot,b=this.drot,p=d.x,m=d.y,I=d.z,v=d.w,M=b.x,C=b.y,y=b.z,w=b.w;f.x=p*w+v*M+m*y-I*C,f.y=v*C-p*y+m*w+I*M,f.z=v*y+p*C-m*M+I*w,f.w=v*w-p*M-m*C-I*y;var A=this.local,x=this.dloc,Z=this.drot,z=this.dscale,B=Z.x,N=Z.y,G=Z.z,k=Z.w,S=B+B,W=N+N,X=G+G,Y=B*S,D=B*W,K=B*X,L=N*W,V=N*X,H=G*X,j=k*S,T=k*W,R=k*X;A.self._00=1-(L+H),A.self._10=D-R,A.self._20=K+T,A.self._01=D+R,A.self._11=1-(Y+H),A.self._21=V-j,A.self._02=K-T,A.self._12=V+j,A.self._22=1-(Y+L),A.self._03=0,A.self._13=0,A.self._23=0,A.self._30=0,A.self._31=0,A.self._32=0,A.self._33=1;var F=z.x,O=z.y,P=z.z;A.self._00*=F,A.self._01*=F,A.self._02*=F,A.self._03*=F,A.self._10*=O,A.self._11*=O,A.self._12*=O,A.self._13*=O,A.self._20*=P,A.self._21*=P,A.self._22*=P,A.self._23*=P,A.self._30=x.x,A.self._31=x.y,A.self._32=x.z},buildMatrix:function(){if(null==this.dloc){var t=this.local,e=this.loc,a=this.rot,i=this.scale,n=a.x,s=a.y,r=a.z,o=a.w,l=n+n,_=s+s,h=r+r,c=n*l,g=n*_,u=n*h,f=s*_,d=s*h,b=r*h,p=o*l,m=o*_,I=o*h;t.self._00=1-(f+b),t.self._10=g-I,t.self._20=u+m,t.self._01=g+I,t.self._11=1-(c+b),t.self._21=d-p,t.self._02=u-m,t.self._12=d+p,t.self._22=1-(c+f),t.self._03=0,t.self._13=0,t.self._23=0,t.self._30=0,t.self._31=0,t.self._32=0,t.self._33=1;var v=i.x,M=i.y,C=i.z;t.self._00*=v,t.self._01*=v,t.self._02*=v,t.self._03*=v,t.self._10*=M,t.self._11*=M,t.self._12*=M,t.self._13*=M,t.self._20*=C,t.self._21*=C,t.self._22*=C,t.self._23*=C,t.self._30=e.x,t.self._31=e.y,t.self._32=e.z}else this.composeDelta();if(null!=this.prependMats){var y=je.temp;y.self._00=1,y.self._01=0,y.self._02=0,y.self._03=0,y.self._10=0,y.self._11=1,y.self._12=0,y.self._13=0,y.self._20=0,y.self._21=0,y.self._22=1,y.self._23=0,y.self._30=0,y.self._31=0,y.self._32=0,y.self._33=1;for(var w=0,A=this.prependMats;w<A.length;){var x=A[w];++w;var Z=je.temp,z=Z.self._00,B=Z.self._01,N=Z.self._02,G=Z.self._03,k=Z.self._10,S=Z.self._11,W=Z.self._12,X=Z.self._13,Y=Z.self._20,D=Z.self._21,K=Z.self._22,L=Z.self._23,V=Z.self._30,H=Z.self._31,j=Z.self._32,T=Z.self._33,R=x.self._00,F=x.self._10,O=x.self._20,P=x.self._30;Z.self._00=z*R+B*F+N*O+G*P,Z.self._10=k*R+S*F+W*O+X*P,Z.self._20=Y*R+D*F+K*O+L*P,Z.self._30=V*R+H*F+j*O+T*P,R=x.self._01,F=x.self._11,O=x.self._21,P=x.self._31,Z.self._01=z*R+B*F+N*O+G*P,Z.self._11=k*R+S*F+W*O+X*P,Z.self._21=Y*R+D*F+K*O+L*P,Z.self._31=V*R+H*F+j*O+T*P,R=x.self._02,F=x.self._12,O=x.self._22,P=x.self._32,Z.self._02=z*R+B*F+N*O+G*P,Z.self._12=k*R+S*F+W*O+X*P,Z.self._22=Y*R+D*F+K*O+L*P,Z.self._32=V*R+H*F+j*O+T*P,R=x.self._03,F=x.self._13,O=x.self._23,P=x.self._33,Z.self._03=z*R+B*F+N*O+G*P,Z.self._13=k*R+S*F+W*O+X*P,Z.self._23=Y*R+D*F+K*O+L*P,Z.self._33=V*R+H*F+j*O+T*P}var J=je.temp,E=this.local,U=J.self._00,Q=J.self._01,q=J.self._02,$=J.self._03,tt=J.self._10,et=J.self._11,at=J.self._12,it=J.self._13,nt=J.self._20,st=J.self._21,rt=J.self._22,ot=J.self._23,lt=J.self._30,_t=J.self._31,ht=J.self._32,ct=J.self._33,gt=E.self._00,ut=E.self._10,ft=E.self._20,dt=E.self._30;J.self._00=U*gt+Q*ut+q*ft+$*dt,J.self._10=tt*gt+et*ut+at*ft+it*dt,J.self._20=nt*gt+st*ut+rt*ft+ot*dt,J.self._30=lt*gt+_t*ut+ht*ft+ct*dt,gt=E.self._01,ut=E.self._11,ft=E.self._21,dt=E.self._31,J.self._01=U*gt+Q*ut+q*ft+$*dt,J.self._11=tt*gt+et*ut+at*ft+it*dt,J.self._21=nt*gt+st*ut+rt*ft+ot*dt,J.self._31=lt*gt+_t*ut+ht*ft+ct*dt,gt=E.self._02,ut=E.self._12,ft=E.self._22,dt=E.self._32,J.self._02=U*gt+Q*ut+q*ft+$*dt,J.self._12=tt*gt+et*ut+at*ft+it*dt,J.self._22=nt*gt+st*ut+rt*ft+ot*dt,J.self._32=lt*gt+_t*ut+ht*ft+ct*dt,gt=E.self._03,ut=E.self._13,ft=E.self._23,dt=E.self._33,J.self._03=U*gt+Q*ut+q*ft+$*dt,J.self._13=tt*gt+et*ut+at*ft+it*dt,J.self._23=nt*gt+st*ut+rt*ft+ot*dt,J.self._33=lt*gt+_t*ut+ht*ft+ct*dt;var bt=this.local,pt=je.temp;bt.self._00=pt.self._00,bt.self._01=pt.self._01,bt.self._02=pt.self._02,bt.self._03=pt.self._03,bt.self._10=pt.self._10,bt.self._11=pt.self._11,bt.self._12=pt.self._12,bt.self._13=pt.self._13,bt.self._20=pt.self._20,bt.self._21=pt.self._21,bt.self._22=pt.self._22,bt.self._23=pt.self._23,bt.self._30=pt.self._30,bt.self._31=pt.self._31,bt.self._32=pt.self._32,bt.self._33=pt.self._33}if(null!=this.appendMats)for(var mt=0,It=this.appendMats;mt<It.length;){var vt=It[mt];++mt;var Mt=this.local,Ct=Mt.self._00,yt=Mt.self._01,wt=Mt.self._02,At=Mt.self._03,xt=Mt.self._10,Zt=Mt.self._11,zt=Mt.self._12,Bt=Mt.self._13,Nt=Mt.self._20,Gt=Mt.self._21,kt=Mt.self._22,St=Mt.self._23,Wt=Mt.self._30,Xt=Mt.self._31,Yt=Mt.self._32,Dt=Mt.self._33,Kt=vt.self._00,Lt=vt.self._10,Vt=vt.self._20,Ht=vt.self._30;Mt.self._00=Ct*Kt+yt*Lt+wt*Vt+At*Ht,Mt.self._10=xt*Kt+Zt*Lt+zt*Vt+Bt*Ht,Mt.self._20=Nt*Kt+Gt*Lt+kt*Vt+St*Ht,Mt.self._30=Wt*Kt+Xt*Lt+Yt*Vt+Dt*Ht,Kt=vt.self._01,Lt=vt.self._11,Vt=vt.self._21,Ht=vt.self._31,Mt.self._01=Ct*Kt+yt*Lt+wt*Vt+At*Ht,Mt.self._11=xt*Kt+Zt*Lt+zt*Vt+Bt*Ht,Mt.self._21=Nt*Kt+Gt*Lt+kt*Vt+St*Ht,Mt.self._31=Wt*Kt+Xt*Lt+Yt*Vt+Dt*Ht,Kt=vt.self._02,Lt=vt.self._12,Vt=vt.self._22,Ht=vt.self._32,Mt.self._02=Ct*Kt+yt*Lt+wt*Vt+At*Ht,Mt.self._12=xt*Kt+Zt*Lt+zt*Vt+Bt*Ht,Mt.self._22=Nt*Kt+Gt*Lt+kt*Vt+St*Ht,Mt.self._32=Wt*Kt+Xt*Lt+Yt*Vt+Dt*Ht,Kt=vt.self._03,Lt=vt.self._13,Vt=vt.self._23,Ht=vt.self._33,Mt.self._03=Ct*Kt+yt*Lt+wt*Vt+At*Ht,Mt.self._13=xt*Kt+Zt*Lt+zt*Vt+Bt*Ht,Mt.self._23=Nt*Kt+Gt*Lt+kt*Vt+St*Ht,Mt.self._33=Wt*Kt+Xt*Lt+Yt*Vt+Dt*Ht}if(null!=this.boneParent){var jt=this.local,Tt=this.boneParent,Rt=this.local,Ft=Rt.self._00,Ot=Rt.self._01,Pt=Rt.self._02,Jt=Rt.self._03,Et=Rt.self._10,Ut=Rt.self._11,Qt=Rt.self._12,qt=Rt.self._13,$t=Rt.self._20,te=Rt.self._21,ee=Rt.self._22,ae=Rt.self._23,ie=Rt.self._30,ne=Rt.self._31,se=Rt.self._32,re=Rt.self._33,oe=Tt.self._00,le=Tt.self._10,_e=Tt.self._20,he=Tt.self._30;jt.self._00=Ft*oe+Ot*le+Pt*_e+Jt*he,jt.self._10=Et*oe+Ut*le+Qt*_e+qt*he,jt.self._20=$t*oe+te*le+ee*_e+ae*he,jt.self._30=ie*oe+ne*le+se*_e+re*he,oe=Tt.self._01,le=Tt.self._11,_e=Tt.self._21,he=Tt.self._31,jt.self._01=Ft*oe+Ot*le+Pt*_e+Jt*he,jt.self._11=Et*oe+Ut*le+Qt*_e+qt*he,jt.self._21=$t*oe+te*le+ee*_e+ae*he,jt.self._31=ie*oe+ne*le+se*_e+re*he,oe=Tt.self._02,le=Tt.self._12,_e=Tt.self._22,he=Tt.self._32,jt.self._02=Ft*oe+Ot*le+Pt*_e+Jt*he,jt.self._12=Et*oe+Ut*le+Qt*_e+qt*he,jt.self._22=$t*oe+te*le+ee*_e+ae*he,jt.self._32=ie*oe+ne*le+se*_e+re*he,oe=Tt.self._03,le=Tt.self._13,_e=Tt.self._23,he=Tt.self._33,jt.self._03=Ft*oe+Ot*le+Pt*_e+Jt*he,jt.self._13=Et*oe+Ut*le+Qt*_e+qt*he,jt.self._23=$t*oe+te*le+ee*_e+ae*he,jt.self._33=ie*oe+ne*le+se*_e+re*he}if(null==this.object.parent||this.localOnly){var ce=this.world,ge=this.local;ce.self._00=ge.self._00,ce.self._01=ge.self._01,ce.self._02=ge.self._02,ce.self._03=ge.self._03,ce.self._10=ge.self._10,ce.self._11=ge.self._11,ce.self._12=ge.self._12,ce.self._13=ge.self._13,ce.self._20=ge.self._20,ce.self._21=ge.self._21,ce.self._22=ge.self._22,ce.self._23=ge.self._23,ce.self._30=ge.self._30,ce.self._31=ge.self._31,ce.self._32=ge.self._32,ce.self._33=ge.self._33}else{var ue=this.world,fe=this.local,de=this.object.parent.transform.world,be=fe.self._00,pe=fe.self._01,me=fe.self._02,Ie=fe.self._03,ve=fe.self._10,Me=fe.self._11,Ce=fe.self._12,ye=fe.self._13,we=fe.self._20,Ae=fe.self._21,xe=fe.self._22,Ze=fe.self._23,ze=fe.self._30,Be=fe.self._31,Ne=fe.self._32,Ge=fe.self._33,ke=de.self._00,Se=de.self._10,We=de.self._20,Xe=de.self._30;ue.self._00=be*ke+pe*Se+me*We+Ie*Xe,ue.self._10=ve*ke+Me*Se+Ce*We+ye*Xe,ue.self._20=we*ke+Ae*Se+xe*We+Ze*Xe,ue.self._30=ze*ke+Be*Se+Ne*We+Ge*Xe,ke=de.self._01,Se=de.self._11,We=de.self._21,Xe=de.self._31,ue.self._01=be*ke+pe*Se+me*We+Ie*Xe,ue.self._11=ve*ke+Me*Se+Ce*We+ye*Xe,ue.self._21=we*ke+Ae*Se+xe*We+Ze*Xe,ue.self._31=ze*ke+Be*Se+Ne*We+Ge*Xe,ke=de.self._02,Se=de.self._12,We=de.self._22,Xe=de.self._32,ue.self._02=be*ke+pe*Se+me*We+Ie*Xe,ue.self._12=ve*ke+Me*Se+Ce*We+ye*Xe,ue.self._22=we*ke+Ae*Se+xe*We+Ze*Xe,ue.self._32=ze*ke+Be*Se+Ne*We+Ge*Xe,ue.self._03=0,ue.self._13=0,ue.self._23=0,ue.self._33=1}if(null!=this.object.constraints)for(var Ye=0,De=this.object.constraints;Ye<De.length;){var Ke=De[Ye];++Ye,Ke.apply(this)}this.computeDim();for(var Le=0,Ve=this.object.children;Le<Ve.length;){var He=Ve[Le];++Le,He.transform.buildMatrix()}this.dirty=!1},decompose:function(){var t=this.local,e=this.loc,a=this.rot,i=this.scale;e.x=t.self._30,e.y=t.self._31,e.z=t.self._32;var n=fa.helpVec;n.x=t.self._00,n.y=t.self._01,n.z=t.self._02,n.w=1;var s=n;i.x=Math.sqrt(s.x*s.x+s.y*s.y+s.z*s.z);var r=fa.helpVec;r.x=t.self._10,r.y=t.self._11,r.z=t.self._12,r.w=1;var o=r;i.y=Math.sqrt(o.x*o.x+o.y*o.y+o.z*o.z);var l=fa.helpVec;l.x=t.self._20,l.y=t.self._21,l.z=t.self._22,l.w=1;var _=l;i.z=Math.sqrt(_.x*_.x+_.y*_.y+_.z*_.z);var h=t.self,c=h._12,g=h._22,u=h._32,f=h._13,d=h._23,b=h._33,p=h._11*(g*b-u*d)-h._21*(c*b-u*f)+h._31*(c*d-g*f),m=h._12,I=h._22,v=h._32,M=h._13,C=h._23,y=h._33,w=h._10*(I*y-v*C)-h._20*(m*y-v*M)+h._30*(m*C-I*M),A=h._11,x=h._21,Z=h._31,z=h._13,B=h._23,N=h._33,G=h._10*(x*N-Z*B)-h._20*(A*N-Z*z)+h._30*(A*B-x*z),k=h._11,S=h._21,W=h._31,X=h._12,Y=h._22,D=h._32,K=h._10*(S*D-W*Y)-h._20*(k*D-W*X)+h._30*(k*Y-S*X);h._00*p-h._01*w+h._02*G-h._03*K<0&&(i.x=-i.x);var L=1/i.x;fa.helpMat.self._00=t.self._00*L,fa.helpMat.self._01=t.self._01*L,fa.helpMat.self._02=t.self._02*L,L=1/i.y,fa.helpMat.self._10=t.self._10*L,fa.helpMat.self._11=t.self._11*L,fa.helpMat.self._12=t.self._12*L,L=1/i.z,fa.helpMat.self._20=t.self._20*L,fa.helpMat.self._21=t.self._21*L,fa.helpMat.self._22=t.self._22*L;var V=fa.helpMat,H=V.self._00,j=V.self._10,T=V.self._20,R=V.self._01,F=V.self._11,O=V.self._21,P=V.self._02,J=V.self._12,E=V.self._22,U=H+F+E,Q=0;0<U?(Q=.5/Math.sqrt(U+1),a.w=.25/Q,a.x=(J-O)*Q,a.y=(T-P)*Q,a.z=(R-j)*Q):F<H&&E<H?(Q=2*Math.sqrt(1+H-F-E),a.w=(J-O)/Q,a.x=.25*Q,a.y=(j+R)/Q,a.z=(T+P)/Q):E<F?(Q=2*Math.sqrt(1+F-H-E),a.w=(T-P)/Q,a.x=(j+R)/Q,a.y=.25*Q,a.z=(O+J)/Q):(Q=2*Math.sqrt(1+E-H-F),a.w=(R-j)/Q,a.x=(T+P)/Q,a.y=(O+J)/Q,a.z=.25*Q)},rotate:function(t,e){var a=je.q,i=Math.sin(.5*e);a.x=t.x*i,a.y=t.y*i,a.z=t.z*i,a.w=Math.cos(.5*e);var n=Math.sqrt(a.x*a.x+a.y*a.y+a.z*a.z+a.w*a.w);0==n?(a.x=0,a.y=0,a.z=0,a.w=0):(n=1/n,a.x*=n,a.y*=n,a.z*=n,a.w*=n);var s=this.rot,r=je.q,o=this.rot,l=r.x,_=r.y,h=r.z,c=r.w,g=o.x,u=o.y,f=o.z,d=o.w;s.x=l*d+c*g+_*f-h*u,s.y=c*u-l*f+_*d+h*g,s.z=c*f+l*u-_*g+h*d,s.w=c*d-l*g-_*u-h*f,this.dirty=!0},setRotation:function(t,e,a){var i=this.rot,n=t/2,s=Math.cos(n),r=Math.sin(n);n=e/2;var o=Math.cos(n),l=Math.sin(n);n=a/2;var _=Math.cos(n),h=Math.sin(n);i.x=r*o*_+s*l*h,i.y=s*l*_+r*o*h,i.z=s*o*h-r*l*_,i.w=s*o*_-r*l*h,this._eulerX=t,this._eulerY=e,this._eulerZ=a,this.dirty=!0},computeRadius:function(){this.radius=Math.sqrt(this.dim.x*this.dim.x+this.dim.y*this.dim.y+this.dim.z*this.dim.z)},computeDim:function(){if(null!=this.object.raw){var t=this.object.raw.dimensions;if(null==t){var e=this.dim;e.x=2*this.scale.x,e.y=2*this.scale.y,e.z=2*this.scale.z,e.w=1}else{var a=this.dim,i=t[1]*this.scale.y,n=t[2]*this.scale.z;a.x=t[0]*this.scale.x,a.y=i,a.z=n,a.w=1}this.computeRadius()}else this.computeRadius()},applyParentInverse:function(){var t=this.object.parent.transform;t.buildMatrix();var e=je.temp,a=t.world,i=a.self._00,n=a.self._01,s=a.self._02,r=a.self._03,o=a.self._10,l=a.self._11,_=a.self._12,h=a.self._13,c=a.self._20,g=a.self._21,u=a.self._22,f=a.self._23,d=a.self._30,b=a.self._31,p=a.self._32,m=a.self._33,I=i*l-n*o,v=i*_-s*o,M=i*h-r*o,C=n*_-s*l,y=n*h-r*l,w=s*h-r*_,A=c*b-g*d,x=c*p-u*d,Z=c*m-f*d,z=g*p-u*b,B=g*m-f*b,N=u*m-f*p,G=I*N-v*B+M*z+C*Z-y*x+w*A;0==G?(e.self._00=1,e.self._01=0,e.self._02=0,e.self._03=0,e.self._10=0,e.self._11=1,e.self._12=0,e.self._13=0,e.self._20=0,e.self._21=0,e.self._22=1,e.self._23=0,e.self._30=0,e.self._31=0,e.self._32=0,e.self._33=1):(G=1/G,e.self._00=(l*N-_*B+h*z)*G,e.self._01=(s*B-n*N-r*z)*G,e.self._02=(b*w-p*y+m*C)*G,e.self._03=(u*y-g*w-f*C)*G,e.self._10=(_*Z-o*N-h*x)*G,e.self._11=(i*N-s*Z+r*x)*G,e.self._12=(p*M-d*w-m*v)*G,e.self._13=(c*w-u*M+f*v)*G,e.self._20=(o*B-l*Z+h*A)*G,e.self._21=(n*Z-i*B-r*A)*G,e.self._22=(d*y-b*M+m*I)*G,e.self._23=(g*M-c*y-f*I)*G,e.self._30=(l*x-o*z-_*A)*G,e.self._31=(i*z-n*x+s*A)*G,e.self._32=(b*v-d*C-p*I)*G,e.self._33=(c*C-g*v+u*I)*G);var k=this.local,S=je.temp,W=k.self._00,X=k.self._01,Y=k.self._02,D=k.self._03,K=k.self._10,L=k.self._11,V=k.self._12,H=k.self._13,j=k.self._20,T=k.self._21,R=k.self._22,F=k.self._23,O=k.self._30,P=k.self._31,J=k.self._32,E=k.self._33,U=S.self._00,Q=S.self._10,q=S.self._20,$=S.self._30;k.self._00=W*U+X*Q+Y*q+D*$,k.self._10=K*U+L*Q+V*q+H*$,k.self._20=j*U+T*Q+R*q+F*$,k.self._30=O*U+P*Q+J*q+E*$,U=S.self._01,Q=S.self._11,q=S.self._21,$=S.self._31,k.self._01=W*U+X*Q+Y*q+D*$,k.self._11=K*U+L*Q+V*q+H*$,k.self._21=j*U+T*Q+R*q+F*$,k.self._31=O*U+P*Q+J*q+E*$,U=S.self._02,Q=S.self._12,q=S.self._22,$=S.self._32,k.self._02=W*U+X*Q+Y*q+D*$,k.self._12=K*U+L*Q+V*q+H*$,k.self._22=j*U+T*Q+R*q+F*$,k.self._32=O*U+P*Q+J*q+E*$,U=S.self._03,Q=S.self._13,q=S.self._23,$=S.self._33,k.self._03=W*U+X*Q+Y*q+D*$,k.self._13=K*U+L*Q+V*q+H*$,k.self._23=j*U+T*Q+R*q+F*$,k.self._33=O*U+P*Q+J*q+E*$,this.decompose(),this.buildMatrix()},_eulerX:null,_eulerY:null,_eulerZ:null,dloc:null,drot:null,dscale:null,_deulerX:null,_deulerY:null,_deulerZ:null,__class__:je};var Mt=function(t,e,a,i,n,s,r,o,l){this._00=t,this._10=e,this._20=a,this._01=i,this._11=n,this._21=s,this._02=r,this._12=o,this._22=l};(i["kha.math.FastMatrix3"]=Mt).__name__=!0,Mt.prototype={_00:null,_10:null,_20:null,_01:null,_11:null,_21:null,_02:null,_12:null,_22:null,__class__:Mt};var u_=function(){};(i["iron.object.Uniforms"]=u_).__name__=!0,u_.setContextConstants=function(t,e,a,i,n){if(null!=e.raw.constants)for(var s=0,r=e.raw.constants.length;s<r;){var o=s++,l=e.raw.constants[o];u_.setContextConstant(t,a,i,e.constants[o],l)}if(null!=n)for(var _=0,h=n.length/2|0;_<h;){var c,g=2*_++,u=n[g],f=n[g+1],d=!1;if("_"==u.charAt(0)&&(d=!0,u=q.substr(u,1,null)),d){var b=lo.active.depthToRenderTarget;c=null!=rs[u]?b.getReserved(u):b.h[u]}else{var p=lo.active.renderTargets;c=null!=rs[u]?p.getReserved(u):p.h[u]}u_.bindRenderTarget(t,c,e,f,d)}if(null!=e.raw.texture_units)for(var m=0,I=e.raw.texture_units.length;m<I;){var v=m++,M=e.raw.texture_units[v].link;if(null!=M)if("_envmapRadiance"==M){var C=h_.active.world;null!=C&&(t.setTexture(e.textureUnits[v],C.getGlobalProbe().radiance),t.setTextureParameters(e.textureUnits[v],Sa.Repeat,Sa.Repeat,Wa.LinearFilter,Wa.LinearFilter,Za.LinearMipFilter))}else if("_envmap"==M){var y=h_.active.world;null!=y&&t.setTexture(e.textureUnits[v],y.envmap)}else if("_envmapBrdf"==M){var w=h_.active.embedded;t.setTexture(e.textureUnits[v],null!=rs["brdf.png"]?w.getReserved("brdf.png"):w.h["brdf.png"])}else if("_noise8"==M){var A=h_.active.embedded;t.setTexture(e.textureUnits[v],null!=rs["noise8.png"]?A.getReserved("noise8.png"):A.h["noise8.png"]),t.setTextureParameters(e.textureUnits[v],Sa.Repeat,Sa.Repeat,Wa.LinearFilter,Wa.LinearFilter,Za.NoMipFilter)}else if("_noise64"==M){var x=h_.active.embedded;t.setTexture(e.textureUnits[v],null!=rs["noise64.png"]?x.getReserved("noise64.png"):x.h["noise64.png"]),t.setTextureParameters(e.textureUnits[v],Sa.Repeat,Sa.Repeat,Wa.LinearFilter,Wa.LinearFilter,Za.NoMipFilter)}else if("_blueNoise64"==M){var Z=h_.active.embedded;t.setTexture(e.textureUnits[v],null!=rs["blue_noise64.png"]?Z.getReserved("blue_noise64.png"):Z.h["blue_noise64.png"]),t.setTextureParameters(e.textureUnits[v],Sa.Repeat,Sa.Repeat,Wa.LinearFilter,Wa.LinearFilter,Za.NoMipFilter)}else if("_noise256"==M){var z=h_.active.embedded;t.setTexture(e.textureUnits[v],null!=rs["noise256.png"]?z.getReserved("noise256.png"):z.h["noise256.png"]),t.setTextureParameters(e.textureUnits[v],Sa.Repeat,Sa.Repeat,Wa.LinearFilter,Wa.LinearFilter,Za.NoMipFilter)}else if("_lightColorTexture"==M)null!=i&&(t.setTexture(e.textureUnits[v],i.data.colorTexture),t.setTextureParameters(e.textureUnits[v],Sa.Repeat,Sa.Repeat,Wa.LinearFilter,Wa.LinearFilter,Za.NoMipFilter));else if("_iesTexture"==M){var B=h_.active.embedded;t.setTexture(e.textureUnits[v],null!=rs["iestexture.png"]?B.getReserved("iestexture.png"):B.h["iestexture.png"]),t.setTextureParameters(e.textureUnits[v],Sa.Repeat,Sa.Repeat,Wa.LinearFilter,Wa.LinearFilter,Za.NoMipFilter)}else;}},u_.setObjectConstants=function(t,e,a,i,n){if(null!=e.raw.constants)for(var s=0,r=e.raw.constants.length;s<r;){var o=s++,l=e.raw.constants[o];u_.setObjectConstant(t,a,i,n,e.constants[o],l)}if(null!=u_.externalTextureLinks&&null!=e.raw.texture_units)for(var _=0,h=e.raw.texture_units.length;_<h;){var c=_++,g=e.raw.texture_units[c].link;if(null!=g)for(var u=0,f=u_.externalTextureLinks;u<f.length;){var d=f[u];++u;var b=d(a,u_.currentMat(a),g);if(null!=b){t.setTexture(e.textureUnits[c],b);break}}}},u_.bindRenderTarget=function(t,e,a,i,n){if(null!=e)for(var s=a.raw.texture_units,r=0,o=s.length;r<o;){var l=r++;if(i==s[l].name){var _=null!=s[l].is_image&&s[l].is_image;1<e.raw.depth&&(t.setTexture3DParameters(a.textureUnits[l],Sa.Clamp,Sa.Clamp,Sa.Clamp,Wa.LinearFilter,Wa.PointFilter,Za.LinearMipFilter),a.paramsSet[l]=!0),_?(t.setImageTexture(a.textureUnits[l],e.image),t.setTexture3DParameters(a.textureUnits[l],Sa.Clamp,Sa.Clamp,Sa.Clamp,Wa.LinearFilter,Wa.PointFilter,Za.LinearMipFilter),a.paramsSet[l]=!0):e.isCubeMap?n?t.setCubeMapDepth(a.textureUnits[l],e.cubeMap):t.setCubeMap(a.textureUnits[l],e.cubeMap):n?t.setTextureDepth(a.textureUnits[l],e.image):t.setTexture(a.textureUnits[l],e.image),a.paramsSet[l]||null==e.raw.mipmaps||1!=e.raw.mipmaps||_||(t.setTextureParameters(a.textureUnits[l],Sa.Clamp,Sa.Clamp,Wa.LinearFilter,Wa.LinearFilter,Za.LinearMipFilter),a.paramsSet[l]=!0),a.paramsSet[l]||(("shadowMap"==i||n)&&(t.setTextureParameters(a.textureUnits[l],Sa.Clamp,Sa.Clamp,Wa.PointFilter,Wa.PointFilter,Za.NoMipFilter),a.paramsSet[l]=!0),"shadowMapCube"==i&&(a.paramsSet[l]=!0)),a.paramsSet[l]||(t.setTextureParameters(a.textureUnits[l],Sa.Clamp,Sa.Clamp,Wa.LinearFilter,Wa.LinearFilter,Za.NoMipFilter),a.paramsSet[l]=!0)}}},u_.setContextConstant=function(t,e,a,i,n){if(null==n.link)return!0;if("mat4"==n.type){var s=null;if("_viewMatrix"==n.link)s=e.V;else if("_transposeInverseViewMatrix"==n.link){var r=u_.helpMat,o=e.V;r.self._00=o.self._00,r.self._01=o.self._01,r.self._02=o.self._02,r.self._03=o.self._03,r.self._10=o.self._10,r.self._11=o.self._11,r.self._12=o.self._12,r.self._13=o.self._13,r.self._20=o.self._20,r.self._21=o.self._21,r.self._22=o.self._22,r.self._23=o.self._23,r.self._30=o.self._30,r.self._31=o.self._31,r.self._32=o.self._32,r.self._33=o.self._33;var l=u_.helpMat,_=u_.helpMat,h=_.self._00,c=_.self._01,g=_.self._02,u=_.self._03,f=_.self._10,d=_.self._11,b=_.self._12,p=_.self._13,m=_.self._20,I=_.self._21,v=_.self._22,M=_.self._23,C=_.self._30,y=_.self._31,w=_.self._32,A=_.self._33,x=h*d-c*f,Z=h*b-g*f,z=h*p-u*f,B=c*b-g*d,N=c*p-u*d,G=g*p-u*b,k=m*y-I*C,S=m*w-v*C,W=m*A-M*C,X=I*w-v*y,Y=I*A-M*y,D=v*A-M*w,K=x*D-Z*Y+z*X+B*W-N*S+G*k;0==K?(l.self._00=1,l.self._01=0,l.self._02=0,l.self._03=0,l.self._10=0,l.self._11=1,l.self._12=0,l.self._13=0,l.self._20=0,l.self._21=0,l.self._22=1,l.self._23=0,l.self._30=0,l.self._31=0,l.self._32=0,l.self._33=1):(K=1/K,l.self._00=(d*D-b*Y+p*X)*K,l.self._01=(g*Y-c*D-u*X)*K,l.self._02=(y*G-w*N+A*B)*K,l.self._03=(v*N-I*G-M*B)*K,l.self._10=(b*W-f*D-p*S)*K,l.self._11=(h*D-g*W+u*S)*K,l.self._12=(w*z-C*G-A*Z)*K,l.self._13=(m*G-v*z+M*Z)*K,l.self._20=(f*Y-d*W+p*k)*K,l.self._21=(c*W-h*Y-u*k)*K,l.self._22=(C*N-y*z+A*x)*K,l.self._23=(I*z-m*N-M*x)*K,l.self._30=(d*S-f*X-b*k)*K,l.self._31=(h*X-c*S+g*k)*K,l.self._32=(y*Z-C*B-w*x)*K,l.self._33=(m*B-I*Z+v*x)*K);var L=u_.helpMat,V=L.self._01;L.self._01=L.self._10,L.self._10=V,V=L.self._02,L.self._02=L.self._20,L.self._20=V,V=L.self._03,L.self._03=L.self._30,L.self._30=V,V=L.self._12,L.self._12=L.self._21,L.self._21=V,V=L.self._13,L.self._13=L.self._31,L.self._31=V,V=L.self._23,L.self._23=L.self._32,L.self._32=V,s=u_.helpMat}else if("_inverseViewMatrix"==n.link){var H=u_.helpMat,j=e.V,T=j.self._00,R=j.self._01,F=j.self._02,O=j.self._03,P=j.self._10,J=j.self._11,E=j.self._12,U=j.self._13,Q=j.self._20,q=j.self._21,$=j.self._22,tt=j.self._23,et=j.self._30,at=j.self._31,it=j.self._32,nt=j.self._33,st=T*J-R*P,rt=T*E-F*P,ot=T*U-O*P,lt=R*E-F*J,_t=R*U-O*J,ht=F*U-O*E,ct=Q*at-q*et,gt=Q*it-$*et,ut=Q*nt-tt*et,ft=q*it-$*at,dt=q*nt-tt*at,bt=$*nt-tt*it,pt=st*bt-rt*dt+ot*ft+lt*ut-_t*gt+ht*ct;0==pt?(H.self._00=1,H.self._01=0,H.self._02=0,H.self._03=0,H.self._10=0,H.self._11=1,H.self._12=0,H.self._13=0,H.self._20=0,H.self._21=0,H.self._22=1,H.self._23=0,H.self._30=0,H.self._31=0,H.self._32=0,H.self._33=1):(pt=1/pt,H.self._00=(J*bt-E*dt+U*ft)*pt,H.self._01=(F*dt-R*bt-O*ft)*pt,H.self._02=(at*ht-it*_t+nt*lt)*pt,H.self._03=($*_t-q*ht-tt*lt)*pt,H.self._10=(E*ut-P*bt-U*gt)*pt,H.self._11=(T*bt-F*ut+O*gt)*pt,H.self._12=(it*ot-et*ht-nt*rt)*pt,H.self._13=(Q*ht-$*ot+tt*rt)*pt,H.self._20=(P*dt-J*ut+U*ct)*pt,H.self._21=(R*ut-T*dt-O*ct)*pt,H.self._22=(et*_t-at*ot+nt*st)*pt,H.self._23=(q*ot-Q*_t-tt*st)*pt,H.self._30=(J*gt-P*ft-E*ct)*pt,H.self._31=(T*ft-R*gt+F*ct)*pt,H.self._32=(at*rt-et*lt-it*st)*pt,H.self._33=(Q*lt-q*rt+$*st)*pt),s=u_.helpMat}else if("_transposeViewMatrix"==n.link){var mt=u_.helpMat,It=e.V;mt.self._00=It.self._00,mt.self._01=It.self._01,mt.self._02=It.self._02,mt.self._03=It.self._03,mt.self._10=It.self._10,mt.self._11=It.self._11,mt.self._12=It.self._12,mt.self._13=It.self._13,mt.self._20=It.self._20,mt.self._21=It.self._21,mt.self._22=It.self._22,mt.self._23=It.self._23,mt.self._30=It.self._30,mt.self._31=It.self._31,mt.self._32=It.self._32,mt.self._33=It.self._33;var vt=u_.helpMat,Mt=vt.self._01;vt.self._01=vt.self._10,vt.self._10=Mt,Mt=vt.self._02,vt.self._02=vt.self._20,vt.self._20=Mt,Mt=vt.self._12,vt.self._12=vt.self._21,vt.self._21=Mt,s=u_.helpMat}else if("_projectionMatrix"==n.link)s=e.P;else if("_inverseProjectionMatrix"==n.link){var Ct=u_.helpMat,yt=e.P,wt=yt.self._00,At=yt.self._01,xt=yt.self._02,Zt=yt.self._03,zt=yt.self._10,Bt=yt.self._11,Nt=yt.self._12,Gt=yt.self._13,kt=yt.self._20,St=yt.self._21,Wt=yt.self._22,Xt=yt.self._23,Yt=yt.self._30,Dt=yt.self._31,Kt=yt.self._32,Lt=yt.self._33,Vt=wt*Bt-At*zt,Ht=wt*Nt-xt*zt,jt=wt*Gt-Zt*zt,Tt=At*Nt-xt*Bt,Rt=At*Gt-Zt*Bt,Ft=xt*Gt-Zt*Nt,Ot=kt*Dt-St*Yt,Pt=kt*Kt-Wt*Yt,Jt=kt*Lt-Xt*Yt,Et=St*Kt-Wt*Dt,Ut=St*Lt-Xt*Dt,Qt=Wt*Lt-Xt*Kt,qt=Vt*Qt-Ht*Ut+jt*Et+Tt*Jt-Rt*Pt+Ft*Ot;0==qt?(Ct.self._00=1,Ct.self._01=0,Ct.self._02=0,Ct.self._03=0,Ct.self._10=0,Ct.self._11=1,Ct.self._12=0,Ct.self._13=0,Ct.self._20=0,Ct.self._21=0,Ct.self._22=1,Ct.self._23=0,Ct.self._30=0,Ct.self._31=0,Ct.self._32=0,Ct.self._33=1):(qt=1/qt,Ct.self._00=(Bt*Qt-Nt*Ut+Gt*Et)*qt,Ct.self._01=(xt*Ut-At*Qt-Zt*Et)*qt,Ct.self._02=(Dt*Ft-Kt*Rt+Lt*Tt)*qt,Ct.self._03=(Wt*Rt-St*Ft-Xt*Tt)*qt,Ct.self._10=(Nt*Jt-zt*Qt-Gt*Pt)*qt,Ct.self._11=(wt*Qt-xt*Jt+Zt*Pt)*qt,Ct.self._12=(Kt*jt-Yt*Ft-Lt*Ht)*qt,Ct.self._13=(kt*Ft-Wt*jt+Xt*Ht)*qt,Ct.self._20=(zt*Ut-Bt*Jt+Gt*Ot)*qt,Ct.self._21=(At*Jt-wt*Ut-Zt*Ot)*qt,Ct.self._22=(Yt*Rt-Dt*jt+Lt*Vt)*qt,Ct.self._23=(St*jt-kt*Rt-Xt*Vt)*qt,Ct.self._30=(Bt*Pt-zt*Et-Nt*Ot)*qt,Ct.self._31=(wt*Et-At*Pt+xt*Ot)*qt,Ct.self._32=(Dt*Ht-Yt*Tt-Kt*Vt)*qt,Ct.self._33=(kt*Tt-St*Ht+Wt*Vt)*qt),s=u_.helpMat}else if("_inverseViewProjectionMatrix"==n.link){var $t=u_.helpMat,te=e.V;$t.self._00=te.self._00,$t.self._01=te.self._01,$t.self._02=te.self._02,$t.self._03=te.self._03,$t.self._10=te.self._10,$t.self._11=te.self._11,$t.self._12=te.self._12,$t.self._13=te.self._13,$t.self._20=te.self._20,$t.self._21=te.self._21,$t.self._22=te.self._22,$t.self._23=te.self._23,$t.self._30=te.self._30,$t.self._31=te.self._31,$t.self._32=te.self._32,$t.self._33=te.self._33;var ee=u_.helpMat,ae=e.P,ie=ee.self._00,ne=ee.self._01,se=ee.self._02,re=ee.self._03,oe=ee.self._10,le=ee.self._11,_e=ee.self._12,he=ee.self._13,ce=ee.self._20,ge=ee.self._21,ue=ee.self._22,fe=ee.self._23,de=ee.self._30,be=ee.self._31,pe=ee.self._32,me=ee.self._33,Ie=ae.self._00,ve=ae.self._10,Me=ae.self._20,Ce=ae.self._30;ee.self._00=ie*Ie+ne*ve+se*Me+re*Ce,ee.self._10=oe*Ie+le*ve+_e*Me+he*Ce,ee.self._20=ce*Ie+ge*ve+ue*Me+fe*Ce,ee.self._30=de*Ie+be*ve+pe*Me+me*Ce,Ie=ae.self._01,ve=ae.self._11,Me=ae.self._21,Ce=ae.self._31,ee.self._01=ie*Ie+ne*ve+se*Me+re*Ce,ee.self._11=oe*Ie+le*ve+_e*Me+he*Ce,ee.self._21=ce*Ie+ge*ve+ue*Me+fe*Ce,ee.self._31=de*Ie+be*ve+pe*Me+me*Ce,Ie=ae.self._02,ve=ae.self._12,Me=ae.self._22,Ce=ae.self._32,ee.self._02=ie*Ie+ne*ve+se*Me+re*Ce,ee.self._12=oe*Ie+le*ve+_e*Me+he*Ce,ee.self._22=ce*Ie+ge*ve+ue*Me+fe*Ce,ee.self._32=de*Ie+be*ve+pe*Me+me*Ce,Ie=ae.self._03,ve=ae.self._13,Me=ae.self._23,Ce=ae.self._33,ee.self._03=ie*Ie+ne*ve+se*Me+re*Ce,ee.self._13=oe*Ie+le*ve+_e*Me+he*Ce,ee.self._23=ce*Ie+ge*ve+ue*Me+fe*Ce,ee.self._33=de*Ie+be*ve+pe*Me+me*Ce;var ye=u_.helpMat,we=u_.helpMat,Ae=we.self._00,xe=we.self._01,Ze=we.self._02,ze=we.self._03,Be=we.self._10,Ne=we.self._11,Ge=we.self._12,ke=we.self._13,Se=we.self._20,We=we.self._21,Xe=we.self._22,Ye=we.self._23,De=we.self._30,Ke=we.self._31,Le=we.self._32,Ve=we.self._33,He=Ae*Ne-xe*Be,je=Ae*Ge-Ze*Be,Te=Ae*ke-ze*Be,Re=xe*Ge-Ze*Ne,Fe=xe*ke-ze*Ne,Oe=Ze*ke-ze*Ge,Pe=Se*Ke-We*De,Je=Se*Le-Xe*De,Ee=Se*Ve-Ye*De,Ue=We*Le-Xe*Ke,Qe=We*Ve-Ye*Ke,qe=Xe*Ve-Ye*Le,$e=He*qe-je*Qe+Te*Ue+Re*Ee-Fe*Je+Oe*Pe;0==$e?(ye.self._00=1,ye.self._01=0,ye.self._02=0,ye.self._03=0,ye.self._10=0,ye.self._11=1,ye.self._12=0,ye.self._13=0,ye.self._20=0,ye.self._21=0,ye.self._22=1,ye.self._23=0,ye.self._30=0,ye.self._31=0,ye.self._32=0,ye.self._33=1):($e=1/$e,ye.self._00=(Ne*qe-Ge*Qe+ke*Ue)*$e,ye.self._01=(Ze*Qe-xe*qe-ze*Ue)*$e,ye.self._02=(Ke*Oe-Le*Fe+Ve*Re)*$e,ye.self._03=(Xe*Fe-We*Oe-Ye*Re)*$e,ye.self._10=(Ge*Ee-Be*qe-ke*Je)*$e,ye.self._11=(Ae*qe-Ze*Ee+ze*Je)*$e,ye.self._12=(Le*Te-De*Oe-Ve*je)*$e,ye.self._13=(Se*Oe-Xe*Te+Ye*je)*$e,ye.self._20=(Be*Qe-Ne*Ee+ke*Pe)*$e,ye.self._21=(xe*Ee-Ae*Qe-ze*Pe)*$e,ye.self._22=(De*Fe-Ke*Te+Ve*He)*$e,ye.self._23=(We*Te-Se*Fe-Ye*He)*$e,ye.self._30=(Ne*Je-Be*Ue-Ge*Pe)*$e,ye.self._31=(Ae*Ue-xe*Je+Ze*Pe)*$e,ye.self._32=(Ke*je-De*Re-Le*He)*$e,ye.self._33=(Se*Re-We*je+Xe*He)*$e),s=u_.helpMat}else if("_viewProjectionMatrix"==n.link)s=e.VP;else if("_prevViewProjectionMatrix"==n.link){var ta=u_.helpMat,ea=e.prevV;ta.self._00=ea.self._00,ta.self._01=ea.self._01,ta.self._02=ea.self._02,ta.self._03=ea.self._03,ta.self._10=ea.self._10,ta.self._11=ea.self._11,ta.self._12=ea.self._12,ta.self._13=ea.self._13,ta.self._20=ea.self._20,ta.self._21=ea.self._21,ta.self._22=ea.self._22,ta.self._23=ea.self._23,ta.self._30=ea.self._30,ta.self._31=ea.self._31,ta.self._32=ea.self._32,ta.self._33=ea.self._33;var aa=u_.helpMat,ia=e.P,na=aa.self._00,sa=aa.self._01,ra=aa.self._02,oa=aa.self._03,la=aa.self._10,_a=aa.self._11,ha=aa.self._12,ca=aa.self._13,ga=aa.self._20,ua=aa.self._21,fa=aa.self._22,da=aa.self._23,ba=aa.self._30,pa=aa.self._31,ma=aa.self._32,Ia=aa.self._33,va=ia.self._00,Ma=ia.self._10,Ca=ia.self._20,ya=ia.self._30;aa.self._00=na*va+sa*Ma+ra*Ca+oa*ya,aa.self._10=la*va+_a*Ma+ha*Ca+ca*ya,aa.self._20=ga*va+ua*Ma+fa*Ca+da*ya,aa.self._30=ba*va+pa*Ma+ma*Ca+Ia*ya,va=ia.self._01,Ma=ia.self._11,Ca=ia.self._21,ya=ia.self._31,aa.self._01=na*va+sa*Ma+ra*Ca+oa*ya,aa.self._11=la*va+_a*Ma+ha*Ca+ca*ya,aa.self._21=ga*va+ua*Ma+fa*Ca+da*ya,aa.self._31=ba*va+pa*Ma+ma*Ca+Ia*ya,va=ia.self._02,Ma=ia.self._12,Ca=ia.self._22,ya=ia.self._32,aa.self._02=na*va+sa*Ma+ra*Ca+oa*ya,aa.self._12=la*va+_a*Ma+ha*Ca+ca*ya,aa.self._22=ga*va+ua*Ma+fa*Ca+da*ya,aa.self._32=ba*va+pa*Ma+ma*Ca+Ia*ya,va=ia.self._03,Ma=ia.self._13,Ca=ia.self._23,ya=ia.self._33,aa.self._03=na*va+sa*Ma+ra*Ca+oa*ya,aa.self._13=la*va+_a*Ma+ha*Ca+ca*ya,aa.self._23=ga*va+ua*Ma+fa*Ca+da*ya,aa.self._33=ba*va+pa*Ma+ma*Ca+Ia*ya,s=u_.helpMat}else if("_lightViewProjectionMatrix"==n.link)null!=a&&(s=a.VP);else if("_biasLightViewProjectionMatrix"==n.link){if(null!=a){var wa=u_.helpMat,Aa=a.VP;wa.self._00=Aa.self._00,wa.self._01=Aa.self._01,wa.self._02=Aa.self._02,wa.self._03=Aa.self._03,wa.self._10=Aa.self._10,wa.self._11=Aa.self._11,wa.self._12=Aa.self._12,wa.self._13=Aa.self._13,wa.self._20=Aa.self._20,wa.self._21=Aa.self._21,wa.self._22=Aa.self._22,wa.self._23=Aa.self._23,wa.self._30=Aa.self._30,wa.self._31=Aa.self._31,wa.self._32=Aa.self._32,wa.self._33=Aa.self._33;var xa=u_.helpMat,Za=u_.biasMat,za=xa.self._00,Ba=xa.self._01,Na=xa.self._02,Ga=xa.self._03,ka=xa.self._10,Sa=xa.self._11,Wa=xa.self._12,Xa=xa.self._13,Ya=xa.self._20,Da=xa.self._21,Ka=xa.self._22,La=xa.self._23,Va=xa.self._30,Ha=xa.self._31,ja=xa.self._32,Ta=xa.self._33,Ra=Za.self._00,Fa=Za.self._10,Oa=Za.self._20,Pa=Za.self._30;xa.self._00=za*Ra+Ba*Fa+Na*Oa+Ga*Pa,xa.self._10=ka*Ra+Sa*Fa+Wa*Oa+Xa*Pa,xa.self._20=Ya*Ra+Da*Fa+Ka*Oa+La*Pa,xa.self._30=Va*Ra+Ha*Fa+ja*Oa+Ta*Pa,Ra=Za.self._01,Fa=Za.self._11,Oa=Za.self._21,Pa=Za.self._31,xa.self._01=za*Ra+Ba*Fa+Na*Oa+Ga*Pa,xa.self._11=ka*Ra+Sa*Fa+Wa*Oa+Xa*Pa,xa.self._21=Ya*Ra+Da*Fa+Ka*Oa+La*Pa,xa.self._31=Va*Ra+Ha*Fa+ja*Oa+Ta*Pa,Ra=Za.self._02,Fa=Za.self._12,Oa=Za.self._22,Pa=Za.self._32,xa.self._02=za*Ra+Ba*Fa+Na*Oa+Ga*Pa,xa.self._12=ka*Ra+Sa*Fa+Wa*Oa+Xa*Pa,xa.self._22=Ya*Ra+Da*Fa+Ka*Oa+La*Pa,xa.self._32=Va*Ra+Ha*Fa+ja*Oa+Ta*Pa,Ra=Za.self._03,Fa=Za.self._13,Oa=Za.self._23,Pa=Za.self._33,xa.self._03=za*Ra+Ba*Fa+Na*Oa+Ga*Pa,xa.self._13=ka*Ra+Sa*Fa+Wa*Oa+Xa*Pa,xa.self._23=Ya*Ra+Da*Fa+Ka*Oa+La*Pa,xa.self._33=Va*Ra+Ha*Fa+ja*Oa+Ta*Pa,s=u_.helpMat}}else if("_lightVolumeWorldViewProjectionMatrix"==n.link){if(null!=a){var Ja=a.transform,Ea=a.data.raw.type;if("spot"==Ea){var Ua=u_.helpVec;Ua.x=Ja.world.self._30,Ua.y=Ja.world.self._31,Ua.z=Ja.world.self._32,Ua.w=1;var Qa=u_.helpVec2;Qa.x=a.data.raw.far_plane,Qa.y=2*a.data.raw.far_plane,Qa.z=2*a.data.raw.far_plane,Qa.w=1;var qa=u_.helpMat,$a=u_.helpVec,ti=u_.helpQuat,ei=u_.helpVec2,ai=ti.x,ii=ti.y,ni=ti.z,si=ti.w,ri=ai+ai,oi=ii+ii,li=ni+ni,_i=ai*ri,hi=ai*oi,ci=ai*li,gi=ii*oi,ui=ii*li,fi=ni*li,di=si*ri,bi=si*oi,pi=si*li;qa.self._00=1-(gi+fi),qa.self._10=hi-pi,qa.self._20=ci+bi,qa.self._01=hi+pi,qa.self._11=1-(_i+fi),qa.self._21=ui-di,qa.self._02=ci-bi,qa.self._12=ui+di,qa.self._22=1-(_i+gi),qa.self._03=0,qa.self._13=0,qa.self._23=0,qa.self._30=0,qa.self._31=0,qa.self._32=0,qa.self._33=1;var mi=ei.x,Ii=ei.y,vi=ei.z;qa.self._00*=mi,qa.self._01*=mi,qa.self._02*=mi,qa.self._03*=mi,qa.self._10*=Ii,qa.self._11*=Ii,qa.self._12*=Ii,qa.self._13*=Ii,qa.self._20*=vi,qa.self._21*=vi,qa.self._22*=vi,qa.self._23*=vi,qa.self._30=$a.x,qa.self._31=$a.y,qa.self._32=$a.z}else if("point"==Ea||"area"==Ea){var Mi=u_.helpVec;Mi.x=Ja.world.self._30,Mi.y=Ja.world.self._31,Mi.z=Ja.world.self._32,Mi.w=1;var Ci=u_.helpVec2;Ci.x=a.data.raw.far_plane,Ci.y=2*a.data.raw.far_plane,Ci.z=2*a.data.raw.far_plane,Ci.w=1;var yi=u_.helpMat,wi=u_.helpVec,Ai=u_.helpQuat,xi=u_.helpVec2,Zi=Ai.x,zi=Ai.y,Bi=Ai.z,Ni=Ai.w,Gi=Zi+Zi,ki=zi+zi,Si=Bi+Bi,Wi=Zi*Gi,Xi=Zi*ki,Yi=Zi*Si,Di=zi*ki,Ki=zi*Si,Li=Bi*Si,Vi=Ni*Gi,Hi=Ni*ki,ji=Ni*Si;yi.self._00=1-(Di+Li),yi.self._10=Xi-ji,yi.self._20=Yi+Hi,yi.self._01=Xi+ji,yi.self._11=1-(Wi+Li),yi.self._21=Ki-Vi,yi.self._02=Yi-Hi,yi.self._12=Ki+Vi,yi.self._22=1-(Wi+Di),yi.self._03=0,yi.self._13=0,yi.self._23=0,yi.self._30=0,yi.self._31=0,yi.self._32=0,yi.self._33=1;var Ti=xi.x,Ri=xi.y,Fi=xi.z;yi.self._00*=Ti,yi.self._01*=Ti,yi.self._02*=Ti,yi.self._03*=Ti,yi.self._10*=Ri,yi.self._11*=Ri,yi.self._12*=Ri,yi.self._13*=Ri,yi.self._20*=Fi,yi.self._21*=Fi,yi.self._22*=Fi,yi.self._23*=Fi,yi.self._30=wi.x,yi.self._31=wi.y,yi.self._32=wi.z}var Oi=u_.helpMat,Pi=e.V,Ji=Oi.self._00,Ei=Oi.self._01,Ui=Oi.self._02,Qi=Oi.self._03,qi=Oi.self._10,$i=Oi.self._11,tn=Oi.self._12,en=Oi.self._13,an=Oi.self._20,nn=Oi.self._21,sn=Oi.self._22,rn=Oi.self._23,on=Oi.self._30,ln=Oi.self._31,_n=Oi.self._32,hn=Oi.self._33,cn=Pi.self._00,gn=Pi.self._10,un=Pi.self._20,fn=Pi.self._30;Oi.self._00=Ji*cn+Ei*gn+Ui*un+Qi*fn,Oi.self._10=qi*cn+$i*gn+tn*un+en*fn,Oi.self._20=an*cn+nn*gn+sn*un+rn*fn,Oi.self._30=on*cn+ln*gn+_n*un+hn*fn,cn=Pi.self._01,gn=Pi.self._11,un=Pi.self._21,fn=Pi.self._31,Oi.self._01=Ji*cn+Ei*gn+Ui*un+Qi*fn,Oi.self._11=qi*cn+$i*gn+tn*un+en*fn,Oi.self._21=an*cn+nn*gn+sn*un+rn*fn,Oi.self._31=on*cn+ln*gn+_n*un+hn*fn,cn=Pi.self._02,gn=Pi.self._12,un=Pi.self._22,fn=Pi.self._32,Oi.self._02=Ji*cn+Ei*gn+Ui*un+Qi*fn,Oi.self._12=qi*cn+$i*gn+tn*un+en*fn,Oi.self._22=an*cn+nn*gn+sn*un+rn*fn,Oi.self._32=on*cn+ln*gn+_n*un+hn*fn,cn=Pi.self._03,gn=Pi.self._13,un=Pi.self._23,fn=Pi.self._33,Oi.self._03=Ji*cn+Ei*gn+Ui*un+Qi*fn,Oi.self._13=qi*cn+$i*gn+tn*un+en*fn,Oi.self._23=an*cn+nn*gn+sn*un+rn*fn,Oi.self._33=on*cn+ln*gn+_n*un+hn*fn;var dn=u_.helpMat,bn=e.P,pn=dn.self._00,mn=dn.self._01,In=dn.self._02,vn=dn.self._03,Mn=dn.self._10,Cn=dn.self._11,yn=dn.self._12,wn=dn.self._13,An=dn.self._20,xn=dn.self._21,Zn=dn.self._22,zn=dn.self._23,Bn=dn.self._30,Nn=dn.self._31,Gn=dn.self._32,kn=dn.self._33,Sn=bn.self._00,Wn=bn.self._10,Xn=bn.self._20,Yn=bn.self._30;dn.self._00=pn*Sn+mn*Wn+In*Xn+vn*Yn,dn.self._10=Mn*Sn+Cn*Wn+yn*Xn+wn*Yn,dn.self._20=An*Sn+xn*Wn+Zn*Xn+zn*Yn,dn.self._30=Bn*Sn+Nn*Wn+Gn*Xn+kn*Yn,Sn=bn.self._01,Wn=bn.self._11,Xn=bn.self._21,Yn=bn.self._31,dn.self._01=pn*Sn+mn*Wn+In*Xn+vn*Yn,dn.self._11=Mn*Sn+Cn*Wn+yn*Xn+wn*Yn,dn.self._21=An*Sn+xn*Wn+Zn*Xn+zn*Yn,dn.self._31=Bn*Sn+Nn*Wn+Gn*Xn+kn*Yn,Sn=bn.self._02,Wn=bn.self._12,Xn=bn.self._22,Yn=bn.self._32,dn.self._02=pn*Sn+mn*Wn+In*Xn+vn*Yn,dn.self._12=Mn*Sn+Cn*Wn+yn*Xn+wn*Yn,dn.self._22=An*Sn+xn*Wn+Zn*Xn+zn*Yn,dn.self._32=Bn*Sn+Nn*Wn+Gn*Xn+kn*Yn,Sn=bn.self._03,Wn=bn.self._13,Xn=bn.self._23,Yn=bn.self._33,dn.self._03=pn*Sn+mn*Wn+In*Xn+vn*Yn,dn.self._13=Mn*Sn+Cn*Wn+yn*Xn+wn*Yn,dn.self._23=An*Sn+xn*Wn+Zn*Xn+zn*Yn,dn.self._33=Bn*Sn+Nn*Wn+Gn*Xn+kn*Yn,s=u_.helpMat}}else if("_skydomeMatrix"==n.link){var Dn=e.transform,Kn=u_.helpVec;Kn.x=Dn.world.self._30,Kn.y=Dn.world.self._31,Kn.z=Dn.world.self._32-3.5,Kn.w=1;var Ln=.95*e.data.raw.far_plane,Vn=u_.helpVec2;Vn.x=Ln,Vn.y=Ln,Vn.z=Ln,Vn.w=1;var Hn=u_.helpMat,jn=u_.helpVec,Tn=u_.helpQuat,Rn=u_.helpVec2,Fn=Tn.x,On=Tn.y,Pn=Tn.z,Jn=Tn.w,En=Fn+Fn,Un=On+On,Qn=Pn+Pn,qn=Fn*En,$n=Fn*Un,ts=Fn*Qn,es=On*Un,as=On*Qn,is=Pn*Qn,ns=Jn*En,ss=Jn*Un,rs=Jn*Qn;Hn.self._00=1-(es+is),Hn.self._10=$n-rs,Hn.self._20=ts+ss,Hn.self._01=$n+rs,Hn.self._11=1-(qn+is),Hn.self._21=as-ns,Hn.self._02=ts-ss,Hn.self._12=as+ns,Hn.self._22=1-(qn+es),Hn.self._03=0,Hn.self._13=0,Hn.self._23=0,Hn.self._30=0,Hn.self._31=0,Hn.self._32=0,Hn.self._33=1;var os=Rn.x,ls=Rn.y,_s=Rn.z;Hn.self._00*=os,Hn.self._01*=os,Hn.self._02*=os,Hn.self._03*=os,Hn.self._10*=ls,Hn.self._11*=ls,Hn.self._12*=ls,Hn.self._13*=ls,Hn.self._20*=_s,Hn.self._21*=_s,Hn.self._22*=_s,Hn.self._23*=_s,Hn.self._30=jn.x,Hn.self._31=jn.y,Hn.self._32=jn.z;var hs=u_.helpMat,cs=e.V,gs=hs.self._00,us=hs.self._01,fs=hs.self._02,ds=hs.self._03,bs=hs.self._10,ps=hs.self._11,ms=hs.self._12,Is=hs.self._13,vs=hs.self._20,Ms=hs.self._21,Cs=hs.self._22,ys=hs.self._23,ws=hs.self._30,As=hs.self._31,xs=hs.self._32,Zs=hs.self._33,zs=cs.self._00,Bs=cs.self._10,Ns=cs.self._20,Gs=cs.self._30;hs.self._00=gs*zs+us*Bs+fs*Ns+ds*Gs,hs.self._10=bs*zs+ps*Bs+ms*Ns+Is*Gs,hs.self._20=vs*zs+Ms*Bs+Cs*Ns+ys*Gs,hs.self._30=ws*zs+As*Bs+xs*Ns+Zs*Gs,zs=cs.self._01,Bs=cs.self._11,Ns=cs.self._21,Gs=cs.self._31,hs.self._01=gs*zs+us*Bs+fs*Ns+ds*Gs,hs.self._11=bs*zs+ps*Bs+ms*Ns+Is*Gs,hs.self._21=vs*zs+Ms*Bs+Cs*Ns+ys*Gs,hs.self._31=ws*zs+As*Bs+xs*Ns+Zs*Gs,zs=cs.self._02,Bs=cs.self._12,Ns=cs.self._22,Gs=cs.self._32,hs.self._02=gs*zs+us*Bs+fs*Ns+ds*Gs,hs.self._12=bs*zs+ps*Bs+ms*Ns+Is*Gs,hs.self._22=vs*zs+Ms*Bs+Cs*Ns+ys*Gs,hs.self._32=ws*zs+As*Bs+xs*Ns+Zs*Gs,zs=cs.self._03,Bs=cs.self._13,Ns=cs.self._23,Gs=cs.self._33,hs.self._03=gs*zs+us*Bs+fs*Ns+ds*Gs,hs.self._13=bs*zs+ps*Bs+ms*Ns+Is*Gs,hs.self._23=vs*zs+Ms*Bs+Cs*Ns+ys*Gs,hs.self._33=ws*zs+As*Bs+xs*Ns+Zs*Gs;var ks=u_.helpMat,Ss=e.P,Ws=ks.self._00,Xs=ks.self._01,Ys=ks.self._02,Ds=ks.self._03,Ks=ks.self._10,Ls=ks.self._11,Vs=ks.self._12,Hs=ks.self._13,js=ks.self._20,Ts=ks.self._21,Rs=ks.self._22,Fs=ks.self._23,Os=ks.self._30,Ps=ks.self._31,Js=ks.self._32,Es=ks.self._33,Us=Ss.self._00,Qs=Ss.self._10,qs=Ss.self._20,$s=Ss.self._30;ks.self._00=Ws*Us+Xs*Qs+Ys*qs+Ds*$s,ks.self._10=Ks*Us+Ls*Qs+Vs*qs+Hs*$s,ks.self._20=js*Us+Ts*Qs+Rs*qs+Fs*$s,ks.self._30=Os*Us+Ps*Qs+Js*qs+Es*$s,Us=Ss.self._01,Qs=Ss.self._11,qs=Ss.self._21,$s=Ss.self._31,ks.self._01=Ws*Us+Xs*Qs+Ys*qs+Ds*$s,ks.self._11=Ks*Us+Ls*Qs+Vs*qs+Hs*$s,ks.self._21=js*Us+Ts*Qs+Rs*qs+Fs*$s,ks.self._31=Os*Us+Ps*Qs+Js*qs+Es*$s,Us=Ss.self._02,Qs=Ss.self._12,qs=Ss.self._22,$s=Ss.self._32,ks.self._02=Ws*Us+Xs*Qs+Ys*qs+Ds*$s,ks.self._12=Ks*Us+Ls*Qs+Vs*qs+Hs*$s,ks.self._22=js*Us+Ts*Qs+Rs*qs+Fs*$s,ks.self._32=Os*Us+Ps*Qs+Js*qs+Es*$s,Us=Ss.self._03,Qs=Ss.self._13,qs=Ss.self._23,$s=Ss.self._33,ks.self._03=Ws*Us+Xs*Qs+Ys*qs+Ds*$s,ks.self._13=Ks*Us+Ls*Qs+Vs*qs+Hs*$s,ks.self._23=js*Us+Ts*Qs+Rs*qs+Fs*$s,ks.self._33=Os*Us+Ps*Qs+Js*qs+Es*$s,s=u_.helpMat}else"_lightViewMatrix"==n.link?null!=a&&(s=a.V):"_lightProjectionMatrix"==n.link&&null!=a&&(s=a.P);if(null!=s)return t.setMatrix(i,s.self),!0}else if("vec4"==n.type){var tr=u_.helpVec;tr.x=0,tr.y=0,tr.z=0,tr.w=1}else if("vec3"==n.type){var er=null,ar=u_.helpVec;if(ar.x=0,ar.y=0,ar.z=0,ar.w=1,"_lightPosition"==n.link){if(null!=a){var ir=u_.helpVec;ir.x=a.transform.world.self._30,ir.y=a.transform.world.self._31,ir.z=a.transform.world.self._32,ir.w=1,er=u_.helpVec}}else if("_lightDirection"==n.link)null!=a&&(u_.helpVec=new ho(a.V.self._02,a.V.self._12,a.V.self._22),er=u_.helpVec);else if("_lightColor"==n.link){if(null!=a){var nr=a.data.raw.strength,sr=u_.helpVec,rr=a.data.raw.color[1]*nr,or=a.data.raw.color[2]*nr;sr.x=a.data.raw.color[0]*nr,sr.y=rr,sr.z=or,sr.w=1,er=u_.helpVec}}else if("_lightArea0"==n.link){if(null!=a&&null!=a.data.raw.size){var lr=.5*a.data.raw.size,_r=.5*a.data.raw.size_y,hr=u_.helpVec;hr.x=-lr,hr.y=_r,hr.z=0,hr.w=1;var cr=u_.helpVec,gr=a.transform.world,ur=cr.x,fr=cr.y,dr=cr.z;cr.x=gr.self._00*ur+gr.self._10*fr+gr.self._20*dr+gr.self._30,cr.y=gr.self._01*ur+gr.self._11*fr+gr.self._21*dr+gr.self._31,cr.z=gr.self._02*ur+gr.self._12*fr+gr.self._22*dr+gr.self._32,er=u_.helpVec}}else if("_lightArea1"==n.link){if(null!=a&&null!=a.data.raw.size){var br=.5*a.data.raw.size,pr=.5*a.data.raw.size_y,mr=u_.helpVec;mr.x=br,mr.y=pr,mr.z=0,mr.w=1;var Ir=u_.helpVec,vr=a.transform.world,Mr=Ir.x,Cr=Ir.y,yr=Ir.z;Ir.x=vr.self._00*Mr+vr.self._10*Cr+vr.self._20*yr+vr.self._30,Ir.y=vr.self._01*Mr+vr.self._11*Cr+vr.self._21*yr+vr.self._31,Ir.z=vr.self._02*Mr+vr.self._12*Cr+vr.self._22*yr+vr.self._32,er=u_.helpVec}}else if("_lightArea2"==n.link){if(null!=a&&null!=a.data.raw.size){var wr=.5*a.data.raw.size,Ar=.5*a.data.raw.size_y,xr=u_.helpVec;xr.x=wr,xr.y=-Ar,xr.z=0,xr.w=1;var Zr=u_.helpVec,zr=a.transform.world,Br=Zr.x,Nr=Zr.y,Gr=Zr.z;Zr.x=zr.self._00*Br+zr.self._10*Nr+zr.self._20*Gr+zr.self._30,Zr.y=zr.self._01*Br+zr.self._11*Nr+zr.self._21*Gr+zr.self._31,Zr.z=zr.self._02*Br+zr.self._12*Nr+zr.self._22*Gr+zr.self._32,er=u_.helpVec}}else if("_lightArea3"==n.link){if(null!=a&&null!=a.data.raw.size){var kr=.5*a.data.raw.size,Sr=.5*a.data.raw.size_y,Wr=u_.helpVec;Wr.x=-kr,Wr.y=-Sr,Wr.z=0,Wr.w=1;var Xr=u_.helpVec,Yr=a.transform.world,Dr=Xr.x,Kr=Xr.y,Lr=Xr.z;Xr.x=Yr.self._00*Dr+Yr.self._10*Kr+Yr.self._20*Lr+Yr.self._30,Xr.y=Yr.self._01*Dr+Yr.self._11*Kr+Yr.self._21*Lr+Yr.self._31,Xr.z=Yr.self._02*Dr+Yr.self._12*Kr+Yr.self._22*Lr+Yr.self._32,er=u_.helpVec}}else if("_cameraPosition"==n.link){var Vr=u_.helpVec;Vr.x=e.transform.world.self._30,Vr.y=e.transform.world.self._31,Vr.z=e.transform.world.self._32,Vr.w=1,er=u_.helpVec}else if("_cameraLook"==n.link)u_.helpVec=new ho(-e.transform.world.self._20,-e.transform.world.self._21,-e.transform.world.self._22),er=u_.helpVec;else if("_cameraUp"==n.link)u_.helpVec=new ho(e.transform.world.self._10,e.transform.world.self._11,e.transform.world.self._12),er=u_.helpVec;else if("_cameraRight"==n.link)u_.helpVec=new ho(e.transform.world.self._00,e.transform.world.self._01,e.transform.world.self._02),er=u_.helpVec;else if("_backgroundCol"==n.link){if(null!=e.data.raw.clear_color){var Hr=u_.helpVec,jr=e.data.raw.clear_color[1],Tr=e.data.raw.clear_color[2];Hr.x=e.data.raw.clear_color[0],Hr.y=jr,Hr.z=Tr,Hr.w=1}er=u_.helpVec}else if("_sunDirection"==n.link){var Rr=h_.active.world;if(null!=Rr){var Fr=u_.helpVec,Or=Rr.raw.sun_direction[1],Pr=Rr.raw.sun_direction[2];Fr.x=Rr.raw.sun_direction[0],Fr.y=Or,Fr.z=Pr,Fr.w=1,er=u_.helpVec}}if(null!=er)return t.setFloat3(i,er.x,er.y,er.z),!0}else if("vec2"==n.type){var Jr=null,Er=u_.helpVec;if(Er.x=0,Er.y=0,Er.z=0,Er.w=1,"_vec2x"==n.link)(Jr=u_.helpVec).x=1,Jr.y=0;else if("_vec2xInv"==n.link)(Jr=u_.helpVec).x=1/lo.active.currentW,Jr.y=0;else if("_vec2x2"==n.link)(Jr=u_.helpVec).x=2,Jr.y=0;else if("_vec2x2Inv"==n.link)(Jr=u_.helpVec).x=2/lo.active.currentW,Jr.y=0;else if("_vec2y"==n.link)(Jr=u_.helpVec).x=0,Jr.y=1;else if("_vec2yInv"==n.link)(Jr=u_.helpVec).x=0,Jr.y=1/lo.active.currentH;else if("_vec2y2"==n.link)(Jr=u_.helpVec).x=0,Jr.y=2;else if("_vec2y2Inv"==n.link)(Jr=u_.helpVec).x=0,Jr.y=2/lo.active.currentH;else if("_vec2y3"==n.link)(Jr=u_.helpVec).x=0,Jr.y=3;else if("_vec2y3Inv"==n.link)(Jr=u_.helpVec).x=0,Jr.y=3/lo.active.currentH;else if("_windowSize"==n.link)(Jr=u_.helpVec).x=uo.windowWidth(),Jr.y=uo.windowHeight();else if("_windowSizeInv"==n.link)(Jr=u_.helpVec).x=1/uo.windowWidth(),Jr.y=1/uo.windowHeight();else if("_screenSize"==n.link)(Jr=u_.helpVec).x=lo.active.currentW,Jr.y=lo.active.currentH;else if("_screenSizeInv"==n.link)(Jr=u_.helpVec).x=1/lo.active.currentW,Jr.y=1/lo.active.currentH;else if("_aspectRatio"==n.link)(Jr=u_.helpVec).x=lo.active.currentH/lo.active.currentW,Jr.y=lo.active.currentW/lo.active.currentH,Jr.x=1<Jr.x?1:Jr.x,Jr.y=1<Jr.y?1:Jr.y;else if("_cameraPlane"==n.link)(Jr=u_.helpVec).x=e.data.raw.near_plane,Jr.y=e.data.raw.far_plane;else if("_cameraPlaneProj"==n.link){var Ur=e.data.raw.near_plane,Qr=e.data.raw.far_plane;(Jr=u_.helpVec).x=Qr/(Qr-Ur),Jr.y=-Qr*Ur/(Qr-Ur)}else if("_lightPlane"==n.link)null!=a&&((Jr=u_.helpVec).x=a.data.raw.near_plane,Jr.y=a.data.raw.far_plane);else if("_lightPlaneProj"==n.link){if(null!=a){var qr=a.data.raw.near_plane,$r=a.data.raw.far_plane,to=$r+qr,eo=$r-qr,ao=2*$r*qr;(Jr=u_.helpVec).x=to/eo,Jr.y=ao/eo}}else"_spotlightData"==n.link&&null!=a&&((Jr=u_.helpVec).x=a.data.raw.spot_size,Jr.y=Jr.x-a.data.raw.spot_blend);if(null!=Jr)return t.setFloat2(i,Jr.x,Jr.y),!0}else if("float"==n.type){var io=null;if("_time"==n.link?io=go.time():"_deltaTime"==n.link?io=.016666666666666666*co.scale:"_lightRadius"==n.link?io=null==a?0:a.data.raw.far_plane:"_lightShadowsBias"==n.link?io=null==a?0:a.data.raw.shadows_bias:"_lightSize"==n.link?null!=a&&null!=a.data.raw.light_size&&(io=a.data.raw.light_size):"_envmapStrength"==n.link?io=null==h_.active.world?0:h_.active.world.getGlobalProbe().raw.strength:"_aspectRatioF"==n.link?io=lo.active.currentW/lo.active.currentH:"_aspectRatioWindowF"==n.link?io=uo.windowWidth()/uo.windowHeight():"_frameScale"==n.link&&(io=lo.active.frameTime/(.016666666666666666*co.scale)),null!=io)return t.setFloat(i,io),!0}else if("floats"==n.type){var no=null;if("_envmapIrradiance"==n.link&&(no=null==h_.active.world?_o.getEmptyIrradiance():h_.active.world.getSHIrradiance()),null!=no)return t.setFloats(i,no),!0}else if("int"==n.type){var so=null;if("_lightType"==n.link)if(null==a)so=0;else{var ro;switch(a.data.raw.type){case"area":ro=3;break;case"point":ro=1;break;case"spot":ro=2;break;case"sun":ro=0;break;default:ro=0}so=ro}else if("_lightIndex"==n.link)so=lo.active.currentLightIndex;else if("_lightCastShadow"==n.link)so=null!=a&&a.data.raw.cast_shadow?a.data.raw.shadowmap_cube?2:1:0;else if("_envmapNumMipmaps"==n.link){var oo=h_.active.world;so=null!=oo?oo.getGlobalProbe().raw.radiance_mipmaps+1-2:1}if(null!=so)return t.setInt(i,so),!0}return!1},u_.setObjectConstant=function(t,e,a,i,n,s){if(null!=s.link)if("mat4"==s.type){var r=null;if("_worldMatrix"==s.link)r=e.transform.world;else if("_inverseWorldMatrix"==s.link){var o=u_.helpMat,l=e.transform.world,_=l.self._00,h=l.self._01,c=l.self._02,g=l.self._03,u=l.self._10,f=l.self._11,d=l.self._12,b=l.self._13,p=l.self._20,m=l.self._21,I=l.self._22,v=l.self._23,M=l.self._30,C=l.self._31,y=l.self._32,w=l.self._33,A=_*f-h*u,x=_*d-c*u,Z=_*b-g*u,z=h*d-c*f,B=h*b-g*f,N=c*b-g*d,G=p*C-m*M,k=p*y-I*M,S=p*w-v*M,W=m*y-I*C,X=m*w-v*C,Y=I*w-v*y,D=A*Y-x*X+Z*W+z*S-B*k+N*G;0==D?(o.self._00=1,o.self._01=0,o.self._02=0,o.self._03=0,o.self._10=0,o.self._11=1,o.self._12=0,o.self._13=0,o.self._20=0,o.self._21=0,o.self._22=1,o.self._23=0,o.self._30=0,o.self._31=0,o.self._32=0,o.self._33=1):(D=1/D,o.self._00=(f*Y-d*X+b*W)*D,o.self._01=(c*X-h*Y-g*W)*D,o.self._02=(C*N-y*B+w*z)*D,o.self._03=(I*B-m*N-v*z)*D,o.self._10=(d*S-u*Y-b*k)*D,o.self._11=(_*Y-c*S+g*k)*D,o.self._12=(y*Z-M*N-w*x)*D,o.self._13=(p*N-I*Z+v*x)*D,o.self._20=(u*X-f*S+b*G)*D,o.self._21=(h*S-_*X-g*G)*D,o.self._22=(M*B-C*Z+w*A)*D,o.self._23=(m*Z-p*B-v*A)*D,o.self._30=(f*k-u*W-d*G)*D,o.self._31=(_*W-h*k+c*G)*D,o.self._32=(C*x-M*z-y*A)*D,o.self._33=(p*z-m*x+I*A)*D),r=u_.helpMat}else if("_worldViewProjectionMatrix"==s.link){var K=u_.helpMat,L=e.transform.world;K.self._00=L.self._00,K.self._01=L.self._01,K.self._02=L.self._02,K.self._03=L.self._03,K.self._10=L.self._10,K.self._11=L.self._11,K.self._12=L.self._12,K.self._13=L.self._13,K.self._20=L.self._20,K.self._21=L.self._21,K.self._22=L.self._22,K.self._23=L.self._23,K.self._30=L.self._30,K.self._31=L.self._31,K.self._32=L.self._32,K.self._33=L.self._33;var V=u_.helpMat,H=a.V,j=V.self._00,T=V.self._01,R=V.self._02,F=V.self._03,O=V.self._10,P=V.self._11,J=V.self._12,E=V.self._13,U=V.self._20,Q=V.self._21,q=V.self._22,$=V.self._23,tt=V.self._30,et=V.self._31,at=V.self._32,it=V.self._33,nt=H.self._00,st=H.self._10,rt=H.self._20,ot=H.self._30;V.self._00=j*nt+T*st+R*rt+F*ot,V.self._10=O*nt+P*st+J*rt+E*ot,V.self._20=U*nt+Q*st+q*rt+$*ot,V.self._30=tt*nt+et*st+at*rt+it*ot,nt=H.self._01,st=H.self._11,rt=H.self._21,ot=H.self._31,V.self._01=j*nt+T*st+R*rt+F*ot,V.self._11=O*nt+P*st+J*rt+E*ot,V.self._21=U*nt+Q*st+q*rt+$*ot,V.self._31=tt*nt+et*st+at*rt+it*ot,nt=H.self._02,st=H.self._12,rt=H.self._22,ot=H.self._32,V.self._02=j*nt+T*st+R*rt+F*ot,V.self._12=O*nt+P*st+J*rt+E*ot,V.self._22=U*nt+Q*st+q*rt+$*ot,V.self._32=tt*nt+et*st+at*rt+it*ot,nt=H.self._03,st=H.self._13,rt=H.self._23,ot=H.self._33,V.self._03=j*nt+T*st+R*rt+F*ot,V.self._13=O*nt+P*st+J*rt+E*ot,V.self._23=U*nt+Q*st+q*rt+$*ot,V.self._33=tt*nt+et*st+at*rt+it*ot;var lt=u_.helpMat,_t=a.P,ht=lt.self._00,ct=lt.self._01,gt=lt.self._02,ut=lt.self._03,ft=lt.self._10,dt=lt.self._11,bt=lt.self._12,pt=lt.self._13,mt=lt.self._20,It=lt.self._21,vt=lt.self._22,Mt=lt.self._23,Ct=lt.self._30,yt=lt.self._31,wt=lt.self._32,At=lt.self._33,xt=_t.self._00,Zt=_t.self._10,zt=_t.self._20,Bt=_t.self._30;lt.self._00=ht*xt+ct*Zt+gt*zt+ut*Bt,lt.self._10=ft*xt+dt*Zt+bt*zt+pt*Bt,lt.self._20=mt*xt+It*Zt+vt*zt+Mt*Bt,lt.self._30=Ct*xt+yt*Zt+wt*zt+At*Bt,xt=_t.self._01,Zt=_t.self._11,zt=_t.self._21,Bt=_t.self._31,lt.self._01=ht*xt+ct*Zt+gt*zt+ut*Bt,lt.self._11=ft*xt+dt*Zt+bt*zt+pt*Bt,lt.self._21=mt*xt+It*Zt+vt*zt+Mt*Bt,lt.self._31=Ct*xt+yt*Zt+wt*zt+At*Bt,xt=_t.self._02,Zt=_t.self._12,zt=_t.self._22,Bt=_t.self._32,lt.self._02=ht*xt+ct*Zt+gt*zt+ut*Bt,lt.self._12=ft*xt+dt*Zt+bt*zt+pt*Bt,lt.self._22=mt*xt+It*Zt+vt*zt+Mt*Bt,lt.self._32=Ct*xt+yt*Zt+wt*zt+At*Bt,xt=_t.self._03,Zt=_t.self._13,zt=_t.self._23,Bt=_t.self._33,lt.self._03=ht*xt+ct*Zt+gt*zt+ut*Bt,lt.self._13=ft*xt+dt*Zt+bt*zt+pt*Bt,lt.self._23=mt*xt+It*Zt+vt*zt+Mt*Bt,lt.self._33=Ct*xt+yt*Zt+wt*zt+At*Bt,r=u_.helpMat}else if("_worldViewProjectionMatrixSphere"==s.link){var Nt=u_.helpMat,Gt=e.transform.world;Nt.self._00=Gt.self._00,Nt.self._01=Gt.self._01,Nt.self._02=Gt.self._02,Nt.self._03=Gt.self._03,Nt.self._10=Gt.self._10,Nt.self._11=Gt.self._11,Nt.self._12=Gt.self._12,Nt.self._13=Gt.self._13,Nt.self._20=Gt.self._20,Nt.self._21=Gt.self._21,Nt.self._22=Gt.self._22,Nt.self._23=Gt.self._23,Nt.self._30=Gt.self._30,Nt.self._31=Gt.self._31,Nt.self._32=Gt.self._32,Nt.self._33=Gt.self._33;var kt=u_.helpMat,St=a.V,Wt=kt.self._00,Xt=kt.self._01,Yt=kt.self._02,Dt=kt.self._03,Kt=kt.self._10,Lt=kt.self._11,Vt=kt.self._12,Ht=kt.self._13,jt=kt.self._20,Tt=kt.self._21,Rt=kt.self._22,Ft=kt.self._23,Ot=kt.self._30,Pt=kt.self._31,Jt=kt.self._32,Et=kt.self._33,Ut=St.self._00,Qt=St.self._10,qt=St.self._20,$t=St.self._30;kt.self._00=Wt*Ut+Xt*Qt+Yt*qt+Dt*$t,kt.self._10=Kt*Ut+Lt*Qt+Vt*qt+Ht*$t,kt.self._20=jt*Ut+Tt*Qt+Rt*qt+Ft*$t,kt.self._30=Ot*Ut+Pt*Qt+Jt*qt+Et*$t,Ut=St.self._01,Qt=St.self._11,qt=St.self._21,$t=St.self._31,kt.self._01=Wt*Ut+Xt*Qt+Yt*qt+Dt*$t,kt.self._11=Kt*Ut+Lt*Qt+Vt*qt+Ht*$t,kt.self._21=jt*Ut+Tt*Qt+Rt*qt+Ft*$t,kt.self._31=Ot*Ut+Pt*Qt+Jt*qt+Et*$t,Ut=St.self._02,Qt=St.self._12,qt=St.self._22,$t=St.self._32,kt.self._02=Wt*Ut+Xt*Qt+Yt*qt+Dt*$t,kt.self._12=Kt*Ut+Lt*Qt+Vt*qt+Ht*$t,kt.self._22=jt*Ut+Tt*Qt+Rt*qt+Ft*$t,kt.self._32=Ot*Ut+Pt*Qt+Jt*qt+Et*$t,Ut=St.self._03,Qt=St.self._13,qt=St.self._23,$t=St.self._33,kt.self._03=Wt*Ut+Xt*Qt+Yt*qt+Dt*$t,kt.self._13=Kt*Ut+Lt*Qt+Vt*qt+Ht*$t,kt.self._23=jt*Ut+Tt*Qt+Rt*qt+Ft*$t,kt.self._33=Ot*Ut+Pt*Qt+Jt*qt+Et*$t,u_.helpMat.self._00=1,u_.helpMat.self._10=0,u_.helpMat.self._20=0,u_.helpMat.self._01=0,u_.helpMat.self._11=1,u_.helpMat.self._21=0,u_.helpMat.self._02=0,u_.helpMat.self._12=0,u_.helpMat.self._22=1;var te=u_.helpMat,ee=a.P,ae=te.self._00,ie=te.self._01,ne=te.self._02,se=te.self._03,re=te.self._10,oe=te.self._11,le=te.self._12,_e=te.self._13,he=te.self._20,ce=te.self._21,ge=te.self._22,ue=te.self._23,fe=te.self._30,de=te.self._31,be=te.self._32,pe=te.self._33,me=ee.self._00,Ie=ee.self._10,ve=ee.self._20,Me=ee.self._30;te.self._00=ae*me+ie*Ie+ne*ve+se*Me,te.self._10=re*me+oe*Ie+le*ve+_e*Me,te.self._20=he*me+ce*Ie+ge*ve+ue*Me,te.self._30=fe*me+de*Ie+be*ve+pe*Me,me=ee.self._01,Ie=ee.self._11,ve=ee.self._21,Me=ee.self._31,te.self._01=ae*me+ie*Ie+ne*ve+se*Me,te.self._11=re*me+oe*Ie+le*ve+_e*Me,te.self._21=he*me+ce*Ie+ge*ve+ue*Me,te.self._31=fe*me+de*Ie+be*ve+pe*Me,me=ee.self._02,Ie=ee.self._12,ve=ee.self._22,Me=ee.self._32,te.self._02=ae*me+ie*Ie+ne*ve+se*Me,te.self._12=re*me+oe*Ie+le*ve+_e*Me,te.self._22=he*me+ce*Ie+ge*ve+ue*Me,te.self._32=fe*me+de*Ie+be*ve+pe*Me,me=ee.self._03,Ie=ee.self._13,ve=ee.self._23,Me=ee.self._33,te.self._03=ae*me+ie*Ie+ne*ve+se*Me,te.self._13=re*me+oe*Ie+le*ve+_e*Me,te.self._23=he*me+ce*Ie+ge*ve+ue*Me,te.self._33=fe*me+de*Ie+be*ve+pe*Me,r=u_.helpMat}else if("_worldViewProjectionMatrixCylinder"==s.link){var Ce=u_.helpMat,ye=e.transform.world;Ce.self._00=ye.self._00,Ce.self._01=ye.self._01,Ce.self._02=ye.self._02,Ce.self._03=ye.self._03,Ce.self._10=ye.self._10,Ce.self._11=ye.self._11,Ce.self._12=ye.self._12,Ce.self._13=ye.self._13,Ce.self._20=ye.self._20,Ce.self._21=ye.self._21,Ce.self._22=ye.self._22,Ce.self._23=ye.self._23,Ce.self._30=ye.self._30,Ce.self._31=ye.self._31,Ce.self._32=ye.self._32,Ce.self._33=ye.self._33;var we=u_.helpMat,Ae=a.V,xe=we.self._00,Ze=we.self._01,ze=we.self._02,Be=we.self._03,Ne=we.self._10,Ge=we.self._11,ke=we.self._12,Se=we.self._13,We=we.self._20,Xe=we.self._21,Ye=we.self._22,De=we.self._23,Ke=we.self._30,Le=we.self._31,Ve=we.self._32,He=we.self._33,je=Ae.self._00,Te=Ae.self._10,Re=Ae.self._20,Fe=Ae.self._30;we.self._00=xe*je+Ze*Te+ze*Re+Be*Fe,we.self._10=Ne*je+Ge*Te+ke*Re+Se*Fe,we.self._20=We*je+Xe*Te+Ye*Re+De*Fe,we.self._30=Ke*je+Le*Te+Ve*Re+He*Fe,je=Ae.self._01,Te=Ae.self._11,Re=Ae.self._21,Fe=Ae.self._31,we.self._01=xe*je+Ze*Te+ze*Re+Be*Fe,we.self._11=Ne*je+Ge*Te+ke*Re+Se*Fe,we.self._21=We*je+Xe*Te+Ye*Re+De*Fe,we.self._31=Ke*je+Le*Te+Ve*Re+He*Fe,je=Ae.self._02,Te=Ae.self._12,Re=Ae.self._22,Fe=Ae.self._32,we.self._02=xe*je+Ze*Te+ze*Re+Be*Fe,we.self._12=Ne*je+Ge*Te+ke*Re+Se*Fe,we.self._22=We*je+Xe*Te+Ye*Re+De*Fe,we.self._32=Ke*je+Le*Te+Ve*Re+He*Fe,je=Ae.self._03,Te=Ae.self._13,Re=Ae.self._23,Fe=Ae.self._33,we.self._03=xe*je+Ze*Te+ze*Re+Be*Fe,we.self._13=Ne*je+Ge*Te+ke*Re+Se*Fe,we.self._23=We*je+Xe*Te+Ye*Re+De*Fe,we.self._33=Ke*je+Le*Te+Ve*Re+He*Fe,u_.helpMat.self._00=1,u_.helpMat.self._20=0,u_.helpMat.self._01=0,u_.helpMat.self._21=0,u_.helpMat.self._02=0,u_.helpMat.self._22=1;var Oe=u_.helpMat,Pe=a.P,Je=Oe.self._00,Ee=Oe.self._01,Ue=Oe.self._02,Qe=Oe.self._03,qe=Oe.self._10,$e=Oe.self._11,ta=Oe.self._12,ea=Oe.self._13,aa=Oe.self._20,ia=Oe.self._21,na=Oe.self._22,sa=Oe.self._23,ra=Oe.self._30,oa=Oe.self._31,la=Oe.self._32,_a=Oe.self._33,ha=Pe.self._00,ca=Pe.self._10,ga=Pe.self._20,ua=Pe.self._30;Oe.self._00=Je*ha+Ee*ca+Ue*ga+Qe*ua,Oe.self._10=qe*ha+$e*ca+ta*ga+ea*ua,Oe.self._20=aa*ha+ia*ca+na*ga+sa*ua,Oe.self._30=ra*ha+oa*ca+la*ga+_a*ua,ha=Pe.self._01,ca=Pe.self._11,ga=Pe.self._21,ua=Pe.self._31,Oe.self._01=Je*ha+Ee*ca+Ue*ga+Qe*ua,Oe.self._11=qe*ha+$e*ca+ta*ga+ea*ua,Oe.self._21=aa*ha+ia*ca+na*ga+sa*ua,Oe.self._31=ra*ha+oa*ca+la*ga+_a*ua,ha=Pe.self._02,ca=Pe.self._12,ga=Pe.self._22,ua=Pe.self._32,Oe.self._02=Je*ha+Ee*ca+Ue*ga+Qe*ua,Oe.self._12=qe*ha+$e*ca+ta*ga+ea*ua,Oe.self._22=aa*ha+ia*ca+na*ga+sa*ua,Oe.self._32=ra*ha+oa*ca+la*ga+_a*ua,ha=Pe.self._03,ca=Pe.self._13,ga=Pe.self._23,ua=Pe.self._33,Oe.self._03=Je*ha+Ee*ca+Ue*ga+Qe*ua,Oe.self._13=qe*ha+$e*ca+ta*ga+ea*ua,Oe.self._23=aa*ha+ia*ca+na*ga+sa*ua,Oe.self._33=ra*ha+oa*ca+la*ga+_a*ua,r=u_.helpMat}else if("_worldViewMatrix"==s.link){var fa=u_.helpMat,da=e.transform.world;fa.self._00=da.self._00,fa.self._01=da.self._01,fa.self._02=da.self._02,fa.self._03=da.self._03,fa.self._10=da.self._10,fa.self._11=da.self._11,fa.self._12=da.self._12,fa.self._13=da.self._13,fa.self._20=da.self._20,fa.self._21=da.self._21,fa.self._22=da.self._22,fa.self._23=da.self._23,fa.self._30=da.self._30,fa.self._31=da.self._31,fa.self._32=da.self._32,fa.self._33=da.self._33;var ba=u_.helpMat,pa=a.V,ma=ba.self._00,Ia=ba.self._01,va=ba.self._02,Ma=ba.self._03,Ca=ba.self._10,ya=ba.self._11,wa=ba.self._12,Aa=ba.self._13,xa=ba.self._20,Za=ba.self._21,za=ba.self._22,Ba=ba.self._23,Na=ba.self._30,Ga=ba.self._31,ka=ba.self._32,Sa=ba.self._33,Wa=pa.self._00,Xa=pa.self._10,Ya=pa.self._20,Da=pa.self._30;ba.self._00=ma*Wa+Ia*Xa+va*Ya+Ma*Da,ba.self._10=Ca*Wa+ya*Xa+wa*Ya+Aa*Da,ba.self._20=xa*Wa+Za*Xa+za*Ya+Ba*Da,ba.self._30=Na*Wa+Ga*Xa+ka*Ya+Sa*Da,Wa=pa.self._01,Xa=pa.self._11,Ya=pa.self._21,Da=pa.self._31,ba.self._01=ma*Wa+Ia*Xa+va*Ya+Ma*Da,ba.self._11=Ca*Wa+ya*Xa+wa*Ya+Aa*Da,ba.self._21=xa*Wa+Za*Xa+za*Ya+Ba*Da,ba.self._31=Na*Wa+Ga*Xa+ka*Ya+Sa*Da,Wa=pa.self._02,Xa=pa.self._12,Ya=pa.self._22,Da=pa.self._32,ba.self._02=ma*Wa+Ia*Xa+va*Ya+Ma*Da,ba.self._12=Ca*Wa+ya*Xa+wa*Ya+Aa*Da,ba.self._22=xa*Wa+Za*Xa+za*Ya+Ba*Da,ba.self._32=Na*Wa+Ga*Xa+ka*Ya+Sa*Da,Wa=pa.self._03,Xa=pa.self._13,Ya=pa.self._23,Da=pa.self._33,ba.self._03=ma*Wa+Ia*Xa+va*Ya+Ma*Da,ba.self._13=Ca*Wa+ya*Xa+wa*Ya+Aa*Da,ba.self._23=xa*Wa+Za*Xa+za*Ya+Ba*Da,ba.self._33=Na*Wa+Ga*Xa+ka*Ya+Sa*Da,r=u_.helpMat}else if("_lightWorldViewProjectionMatrix"==s.link){if(null!=i){if(null==e){var Ka=u_.helpMat;Ka.self._00=1,Ka.self._01=0,Ka.self._02=0,Ka.self._03=0,Ka.self._10=0,Ka.self._11=1,Ka.self._12=0,Ka.self._13=0,Ka.self._20=0,Ka.self._21=0,Ka.self._22=1,Ka.self._23=0,Ka.self._30=0,Ka.self._31=0,Ka.self._32=0,Ka.self._33=1}else{var La=u_.helpMat,Va=e.transform.world;La.self._00=Va.self._00,La.self._01=Va.self._01,La.self._02=Va.self._02,La.self._03=Va.self._03,La.self._10=Va.self._10,La.self._11=Va.self._11,La.self._12=Va.self._12,La.self._13=Va.self._13,La.self._20=Va.self._20,La.self._21=Va.self._21,La.self._22=Va.self._22,La.self._23=Va.self._23,La.self._30=Va.self._30,La.self._31=Va.self._31,La.self._32=Va.self._32,La.self._33=Va.self._33}var Ha=u_.helpMat,ja=i.VP,Ta=Ha.self._00,Ra=Ha.self._01,Fa=Ha.self._02,Oa=Ha.self._03,Pa=Ha.self._10,Ja=Ha.self._11,Ea=Ha.self._12,Ua=Ha.self._13,Qa=Ha.self._20,qa=Ha.self._21,$a=Ha.self._22,ti=Ha.self._23,ei=Ha.self._30,ai=Ha.self._31,ii=Ha.self._32,ni=Ha.self._33,si=ja.self._00,ri=ja.self._10,oi=ja.self._20,li=ja.self._30;Ha.self._00=Ta*si+Ra*ri+Fa*oi+Oa*li,Ha.self._10=Pa*si+Ja*ri+Ea*oi+Ua*li,Ha.self._20=Qa*si+qa*ri+$a*oi+ti*li,Ha.self._30=ei*si+ai*ri+ii*oi+ni*li,si=ja.self._01,ri=ja.self._11,oi=ja.self._21,li=ja.self._31,Ha.self._01=Ta*si+Ra*ri+Fa*oi+Oa*li,Ha.self._11=Pa*si+Ja*ri+Ea*oi+Ua*li,Ha.self._21=Qa*si+qa*ri+$a*oi+ti*li,Ha.self._31=ei*si+ai*ri+ii*oi+ni*li,si=ja.self._02,ri=ja.self._12,oi=ja.self._22,li=ja.self._32,Ha.self._02=Ta*si+Ra*ri+Fa*oi+Oa*li,Ha.self._12=Pa*si+Ja*ri+Ea*oi+Ua*li,Ha.self._22=Qa*si+qa*ri+$a*oi+ti*li,Ha.self._32=ei*si+ai*ri+ii*oi+ni*li,si=ja.self._03,ri=ja.self._13,oi=ja.self._23,li=ja.self._33,Ha.self._03=Ta*si+Ra*ri+Fa*oi+Oa*li,Ha.self._13=Pa*si+Ja*ri+Ea*oi+Ua*li,Ha.self._23=Qa*si+qa*ri+$a*oi+ti*li,Ha.self._33=ei*si+ai*ri+ii*oi+ni*li,r=u_.helpMat}}else if("_lightWorldViewProjectionMatrixSphere"==s.link){if(null!=i){var _i=u_.helpMat,hi=e.transform.world;_i.self._00=hi.self._00,_i.self._01=hi.self._01,_i.self._02=hi.self._02,_i.self._03=hi.self._03,_i.self._10=hi.self._10,_i.self._11=hi.self._11,_i.self._12=hi.self._12,_i.self._13=hi.self._13,_i.self._20=hi.self._20,_i.self._21=hi.self._21,_i.self._22=hi.self._22,_i.self._23=hi.self._23,_i.self._30=hi.self._30,_i.self._31=hi.self._31,_i.self._32=hi.self._32,_i.self._33=hi.self._33;var ci=u_.helpMat,gi=a.V,ui=ci.self._00,fi=ci.self._01,di=ci.self._02,bi=ci.self._03,pi=ci.self._10,mi=ci.self._11,Ii=ci.self._12,vi=ci.self._13,Mi=ci.self._20,Ci=ci.self._21,yi=ci.self._22,wi=ci.self._23,Ai=ci.self._30,xi=ci.self._31,Zi=ci.self._32,zi=ci.self._33,Bi=gi.self._00,Ni=gi.self._10,Gi=gi.self._20,ki=gi.self._30;ci.self._00=ui*Bi+fi*Ni+di*Gi+bi*ki,ci.self._10=pi*Bi+mi*Ni+Ii*Gi+vi*ki,ci.self._20=Mi*Bi+Ci*Ni+yi*Gi+wi*ki,ci.self._30=Ai*Bi+xi*Ni+Zi*Gi+zi*ki,Bi=gi.self._01,Ni=gi.self._11,Gi=gi.self._21,ki=gi.self._31,ci.self._01=ui*Bi+fi*Ni+di*Gi+bi*ki,ci.self._11=pi*Bi+mi*Ni+Ii*Gi+vi*ki,ci.self._21=Mi*Bi+Ci*Ni+yi*Gi+wi*ki,ci.self._31=Ai*Bi+xi*Ni+Zi*Gi+zi*ki,Bi=gi.self._02,Ni=gi.self._12,Gi=gi.self._22,ki=gi.self._32,ci.self._02=ui*Bi+fi*Ni+di*Gi+bi*ki,ci.self._12=pi*Bi+mi*Ni+Ii*Gi+vi*ki,ci.self._22=Mi*Bi+Ci*Ni+yi*Gi+wi*ki,ci.self._32=Ai*Bi+xi*Ni+Zi*Gi+zi*ki,Bi=gi.self._03,Ni=gi.self._13,Gi=gi.self._23,ki=gi.self._33,ci.self._03=ui*Bi+fi*Ni+di*Gi+bi*ki,ci.self._13=pi*Bi+mi*Ni+Ii*Gi+vi*ki,ci.self._23=Mi*Bi+Ci*Ni+yi*Gi+wi*ki,ci.self._33=Ai*Bi+xi*Ni+Zi*Gi+zi*ki,u_.helpMat.self._00=1,u_.helpMat.self._10=0,u_.helpMat.self._20=0,u_.helpMat.self._01=0,u_.helpMat.self._11=1,u_.helpMat.self._21=0,u_.helpMat.self._02=0,u_.helpMat.self._12=0,u_.helpMat.self._22=1;var Si=u_.helpMat2,Wi=a.V,Xi=Wi.self._00,Yi=Wi.self._01,Di=Wi.self._02,Ki=Wi.self._03,Li=Wi.self._10,Vi=Wi.self._11,Hi=Wi.self._12,ji=Wi.self._13,Ti=Wi.self._20,Ri=Wi.self._21,Fi=Wi.self._22,Oi=Wi.self._23,Pi=Wi.self._30,Ji=Wi.self._31,Ei=Wi.self._32,Ui=Wi.self._33,Qi=Xi*Vi-Yi*Li,qi=Xi*Hi-Di*Li,$i=Xi*ji-Ki*Li,tn=Yi*Hi-Di*Vi,en=Yi*ji-Ki*Vi,an=Di*ji-Ki*Hi,nn=Ti*Ji-Ri*Pi,sn=Ti*Ei-Fi*Pi,rn=Ti*Ui-Oi*Pi,on=Ri*Ei-Fi*Ji,ln=Ri*Ui-Oi*Ji,_n=Fi*Ui-Oi*Ei,hn=Qi*_n-qi*ln+$i*on+tn*rn-en*sn+an*nn;0==hn?(Si.self._00=1,Si.self._01=0,Si.self._02=0,Si.self._03=0,Si.self._10=0,Si.self._11=1,Si.self._12=0,Si.self._13=0,Si.self._20=0,Si.self._21=0,Si.self._22=1,Si.self._23=0,Si.self._30=0,Si.self._31=0,Si.self._32=0,Si.self._33=1):(hn=1/hn,Si.self._00=(Vi*_n-Hi*ln+ji*on)*hn,Si.self._01=(Di*ln-Yi*_n-Ki*on)*hn,Si.self._02=(Ji*an-Ei*en+Ui*tn)*hn,Si.self._03=(Fi*en-Ri*an-Oi*tn)*hn,Si.self._10=(Hi*rn-Li*_n-ji*sn)*hn,Si.self._11=(Xi*_n-Di*rn+Ki*sn)*hn,Si.self._12=(Ei*$i-Pi*an-Ui*qi)*hn,Si.self._13=(Ti*an-Fi*$i+Oi*qi)*hn,Si.self._20=(Li*ln-Vi*rn+ji*nn)*hn,Si.self._21=(Yi*rn-Xi*ln-Ki*nn)*hn,Si.self._22=(Pi*en-Ji*$i+Ui*Qi)*hn,Si.self._23=(Ri*$i-Ti*en-Oi*Qi)*hn,Si.self._30=(Vi*sn-Li*on-Hi*nn)*hn,Si.self._31=(Xi*on-Yi*sn+Di*nn)*hn,Si.self._32=(Ji*qi-Pi*tn-Ei*Qi)*hn,Si.self._33=(Ti*tn-Ri*qi+Fi*Qi)*hn);var cn=u_.helpMat,gn=u_.helpMat2,un=cn.self._00,fn=cn.self._01,dn=cn.self._02,bn=cn.self._03,pn=cn.self._10,mn=cn.self._11,In=cn.self._12,vn=cn.self._13,Mn=cn.self._20,Cn=cn.self._21,yn=cn.self._22,wn=cn.self._23,An=cn.self._30,xn=cn.self._31,Zn=cn.self._32,zn=cn.self._33,Bn=gn.self._00,Nn=gn.self._10,Gn=gn.self._20,kn=gn.self._30;cn.self._00=un*Bn+fn*Nn+dn*Gn+bn*kn,cn.self._10=pn*Bn+mn*Nn+In*Gn+vn*kn,cn.self._20=Mn*Bn+Cn*Nn+yn*Gn+wn*kn,cn.self._30=An*Bn+xn*Nn+Zn*Gn+zn*kn,Bn=gn.self._01,Nn=gn.self._11,Gn=gn.self._21,kn=gn.self._31,cn.self._01=un*Bn+fn*Nn+dn*Gn+bn*kn,cn.self._11=pn*Bn+mn*Nn+In*Gn+vn*kn,cn.self._21=Mn*Bn+Cn*Nn+yn*Gn+wn*kn,cn.self._31=An*Bn+xn*Nn+Zn*Gn+zn*kn,Bn=gn.self._02,Nn=gn.self._12,Gn=gn.self._22,kn=gn.self._32,cn.self._02=un*Bn+fn*Nn+dn*Gn+bn*kn,cn.self._12=pn*Bn+mn*Nn+In*Gn+vn*kn,cn.self._22=Mn*Bn+Cn*Nn+yn*Gn+wn*kn,cn.self._32=An*Bn+xn*Nn+Zn*Gn+zn*kn,Bn=gn.self._03,Nn=gn.self._13,Gn=gn.self._23,kn=gn.self._33,cn.self._03=un*Bn+fn*Nn+dn*Gn+bn*kn,cn.self._13=pn*Bn+mn*Nn+In*Gn+vn*kn,cn.self._23=Mn*Bn+Cn*Nn+yn*Gn+wn*kn,cn.self._33=An*Bn+xn*Nn+Zn*Gn+zn*kn;var Sn=u_.helpMat,Wn=i.VP,Xn=Sn.self._00,Yn=Sn.self._01,Dn=Sn.self._02,Kn=Sn.self._03,Ln=Sn.self._10,Vn=Sn.self._11,Hn=Sn.self._12,jn=Sn.self._13,Tn=Sn.self._20,Rn=Sn.self._21,Fn=Sn.self._22,On=Sn.self._23,Pn=Sn.self._30,Jn=Sn.self._31,En=Sn.self._32,Un=Sn.self._33,Qn=Wn.self._00,qn=Wn.self._10,$n=Wn.self._20,ts=Wn.self._30;Sn.self._00=Xn*Qn+Yn*qn+Dn*$n+Kn*ts,Sn.self._10=Ln*Qn+Vn*qn+Hn*$n+jn*ts,Sn.self._20=Tn*Qn+Rn*qn+Fn*$n+On*ts,Sn.self._30=Pn*Qn+Jn*qn+En*$n+Un*ts,Qn=Wn.self._01,qn=Wn.self._11,$n=Wn.self._21,ts=Wn.self._31,Sn.self._01=Xn*Qn+Yn*qn+Dn*$n+Kn*ts,Sn.self._11=Ln*Qn+Vn*qn+Hn*$n+jn*ts,Sn.self._21=Tn*Qn+Rn*qn+Fn*$n+On*ts,Sn.self._31=Pn*Qn+Jn*qn+En*$n+Un*ts,Qn=Wn.self._02,qn=Wn.self._12,$n=Wn.self._22,ts=Wn.self._32,Sn.self._02=Xn*Qn+Yn*qn+Dn*$n+Kn*ts,Sn.self._12=Ln*Qn+Vn*qn+Hn*$n+jn*ts,Sn.self._22=Tn*Qn+Rn*qn+Fn*$n+On*ts,Sn.self._32=Pn*Qn+Jn*qn+En*$n+Un*ts,Qn=Wn.self._03,qn=Wn.self._13,$n=Wn.self._23,ts=Wn.self._33,Sn.self._03=Xn*Qn+Yn*qn+Dn*$n+Kn*ts,Sn.self._13=Ln*Qn+Vn*qn+Hn*$n+jn*ts,Sn.self._23=Tn*Qn+Rn*qn+Fn*$n+On*ts,Sn.self._33=Pn*Qn+Jn*qn+En*$n+Un*ts,r=u_.helpMat}}else if("_lightWorldViewProjectionMatrixCylinder"==s.link){if(null!=i){var es=u_.helpMat,as=e.transform.world;es.self._00=as.self._00,es.self._01=as.self._01,es.self._02=as.self._02,es.self._03=as.self._03,es.self._10=as.self._10,es.self._11=as.self._11,es.self._12=as.self._12,es.self._13=as.self._13,es.self._20=as.self._20,es.self._21=as.self._21,es.self._22=as.self._22,es.self._23=as.self._23,es.self._30=as.self._30,es.self._31=as.self._31,es.self._32=as.self._32,es.self._33=as.self._33;var is=u_.helpMat,ns=a.V,ss=is.self._00,rs=is.self._01,os=is.self._02,ls=is.self._03,_s=is.self._10,hs=is.self._11,cs=is.self._12,gs=is.self._13,us=is.self._20,fs=is.self._21,ds=is.self._22,bs=is.self._23,ps=is.self._30,ms=is.self._31,Is=is.self._32,vs=is.self._33,Ms=ns.self._00,Cs=ns.self._10,ys=ns.self._20,ws=ns.self._30;is.self._00=ss*Ms+rs*Cs+os*ys+ls*ws,is.self._10=_s*Ms+hs*Cs+cs*ys+gs*ws,is.self._20=us*Ms+fs*Cs+ds*ys+bs*ws,is.self._30=ps*Ms+ms*Cs+Is*ys+vs*ws,Ms=ns.self._01,Cs=ns.self._11,ys=ns.self._21,ws=ns.self._31,is.self._01=ss*Ms+rs*Cs+os*ys+ls*ws,is.self._11=_s*Ms+hs*Cs+cs*ys+gs*ws,is.self._21=us*Ms+fs*Cs+ds*ys+bs*ws,is.self._31=ps*Ms+ms*Cs+Is*ys+vs*ws,Ms=ns.self._02,Cs=ns.self._12,ys=ns.self._22,ws=ns.self._32,is.self._02=ss*Ms+rs*Cs+os*ys+ls*ws,is.self._12=_s*Ms+hs*Cs+cs*ys+gs*ws,is.self._22=us*Ms+fs*Cs+ds*ys+bs*ws,is.self._32=ps*Ms+ms*Cs+Is*ys+vs*ws,Ms=ns.self._03,Cs=ns.self._13,ys=ns.self._23,ws=ns.self._33,is.self._03=ss*Ms+rs*Cs+os*ys+ls*ws,is.self._13=_s*Ms+hs*Cs+cs*ys+gs*ws,is.self._23=us*Ms+fs*Cs+ds*ys+bs*ws,is.self._33=ps*Ms+ms*Cs+Is*ys+vs*ws,u_.helpMat.self._00=1,u_.helpMat.self._20=0,u_.helpMat.self._01=0,u_.helpMat.self._21=0,u_.helpMat.self._02=0,u_.helpMat.self._22=1;var As=u_.helpMat2,xs=a.V,Zs=xs.self._00,zs=xs.self._01,Bs=xs.self._02,Ns=xs.self._03,Gs=xs.self._10,ks=xs.self._11,Ss=xs.self._12,Ws=xs.self._13,Xs=xs.self._20,Ys=xs.self._21,Ds=xs.self._22,Ks=xs.self._23,Ls=xs.self._30,Vs=xs.self._31,Hs=xs.self._32,js=xs.self._33,Ts=Zs*ks-zs*Gs,Rs=Zs*Ss-Bs*Gs,Fs=Zs*Ws-Ns*Gs,Os=zs*Ss-Bs*ks,Ps=zs*Ws-Ns*ks,Js=Bs*Ws-Ns*Ss,Es=Xs*Vs-Ys*Ls,Us=Xs*Hs-Ds*Ls,Qs=Xs*js-Ks*Ls,qs=Ys*Hs-Ds*Vs,$s=Ys*js-Ks*Vs,tr=Ds*js-Ks*Hs,er=Ts*tr-Rs*$s+Fs*qs+Os*Qs-Ps*Us+Js*Es;0==er?(As.self._00=1,As.self._01=0,As.self._02=0,As.self._03=0,As.self._10=0,As.self._11=1,As.self._12=0,As.self._13=0,As.self._20=0,As.self._21=0,As.self._22=1,As.self._23=0,As.self._30=0,As.self._31=0,As.self._32=0,As.self._33=1):(er=1/er,As.self._00=(ks*tr-Ss*$s+Ws*qs)*er,As.self._01=(Bs*$s-zs*tr-Ns*qs)*er,As.self._02=(Vs*Js-Hs*Ps+js*Os)*er,As.self._03=(Ds*Ps-Ys*Js-Ks*Os)*er,As.self._10=(Ss*Qs-Gs*tr-Ws*Us)*er,As.self._11=(Zs*tr-Bs*Qs+Ns*Us)*er,As.self._12=(Hs*Fs-Ls*Js-js*Rs)*er,As.self._13=(Xs*Js-Ds*Fs+Ks*Rs)*er,As.self._20=(Gs*$s-ks*Qs+Ws*Es)*er,As.self._21=(zs*Qs-Zs*$s-Ns*Es)*er,As.self._22=(Ls*Ps-Vs*Fs+js*Ts)*er,As.self._23=(Ys*Fs-Xs*Ps-Ks*Ts)*er,As.self._30=(ks*Us-Gs*qs-Ss*Es)*er,As.self._31=(Zs*qs-zs*Us+Bs*Es)*er,As.self._32=(Vs*Rs-Ls*Os-Hs*Ts)*er,As.self._33=(Xs*Os-Ys*Rs+Ds*Ts)*er);var ar=u_.helpMat,ir=u_.helpMat2,nr=ar.self._00,sr=ar.self._01,rr=ar.self._02,or=ar.self._03,lr=ar.self._10,_r=ar.self._11,hr=ar.self._12,cr=ar.self._13,gr=ar.self._20,ur=ar.self._21,fr=ar.self._22,dr=ar.self._23,br=ar.self._30,pr=ar.self._31,mr=ar.self._32,Ir=ar.self._33,vr=ir.self._00,Mr=ir.self._10,Cr=ir.self._20,yr=ir.self._30;ar.self._00=nr*vr+sr*Mr+rr*Cr+or*yr,ar.self._10=lr*vr+_r*Mr+hr*Cr+cr*yr,ar.self._20=gr*vr+ur*Mr+fr*Cr+dr*yr,ar.self._30=br*vr+pr*Mr+mr*Cr+Ir*yr,vr=ir.self._01,Mr=ir.self._11,Cr=ir.self._21,yr=ir.self._31,ar.self._01=nr*vr+sr*Mr+rr*Cr+or*yr,ar.self._11=lr*vr+_r*Mr+hr*Cr+cr*yr,ar.self._21=gr*vr+ur*Mr+fr*Cr+dr*yr,ar.self._31=br*vr+pr*Mr+mr*Cr+Ir*yr,vr=ir.self._02,Mr=ir.self._12,Cr=ir.self._22,yr=ir.self._32,ar.self._02=nr*vr+sr*Mr+rr*Cr+or*yr,ar.self._12=lr*vr+_r*Mr+hr*Cr+cr*yr,ar.self._22=gr*vr+ur*Mr+fr*Cr+dr*yr,ar.self._32=br*vr+pr*Mr+mr*Cr+Ir*yr,vr=ir.self._03,Mr=ir.self._13,Cr=ir.self._23,yr=ir.self._33,ar.self._03=nr*vr+sr*Mr+rr*Cr+or*yr,ar.self._13=lr*vr+_r*Mr+hr*Cr+cr*yr,ar.self._23=gr*vr+ur*Mr+fr*Cr+dr*yr,ar.self._33=br*vr+pr*Mr+mr*Cr+Ir*yr;var wr=u_.helpMat,Ar=i.VP,xr=wr.self._00,Zr=wr.self._01,zr=wr.self._02,Br=wr.self._03,Nr=wr.self._10,Gr=wr.self._11,kr=wr.self._12,Sr=wr.self._13,Wr=wr.self._20,Xr=wr.self._21,Yr=wr.self._22,Dr=wr.self._23,Kr=wr.self._30,Lr=wr.self._31,Vr=wr.self._32,Hr=wr.self._33,jr=Ar.self._00,Tr=Ar.self._10,Rr=Ar.self._20,Fr=Ar.self._30;wr.self._00=xr*jr+Zr*Tr+zr*Rr+Br*Fr,wr.self._10=Nr*jr+Gr*Tr+kr*Rr+Sr*Fr,wr.self._20=Wr*jr+Xr*Tr+Yr*Rr+Dr*Fr,wr.self._30=Kr*jr+Lr*Tr+Vr*Rr+Hr*Fr,jr=Ar.self._01,Tr=Ar.self._11,Rr=Ar.self._21,Fr=Ar.self._31,wr.self._01=xr*jr+Zr*Tr+zr*Rr+Br*Fr,wr.self._11=Nr*jr+Gr*Tr+kr*Rr+Sr*Fr,wr.self._21=Wr*jr+Xr*Tr+Yr*Rr+Dr*Fr,wr.self._31=Kr*jr+Lr*Tr+Vr*Rr+Hr*Fr,jr=Ar.self._02,Tr=Ar.self._12,Rr=Ar.self._22,Fr=Ar.self._32,wr.self._02=xr*jr+Zr*Tr+zr*Rr+Br*Fr,wr.self._12=Nr*jr+Gr*Tr+kr*Rr+Sr*Fr,wr.self._22=Wr*jr+Xr*Tr+Yr*Rr+Dr*Fr,wr.self._32=Kr*jr+Lr*Tr+Vr*Rr+Hr*Fr,jr=Ar.self._03,Tr=Ar.self._13,Rr=Ar.self._23,Fr=Ar.self._33,wr.self._03=xr*jr+Zr*Tr+zr*Rr+Br*Fr,wr.self._13=Nr*jr+Gr*Tr+kr*Rr+Sr*Fr,wr.self._23=Wr*jr+Xr*Tr+Yr*Rr+Dr*Fr,wr.self._33=Kr*jr+Lr*Tr+Vr*Rr+Hr*Fr,r=u_.helpMat}}else if("_biasLightWorldViewProjectionMatrix"==s.link){if(null!=i){if(null==e){var Or=u_.helpMat;Or.self._00=1,Or.self._01=0,Or.self._02=0,Or.self._03=0,Or.self._10=0,Or.self._11=1,Or.self._12=0,Or.self._13=0,Or.self._20=0,Or.self._21=0,Or.self._22=1,Or.self._23=0,Or.self._30=0,Or.self._31=0,Or.self._32=0,Or.self._33=1}else{var Pr=u_.helpMat,Jr=e.transform.world;Pr.self._00=Jr.self._00,Pr.self._01=Jr.self._01,Pr.self._02=Jr.self._02,Pr.self._03=Jr.self._03,Pr.self._10=Jr.self._10,Pr.self._11=Jr.self._11,Pr.self._12=Jr.self._12,Pr.self._13=Jr.self._13,Pr.self._20=Jr.self._20,Pr.self._21=Jr.self._21,Pr.self._22=Jr.self._22,Pr.self._23=Jr.self._23,Pr.self._30=Jr.self._30,Pr.self._31=Jr.self._31,Pr.self._32=Jr.self._32,Pr.self._33=Jr.self._33}var Er=u_.helpMat,Ur=i.VP,Qr=Er.self._00,qr=Er.self._01,$r=Er.self._02,to=Er.self._03,eo=Er.self._10,ao=Er.self._11,io=Er.self._12,no=Er.self._13,so=Er.self._20,ro=Er.self._21,oo=Er.self._22,lo=Er.self._23,_o=Er.self._30,ho=Er.self._31,co=Er.self._32,go=Er.self._33,uo=Ur.self._00,fo=Ur.self._10,bo=Ur.self._20,po=Ur.self._30;Er.self._00=Qr*uo+qr*fo+$r*bo+to*po,Er.self._10=eo*uo+ao*fo+io*bo+no*po,Er.self._20=so*uo+ro*fo+oo*bo+lo*po,Er.self._30=_o*uo+ho*fo+co*bo+go*po,uo=Ur.self._01,fo=Ur.self._11,bo=Ur.self._21,po=Ur.self._31,Er.self._01=Qr*uo+qr*fo+$r*bo+to*po,Er.self._11=eo*uo+ao*fo+io*bo+no*po,Er.self._21=so*uo+ro*fo+oo*bo+lo*po,Er.self._31=_o*uo+ho*fo+co*bo+go*po,uo=Ur.self._02,fo=Ur.self._12,bo=Ur.self._22,po=Ur.self._32,Er.self._02=Qr*uo+qr*fo+$r*bo+to*po,Er.self._12=eo*uo+ao*fo+io*bo+no*po,Er.self._22=so*uo+ro*fo+oo*bo+lo*po,Er.self._32=_o*uo+ho*fo+co*bo+go*po,uo=Ur.self._03,fo=Ur.self._13,bo=Ur.self._23,po=Ur.self._33,Er.self._03=Qr*uo+qr*fo+$r*bo+to*po,Er.self._13=eo*uo+ao*fo+io*bo+no*po,Er.self._23=so*uo+ro*fo+oo*bo+lo*po,Er.self._33=_o*uo+ho*fo+co*bo+go*po;var mo=u_.helpMat,Io=u_.biasMat,vo=mo.self._00,Mo=mo.self._01,Co=mo.self._02,yo=mo.self._03,wo=mo.self._10,Ao=mo.self._11,xo=mo.self._12,Zo=mo.self._13,zo=mo.self._20,Bo=mo.self._21,No=mo.self._22,Go=mo.self._23,ko=mo.self._30,So=mo.self._31,Wo=mo.self._32,Xo=mo.self._33,Yo=Io.self._00,Do=Io.self._10,Ko=Io.self._20,Lo=Io.self._30;mo.self._00=vo*Yo+Mo*Do+Co*Ko+yo*Lo,mo.self._10=wo*Yo+Ao*Do+xo*Ko+Zo*Lo,mo.self._20=zo*Yo+Bo*Do+No*Ko+Go*Lo,mo.self._30=ko*Yo+So*Do+Wo*Ko+Xo*Lo,Yo=Io.self._01,Do=Io.self._11,Ko=Io.self._21,Lo=Io.self._31,mo.self._01=vo*Yo+Mo*Do+Co*Ko+yo*Lo,mo.self._11=wo*Yo+Ao*Do+xo*Ko+Zo*Lo,mo.self._21=zo*Yo+Bo*Do+No*Ko+Go*Lo,mo.self._31=ko*Yo+So*Do+Wo*Ko+Xo*Lo,Yo=Io.self._02,Do=Io.self._12,Ko=Io.self._22,Lo=Io.self._32,mo.self._02=vo*Yo+Mo*Do+Co*Ko+yo*Lo,mo.self._12=wo*Yo+Ao*Do+xo*Ko+Zo*Lo,mo.self._22=zo*Yo+Bo*Do+No*Ko+Go*Lo,mo.self._32=ko*Yo+So*Do+Wo*Ko+Xo*Lo,Yo=Io.self._03,Do=Io.self._13,Ko=Io.self._23,Lo=Io.self._33,mo.self._03=vo*Yo+Mo*Do+Co*Ko+yo*Lo,mo.self._13=wo*Yo+Ao*Do+xo*Ko+Zo*Lo,mo.self._23=zo*Yo+Bo*Do+No*Ko+Go*Lo,mo.self._33=ko*Yo+So*Do+Wo*Ko+Xo*Lo,r=u_.helpMat}}else if(null!=u_.externalMat4Links)for(var Vo=0,Ho=u_.externalMat4Links;Vo<Ho.length;){var jo=Ho[Vo];if(++Vo,null!=(r=jo(e,u_.currentMat(e),s.link)))break}if(null==r)return;t.setMatrix(n,r.self)}else if("mat3"==s.type){var To=null;if("_normalMatrix"==s.link){var Ro=u_.helpMat,Fo=e.transform.world;Ro.self._00=Fo.self._00,Ro.self._01=Fo.self._01,Ro.self._02=Fo.self._02,Ro.self._03=Fo.self._03,Ro.self._10=Fo.self._10,Ro.self._11=Fo.self._11,Ro.self._12=Fo.self._12,Ro.self._13=Fo.self._13,Ro.self._20=Fo.self._20,Ro.self._21=Fo.self._21,Ro.self._22=Fo.self._22,Ro.self._23=Fo.self._23,Ro.self._30=Fo.self._30,Ro.self._31=Fo.self._31,Ro.self._32=Fo.self._32,Ro.self._33=Fo.self._33;var Oo=u_.helpMat,Po=u_.helpMat,Jo=Po.self._00,Eo=Po.self._01,Uo=Po.self._02,Qo=Po.self._03,qo=Po.self._10,$o=Po.self._11,tl=Po.self._12,el=Po.self._13,al=Po.self._20,il=Po.self._21,nl=Po.self._22,sl=Po.self._23,rl=Po.self._30,ol=Po.self._31,ll=Po.self._32,_l=Po.self._33,hl=Jo*$o-Eo*qo,cl=Jo*tl-Uo*qo,gl=Jo*el-Qo*qo,ul=Eo*tl-Uo*$o,fl=Eo*el-Qo*$o,dl=Uo*el-Qo*tl,bl=al*ol-il*rl,pl=al*ll-nl*rl,ml=al*_l-sl*rl,Il=il*ll-nl*ol,vl=il*_l-sl*ol,Ml=nl*_l-sl*ll,Cl=hl*Ml-cl*vl+gl*Il+ul*ml-fl*pl+dl*bl;0==Cl?(Oo.self._00=1,Oo.self._01=0,Oo.self._02=0,Oo.self._03=0,Oo.self._10=0,Oo.self._11=1,Oo.self._12=0,Oo.self._13=0,Oo.self._20=0,Oo.self._21=0,Oo.self._22=1,Oo.self._23=0,Oo.self._30=0,Oo.self._31=0,Oo.self._32=0,Oo.self._33=1):(Cl=1/Cl,Oo.self._00=($o*Ml-tl*vl+el*Il)*Cl,Oo.self._01=(Uo*vl-Eo*Ml-Qo*Il)*Cl,Oo.self._02=(ol*dl-ll*fl+_l*ul)*Cl,Oo.self._03=(nl*fl-il*dl-sl*ul)*Cl,Oo.self._10=(tl*ml-qo*Ml-el*pl)*Cl,Oo.self._11=(Jo*Ml-Uo*ml+Qo*pl)*Cl,Oo.self._12=(ll*gl-rl*dl-_l*cl)*Cl,Oo.self._13=(al*dl-nl*gl+sl*cl)*Cl,Oo.self._20=(qo*vl-$o*ml+el*bl)*Cl,Oo.self._21=(Eo*ml-Jo*vl-Qo*bl)*Cl,Oo.self._22=(rl*fl-ol*gl+_l*hl)*Cl,Oo.self._23=(il*gl-al*fl-sl*hl)*Cl,Oo.self._30=($o*pl-qo*Il-tl*bl)*Cl,Oo.self._31=(Jo*Il-Eo*pl+Uo*bl)*Cl,Oo.self._32=(ol*cl-rl*ul-ll*hl)*Cl,Oo.self._33=(al*ul-il*cl+nl*hl)*Cl);var yl=u_.helpMat,wl=yl.self._01;yl.self._01=yl.self._10,yl.self._10=wl,wl=yl.self._02,yl.self._02=yl.self._20,yl.self._20=wl,wl=yl.self._12,yl.self._12=yl.self._21,yl.self._21=wl;var Al=u_.helpMat3,xl=u_.helpMat;Al.self._00=xl.self._00,Al.self._01=xl.self._01,Al.self._02=xl.self._02,Al.self._10=xl.self._10,Al.self._11=xl.self._11,Al.self._12=xl.self._12,Al.self._20=xl.self._20,Al.self._21=xl.self._21,Al.self._22=xl.self._22,To=u_.helpMat3}if(null==To)return;t.setMatrix3(n,To.self)}else if("vec4"==s.type){var Zl=null,zl=u_.helpVec;if(zl.x=0,zl.y=0,zl.z=0,zl.w=1,null!=u_.externalVec4Links)for(var Bl=0,Nl=u_.externalVec4Links;Bl<Nl.length;){var Gl=Nl[Bl];if(++Bl,null!=(Zl=Gl(e,u_.currentMat(e),s.link)))break}if(null==Zl)return;t.setFloat4(n,Zl.x,Zl.y,Zl.z,Zl.w)}else if("vec3"==s.type){var kl=null,Sl=u_.helpVec;if(Sl.x=0,Sl.y=0,Sl.z=0,Sl.w=1,"_dim"==s.link){var Wl=e.transform.dim,Xl=e.transform.scale,Yl=u_.helpVec;Yl.x=Wl.x/Xl.x,Yl.y=Wl.y/Xl.y,Yl.z=Wl.z/Xl.z,Yl.w=1,kl=u_.helpVec}else if("_halfDim"==s.link){var Dl=e.transform.dim,Kl=e.transform.scale,Ll=u_.helpVec;Ll.x=Dl.x/Kl.x/2,Ll.y=Dl.y/Kl.y/2,Ll.z=Dl.z/Kl.z/2,Ll.w=1,kl=u_.helpVec}else if("_probeVolumeCenter"==s.link)kl=h_.active.world.getProbeVolumeCenter(e.transform);else if("_probeVolumeSize"==s.link)kl=h_.active.world.getProbeVolumeSize(e.transform);else if(null!=u_.externalVec3Links)for(var Vl=0,Hl=u_.externalVec3Links;Vl<Hl.length;){var jl=Hl[Vl];if(++Vl,null!=(kl=jl(e,u_.currentMat(e),s.link)))break}if(null==kl)return;t.setFloat3(n,kl.x,kl.y,kl.z)}else if("vec2"==s.type){var Tl=null,Rl=0;if("_tilesheetOffset"==s.link){var Fl=f_.__cast(e,g_).tilesheet;Tl=Fl.tileX,Rl=Fl.tileY}else if(null!=u_.externalVec2Links)for(var Ol=0,Pl=u_.externalVec2Links;Ol<Pl.length;){var Jl=Pl[Ol];++Ol;var El=Jl(e,u_.currentMat(e),s.link);if(null!=El){Tl=El.x,Rl=El.y;break}}if(null==Tl)return;t.setFloat2(n,Tl,Rl)}else if("float"==s.type){var Ul=null;if("_probeStrength"==s.link)Ul=h_.active.world.getProbeStrength(e.transform);else if("_probeBlending"==s.link)Ul=h_.active.world.getProbeBlending(e.transform);else if("_objectInfoIndex"==s.link)Ul=e.uid;else if("_objectInfoMaterialIndex"==s.link)Ul=u_.currentMat(e).uid;else if("_objectInfoRandom"==s.link)Ul=e.urandom;else if(null!=u_.externalFloatLinks)for(var Ql=0,ql=u_.externalFloatLinks;Ql<ql.length;){var $l=ql[Ql];++Ql;var t_=$l(e,u_.currentMat(e),s.link);if(null!=t_){Ul=t_;break}}if(null==Ul)return;t.setFloat(n,Ul)}else if("floats"==s.type){var e_=null;if("_skinBones"==s.link&&null!=e.animation&&(e_=f_.__cast(e.animation,c_).skinBuffer),null==e_&&null!=u_.externalFloatsLinks)for(var a_=0,i_=u_.externalFloatsLinks;a_<i_.length;){var n_=i_[a_];if(++a_,null!=(e_=n_(e,u_.currentMat(e),s.link)))break}if(null==e_)return;t.setFloats(n,e_)}else if("int"==s.type){var s_=null;if("_uid"==s.link)s_=e.uid;else if(null!=u_.externalIntLinks)for(var r_=0,o_=u_.externalIntLinks;r_<o_.length;){var l_=o_[r_];++r_;var __=l_(e,u_.currentMat(e),s.link);if(null!=__){s_=__;break}}if(null==s_)return;t.setInt(n,s_)}},u_.setMaterialConstants=function(t,e,a){if(null!=a.raw.bind_constants)for(var i=0,n=a.raw.bind_constants.length;i<n;){for(var s=i++,r=a.raw.bind_constants[s],o=-1,l=0,_=e.raw.constants.length;l<_;){var h=l++;if(e.raw.constants[h].name==r.name){o=h;break}}if(-1!=o){var c=e.raw.constants[o];u_.setMaterialConstant(t,e.constants[o],c,r)}}if(null!=a.textures)for(var g=0,u=a.textures.length;g<u;)for(var f=g++,d=a.raw.bind_textures[f].name,b=0,p=e.textureUnits.length;b<p;){var m=b++;if(d==e.raw.texture_units[m].name){t.setTexture(e.textureUnits[m],a.textures[f]),a.setTextureParameters(t,f,e,m);break}}},u_.currentMat=function(t){return null!=t&&t instanceof g_?f_.__cast(t,g_).materials[0]:null},u_.setMaterialConstant=function(t,e,a,i){switch(a.type){case"bool":t.setBool(e,i.bool);break;case"float":t.setFloat(e,i.float);break;case"int":t.setInt(e,i.int);break;case"vec2":t.setFloat2(e,i.vec2[0],i.vec2[1]);break;case"vec3":t.setFloat3(e,i.vec3[0],i.vec3[1],i.vec3[2]);break;case"vec4":t.setFloat4(e,i.vec4[0],i.vec4[1],i.vec4[2],i.vec4[3])}};var Ct=function(){};(i["iron.system.ArmPack"]=Ct).__name__=!0,Ct.read=function(t){try{var e=t.readByte();switch(e){case 192:return null;case 194:return!1;case 195:return!0;case 196:return t.read(t.readByte());case 197:return t.read(t.readUInt16());case 198:return t.read(t.readInt32());case 202:return t.readFloat();case 204:return t.readByte();case 205:return t.readUInt16();case 206:return t.readInt32();case 208:return t.readInt8();case 209:return t.readInt16();case 210:return t.readInt32();case 217:return t.readString(t.readByte());case 218:return t.readString(t.readUInt16());case 219:return t.readString(t.readInt32());case 220:return Ct.readArray(t,t.readUInt16());case 221:return Ct.readArray(t,t.readInt32());case 222:return Ct.readMap(t,t.readUInt16());case 223:return Ct.readMap(t,t.readInt32());default:if(e<128)return e;if(e<144)return Ct.readMap(t,15&e);if(e<160)return Ct.readArray(t,15&e);if(e<192)return t.readString(31&e);if(223<e)return-256|e}}catch(t){var a=t instanceof Ot?t.val:t;if(!(a instanceof X))throw t}return null},Ct.readArray=function(t,e){var a=t.readByte(),i=t,n=i.pos;if(i.set_position(n-1),202==a){var s=t,r=s.pos;s.set_position(r+1);for(var o=new _s(e),l=0,_=e;l<_;){o[l++]=t.readFloat()}return o}if(210==a){var h=t,c=h.pos;h.set_position(c+1);for(var g=new Uint32Array(e),u=0,f=e;u<f;){g[u++]=t.readInt32()}return g}for(var d=[],b=0,p=e;b<p;){b++;d.push(Ct.read(t))}return d},Ct.readMap=function(t,e){for(var a={},i=0,n=e;i<n;){i++;var s=Ct.read(t),r=Ct.read(t);a[k.string(s)]=r}return a};var yt=function(){};(i["iron.system.Audio"]=yt).__name__=!0,yt.play=function(t,e,a){return null==a&&(a=!1),null==e&&(e=!1),a&&null!=t.compressedData?pe.stream(t,e):null!=t.uncompressedData?pe.play(t,e):null};var wt=function(){};(i["iron.system.Input"]=wt).__name__=!0,wt.reset=function(){wt.occupied=!1,null!=wt.mouse&&wt.mouse.reset(),null!=wt.pen&&wt.pen.reset(),null!=wt.keyboard&&wt.keyboard.reset();for(var t=0,e=wt.gamepads;t<e.length;){var a=e[t];++t,a.reset()}},wt.endFrame=function(){null!=wt.mouse&&wt.mouse.endFrame(),null!=wt.pen&&wt.pen.endFrame(),null!=wt.keyboard&&wt.keyboard.endFrame();for(var t=0,e=wt.gamepads;t<e.length;){var a=e[t];++t,a.endFrame()}if(null!=wt.virtualButtons)for(var i=wt.virtualButtons,n=new N(i,i.arrayKeys());n.hasNext();){var s=n.next();s.started=s.released=!1}},wt.getMouse=function(){return wt.registered||(wt.registered=!0,L.notifyOnEndFrame(wt.endFrame),L.notifyOnReset(wt.reset)),null==wt.mouse&&(wt.mouse=new Zt),wt.mouse},wt.getKeyboard=function(){return wt.registered||(wt.registered=!0,L.notifyOnEndFrame(wt.endFrame),L.notifyOnReset(wt.reset)),null==wt.keyboard&&(wt.keyboard=new Bt),wt.keyboard},wt.getGamepad=function(t){if(null==t&&(t=0),4<=t)return null;for(wt.registered||(wt.registered=!0,L.notifyOnEndFrame(wt.endFrame),L.notifyOnReset(wt.reset));wt.gamepads.length<=t;)wt.gamepads.push(new Gt(wt.gamepads.length));return wt.gamepads[t].connected?wt.gamepads[t]:null};var At=function(){this.down=!1,this.released=!1,this.started=!1};(i["iron.system.VirtualButton"]=At).__name__=!0,At.prototype={started:null,released:null,down:null,__class__:At};var xt=function(){this.virtualButtons=null};(i["iron.system.VirtualInput"]=xt).__name__=!0,xt.prototype={virtualButtons:null,downVirtual:function(t){if(null!=this.virtualButtons){var e=this.virtualButtons,a=null!=rs[t]?e.getReserved(t):e.h[t];null!=a&&(a.down=!0,a.started=!0)}},upVirtual:function(t){if(null!=this.virtualButtons){var e=this.virtualButtons,a=null!=rs[t]?e.getReserved(t):e.h[t];null!=a&&(a.down=!1,a.released=!0)}},__class__:xt};var Zt=function(){this.lastY=-1,this.lastX=-1,this.locked=!1,this.wheelDelta=0,this.movementY=0,this.movementX=0,this.moved=!1,this.y=0,this.x=0,this.buttonsReleased=[!1,!1,!1],this.buttonsStarted=[!1,!1,!1],this.buttonsDown=[!1,!1,!1],xt.call(this),Fa.get().notify($n(this,this.downListener),$n(this,this.upListener),$n(this,this.moveListener),$n(this,this.wheelListener))};(i["iron.system.Mouse"]=Zt).__name__=!0,Zt.__super__=xt,Zt.prototype=s(xt.prototype,{buttonsDown:null,buttonsStarted:null,buttonsReleased:null,x:null,y:null,moved:null,movementX:null,movementY:null,wheelDelta:null,locked:null,lastX:null,lastY:null,endFrame:function(){var t=this.buttonsStarted[1]=this.buttonsStarted[2]=!1;this.buttonsStarted[0]=t;var e=this.buttonsReleased[1]=this.buttonsReleased[2]=!1;this.buttonsReleased[0]=e,this.moved=!1,this.movementX=0,this.movementY=0,this.wheelDelta=0},reset:function(){var t=this.buttonsDown[1]=this.buttonsDown[2]=!1;this.buttonsDown[0]=t,this.endFrame()},buttonIndex:function(t){return"left"==t?0:"right"==t?1:2},down:function(t){return null==t&&(t="left"),this.buttonsDown[this.buttonIndex(t)]},downListener:function(t,e,a){this.buttonsDown[t]=!0,this.buttonsStarted[t]=!0,this.x=e,this.y=a,0==t&&(this.lastX=e,this.lastY=a),this.downVirtual(Zt.buttons[t])},upListener:function(t,e,a){this.buttonsDown[t]=!1,this.buttonsReleased[t]=!0,this.x=e,this.y=a,this.upVirtual(Zt.buttons[t])},moveListener:function(t,e,a,i){-1==this.lastX&&-1==this.lastY&&(this.lastX=t,this.lastY=e),this.locked?(this.movementX=a,this.movementY=i):(this.movementX=t-this.lastX,this.movementY=e-this.lastY),this.lastX=t,this.lastY=e,this.x=t,this.y=e,this.moved=!0},wheelListener:function(t){this.wheelDelta=t},__class__:Zt});var zt=function(){this.lastPressure=0,this.lastY=-1,this.lastX=-1,this.pressure=0,this.movementY=0,this.movementX=0,this.moved=!1,this.y=0,this.x=0,this.buttonsReleased=[!1],this.buttonsStarted=[!1],this.buttonsDown=[!1],xt.call(this),Pa.get().notify($n(this,this.downListener),$n(this,this.upListener),$n(this,this.moveListener))};(i["iron.system.Pen"]=zt).__name__=!0,zt.__super__=xt,zt.prototype=s(xt.prototype,{buttonsDown:null,buttonsStarted:null,buttonsReleased:null,x:null,y:null,moved:null,movementX:null,movementY:null,pressure:null,lastX:null,lastY:null,lastPressure:null,endFrame:function(){this.buttonsStarted[0]=!1,this.buttonsReleased[0]=!1,this.moved=!1,this.movementX=0,this.movementY=0},reset:function(){this.buttonsDown[0]=!1,this.endFrame()},downListener:function(t,e,a){},upListener:function(t,e,a){},moveListener:function(t,e,a){-1==this.lastX&&-1==this.lastY&&(this.lastX=t,this.lastY=e,this.lastPressure=a),this.movementX=t-this.lastX,this.movementY=e-this.lastY,this.lastX=t,this.lastY=e,this.x=t,this.y=e,this.moved=!0,0<(this.pressure=a)&&0==this.lastPressure&&(this.buttonsDown[0]=!0,this.buttonsStarted[0]=!0),0==a&&0<this.lastPressure&&(this.buttonsDown[0]=!1,this.buttonsReleased[0]=!0),this.lastPressure=a},__class__:zt});var Bt=function(){this.keysFrame=[],this.keysReleased=new et,this.keysStarted=new et,this.keysDown=new et,xt.call(this),this.reset(),Ra.get().notify($n(this,this.downListener),$n(this,this.upListener),$n(this,this.pressListener))};(i["iron.system.Keyboard"]=Bt).__name__=!0,Bt.keyCode=function(t){return 32==t?"space":8==t?"backspace":9==t?"tab":13==t?"enter":16==t?"shift":17==t?"control":18==t?"alt":27==t?"escape":46==t?"delete":38==t?"up":40==t?"down":37==t?"left":39==t?"right":1==t?"back":48==t?"0":49==t?"1":50==t?"2":51==t?"3":52==t?"4":53==t?"5":54==t?"6":55==t?"7":56==t?"8":57==t?"9":String.fromCharCode(t).toLowerCase()},Bt.__super__=xt,Bt.prototype=s(xt.prototype,{keysDown:null,keysStarted:null,keysReleased:null,keysFrame:null,endFrame:function(){if(0<this.keysFrame.length){for(var t=0,e=this.keysFrame;t<e.length;){var a=e[t];++t;var i=this.keysStarted;null!=rs[a]?i.setReserved(a,!1):i.h[a]=!1;var n=this.keysReleased;null!=rs[a]?n.setReserved(a,!1):n.h[a]=!1}this.keysFrame.splice(0,this.keysFrame.length)}},reset:function(){for(var t=0,e=Bt.keys;t<e.length;){var a=e[t];++t;var i=this.keysDown;null!=rs[a]?i.setReserved(a,!1):i.h[a]=!1;var n=this.keysStarted;null!=rs[a]?n.setReserved(a,!1):n.h[a]=!1;var s=this.keysReleased;null!=rs[a]?s.setReserved(a,!1):s.h[a]=!1}this.endFrame()},down:function(t){var e=this.keysDown;return null!=rs[t]?e.getReserved(t):e.h[t]},downListener:function(t){var e=Bt.keyCode(t);this.keysFrame.push(e);var a=this.keysStarted;null!=rs[e]?a.setReserved(e,!0):a.h[e]=!0;var i=this.keysDown;null!=rs[e]?i.setReserved(e,!0):i.h[e]=!0,this.downVirtual(e)},upListener:function(t){var e=Bt.keyCode(t);this.keysFrame.push(e);var a=this.keysReleased;null!=rs[e]?a.setReserved(e,!0):a.h[e]=!0;var i=this.keysDown;null!=rs[e]?i.setReserved(e,!1):i.h[e]=!1,this.upVirtual(e)},pressListener:function(t){},__class__:Bt});var Nt=function(){this.movementY=0,this.movementX=0,this.moved=!1,this.lastY=0,this.lastX=0,this.y=0,this.x=0};(i["iron.system.GamepadStick"]=Nt).__name__=!0,Nt.prototype={x:null,y:null,lastX:null,lastY:null,moved:null,movementX:null,movementY:null,__class__:Nt};var Gt=function(t,e){null==e&&(e=!1),this.num=0,this.connected=!1,this.rightStick=new Nt,this.leftStick=new Nt,this.buttonsFrame=[],this.buttonsReleased=[],this.buttonsStarted=[],this.buttonsDown=[],xt.call(this);for(var a=0,i=Gt.buttons;a<i.length;){i[a];++a,this.buttonsDown.push(0),this.buttonsStarted.push(!1),this.buttonsReleased.push(!1)}this.num=t,this.reset(),e?this.connected=!0:this.connect()};(i["iron.system.Gamepad"]=Gt).__name__=!0,Gt.__super__=xt,Gt.prototype=s(xt.prototype,{buttonsDown:null,buttonsStarted:null,buttonsReleased:null,buttonsFrame:null,leftStick:null,rightStick:null,connected:null,num:null,connect:function(){var t=ja.get(this.num);null!=t&&(this.connected=!0,t.notify($n(this,this.axisListener),$n(this,this.buttonListener)))},endFrame:function(){if(0<this.buttonsFrame.length){for(var t=0,e=this.buttonsFrame;t<e.length;){var a=e[t];++t,this.buttonsStarted[a]=!1,this.buttonsReleased[a]=!1}this.buttonsFrame.splice(0,this.buttonsFrame.length)}this.leftStick.moved=!1,this.leftStick.movementX=0,this.leftStick.movementY=0,this.rightStick.moved=!1,this.rightStick.movementX=0,this.rightStick.movementY=0},reset:function(){for(var t=0,e=this.buttonsDown.length;t<e;){var a=t++;this.buttonsDown[a]=0,this.buttonsStarted[a]=!1,this.buttonsReleased[a]=!1}this.endFrame()},buttonIndex:function(t){for(var e=0,a=Gt.buttons.length;e<a;){var i=e++;if(Gt.buttons[i]==t)return i}return 0},down:function(t){return this.buttonsDown[this.buttonIndex(t)]},axisListener:function(t,e){var a=t<=1?this.leftStick:this.rightStick;0==t||2==t?(a.lastX=a.x,a.x=e,a.movementX=a.x-a.lastX):1!=t&&3!=t||(a.lastY=a.y,a.y=e,a.movementY=a.y-a.lastY),a.moved=!0},buttonListener:function(t,e){this.buttonsFrame.push(t),0<(this.buttonsDown[t]=e)?this.buttonsStarted[t]=!0:this.buttonsReleased[t]=!0,0==e?this.upVirtual(Gt.buttons[t]):1==e&&this.downVirtual(Gt.buttons[t])},__class__:Gt});var co=function(){};(i["iron.system.Time"]=co).__name__=!0,co.update=function(){co.realDelta=go.realTime()-co.last,co.last=go.realTime()};var Ot=function(t){Error.call(this),this.val=t,Error.captureStackTrace&&Error.captureStackTrace(this,Ot)};(i["js._Boot.HaxeError"]=Ot).__name__=!0,Ot.wrap=function(t){return t instanceof Error?t:new Ot(t)},Ot.__super__=Error,Ot.prototype=s(Error.prototype,{val:null,__class__:Ot});var f_=function(){};(i["js.Boot"]=f_).__name__=!0,f_.getClass=function(t){if(t instanceof Array&&null==t.__enum__)return Array;var e=t.__class__;if(null!=e)return e;var a=f_.__nativeClassName(t);return null!=a?f_.__resolveNativeClass(a):null},f_.__string_rec=function(t,e){if(null==t)return"null";if(5<=e.length)return"<...>";var a=typeof t;switch("function"==a&&(t.__name__||t.__ename__)&&(a="object"),a){case"function":return"<function>";case"object":if(t.__enum__){var i=v[t.__enum__],n=i.__constructs__[t._hx_index],s=i[n];if(s.__params__){e+="\t";for(var r=n+"(",o=[],l=0,_=s.__params__;l<_.length;){var h=_[l];++l,o.push(f_.__string_rec(t[h],e))}return r+o.join(",")+")"}return n}if(t instanceof Array){var c="[";e+="\t";for(var g=0,u=t.length;g<u;){var f=g++;c+=(0<f?",":"")+f_.__string_rec(t[f],e)}return c+="]"}var d;try{d=t.toString}catch(t){t instanceof Ot&&t.val;return"???"}if(null!=d&&d!=Object.toString&&"function"==typeof d){var b=t.toString();if("[object Object]"!=b)return b}var p=null,m="{\n";e+="\t";var I=null!=t.hasOwnProperty;for(var p in t)I&&!t.hasOwnProperty(p)||"prototype"!=p&&"__class__"!=p&&"__super__"!=p&&"__interfaces__"!=p&&"__properties__"!=p&&(2!=m.length&&(m+=", \n"),m+=e+p+" : "+f_.__string_rec(t[p],e));return m+="\n"+(e=e.substring(1))+"}";case"string":return t;default:return String(t)}},f_.__interfLoop=function(t,e){if(null==t)return!1;if(t==e)return!0;var a=t.__interfaces__;if(null!=a)for(var i=0,n=a.length;i<n;){var s=a[i++];if(s==e||f_.__interfLoop(s,e))return!0}return f_.__interfLoop(t.__super__,e)},f_.__instanceof=function(t,e){if(null==e)return!1;switch(e){case Array:return t instanceof Array&&null==t.__enum__;case is:return"boolean"==typeof t;case es:return!0;case as:return"number"==typeof t;case ts:return"number"==typeof t&&(0|t)===t;case String:return"string"==typeof t;default:if(null==t)return!1;if("function"==typeof e){if(t instanceof e)return!0;if(f_.__interfLoop(f_.getClass(t),e))return!0}else if("object"==typeof e&&f_.__isNativeObj(e)&&t instanceof e)return!0;return e==ns&&null!=t.__name__||(e==ss&&null!=t.__ename__||v[t.__enum__]==e)}},f_.__cast=function(t,e){if(f_.__instanceof(t,e))return t;throw new Ot("Cannot cast "+k.string(t)+" to "+k.string(e))},f_.__nativeClassName=function(t){var e=f_.__toStr.call(t).slice(8,-1);return"Object"==e||"Function"==e||"Math"==e||"JSON"==e?null:e},f_.__isNativeObj=function(t){return null!=f_.__nativeClassName(t)},f_.__resolveNativeClass=function(t){return e[t]};var kt=function(t){if(t instanceof Array&&null==t.__enum__)this.a=t,this.byteLength=t.length;else{var e=t;this.a=[];for(var a=0,i=e;a<i;){var n=a++;this.a[n]=0}this.byteLength=e}};(i["js.html.compat.ArrayBuffer"]=kt).__name__=!0,kt.sliceImpl=function(t,e){var a=new hs(this,t,null==e?null:e-t),i=new os(a.byteLength);return new hs(i).set(a),i},kt.prototype={byteLength:null,a:null,slice:function(t,e){return new kt(this.a.slice(t,e))},__class__:kt};var St=function(t,e,a){if(this.buf=t,this.offset=null==e?0:e,this.length=null==a?t.byteLength-this.offset:a,this.offset<0||this.length<0||this.offset+this.length>t.byteLength)throw new Ot(Y.OutsideBounds);this.byteLength=this.length,this.byteOffset=this.offset,this.buffer=this.buf};(i["js.html.compat.DataView"]=St).__name__=!0,St.prototype={buf:null,offset:null,length:null,byteLength:null,byteOffset:null,buffer:null,getInt8:function(t){var e=this.buf.a[this.offset+t];return 128<=e?e-256:e},getUint8:function(t){return this.buf.a[this.offset+t]},getInt16:function(t,e){var a=this.getUint16(t,e);return 32768<=a?a-65536:a},getUint16:function(t,e){return e?this.buf.a[this.offset+t]|this.buf.a[this.offset+t+1]<<8:this.buf.a[this.offset+t]<<8|this.buf.a[this.offset+t+1]},getInt32:function(t,e){var a=this.offset+t,i=this.buf.a[a++],n=this.buf.a[a++],s=this.buf.a[a++],r=this.buf.a[a++];return e?i|n<<8|s<<16|r<<24:r|s<<8|n<<16|i<<24},getUint32:function(t,e){var a=this.getInt32(t,e);return a<0?a+4294967296:a},getFloat32:function(t,e){var a=this.getInt32(t,e),i=1-(a>>>31<<1),n=a>>23&255;return 255==n?0==(8388607&a)?0<i?1/0:-1/0:NaN:i*(0==n?(8388607&a)<<1:8388607&a|8388608)*Math.pow(2,n-150)},getFloat64:function(t,e){var a=this.getInt32(t,e),i=this.getInt32(t+4,e),n=e?a:i,s=e?i:a,r=1-(s>>>31<<1),o=s>>20&2047;if(2047==o)return 0==n&&0==(1048575&s)?0<r?1/0:-1/0:NaN;var l=2220446049250313e-31*(4294967296*(1048575&s)+2147483648*(n>>>31)+(2147483647&n));return 0==o?l*=2:l+=1,r*l*Math.pow(2,o-1023)},setInt8:function(t,e){this.buf.a[t+this.offset]=e<0?e+128&255:255&e},setUint8:function(t,e){this.buf.a[t+this.offset]=255&e},setInt16:function(t,e,a){this.setUint16(t,e<0?e+65536:e,a)},setUint16:function(t,e,a){var i=t+this.offset;a?(this.buf.a[i++]=255&e,this.buf.a[i]=e>>8&255):(this.buf.a[i++]=e>>8&255,this.buf.a[i]=255&e)},setInt32:function(t,e,a){this.setUint32(t,e,a)},setUint32:function(t,e,a){var i=t+this.offset;a?(this.buf.a[i++]=255&e,this.buf.a[i++]=e>>8&255,this.buf.a[i++]=e>>16&255,this.buf.a[i++]=e>>>24):(this.buf.a[i++]=e>>>24,this.buf.a[i++]=e>>16&255,this.buf.a[i++]=e>>8&255,this.buf.a[i++]=255&e)},setFloat32:function(t,e,a){var i;if(0==e)i=0;else{var n=e<0?-e:e,s=Math.floor(Math.log(n)/.6931471805599453);127<s?i=2139095040:(s<=-127?(s=-127,n*=71362384635298e31):n=8388608*(n/Math.pow(2,s)-1),i=(e<0?-2147483648:0)|s+127<<23|Math.round(n))}this.setUint32(t,i,a)},setFloat64:function(t,e,a){var i=D.i64tmp;if(0==e)i.low=0,i.high=0;else if(isFinite(e)){var n=e<0?-e:e,s=Math.floor(Math.log(n)/.6931471805599453);if(1023<s)i.low=-1,i.high=2146435071;else{s<=-1023?(s=-1023,n/=22250738585072014e-324):n=n/Math.pow(2,s)-1;var r=Math.round(4503599627370496*n),o=0|r,l=r/4294967296|0;i.low=o,i.high=(e<0?-2147483648:0)|s+1023<<20|l}}else i.low=0,i.high=0<e?2146435072:-1048576;var _=i;a?(this.setUint32(t,_.low,!0),this.setUint32(t+4,_.high,!0)):(this.setUint32(t,_.high,!1),this.setUint32(t+4,_.low,!1))},__class__:St};var Wt=function(){};(i["js.html.compat.Float32Array"]=Wt).__name__=!0,Wt._new=function(t,e,a){var i;if("number"==typeof t){i=[];for(var n=0,s=t;n<s;){i[n++]=0}i.byteLength=i.length<<2;for(var r=[],o=i.byteOffset=0,l=i.length<<2;o<l;){o++;r.push(0)}i.buffer=new kt(r)}else if(t instanceof kt){var _=t;null==e&&(e=0),null==a&&(a=_.byteLength-e>>2),i=[];for(var h=0,c=a;h<c;){h++;var g=_.a[e++]|_.a[e++]<<8|_.a[e++]<<16|_.a[e++]<<24;i.push(D.i32ToFloat(g))}i.byteLength=i.length<<2,i.byteOffset=e,i.buffer=_}else{if(!(t instanceof Array&&null==t.__enum__))throw new Ot("TODO "+k.string(t));i=t.slice();for(var u=[],f=0;f<i.length;){var d=i[f];++f;var b=D.floatToI32(d);u.push(255&b),u.push(b>>8&255),u.push(b>>16&255),u.push(b>>>24)}i.byteLength=i.length<<2,i.byteOffset=0,i.buffer=new kt(u)}return i.subarray=Wt._subarray,i.set=Wt._set,i},Wt._set=function(t,e){if(null==e&&(e=0),t.buffer instanceof kt){var a=t;if(t.byteLength+e>this.byteLength)throw new Ot("set() outside of range");for(var i=0,n=t.byteLength;i<n;){var s=i++;this[s+e]=a[s]}}else{if(!(t instanceof Array&&null==t.__enum__))throw new Ot("TODO");var r=t;if(r.length+e>this.byteLength)throw new Ot("set() outside of range");for(var o=0,l=r.length;o<l;){var _=o++;this[_+e]=r[_]}}},Wt._subarray=function(t,e){var a=Wt._new(this.slice(t,e));return a.byteOffset=4*t,a};var Yt=function(){};(i["js.html.compat.Uint8Array"]=Yt).__name__=!0,Yt._new=function(t,e,a){var i;if("number"==typeof t){i=[];for(var n=0,s=t;n<s;){i[n++]=0}i.byteLength=i.length,i.byteOffset=0,i.buffer=new kt(i)}else if(t instanceof kt){var r=t;null==e&&(e=0),null==a&&(a=r.byteLength-e),(i=0==e?r.a:r.a.slice(e,e+a)).byteLength=i.length,i.byteOffset=e,i.buffer=r}else{if(!(t instanceof Array&&null==t.__enum__))throw new Ot("TODO "+k.string(t));(i=t.slice()).byteLength=i.length,i.byteOffset=0,i.buffer=new kt(i)}return i.subarray=Yt._subarray,i.set=Yt._set,i},Yt._set=function(t,e){if(null==e&&(e=0),t.buffer instanceof kt){var a=t;if(t.byteLength+e>this.byteLength)throw new Ot("set() outside of range");for(var i=0,n=t.byteLength;i<n;){var s=i++;this[s+e]=a[s]}}else{if(!(t instanceof Array&&null==t.__enum__))throw new Ot("TODO");var r=t;if(r.length+e>this.byteLength)throw new Ot("set() outside of range");for(var o=0,l=r.length;o<l;){var _=o++;this[_+e]=r[_]}}},Yt._subarray=function(t,e){var a=Yt._new(this.slice(t,e));return a.byteOffset=t,a};var Dt=function(){this.names=[]};(i["kha._Assets.ImageList"]=Dt).__name__=!0,Dt.prototype={get:function(t){return Ze.field(this,t)},names:null,__class__:Dt};var Kt=function(){this.names=[]};(i["kha._Assets.SoundList"]=Kt).__name__=!0,Kt.prototype={get:function(t){return Ze.field(this,t)},names:null,__class__:Kt};var Lt=function(){this.names=[]};(i["kha._Assets.BlobList"]=Lt).__name__=!0,Lt.prototype={get:function(t){return Ze.field(this,t)},names:null,__class__:Lt};var Vt=function(){this.names=[]};(i["kha._Assets.FontList"]=Vt).__name__=!0,Vt.prototype={get:function(t){return Ze.field(this,t)},names:null,__class__:Vt};var Ht=function(){this.names=[]};(i["kha._Assets.VideoList"]=Ht).__name__=!0,Ht.prototype={get:function(t){return Ze.field(this,t)},names:null,__class__:Ht};var jt=function(){};(i["kha.Assets"]=jt).__name__=!0,jt.__properties__={get_videoFormats:"get_videoFormats",get_fontFormats:"get_fontFormats",get_soundFormats:"get_soundFormats",get_imageFormats:"get_imageFormats"},jt.loadEverything=function(t,e,a,i){for(var n=0,s=0,r=J.getInstanceFields(Lt);s<r.length;){var o=r[s];++s,P.endsWith(o,"Load")&&(n+=1)}for(var l=0,_=J.getInstanceFields(Dt);l<_.length;){var h=_[l];++l,P.endsWith(h,"Load")&&(n+=1)}for(var c=0,g=J.getInstanceFields(Kt);c<g.length;){var u=g[c];++c,P.endsWith(u,"Load")&&(n+=1)}for(var f=0,d=J.getInstanceFields(Vt);f<d.length;){var b=d[f];++f,P.endsWith(b,"Load")&&(n+=1)}for(var p=0,m=J.getInstanceFields(Ht);p<m.length;){var I=m[p];++p,P.endsWith(I,"Load")&&(n+=1)}if(0!=n){for(var v=n,M=function(){v-=1,jt.progress=1-v/n,0==v&&t()},C=0,y=J.getInstanceFields(Lt);C<y.length;){var w=y[C];if(++C,P.endsWith(w,"Load")){var A=q.substr(w,0,w.length-4),x=Ze.field(jt.blobs,A+"Description");null==e||e(x)?Ze.field(jt.blobs,w)(M,function(t){if(null==i);M()}):M()}}for(var Z=0,z=J.getInstanceFields(Dt);Z<z.length;){var B=z[Z];if(++Z,P.endsWith(B,"Load")){var N=q.substr(B,0,B.length-4),G=Ze.field(jt.images,N+"Description");null==e||e(G)?Ze.field(jt.images,B)(M,function(t){if(null==i);M()}):M()}}for(var k=0,S=J.getInstanceFields(Kt);k<S.length;){var W=[S[k]];if(++k,P.endsWith(W[0],"Load")){var X=q.substr(W[0],0,W[0].length-4),Y=[Ze.field(jt.sounds,X+"Description")];null==e||e(Y[0])?Ze.field(jt.sounds,W[0])(function(t,e){return function(){null==a||a(t[0])?Ze.field(jt.sounds,e[0].substring(0,e[0].length-4)).uncompress(M):M()}}(Y,W),null!=i?i:function(e,a){return function(t){a[0](t,e[0])}}([{fileName:"kha/Assets.hx",lineNumber:172,className:"kha.Assets",methodName:"loadEverything"}],[Oe.trace])):M()}}for(var D=0,K=J.getInstanceFields(Vt);D<K.length;){var L=K[D];if(++D,P.endsWith(L,"Load")){var V=q.substr(L,0,L.length-4),H=Ze.field(jt.fonts,V+"Description");null==e||e(H)?Ze.field(jt.fonts,L)(M,function(t){if(null==i);M()}):M()}}for(var j=0,T=J.getInstanceFields(Ht);j<T.length;){var R=T[j];if(++j,P.endsWith(R,"Load")){var F=q.substr(R,0,R.length-4),O=Ze.field(jt.videos,F+"Description");null==e||e(O)?Ze.field(jt.videos,R)(M,function(t){if(null==i);M()}):M()}}}else t()},jt.loadImage=function(e,a,t,i){var n,s=Ze.field(jt.images,e+"Description");if(null!=t)n=t;else{var r=Oe.trace,o=i;n=function(t){r(t,o)}}ne.loadImageFromDescription(s,function(t){jt.images[e]=t,a(t)},n)},jt.loadImageFromPath=function(t,e,a,i,n){var s,r={files:[t],readable:e};if(null!=i)s=i;else{var o=Oe.trace,l=n;s=function(t){o(t,l)}}ne.loadImageFromDescription(r,a,s)},jt.get_imageFormats=function(){return ne.getImageFormats()},jt.loadBlob=function(e,a,t,i){var n,s=Ze.field(jt.blobs,e+"Description");if(null!=t)n=t;else{var r=Oe.trace,o=i;n=function(t){r(t,o)}}ne.loadBlobFromDescription(s,function(t){jt.blobs[e]=t,a(t)},n)},jt.loadBlobFromPath=function(t,e,a,i){var n,s={files:[t]};if(null!=a)n=a;else{var r=Oe.trace,o=i;n=function(t){r(t,o)}}ne.loadBlobFromDescription(s,e,n)},jt.loadSound=function(e,a,t,i){var n,s=Ze.field(jt.sounds,e+"Description");if(null!=t)n=t;else{var r=Oe.trace,o=i;n=function(t){r(t,o)}}ne.loadSoundFromDescription(s,function(t){jt.sounds[e]=t,a(t)},n)},jt.loadSoundFromPath=function(t,e,a,i){var n,s={files:[t]};if(null!=a)n=a;else{var r=Oe.trace,o=i;n=function(t){r(t,o)}}ne.loadSoundFromDescription(s,e,n)},jt.get_soundFormats=function(){return ne.getSoundFormats()},jt.loadFont=function(e,a,t,i){var n,s=Ze.field(jt.fonts,e+"Description");if(null!=t)n=t;else{var r=Oe.trace,o=i;n=function(t){r(t,o)}}ne.loadFontFromDescription(s,function(t){jt.fonts[e]=t,a(t)},n)},jt.loadFontFromPath=function(t,e,a,i){var n,s={files:[t]};if(null!=a)n=a;else{var r=Oe.trace,o=i;n=function(t){r(t,o)}}ne.loadFontFromDescription(s,e,n)},jt.get_fontFormats=function(){return["ttf"]},jt.loadVideo=function(e,a,t,i){var n,s=Ze.field(jt.videos,e+"Description");if(null!=t)n=t;else{var r=Oe.trace,o=i;n=function(t){r(t,o)}}ne.loadVideoFromDescription(s,function(t){jt.videos[e]=t,a(t)},n)},jt.loadVideoFromPath=function(t,e,a,i){var n,s={files:[t]};if(null!=a)n=a;else{var r=Oe.trace,o=i;n=function(t){r(t,o)}}ne.loadVideoFromDescription(s,e,n)},jt.get_videoFormats=function(){return ne.getVideoFormats()},jt.reporter=function(t,e){if(null!=t)return t;var a=Oe.trace,i=e;return function(t){a(t,i)}};var Tt=function(){};(i["kha.Canvas"]=Tt).__name__=!0,Tt.prototype={get_g4:null,get_height:null,get_width:null,__class__:Tt,__properties__:{get_width:"get_width",get_height:"get_height",get_g4:"get_g4"}};var Rt=function(){};(i["kha.Resource"]=Rt).__name__=!0;var Ft=function(){};(i["kha.Image"]=Ft).__name__=!0,Ft.__interfaces__=[Rt,Tt],Ft.__properties__={get_nonPow2Supported:"get_nonPow2Supported"},Ft.create=function(t,e,a,i){return null==a&&(a=Xa.RGBA32),null==i&&(i=Da.StaticUsage),null==he.gl?new Et(t,e,a,!1):new ge(t,e,a,!1,0,1)},Ft.create3D=function(t,e,a,i,n){return null},Ft.createRenderTarget=function(t,e,a,i,n,s){return null==s&&(s=0),null==n&&(n=1),null==i&&(i=0),null==a&&(a=Xa.RGBA32),null==he.gl?new Et(t,e,a,!0):new ge(t,e,a,!0,i,n)},Ft.fromImage=function(t,e){if(null==he.gl){var a=new Et(t.width,t.height,Xa.RGBA32,!1);return a.image=t,a.createTexture(),a}var i=new ge(t.width,t.height,Xa.RGBA32,!1,0,1);return i.image=t,i.createTexture(),i},Ft.fromBytes=function(t,e,a,i,n){if(null==i&&(i=Xa.RGBA32),null==n&&(n=Da.StaticUsage),null!=he.gl){var s=new ge(e,a,i,!1,0,1);return s.image=s.bytesToArray(t),s.createTexture(),s}return null},Ft.fromVideo=function(t){if(null==he.gl){var e=new Et(t.element.videoWidth,t.element.videoHeight,Xa.RGBA32,!1);return e.video=t.element,e.createTexture(),e}var a=new ge(t.element.videoWidth,t.element.videoHeight,Xa.RGBA32,!1,0,1);return a.video=t.element,a.createTexture(),a},Ft.get_nonPow2Supported=function(){return null!=he.gl},Ft.prototype={unload:function(){},lock:function(t){return null==t&&(t=0),null},unlock:function(){},generateMipmaps:function(t){},setMipmaps:function(t){},setDepthStencilFrom:function(t){},get_width:function(){return 0},get_height:function(){return 0},get_depth:function(){return 1},get_g4:function(){return null},__class__:Ft,__properties__:{get_g4:"get_g4",get_depth:"get_depth",get_height:"get_height",get_width:"get_width"}};var Et=function(t,e,a,i){this.myWidth=t,this.myHeight=e,this.format=a,this.renderTarget=i,this.image=null,this.video=null,i&&this.createTexture()};(i["kha.CanvasImage"]=Et).__name__=!0,Et.init=function(){var t=window.document.createElement("canvas");null!=t&&(Et.context=t.getContext("2d"),t.width=2048,t.height=2048,Et.context.globalCompositeOperation="copy")},Et.__super__=Ft,Et.prototype=s(Ft.prototype,{image:null,video:null,data:null,myWidth:null,myHeight:null,format:null,renderTarget:null,frameBuffer:null,get_g4:function(){return null},get_width:function(){return this.myWidth},get_height:function(){return this.myHeight},get_realWidth:function(){return this.myWidth},get_realHeight:function(){return this.myHeight},texture:null,createTexture:function(){null!=he.gl&&(this.texture=he.gl.createTexture(),he.gl.bindTexture(3553,this.texture),he.gl.texParameteri(3553,10240,9729),he.gl.texParameteri(3553,10241,9729),he.gl.texParameteri(3553,10242,33071),he.gl.texParameteri(3553,10243,33071),this.renderTarget?(this.frameBuffer=he.gl.createFramebuffer(),he.gl.bindFramebuffer(36160,this.frameBuffer),he.gl.texImage2D(3553,0,6408,this.get_realWidth(),this.get_realHeight(),0,6408,5121,null),he.gl.framebufferTexture2D(36160,36064,3553,this.texture,0),he.gl.bindFramebuffer(36160,null)):null!=this.video?he.gl.texImage2D(3553,0,6408,6408,5121,this.video):he.gl.texImage2D(3553,0,6408,6408,5121,this.image),he.gl.bindTexture(3553,null))},bytes:null,lock:function(t){return null==t&&(t=0),this.bytes=new nt(new os(this.format==Xa.RGBA32?4*this.get_width()*this.get_height():this.get_width()*this.get_height())),this.bytes},unlock:function(){if(null!=he.gl){if(this.texture=he.gl.createTexture(),he.gl.bindTexture(3553,this.texture),he.gl.texParameteri(3553,10240,9729),he.gl.texParameteri(3553,10241,9729),he.gl.texParameteri(3553,10242,33071),he.gl.texParameteri(3553,10243,33071),he.gl.texImage2D(3553,0,6409,this.get_width(),this.get_height(),0,6409,5121,new hs(this.bytes.b.bufferValue)),1282==he.gl.getError()){for(var t=new nt(new os(this.get_width()*this.get_height()*4)),e=0,a=this.get_height();e<a;)for(var i=e++,n=0,s=this.get_width();n<s;){var r=n++,o=this.bytes,l=i*this.get_width()+r,_=o.b[l],h=i*this.get_width()*4+4*r;t.b[h]=255&_;var c=i*this.get_width()*4+4*r+1;t.b[c]=255&_;var g=i*this.get_width()*4+4*r+2;t.b[g]=255&_;var u=i*this.get_width()*4+4*r+3;t.b[u]=255}he.gl.texImage2D(3553,0,6408,this.get_width(),this.get_height(),0,6408,5121,new hs(t.b.bufferValue))}he.gl.bindTexture(3553,null),this.bytes=null}},unload:function(){this.image=null,this.video=null,this.data=null},__class__:Et});var Ut=t.kha._Color.Color_Impl_={};(i["kha._Color.Color_Impl_"]=Ut).__name__=!0,Ut.fromBytes=function(t,e,a,i){return null==i&&(i=255),Ut._new(i<<24|t<<16|e<<8|a)},Ut.fromFloats=function(t,e,a,i){return null==i&&(i=1),Ut._new((255*i|0)<<24|(255*t|0)<<16|(255*e|0)<<8|255*a|0)},Ut._new=function(t){return t};var Qt=function(){};(i["kha.CompilerDefines"]=Qt).__name__=!0;var qt=function(){};(i["kha.Display"]=qt).__name__=!0,qt.__properties__={get_primary:"get_primary"},qt.get_primary=function(){return qt.instance},qt.prototype={get_frequency:function(){return 60},__class__:qt,__properties__:{get_frequency:"get_frequency"}};var $t=function(){};(i["kha.DisplayMode"]=$t).__name__=!0;var te=function(t,e,a,i){this.window=t,this.graphics1=e,this.graphics2=a,this.graphics4=i};(i["kha.Framebuffer"]=te).__name__=!0,te.__interfaces__=[Tt],te.prototype={window:null,graphics1:null,graphics2:null,graphics4:null,init:function(t,e,a){this.graphics1=t,this.graphics2=e,this.graphics4=a},get_g2:function(){return this.graphics2},get_g4:function(){return this.graphics4},get_width:function(){return uo.windowWidth(this.window)},get_height:function(){return uo.windowHeight(this.window)},__class__:te,__properties__:{get_height:"get_height",get_width:"get_width",get_g4:"get_g4",get_g2:"get_g2"}};var ee=function(t,e,a,i,n,s){null==s&&(s=1),null==n&&(n=8),null==i&&(i=16),null==a&&(a=32),null==e&&(e=!0),null==t&&(t=60),this.samplesPerPixel=1,this.stencilBufferBits=8,this.depthBufferBits=16,this.colorBufferBits=32,this.verticalSync=!0,this.frequency=60,this.frequency=t,this.verticalSync=e,this.colorBufferBits=a,this.depthBufferBits=i,this.stencilBufferBits=n,this.samplesPerPixel=s};(i["kha.FramebufferOptions"]=ee).__name__=!0,ee.prototype={frequency:null,verticalSync:null,colorBufferBits:null,depthBufferBits:null,stencilBufferBits:null,samplesPerPixel:null,__class__:ee};var ae=function(t,e,a,i,n,s,r,o){this.mySize=t,this.width=n,this.height=s,this.chars=r,this.baseline=e;for(var l=0;l<r.length;){var _=r[l];++l,_.yoff+=this.baseline}this.texture=Ft.create(n,s,Xa.L8);for(var h=this.texture.lock(),c=0,g=0,u=s;g<u;){g++;for(var f=0,d=n;f<d;){f++;var b=o.readU8(c);h.b[c]=255&b,++c}}this.texture.unlock()};(i["kha.KravurImage"]=ae).__name__=!0,ae.prototype={mySize:null,chars:null,texture:null,width:null,height:null,baseline:null,getTexture:function(){return this.texture},getCharWidth:function(t){if(0==this.chars.length)return 0;var e=ae.gaps[0];if(t<e)return this.chars[0].xadvance;for(var a=1,i=ae.gaps.length/2|0;a<i;){var n=a++,s=ae.gaps[2*n-1],r=ae.gaps[2*n];r-1<t&&(e+=r-1-s)}return t-e>=this.chars.length?this.chars[0].xadvance:this.chars[t-e].xadvance},getHeight:function(){return this.mySize},stringWidth:function(t){for(var e=new String(t),a=0,i=0,n=e.length;i<n;){var s=i++;a+=this.getCharWidth(q.cca(e,s))}return a},charactersWidth:function(t,e,a){for(var i=0,n=e,s=e+a;n<s;){var r=n++;i+=this.getCharWidth(t[r])}return i},getBaselinePosition:function(){return this.baseline},__class__:ae};var ie=function(t){this.images=new $,this.blob=t};(i["kha.Kravur"]=ie).__name__=!0,ie.__interfaces__=[Rt],ie.prototype={oldGlyphs:null,blob:null,images:null,_get:function(t,e){if(null==e&&(e=Qe.fontGlyphs),e!=this.oldGlyphs){this.oldGlyphs=e;for(var a=(ae.gaps=[e[0]])[0]+1,i=1,n=e.length;i<n;){var s=i++;e[s]!=a?(ae.gaps.push(e[s-1]),ae.gaps.push(e[s]),a=e[s]+1):++a}ae.gaps.push(e[e.length-1])}var r=null==e?t:1e4*t+e.length;if(!this.images.h.hasOwnProperty(r)){for(var o=64,l=32,_=new Array(e.length),h=0,c=_.length;h<c;){_[h++]=new ia}for(var g=null,u=-1;u<=0;)l<o?l*=2:o*=2,g=Ea.alloc(o*l),u=ca.stbtt_BakeFontBitmap(this.blob,0,t,g,o,l,e,_);var f=new na;ca.stbtt_InitFont(f,this.blob,0);var d=ca.stbtt_GetFontVMetrics(f),b=ca.stbtt_ScaleForPixelHeight(f,t),p=Math.round(d.ascent*b),m=Math.round(d.descent*b),I=Math.round(d.lineGap*b),v=new ae(0|t,p,m,I,o,l,_,g);return this.images.h[r]=v}return this.images.h[r]},__class__:ie};var ne=function(){};(i["kha.LoaderImpl"]=ne).__name__=!0,ne.getImageFormats=function(){return["png","jpg","hdr"]},ne.loadImageFromDescription=function(e,i,a){var n=Object.prototype.hasOwnProperty.call(e,"readable")&&e.readable;if(P.endsWith(e.files[0],".hdr"))ne.loadBlobFromDescription(e,function(t){var e=Ua.parse(t.toBytes()),a=Ft.fromBytes(nt.ofData(e.data.buffer),e.width,e.height,Xa.RGBA128,n?Da.DynamicUsage:Da.StaticUsage);i(a)},a);else{var s=window.document.createElement("img");s.onerror=function(t){a({url:e.files[0],error:t})},s.onload=function(t){var e=Ft.fromImage(s,n);i(e)},s.src=e.files[0],s.crossOrigin=""}},ne.getSoundFormats=function(){var t=window.document.createElement("audio"),e=[];return""!=t.canPlayType("audio/mp4")&&e.push("mp4"),""!=t.canPlayType("audio/mp3")&&e.push("mp3"),(he._hasWebAudio||""!=t.canPlayType("audio/ogg"))&&e.push("ogg"),e},ne.loadSoundFromDescription=function(t,e,a){if(he._hasWebAudio){var i=window.document.createElement("audio");if(""!=i.canPlayType("audio/mp4"))for(var n=0,s=t.files.length;n<s;){var r=n++,o=t.files[r];if(P.endsWith(o,".mp4"))return void new ri(o,e,a)}if(""!=i.canPlayType("audio/mp3"))for(var l=0,_=t.files.length;l<_;){var h=l++,c=t.files[h];if(P.endsWith(c,".mp3"))return void new ri(c,e,a)}for(var g=0,u=t.files.length;g<u;){var f=g++,d=t.files[f];if(P.endsWith(d,".ogg"))return void new ri(d,e,a)}}else if(he.mobile){var b=window.document.createElement("audio");if(""!=b.canPlayType("audio/mp4"))for(var p=0,m=t.files.length;p<m;){var I=p++,v=t.files[I];if(P.endsWith(v,".mp4"))return void new ii(v,e,a)}if(""!=b.canPlayType("audio/mp3"))for(var M=0,C=t.files.length;M<C;){var y=M++,w=t.files[y];if(P.endsWith(w,".mp3"))return void new ii(w,e,a)}for(var A=0,x=t.files.length;A<x;){var Z=A++,z=t.files[Z];if(P.endsWith(z,".ogg"))return void new ii(z,e,a)}}else new ni(t.files,e,a)},ne.getVideoFormats=function(){return["mp4","webm"]},ne.loadVideoFromDescription=function(t,e,a){si.fromFile(t.files,e)},ne.loadRemote=function(o,l,_){var h=new XMLHttpRequest;h.open("GET",o.files[0],!0),h.responseType="arraybuffer",h.onreadystatechange=function(){if(4==h.readyState)if(200<=h.status&&h.status<400||0==h.status&&""==h.statusText){var t=null,e=h.response;if(null!=e){var a=new hs(e);t=nt.ofData(a)}else{if(null==h.responseBody)return void _({url:o.files[0]});var i=VBArray(h.responseBody).toArray();t=new nt(new os(i.length));for(var n=0,s=i.length;n<s;){var r=n++;t.b[r]=255&i[r]}}l(new Ea(t))}else _({url:o.files[0]})},h.send(null)},ne.loadBlobFromDescription=function(t,e,a){ne.loadRemote(t,e,a)},ne.loadFontFromDescription=function(t,e,a){ne.loadBlobFromDescription(t,function(t){e(new ie(t))},a)};var se=function(){};(i["kha.TimeTask"]=se).__name__=!0,se.prototype={task:null,start:null,period:null,duration:null,next:null,id:null,groupId:null,active:null,paused:null,__class__:se};var re=function(t,e,a){this.task=t,this.priority=e,this.id=a,this.active=!0,this.paused=!1};(i["kha.FrameTask"]=re).__name__=!0,re.prototype={task:null,priority:null,id:null,active:null,paused:null,__class__:re};var go=function(){};(i["kha.Scheduler"]=go).__name__=!0,go.init=function(){go.deltas=[];for(var t=0,e=go.DIF_COUNT;t<e;){var a=t++;go.deltas[a]=0}go.stopped=!0,go.frame_tasks_sorted=!0,go.current=go.lastTime=go.realTime(),go.currentFrameTaskId=0,go.currentTimeTaskId=0,go.currentGroupId=0,go.timeTasks=[],go.pausedTimeTasks=[],go.outdatedTimeTasks=[],go.timeTasksScratchpad=[],go.frameTasks=[],go.toDeleteFrame=[]},go.start=function(t){null==t&&(t=!1),go.vsync=ue.get(0).get_vSynced();var e=qt.get_primary().get_frequency();57<=e&&e<=63&&(e=60),go.onedifhz=1/e,go.stopped=!1,go.resetTime(),go.lastTime=go.realTime()-go.startTime;for(var a=0,i=go.DIF_COUNT;a<i;){var n=a++;go.deltas[n]=0}if(t){for(var s=0,r=go.timeTasks;s<r.length;){var o=r[s];++s,o.paused=!1}for(var l=0,_=go.frameTasks;l<_.length;){var h=_[l];++l,h.paused=!1}}},go.executeFrame=function(){var t=go.realTime()-go.startTime-go.lastTime,e=go.current;if(0<=t){if(null==di.the())if(t>go.maxframetime)go.startTime+=t-go.maxframetime,e+=t=go.maxframetime;else if(go.vsync){for(var a=go.onedifhz;a<t-go.onedifhz;)a+=go.onedifhz;t=a;for(var i=0,n=go.DIF_COUNT-2;i<n;){var s=i++;t+=go.deltas[s],go.deltas[s]=go.deltas[s+1]}t+=go.deltas[go.DIF_COUNT-2],t/=go.DIF_COUNT,go.deltas[go.DIF_COUNT-2]=a,e+=t}else{for(var r=0,o=go.DIF_COUNT-1;r<o;){var l=r++;go.deltas[l]=go.deltas[l+1]}go.deltas[go.DIF_COUNT-1]=t;for(var _=0,h=0,c=go.DIF_COUNT;h<c;){var g=h++;_+=go.deltas[g]}e+=_/=go.DIF_COUNT}else e+=t;go.lastTime=e,go.stopped||(go.current=e);for(var u=0,f=go.pausedTimeTasks;u<f.length;){var d=f[u];++u,d.next+=t}if(go.stopped)for(var b=0,p=go.timeTasks;b<p.length;){var m=p[b];++b,m.next+=t}go.executeTimeTasks(e);for(var I=0,v=go.outdatedTimeTasks;I<v.length;){var M=v[I];++I,M.next<e-10&&go.timeTasksScratchpad.push(M)}for(var C=0,y=go.timeTasksScratchpad;C<y.length;){var w=y[C];++C,q.remove(go.outdatedTimeTasks,w)}for(;0<go.timeTasksScratchpad.length;)q.remove(go.timeTasksScratchpad,go.timeTasksScratchpad[0])}go.sortFrameTasks();for(var A=0,x=go.frameTasks;A<x.length;){var Z=x[A];++A,go.stopped||Z.paused||!Z.active||Z.task()||(Z.active=!1)}for(var z=0,B=go.frameTasks;z<B.length;){var N=B[z];++z,N.active||go.toDeleteFrame.push(N)}for(;0<go.toDeleteFrame.length;)q.remove(go.frameTasks,go.toDeleteFrame.pop())},go.executeTimeTasks=function(t){for(;0<go.timeTasks.length&&(go.activeTimeTask=go.timeTasks[0],go.activeTimeTask.next<=t);)go.activeTimeTask.next+=go.activeTimeTask.period,q.remove(go.timeTasks,go.activeTimeTask),go.activeTimeTask.active&&go.activeTimeTask.task()?0<go.activeTimeTask.period&&(0==go.activeTimeTask.duration||go.activeTimeTask.duration>=go.activeTimeTask.start+go.activeTimeTask.next)?go.insertSorted(go.timeTasks,go.activeTimeTask):go.archiveTimeTask(go.activeTimeTask,t):(go.activeTimeTask.active=!1,go.archiveTimeTask(go.activeTimeTask,t));go.activeTimeTask=null},go.archiveTimeTask=function(t,e){},go.time=function(){return go.current},go.realTime=function(){return uo.get_time()},go.resetTime=function(){var t=uo.get_time(),e=t-go.startTime;go.startTime=t;for(var a=0,i=go.timeTasks;a<i.length;){var n=i[a];++a,n.start-=e,n.next-=e}for(var s=0,r=go.DIF_COUNT;s<r;){var o=s++;go.deltas[o]=0}go.current=0,go.lastTime=0},go.addBreakableTimeTaskToGroup=function(t,e,a,i,n){null==n&&(n=0),null==i&&(i=0);var s=new se;return s.active=!0,s.task=e,s.id=++go.currentTimeTaskId,s.groupId=t,s.start=go.current+a,(s.period=0)!=i&&(s.period=i),(s.duration=0)!=n&&(s.duration=s.start+n),s.next=s.start,go.insertSorted(go.timeTasks,s),s.id},go.addTimeTaskToGroup=function(t,e,a,i,n){return null==n&&(n=0),null==i&&(i=0),go.addBreakableTimeTaskToGroup(t,function(){return e(),!0},a,i,n)},go.addTimeTask=function(t,e,a,i){return null==i&&(i=0),null==a&&(a=0),go.addTimeTaskToGroup(0,t,e,a,i)},go.insertSorted=function(t,e){for(var a=0,i=t.length;a<i;){var n=a++;if(t[n].next>e.next)return void t.splice(n,0,e)}t.push(e)},go.sortFrameTasks=function(){go.frame_tasks_sorted||(go.frameTasks.sort(function(t,e){return t.priority>e.priority?1:t.priority<e.priority?-1:0}),go.frame_tasks_sorted=!0)};v["kha.ScreenRotation"]={__ename__:!0,__constructs__:["RotationNone","Rotation90","Rotation180","Rotation270"],RotationNone:{_hx_index:0,__enum__:"kha.ScreenRotation",toString:n},Rotation90:{_hx_index:1,__enum__:"kha.ScreenRotation",toString:n},Rotation180:{_hx_index:2,__enum__:"kha.ScreenRotation",toString:n},Rotation270:{_hx_index:3,__enum__:"kha.ScreenRotation",toString:n}};var Ne=function(){};(i["kha.Shaders"]=Ne).__name__=!0,Ne.init=function(){for(var t=[],e=0;e<3;){var a=e++,i=Ze.field(Ne,"Blue_shadowmap_vertData"+a),n=ze.run(i);t.push(Ea.fromBytes(n))}Ne.Blue_shadowmap_vert=new Va(t,["Blue_shadowmap.vert.essl","Blue_shadowmap-relaxed.vert.essl","Blue_shadowmap-webgl2.vert.essl"]);for(var s=[],r=0;r<3;){var o=r++,l=Ze.field(Ne,"Blue_mesh_fragData"+o),_=ze.run(l);s.push(Ea.fromBytes(_))}Ne.Blue_mesh_frag=new Ia(s,["Blue_mesh.frag.essl","Blue_mesh-relaxed.frag.essl","Blue_mesh-webgl2.frag.essl"]);for(var h=[],c=0;c<3;){var g=c++,u=Ze.field(Ne,"Blue_shadowmap_fragData"+g),f=ze.run(u);h.push(Ea.fromBytes(f))}Ne.Blue_shadowmap_frag=new Ia(h,["Blue_shadowmap.frag.essl","Blue_shadowmap-relaxed.frag.essl","Blue_shadowmap-webgl2.frag.essl"]);for(var d=[],b=0;b<3;){var p=b++,m=Ze.field(Ne,"Blue_mesh_vertData"+p),I=ze.run(m);d.push(Ea.fromBytes(I))}Ne.Blue_mesh_vert=new Va(d,["Blue_mesh.vert.essl","Blue_mesh-relaxed.vert.essl","Blue_mesh-webgl2.vert.essl"]);for(var v=[],M=0;M<3;){var C=M++,y=Ze.field(Ne,"Body_armskin_shadowmap_vertData"+C),w=ze.run(y);v.push(Ea.fromBytes(w))}Ne.Body_armskin_shadowmap_vert=new Va(v,["Body_armskin_shadowmap.vert.essl","Body_armskin_shadowmap-relaxed.vert.essl","Body_armskin_shadowmap-webgl2.vert.essl"]);for(var A=[],x=0;x<3;){var Z=x++,z=Ze.field(Ne,"Body_armskin_mesh_fragData"+Z),B=ze.run(z);A.push(Ea.fromBytes(B))}Ne.Body_armskin_mesh_frag=new Ia(A,["Body_armskin_mesh.frag.essl","Body_armskin_mesh-relaxed.frag.essl","Body_armskin_mesh-webgl2.frag.essl"]);for(var N=[],G=0;G<3;){var k=G++,S=Ze.field(Ne,"Body_armskin_mesh_vertData"+k),W=ze.run(S);N.push(Ea.fromBytes(W))}Ne.Body_armskin_mesh_vert=new Va(N,["Body_armskin_mesh.vert.essl","Body_armskin_mesh-relaxed.vert.essl","Body_armskin_mesh-webgl2.vert.essl"]);for(var X=[],Y=0;Y<3;){var D=Y++,K=Ze.field(Ne,"Ground_mesh_fragData"+D),L=ze.run(K);X.push(Ea.fromBytes(L))}Ne.Ground_mesh_frag=new Ia(X,["Ground_mesh.frag.essl","Ground_mesh-relaxed.frag.essl","Ground_mesh-webgl2.frag.essl"]);for(var V=[],H=0;H<3;){var j=H++,T=Ze.field(Ne,"Gun_mesh_fragData"+j),R=ze.run(T);V.push(Ea.fromBytes(R))}Ne.Gun_mesh_frag=new Ia(V,["Gun_mesh.frag.essl","Gun_mesh-relaxed.frag.essl","Gun_mesh-webgl2.frag.essl"]);for(var F=[],O=0;O<3;){var P=O++,J=Ze.field(Ne,"Gun2_mesh_fragData"+P),E=ze.run(J);F.push(Ea.fromBytes(E))}Ne.Gun2_mesh_frag=new Ia(F,["Gun2_mesh.frag.essl","Gun2_mesh-relaxed.frag.essl","Gun2_mesh-webgl2.frag.essl"]);for(var U=[],Q=0;Q<3;){var q=Q++,$=Ze.field(Ne,"Head_armskin_mesh_fragData"+q),tt=ze.run($);U.push(Ea.fromBytes(tt))}Ne.Head_armskin_mesh_frag=new Ia(U,["Head_armskin_mesh.frag.essl","Head_armskin_mesh-relaxed.frag.essl","Head_armskin_mesh-webgl2.frag.essl"]);for(var et=[],at=0;at<3;){var it=at++,nt=Ze.field(Ne,"Joints_armskin_mesh_fragData"+it),st=ze.run(nt);et.push(Ea.fromBytes(st))}Ne.Joints_armskin_mesh_frag=new Ia(et,["Joints_armskin_mesh.frag.essl","Joints_armskin_mesh-relaxed.frag.essl","Joints_armskin_mesh-webgl2.frag.essl"]);for(var rt=[],ot=0;ot<3;){var lt=ot++,_t=Ze.field(Ne,"Projectile_mesh_vertData"+lt),ht=ze.run(_t);rt.push(Ea.fromBytes(ht))}Ne.Projectile_mesh_vert=new Va(rt,["Projectile_mesh.vert.essl","Projectile_mesh-relaxed.vert.essl","Projectile_mesh-webgl2.vert.essl"]);for(var ct=[],gt=0;gt<3;){var ut=gt++,ft=Ze.field(Ne,"Projectile_mesh_fragData"+ut),dt=ze.run(ft);ct.push(Ea.fromBytes(dt))}Ne.Projectile_mesh_frag=new Ia(ct,["Projectile_mesh.frag.essl","Projectile_mesh-relaxed.frag.essl","Projectile_mesh-webgl2.frag.essl"]);for(var bt=[],pt=0;pt<3;){var mt=pt++,It=Ze.field(Ne,"Red_mesh_fragData"+mt),vt=ze.run(It);bt.push(Ea.fromBytes(vt))}Ne.Red_mesh_frag=new Ia(bt,["Red_mesh.frag.essl","Red_mesh-relaxed.frag.essl","Red_mesh-webgl2.frag.essl"]);for(var Mt=[],Ct=0;Ct<3;){var yt=Ct++,wt=Ze.field(Ne,"Wall_mesh_fragData"+yt),At=ze.run(wt);Mt.push(Ea.fromBytes(At))}Ne.Wall_mesh_frag=new Ia(Mt,["Wall_mesh.frag.essl","Wall_mesh-relaxed.frag.essl","Wall_mesh-webgl2.frag.essl"]);for(var xt=[],Zt=0;Zt<3;){var zt=Zt++,Bt=Ze.field(Ne,"armdefault_mesh_fragData"+zt),Nt=ze.run(Bt);xt.push(Ea.fromBytes(Nt))}Ne.armdefault_mesh_frag=new Ia(xt,["armdefault_mesh.frag.essl","armdefault_mesh-relaxed.frag.essl","armdefault_mesh-webgl2.frag.essl"]);for(var Gt=[],kt=0;kt<3;){var St=kt++,Wt=Ze.field(Ne,"compositor_pass_vertData"+St),Xt=ze.run(Wt);Gt.push(Ea.fromBytes(Xt))}Ne.compositor_pass_vert=new Va(Gt,["compositor_pass.vert.essl","compositor_pass-relaxed.vert.essl","compositor_pass-webgl2.vert.essl"]);for(var Yt=[],Dt=0;Dt<3;){var Kt=Dt++,Lt=Ze.field(Ne,"compositor_pass_fragData"+Kt),Vt=ze.run(Lt);Yt.push(Ea.fromBytes(Vt))}Ne.compositor_pass_frag=new Ia(Yt,["compositor_pass.frag.essl","compositor_pass-relaxed.frag.essl","compositor_pass-webgl2.frag.essl"]);for(var Ht=[],jt=0;jt<3;){var Tt=jt++,Rt=Ze.field(Ne,"painter_colored_vertData"+Tt),Ft=ze.run(Rt);Ht.push(Ea.fromBytes(Ft))}Ne.painter_colored_vert=new Va(Ht,["painter-colored.vert.essl","painter-colored-relaxed.vert.essl","painter-colored-webgl2.vert.essl"]);for(var Ot=[],Pt=0;Pt<3;){var Jt=Pt++,Et=Ze.field(Ne,"painter_colored_fragData"+Jt),Ut=ze.run(Et);Ot.push(Ea.fromBytes(Ut))}Ne.painter_colored_frag=new Ia(Ot,["painter-colored.frag.essl","painter-colored-relaxed.frag.essl","painter-colored-webgl2.frag.essl"]);for(var Qt=[],qt=0;qt<3;){var $t=qt++,te=Ze.field(Ne,"painter_image_vertData"+$t),ee=ze.run(te);Qt.push(Ea.fromBytes(ee))}Ne.painter_image_vert=new Va(Qt,["painter-image.vert.essl","painter-image-relaxed.vert.essl","painter-image-webgl2.vert.essl"]);for(var ae=[],ie=0;ie<3;){var ne=ie++,se=Ze.field(Ne,"painter_image_fragData"+ne),re=ze.run(se);ae.push(Ea.fromBytes(re))}Ne.painter_image_frag=new Ia(ae,["painter-image.frag.essl","painter-image-relaxed.frag.essl","painter-image-webgl2.frag.essl"]);for(var oe=[],le=0;le<3;){var _e=le++,he=Ze.field(Ne,"painter_text_fragData"+_e),ce=ze.run(he);oe.push(Ea.fromBytes(ce))}Ne.painter_text_frag=new Ia(oe,["painter-text.frag.essl","painter-text-relaxed.frag.essl","painter-text-webgl2.frag.essl"]);for(var ge=[],ue=0;ue<3;){var fe=ue++,de=Ze.field(Ne,"painter_text_vertData"+fe),be=ze.run(de);ge.push(Ea.fromBytes(be))}Ne.painter_text_vert=new Va(ge,["painter-text.vert.essl","painter-text-relaxed.vert.essl","painter-text-webgl2.vert.essl"]);for(var pe=[],me=0;me<3;){var Ie=me++,ve=Ze.field(Ne,"painter_video_vertData"+Ie),Me=ze.run(ve);pe.push(Ea.fromBytes(Me))}Ne.painter_video_vert=new Va(pe,["painter-video.vert.essl","painter-video-relaxed.vert.essl","painter-video-webgl2.vert.essl"]);for(var Ce=[],ye=0;ye<3;){var we=ye++,Ae=Ze.field(Ne,"painter_video_fragData"+we),xe=ze.run(Ae);Ce.push(Ea.fromBytes(xe))}Ne.painter_video_frag=new Ia(Ce,["painter-video.frag.essl","painter-video-relaxed.frag.essl","painter-video-webgl2.frag.essl"])};var oe=function(){};(i["kha.Sound"]=oe).__name__=!0,oe.__interfaces__=[Rt],oe.prototype={compressedData:null,uncompressedData:null,uncompress:function(t){if(null==this.uncompressedData){var e=new rt,a=ye.readAll(this.compressedData,e,!0),i=e.getBytes(),n=i.length/4|0;if(1==a.channel){var s=new _s(2*n);this.uncompressedData=s;for(var r=0,o=n;r<o;){var l=r++;this.uncompressedData[2*l]=i.getFloat(4*l),this.uncompressedData[2*l+1]=i.getFloat(4*l)}}else{var _=new _s(n);this.uncompressedData=_;for(var h=0,c=n;h<c;){var g=h++;this.uncompressedData[g]=i.getFloat(4*g)}}this.compressedData=null,t()}else t()},__class__:oe};var le=function(t,e,a,i,n){null==a&&(a=600),null==e&&(e=800),null==t&&(t="Kha"),this.framebuffer=null,this.window=null,this.height=600,this.width=800,this.title="Kha",this.title=t,this.width=e,this.height=a,this.window=null==i?new fe(null,null,null,null,null,null,null,null,null):i,this.framebuffer=null==n?new ee(null,null,null,null,null,null):n};(i["kha.SystemOptions"]=le).__name__=!0,le.prototype={title:null,width:null,height:null,window:null,framebuffer:null,__class__:le};var uo=function(){};(i["kha.System"]=uo).__name__=!0,uo.__properties__={get_time:"get_time"},uo.start=function(t,e){uo.theTitle=t.title,he.init(t,e)},uo.notifyOnFrames=function(t){uo.renderListeners.push(t)},uo.render=function(t){for(var e=0,a=uo.renderListeners;e<a.length;){var i=a[e];++e,i(t)}},uo.foreground=function(){for(var t=0,e=uo.foregroundListeners;t<e.length;){var a=e[t];++t,a()}},uo.background=function(){for(var t=0,e=uo.backgroundListeners;t<e.length;){var a=e[t];++t,a()}},uo.get_time=function(){return he.getTime()},uo.windowWidth=function(t){return null==t&&(t=0),ue.get(t).get_width()},uo.windowHeight=function(t){return null==t&&(t=0),ue.get_all()[t].get_height()};var _e=function(){this.axes=[],this.buttons=[]};(i["kha.GamepadStates"]=_e).__name__=!0,_e.prototype={axes:null,buttons:null,__class__:_e};var he=function(){};(i["kha.SystemImpl"]=he).__name__=!0,he.init=function(t,e){he.options=t,he.mobile=he.isMobile(),he.ios=he.isIOS(),he.chrome=he.isChrome(),he.firefox=he.isFirefox(),he.ie=he.isIE(),he.init2(t.window.width,t.window.height),e(he.window)},he.isMobile=function(){var t=window.navigator.userAgent;return 0<=t.indexOf("Android")||0<=t.indexOf("webOS")||0<=t.indexOf("BlackBerry")||0<=t.indexOf("Windows Phone")||!!he.isIOS()},he.isIOS=function(){var t=window.navigator.userAgent;return 0<=t.indexOf("iPhone")||0<=t.indexOf("iPad")||0<=t.indexOf("iPod")},he.isChrome=function(){return 0<=window.navigator.userAgent.indexOf("Chrome")},he.isFirefox=function(){return 0<=window.navigator.userAgent.indexOf("Firefox")},he.isIE=function(){var t=window.navigator.userAgent;return 0<=t.indexOf("MSIE ")||0<=t.indexOf("Trident/")},he.setCanvas=function(t){he.khanvas=t},he.getTime=function(){return(window.performance?window.performance:window.Date).now()/1e3},he.init2=function(t,e,a){he.keyboard=new Ra,he.mouse=new Oa,he.surface=new Ja,he.gamepads=[],he.gamepadStates=[];for(var i=0;i<4;){var n=i++;he.gamepads[n]=new ja(n),he.gamepadStates[n]=new _e}if(window.addEventListener("gamepadconnected",function(t){ja.sendConnectEvent(t.gamepad.index)}),window.addEventListener("gamepaddisconnected",function(t){ja.sendDisconnectEvent(t.gamepad.index)}),he.ie){he.pressedKeys=[];for(var s=0;s<256;){s++;he.pressedKeys.push(!1)}for(var r=0;r<256;){r++;he.pressedKeys.push(null)}}window.document.addEventListener("copy",function(t){var e=t;if(null!=uo.copyListener){var a=uo.copyListener();null!=a&&e.clipboardData.setData("text/plain",a),e.preventDefault()}}),window.document.addEventListener("cut",function(t){var e=t;if(null!=uo.cutListener){var a=uo.cutListener();null!=a&&e.clipboardData.setData("text/plain",a),e.preventDefault()}}),window.document.addEventListener("paste",function(t){var e=t;if(null!=uo.pasteListener){var a=e.clipboardData.getData("text/plain");uo.pasteListener(a),e.preventDefault()}}),Et.init(),go.init(),he.loadFinished(t,e)},he.getMouse=function(t){return 0!=t?null:he.mouse},he.getKeyboard=function(t){return 0!=t?null:he.keyboard},he.checkGamepad=function(t){for(var e=0,a=t.axes.length;e<a;){var i=e++;if(null!=t.axes[i]){var n=t.axes[i];i%2==1&&(n=-n),he.gamepadStates[t.index].axes[i]!=n&&(he.gamepadStates[t.index].axes[i]=n,he.gamepads[t.index].sendAxisEvent(i,n))}}for(var s=0,r=t.buttons.length;s<r;){var o=s++;null!=t.buttons[o]&&he.gamepadStates[t.index].buttons[o]!=t.buttons[o].value&&(he.gamepadStates[t.index].buttons[o]=t.buttons[o].value,he.gamepads[t.index].sendButtonEvent(o,t.buttons[o].value))}t.axes.length<=4&&7<t.buttons.length&&(he.gamepadStates[t.index].axes[4]=t.buttons[6].value,he.gamepads[t.index].sendAxisEvent(4,t.buttons[6].value),he.gamepadStates[t.index].axes[5]=t.buttons[7].value,he.gamepads[t.index].sendAxisEvent(5,t.buttons[7].value))},he.loadFinished=function(t,e){var l=he.khanvas;null==l&&(l=window.document.getElementById(Qt.canvas_id));var a=!(l.style.cursor="default");try{he.gl=l.getContext("webgl2",{alpha:!1,antialias:1<he.options.framebuffer.samplesPerPixel,stencil:!0}),he.gl.pixelStorei(37441,1),he.halfFloat={HALF_FLOAT_OES:5131},he.depthTexture={UNSIGNED_INT_24_8_WEBGL:34042},he.drawBuffers={COLOR_ATTACHMENT0_WEBGL:36064},he.elementIndexUint=!0,he.gl.getExtension("EXT_color_buffer_float"),he.gl.getExtension("OES_texture_float_linear"),he.gl.getExtension("OES_texture_half_float_linear"),he.anisotropicFilter=he.gl.getExtension("EXT_texture_filter_anisotropic"),null==he.anisotropicFilter&&(he.anisotropicFilter=he.gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic")),a=!0,he.gl2=!0,Ne.init()}catch(t){t instanceof Ot&&t.val;Oe.trace("Could not initialize WebGL 2, falling back to WebGL.",{fileName:"kha/SystemImpl.hx",lineNumber:314,className:"kha.SystemImpl",methodName:"loadFinished"})}if(!he.gl2)try{he.gl=l.getContext("experimental-webgl",{alpha:!1,antialias:1<he.options.framebuffer.samplesPerPixel,stencil:!0}),null!=he.gl&&(he.gl.pixelStorei(37441,1),he.gl.getExtension("OES_texture_float"),he.gl.getExtension("OES_texture_float_linear"),he.halfFloat=he.gl.getExtension("OES_texture_half_float"),he.gl.getExtension("OES_texture_half_float_linear"),he.depthTexture=he.gl.getExtension("WEBGL_depth_texture"),he.gl.getExtension("EXT_shader_texture_lod"),he.gl.getExtension("OES_standard_derivatives"),he.anisotropicFilter=he.gl.getExtension("EXT_texture_filter_anisotropic"),null==he.anisotropicFilter&&(he.anisotropicFilter=he.gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic")),he.drawBuffers=he.gl.getExtension("WEBGL_draw_buffers"),he.elementIndexUint=he.gl.getExtension("OES_element_index_uint"),a=!0,Ne.init())}catch(t){t instanceof Ot&&t.val;Oe.trace("Could not initialize WebGL, falling back to Canvas.",{fileName:"kha/SystemImpl.hx",lineNumber:338,className:"kha.SystemImpl",methodName:"loadFinished"})}if(he.setCanvas(l),he.window=new ue(t,e,l),a){var i=new li;he.frame=new te(0,null,null,i),he.frame.init(new qe(he.frame),new _i(he.frame),i)}else{ti.Kravur=ie,ie=ti;var n=new $a(l.getContext("2d"));he.frame=new te(0,null,n,null),he.frame.init(new qe(he.frame),n,null)}!he.mobile&&be._init()?(he._hasWebAudio=!0,pe._init()):he.mobile?(he._hasWebAudio=!1,ei._init(),pe=ei):(he._hasWebAudio=!1,qa._compile(),pe=qa),ci.instance=new gi,go.start();var s=window,_=s.requestAnimationFrame;null==_&&(_=s.mozRequestAnimationFrame),null==_&&(_=s.webkitRequestAnimationFrame),null==_&&(_=s.msRequestAnimationFrame);var h=null;h=function(t){var e=window;null==_?e.setTimeout(h,16.666666666666668):_(h);var a=he.getGamepads();if(null!=a)for(var i=0,n=a.length;i<n;){var s=a[i++];null!=s&&he.checkGamepad(s)}if(go.executeFrame(),l.getContext){var r=l.clientWidth,o=l.clientHeight;l.width==r&&l.height==o||(l.width=r,l.height=o),uo.render([he.frame]),null!=he.gl&&(he.gl.clearColor(1,1,1,1),he.gl.colorMask(!1,!1,!1,!0),he.gl.clear(16384),he.gl.colorMask(!0,!0,!0,!0))}},null==_?s.setTimeout(h,16.666666666666668):_(h),null==l.getAttribute("tabindex")&&l.setAttribute("tabindex","0"),l.focus(),l.oncontextmenu=function(t){t.stopPropagation(),t.preventDefault()},l.onmousedown=he.mouseDown,l.onmousemove=he.mouseMove,null!=he.keyboard&&(l.onkeydown=he.keyDown,l.onkeyup=he.keyUp,l.onkeypress=he.keyPress),l.onblur=he.onBlur,l.onfocus=he.onFocus,l.onmousewheel=l.onwheel=he.mouseWheel,l.onmouseleave=he.mouseLeave,l.addEventListener("wheel mousewheel",he.mouseWheel,!1),l.addEventListener("touchstart",he.touchDown,!1),l.addEventListener("touchend",he.touchUp,!1),l.addEventListener("touchmove",he.touchMove,!1),l.addEventListener("touchcancel",he.touchCancel,!1),window.addEventListener("unload",he.unload)},he.unload=function(t){},he.setMouseXY=function(t){var e=he.khanvas.getBoundingClientRect(),a=he.khanvas.clientLeft,i=he.khanvas.clientTop;he.mouseX=(t.clientX-e.left-a)*he.khanvas.width/(e.width-2*a)|0,he.mouseY=(t.clientY-e.top-i)*he.khanvas.height/(e.height-2*i)|0},he.unlockiOSSound=function(){if(he.ios&&!he.iosSoundEnabled){var t=ei._context.createBuffer(1,1,22050),e=ei._context.createBufferSource();e.buffer=t,e.connect(ei._context.destination),e.start(),e.stop(),he.iosSoundEnabled=!0}},he.unlockSound=function(){if(!he.soundEnabled){var t=be._context;null==t&&(t=pe._context),null!=t&&t.resume().then(function(t){he.soundEnabled=!0}).catch(function(t){Oe.trace(t,{fileName:"kha/SystemImpl.hx",lineNumber:585,className:"kha.SystemImpl",methodName:"unlockSound"})})}he.unlockiOSSound()},he.mouseLeave=function(){he.mouse.sendLeaveEvent(0)},he.mouseWheel=function(t){return he.insideInputEvent=!0,he.unlockSound(),t.preventDefault(),0==t.deltaMode?t.deltaY<0?he.mouse.sendWheelEvent(0,-1):0<t.deltaY&&he.mouse.sendWheelEvent(0,1):1==t.deltaMode&&(he.minimumScroll=0|Math.min(he.minimumScroll,Math.abs(t.deltaY)),he.mouse.sendWheelEvent(0,t.deltaY/he.minimumScroll|0)),he.insideInputEvent=!1},he.mouseDown=function(t){he.insideInputEvent=!0,he.unlockSound(),he.setMouseXY(t),1==t.which?(t.ctrlKey?(he.leftMouseCtrlDown=!0,he.mouse.sendDownEvent(0,1,he.mouseX,he.mouseY)):(he.leftMouseCtrlDown=!1,he.mouse.sendDownEvent(0,0,he.mouseX,he.mouseY)),null!=he.khanvas.setCapture?he.khanvas.setCapture():he.khanvas.ownerDocument.addEventListener("mousemove",he.documentMouseMove,!0),he.khanvas.ownerDocument.addEventListener("mouseup",he.mouseLeftUp)):2==t.which?(he.mouse.sendDownEvent(0,2,he.mouseX,he.mouseY),he.khanvas.ownerDocument.addEventListener("mouseup",he.mouseMiddleUp)):3==t.which&&(he.mouse.sendDownEvent(0,1,he.mouseX,he.mouseY),he.khanvas.ownerDocument.addEventListener("mouseup",he.mouseRightUp)),he.insideInputEvent=!1},he.mouseLeftUp=function(t){he.unlockSound(),1==t.which&&(he.insideInputEvent=!0,he.khanvas.ownerDocument.removeEventListener("mouseup",he.mouseLeftUp),null!=he.khanvas.releaseCapture?he.khanvas.ownerDocument.releaseCapture():he.khanvas.ownerDocument.removeEventListener("mousemove",he.documentMouseMove,!0),he.leftMouseCtrlDown?he.mouse.sendUpEvent(0,1,he.mouseX,he.mouseY):he.mouse.sendUpEvent(0,0,he.mouseX,he.mouseY),he.leftMouseCtrlDown=!1,he.insideInputEvent=!1)},he.mouseMiddleUp=function(t){he.unlockSound(),2==t.which&&(he.insideInputEvent=!0,he.khanvas.ownerDocument.removeEventListener("mouseup",he.mouseMiddleUp),he.mouse.sendUpEvent(0,2,he.mouseX,he.mouseY),he.insideInputEvent=!1)},he.mouseRightUp=function(t){he.unlockSound(),3==t.which&&(he.insideInputEvent=!0,he.khanvas.ownerDocument.removeEventListener("mouseup",he.mouseRightUp),he.mouse.sendUpEvent(0,1,he.mouseX,he.mouseY),he.insideInputEvent=!1)},he.documentMouseMove=function(t){t.stopPropagation(),he.mouseMove(t)},he.mouseMove=function(t){he.insideInputEvent=!0,he.unlockSound();var e=he.mouseX,a=he.mouseY;he.setMouseXY(t);var i=t.movementX,n=t.movementY;null==t.movementX&&(i=null!=t.mozMovementX?t.mozMovementX:null!=t.webkitMovementX?t.webkitMovementX:he.mouseX-e,n=null!=t.mozMovementY?t.mozMovementY:null!=t.webkitMovementY?t.webkitMovementY:he.mouseY-a),he.firefox&&(i=i*window.devicePixelRatio|0,n=n*window.devicePixelRatio|0),he.mouse.sendMoveEvent(0,he.mouseX,he.mouseY,i,n),he.insideInputEvent=!1},he.setTouchXY=function(t){var e=he.khanvas.getBoundingClientRect(),a=he.khanvas.clientLeft,i=he.khanvas.clientTop;he.touchX=(t.clientX-e.left-a)*he.khanvas.width/(e.width-2*a)|0,he.touchY=(t.clientY-e.top-i)*he.khanvas.height/(e.height-2*i)|0},he.touchDown=function(t){he.insideInputEvent=!0,he.unlockSound(),t.stopPropagation(),t.preventDefault();for(var e=0,a=t.changedTouches;e<a.length;){var i=a[e];++e;var n=i.identifier;he.ios&&(-1==(n=he.iosTouchs.indexOf(-1))&&(n=he.iosTouchs.length),he.iosTouchs[n]=i.identifier),he.setTouchXY(i),he.mouse.sendDownEvent(0,0,he.touchX,he.touchY),he.surface.sendTouchStartEvent(n,he.touchX,he.touchY)}he.insideInputEvent=!1},he.touchUp=function(t){he.insideInputEvent=!0,he.unlockSound();for(var e=0,a=t.changedTouches;e<a.length;){var i=a[e];++e;var n=i.identifier;he.ios&&(n=he.iosTouchs.indexOf(n),he.iosTouchs[n]=-1),he.setTouchXY(i),he.mouse.sendUpEvent(0,0,he.touchX,he.touchY),he.surface.sendTouchEndEvent(n,he.touchX,he.touchY)}he.insideInputEvent=!1},he.touchMove=function(t){he.insideInputEvent=!0,he.unlockSound();for(var e=0,a=0,i=t.changedTouches;a<i.length;){var n=i[a];if(++a,he.setTouchXY(n),0==e){var s=he.touchX-he.lastFirstTouchX,r=he.touchY-he.lastFirstTouchY;he.lastFirstTouchX=he.touchX,he.lastFirstTouchY=he.touchY,he.mouse.sendMoveEvent(0,he.touchX,he.touchY,s,r)}var o=n.identifier;he.ios&&(o=he.iosTouchs.indexOf(o)),he.surface.sendMoveEvent(o,he.touchX,he.touchY),++e}he.insideInputEvent=!1},he.touchCancel=function(t){he.insideInputEvent=!0,he.unlockSound();for(var e=0,a=t.changedTouches;e<a.length;){var i=a[e];++e;var n=i.identifier;he.ios&&(n=he.iosTouchs.indexOf(n)),he.setTouchXY(i),he.mouse.sendUpEvent(0,0,he.touchX,he.touchY),he.surface.sendTouchEndEvent(n,he.touchX,he.touchY)}he.iosTouchs=[],he.insideInputEvent=!1},he.onBlur=function(){uo.background()},he.onFocus=function(){uo.foreground()},he.keyDown=function(t){if((t.keyCode<112||123<t.keyCode)&&null!=t.key&&1!=t.key.length&&t.preventDefault(),t.stopPropagation(),he.ie){if(he.pressedKeys[t.keyCode])return void t.preventDefault();he.pressedKeys[t.keyCode]=!0}else if(t.repeat)return void t.preventDefault();he.keyboard.sendDownEvent(t.keyCode)},he.keyUp=function(t){t.preventDefault(),t.stopPropagation(),he.ie&&(he.pressedKeys[t.keyCode]=!1),he.keyboard.sendUpEvent(t.keyCode)},he.keyPress=function(t){0!=t.which&&(t.preventDefault(),t.stopPropagation(),he.keyboard.sendPressEvent(String.fromCharCode(t.which)))},he.getGamepads=function(){return he.chrome&&ci.instance.IsVrEnabled()?null:navigator.getGamepads?window.navigator.getGamepads():null},he.getPen=function(t){return null};var ce=function(){};(i["kha.Video"]=ce).__name__=!0,ce.__interfaces__=[Rt],ce.prototype={__class__:ce};var ge=function(t,e,a,i,n,s){this.depthTexture=null,this.texture=null,this.renderBuffer=null,this.frameBuffer=null,this.myWidth=t,this.myHeight=e,this.format=a,this.renderTarget=i,this.samples=s,this.image=null,this.video=null,this.depthStencilFormat=n,ge.init(),i&&this.createTexture()};(i["kha.WebGLImage"]=ge).__name__=!0,ge.init=function(){null==ge.context&&(ge.canvas=window.document.createElement("canvas"),null!=ge.canvas&&(ge.context=ge.canvas.getContext("2d"),ge.canvas.width=4096,ge.canvas.height=4096,ge.context.globalCompositeOperation="copy"))},ge.formatByteSize=function(t){switch(t._hx_index){case 0:return 4;case 1:return 1;case 2:return 16;case 3:return 2;case 4:return 8;case 5:return 4;case 6:return 2}},ge.__super__=Ft,ge.prototype=s(Ft.prototype,{image:null,video:null,myWidth:null,myHeight:null,format:null,renderTarget:null,samples:null,frameBuffer:null,renderBuffer:null,texture:null,depthTexture:null,graphics4:null,depthStencilFormat:null,get_g4:function(){return null==this.graphics4&&(this.graphics4=new li(this)),this.graphics4},get_width:function(){return this.myWidth},get_height:function(){return this.myHeight},get_realWidth:function(){return this.myWidth},get_realHeight:function(){return this.myHeight},createTexture:function(){if(null!=he.gl){if(this.texture=he.gl.createTexture(),he.gl.bindTexture(3553,this.texture),he.gl.texParameteri(3553,10240,9729),he.gl.texParameteri(3553,10241,9729),he.gl.texParameteri(3553,10242,33071),he.gl.texParameteri(3553,10243,33071),this.renderTarget){switch(this.frameBuffer=he.gl.createFramebuffer(),he.gl.bindFramebuffer(36160,this.frameBuffer),this.format._hx_index){case 0:he.gl.texImage2D(3553,0,6408,this.get_realWidth(),this.get_realHeight(),0,6408,5121,null);break;case 2:he.gl.texImage2D(3553,0,he.gl2?34836:6408,this.get_realWidth(),this.get_realHeight(),0,6408,5126,null);break;case 3:he.gl.texImage2D(3553,0,he.gl2?33189:6402,this.get_realWidth(),this.get_realHeight(),0,6402,5123,null);break;case 4:he.gl.texImage2D(3553,0,he.gl2?34842:6408,this.get_realWidth(),this.get_realHeight(),0,6408,he.halfFloat.HALF_FLOAT_OES,null);break;case 5:he.gl.texImage2D(3553,0,he.gl2?33326:6406,this.get_realWidth(),this.get_realHeight(),0,he.gl2?6403:6406,5126,null);break;case 6:he.gl.texImage2D(3553,0,he.gl2?33325:6406,this.get_realWidth(),this.get_realHeight(),0,he.gl2?6403:6406,he.halfFloat.HALF_FLOAT_OES,null);break;default:he.gl.texImage2D(3553,0,6408,this.get_realWidth(),this.get_realHeight(),0,6408,5121,null)}if(this.format==Xa.DEPTH16){if(he.gl.texParameteri(3553,10240,9728),he.gl.texParameteri(3553,10241,9728),he.gl.framebufferTexture2D(36160,36096,3553,this.texture,0),!he.gl2){var t=he.gl.createTexture();he.gl.bindTexture(3553,t),he.gl.texImage2D(3553,0,6408,this.get_realWidth(),this.get_realHeight(),0,6408,5121,null),he.gl.framebufferTexture2D(36160,36064,3553,t,0),he.gl.bindTexture(3553,this.texture)}}else he.gl.framebufferTexture2D(36160,36064,3553,this.texture,0);this.initDepthStencilBuffer(this.depthStencilFormat),36053!=he.gl.checkFramebufferStatus(36160)&&Oe.trace("WebGL error: Framebuffer incomplete",{fileName:"kha/WebGLImage.hx",lineNumber:225,className:"kha.WebGLImage",methodName:"createTexture"}),he.gl.bindRenderbuffer(36161,null),he.gl.bindFramebuffer(36160,null)}else if(null!=this.video)he.gl.texImage2D(3553,0,6408,6408,5121,this.video);else{switch(this.format._hx_index){case 0:this.image instanceof hs?he.gl.texImage2D(3553,0,6408,this.myWidth,this.myHeight,0,6408,5121,this.image):he.gl.texImage2D(3553,0,6408,6408,5121,this.image);break;case 2:he.gl.texImage2D(3553,0,he.gl2?34836:6408,this.myWidth,this.myHeight,0,6408,5126,this.image);break;case 4:he.gl.texImage2D(3553,0,he.gl2?34842:6408,this.myWidth,this.myHeight,0,6408,he.halfFloat.HALF_FLOAT_OES,this.image);break;case 5:he.gl.texImage2D(3553,0,he.gl2?33326:6406,this.myWidth,this.myHeight,0,he.gl2?6403:6406,5126,this.image);break;case 6:he.gl.texImage2D(3553,0,he.gl2?33325:6406,this.myWidth,this.myHeight,0,he.gl2?6403:6406,he.halfFloat.HALF_FLOAT_OES,this.image);break;default:he.gl.texImage2D(3553,0,6408,6408,5121,this.image)}}he.gl.bindTexture(3553,null)}},initDepthStencilBuffer:function(t){switch(t){case 0:break;case 1:case 5:null==he.depthTexture?(this.renderBuffer=he.gl.createRenderbuffer(),he.gl.bindRenderbuffer(36161,this.renderBuffer),he.gl.renderbufferStorage(36161,33189,this.get_realWidth(),this.get_realHeight()),he.gl.framebufferRenderbuffer(36160,36096,36161,this.renderBuffer)):(this.depthTexture=he.gl.createTexture(),he.gl.bindTexture(3553,this.depthTexture),1==t?he.gl.texImage2D(3553,0,he.gl2?33190:6402,this.get_realWidth(),this.get_realHeight(),0,6402,5125,null):he.gl.texImage2D(3553,0,he.gl2?33189:6402,this.get_realWidth(),this.get_realHeight(),0,6402,5123,null),he.gl.texParameteri(3553,10240,9728),he.gl.texParameteri(3553,10241,9728),he.gl.texParameteri(3553,10242,33071),he.gl.texParameteri(3553,10243,33071),he.gl.bindFramebuffer(36160,this.frameBuffer),he.gl.framebufferTexture2D(36160,36096,3553,this.depthTexture,0));break;case 2:case 3:case 4:null==he.depthTexture?(this.renderBuffer=he.gl.createRenderbuffer(),he.gl.bindRenderbuffer(36161,this.renderBuffer),he.gl.renderbufferStorage(36161,34041,this.get_realWidth(),this.get_realHeight()),he.gl.framebufferRenderbuffer(36160,33306,36161,this.renderBuffer)):(this.depthTexture=he.gl.createTexture(),he.gl.bindTexture(3553,this.depthTexture),he.gl.texImage2D(3553,0,he.gl2?35056:34041,this.get_realWidth(),this.get_realHeight(),0,34041,he.depthTexture.UNSIGNED_INT_24_8_WEBGL,null),he.gl.texParameteri(3553,10240,9728),he.gl.texParameteri(3553,10241,9728),he.gl.texParameteri(3553,10242,33071),he.gl.texParameteri(3553,10243,33071),he.gl.bindFramebuffer(36160,this.frameBuffer),he.gl.framebufferTexture2D(36160,33306,3553,this.depthTexture,0))}},set:function(t){he.gl.activeTexture(33984+t),he.gl.bindTexture(3553,this.texture),null!=this.video&&he.gl.texImage2D(3553,0,6408,6408,5121,this.video)},setDepth:function(t){he.gl.activeTexture(33984+t),he.gl.bindTexture(3553,this.depthTexture)},setDepthStencilFrom:function(t){he.gl.bindFramebuffer(36160,this.frameBuffer),he.gl.framebufferTexture2D(36160,36096,3553,f_.__cast(t,ge).depthTexture,0)},bytesToArray:function(t){switch(this.format._hx_index){case 0:case 1:return new hs(t.b.bufferValue);case 2:case 4:case 5:case 6:return new _s(t.b.bufferValue);default:return new hs(t.b.bufferValue)}},bytes:null,lock:function(t){return null==t&&(t=0),this.bytes=new nt(new os(ge.formatByteSize(this.format)*this.get_width()*this.get_height())),this.bytes},unlock:function(){if(null!=he.gl){switch(this.texture=he.gl.createTexture(),he.gl.bindTexture(3553,this.texture),he.gl.texParameteri(3553,10240,9729),he.gl.texParameteri(3553,10241,9729),he.gl.texParameteri(3553,10242,33071),he.gl.texParameteri(3553,10243,33071),this.format._hx_index){case 0:he.gl.texImage2D(3553,0,6408,this.get_width(),this.get_height(),0,6408,5121,this.bytesToArray(this.bytes));break;case 1:if(he.gl.texImage2D(3553,0,6409,this.get_width(),this.get_height(),0,6409,5121,this.bytesToArray(this.bytes)),1282==he.gl.getError()){for(var t=new nt(new os(this.get_width()*this.get_height()*4)),e=0,a=this.get_height();e<a;)for(var i=e++,n=0,s=this.get_width();n<s;){var r=n++,o=this.bytes,l=i*this.get_width()+r,_=o.b[l],h=i*this.get_width()*4+4*r;t.b[h]=255&_;var c=i*this.get_width()*4+4*r+1;t.b[c]=255&_;var g=i*this.get_width()*4+4*r+2;t.b[g]=255&_;var u=i*this.get_width()*4+4*r+3;t.b[u]=255}he.gl.texImage2D(3553,0,6408,this.get_width(),this.get_height(),0,6408,5121,this.bytesToArray(t))}break;case 2:he.gl.texImage2D(3553,0,he.gl2?34836:6408,this.get_width(),this.get_height(),0,6408,5126,this.bytesToArray(this.bytes));break;case 4:he.gl.texImage2D(3553,0,he.gl2?34842:6408,this.get_width(),this.get_height(),0,6408,he.halfFloat.HALF_FLOAT_OES,this.bytesToArray(this.bytes));break;case 5:he.gl.texImage2D(3553,0,he.gl2?33326:6406,this.get_width(),this.get_height(),0,he.gl2?6403:6406,5126,this.bytesToArray(this.bytes));break;case 6:he.gl.texImage2D(3553,0,he.gl2?33325:6406,this.get_width(),this.get_height(),0,he.gl2?6403:6406,he.halfFloat.HALF_FLOAT_OES,this.bytesToArray(this.bytes));break;default:he.gl.texImage2D(3553,0,6408,this.get_width(),this.get_height(),0,6408,5121,this.bytesToArray(this.bytes))}he.gl.bindTexture(3553,null),this.bytes=null}},unload:function(){null!=this.texture&&he.gl.deleteTexture(this.texture),null!=this.depthTexture&&he.gl.deleteTexture(this.depthTexture),null!=this.frameBuffer&&he.gl.deleteFramebuffer(this.frameBuffer),null!=this.renderBuffer&&he.gl.deleteRenderbuffer(this.renderBuffer)},generateMipmaps:function(t){he.gl.bindTexture(3553,this.texture),he.gl.generateMipmap(3553)},setMipmaps:function(t){if(he.gl.bindTexture(3553,this.texture),this.format==Xa.RGBA128)for(var e=0,a=t.length;e<a;){var i=e++;he.gl.texImage2D(3553,i+1,he.gl2?34836:6408,t[i].get_width(),t[i].get_height(),0,6408,5126,f_.__cast(t[i],ge).image)}else if(this.format==Xa.RGBA64)for(var n=0,s=t.length;n<s;){var r=n++;he.gl.texImage2D(3553,r+1,he.gl2?34842:6408,t[r].get_width(),t[r].get_height(),0,6408,he.halfFloat.HALF_FLOAT_OES,f_.__cast(t[r],ge).image)}else for(var o=0,l=t.length;o<l;){var _=o++;he.gl.texImage2D(3553,_+1,6408,6408,5121,f_.__cast(t[_],ge).image)}},__class__:ge});var ue=function(t,e,a){this.canvas=a,ue.windows.push(this)};(i["kha.Window"]=ue).__name__=!0,ue.__properties__={get_all:"get_all"},ue.get=function(t){return ue.windows[t]},ue.get_all=function(){return ue.windows},ue.prototype={canvas:null,defaultWidth:null,defaultHeight:null,get_width:function(){return 0==this.canvas.width?this.defaultWidth:this.canvas.width},get_height:function(){return 0==this.canvas.height?this.defaultHeight:this.canvas.height},get_vSynced:function(){return!0},__class__:ue,__properties__:{get_vSynced:"get_vSynced",get_height:"get_height",get_width:"get_width"}};var fe=function(t,e,a,i,n,s,r,o,l){null==l&&(l=0),null==o&&(o=7),null==r&&(r=!0),null==n&&(n=600),null==i&&(i=800),null==a&&(a=-1),null==e&&(e=-1),null==t&&(t="Kha"),this.mode=0,this.windowFeatures=7,this.visible=!0,this.display=null,this.height=600,this.width=800,this.y=-1,this.x=-1,this.title="Kha",this.title=t,this.x=e,this.y=a,this.width=i,this.height=n,this.display=null==s?qt.get_primary():s,this.visible=r,this.windowFeatures=o,this.mode=l};(i["kha.WindowOptions"]=fe).__name__=!0,fe.prototype={title:null,x:null,y:null,width:null,height:null,display:null,visible:null,windowFeatures:null,mode:null,__class__:fe};var de=function(){};(i["kha.audio1.AudioChannel"]=de).__name__=!0,de.prototype={play:null,set_volume:null,get_finished:null,__class__:de,__properties__:{get_finished:"get_finished",set_volume:"set_volume"}};var be=function(){};(i["kha.audio2.Audio"]=be).__name__=!0,be.initContext=function(){try{return void(be._context=new AudioContext)}catch(t){t instanceof Ot&&t.val}try{return void(this._context=new webkitAudioContext)}catch(t){t instanceof Ot&&t.val}},be._init=function(){if(be.initContext(),null==be._context)return!1;return be.buffer=new ve(8192,2,0|be._context.sampleRate),be.processingNode=be._context.createScriptProcessor(2048,0,2),be.processingNode.onaudioprocess=function(t){var e=t.outputBuffer.getChannelData(0),a=t.outputBuffer.getChannelData(1);if(null!=be.audioCallback){be.audioCallback(2*t.outputBuffer.length,be.buffer);for(var i=0,n=t.outputBuffer.length;i<n;){var s=i++;e[s]=be.buffer.data[be.buffer.readLocation],be.buffer.readLocation+=1,a[s]=be.buffer.data[be.buffer.readLocation],be.buffer.readLocation+=1,be.buffer.readLocation>=be.buffer.size&&(be.buffer.readLocation=0)}}else for(var r=0,o=t.outputBuffer.length;r<o;){var l=r++;e[l]=0,a[l]=0}},be.processingNode.connect(be._context.destination),!0},be.stream=function(t,e){null==e&&(e=!1);var a=window.document.createElement("audio"),i=new Blob([t.compressedData.b.bufferValue],{type:"audio/mp4"});a.src=URL.createObjectURL(i),a.loop=e;var n=new Qa(a);return n.play(),n};var pe=function(){};(i["kha.audio2.Audio1"]=pe).__name__=!0,pe._init=function(){var t=new Array(16);pe.soundChannels=t;var e=new Array(16);pe.streamChannels=e;var a=new Array(16);pe.internalSoundChannels=a;var i=new Array(16);pe.internalStreamChannels=i;var n=new _s(512);pe.sampleCache1=n;var s=new _s(512);pe.sampleCache2=s,be.audioCallback=pe.mix},pe.mix=function(t,e){if(pe.sampleCache1.length<t){var a=new _s(t);pe.sampleCache1=a;var i=new _s(t);pe.sampleCache2=i}for(var n=0,s=t;n<s;){var r=n++;pe.sampleCache2[r]=0}for(var o=0;o<16;){var l=o++;pe.internalSoundChannels[l]=pe.soundChannels[l]}for(var _=0;_<16;){var h=_++;pe.internalStreamChannels[h]=pe.streamChannels[h]}for(var c=0,g=pe.internalSoundChannels;c<g.length;){var u=g[c];if(++c,null!=u&&!u.get_finished()){u.nextSamples(pe.sampleCache1,t,e.samplesPerSecond);for(var f=0,d=t;f<d;){var b=f++,p=b;pe.sampleCache2[p]+=pe.sampleCache1[b]*u.get_volume()}}}for(var m=0,I=pe.internalStreamChannels;m<I.length;){var v=I[m];if(++m,null!=v&&!v.get_finished()){v.nextSamples(pe.sampleCache1,t,e.samplesPerSecond);for(var M=0,C=t;M<C;){var y=M++,w=y;pe.sampleCache2[w]+=pe.sampleCache1[y]*v.get_volume()}}}for(var A=0,x=t;A<x;){var Z=A++,z=pe.sampleCache2[Z],B=z<1?z:1;e.data[e.writeLocation]=-1<B?B:-1,e.writeLocation+=1,e.writeLocation>=e.size&&(e.writeLocation=0)}},pe.play=function(t,e){null==e&&(e=!1);for(var a=null,i=0;i<16;){var n=i++;if(null==pe.soundChannels[n]||pe.soundChannels[n].get_finished()){(a=new me(e)).data=t.uncompressedData,pe.soundChannels[n]=a;break}}return a},pe._playAgain=function(t){for(var e=0;e<16;){var a=e++;if(null==pe.soundChannels[a]||pe.soundChannels[a].get_finished()||pe.soundChannels[a]==t){pe.soundChannels[a]=t;break}}},pe.stream=function(t,e){null==e&&(e=!1);var a=be.stream(t,e);if(null!=a)return a;for(var i=null,n=0;n<16;){var s=n++;if(null==pe.streamChannels[s]||pe.streamChannels[s].get_finished()){i=new Me(t.compressedData,e),pe.streamChannels[s]=i;break}}return i};var me=function(t){this.paused=!1,this.looping=t,this.myVolume=1,this.myPosition=0};(i["kha.audio2.AudioChannel"]=me).__name__=!0,me.__interfaces__=[de],me.prototype={data:null,myVolume:null,myPosition:null,paused:null,looping:null,nextSamples:function(t,e,a){if(this.paused)for(var i=0,n=e;i<n;){t[i++]=0}else{for(var s=0,r=0;s<e;){for(var o=this.data.length-this.myPosition,l=o<e-s?o:e-s;r<l;)t[s]=this.data[this.myPosition],++this.myPosition,++r,++s;if(!this.looping)break;r=0,this.myPosition>=this.data.length&&(this.myPosition=0)}for(;s<e;)t[s]=0,++s}},play:function(){this.paused=!1,this.get_finished()&&(this.myPosition=0,pe._playAgain(this))},get_volume:function(){return this.myVolume},set_volume:function(t){return this.myVolume=t},get_finished:function(){return this.myPosition>=this.data.length},__class__:me,__properties__:{get_finished:"get_finished",set_volume:"set_volume",get_volume:"get_volume"}};var ve=function(t,e,a){this.size=t;var i=new _s(t);this.data=i,this.channels=e,this.samplesPerSecond=a,this.readLocation=0,this.writeLocation=0};(i["kha.audio2.Buffer"]=ve).__name__=!0,ve.prototype={channels:null,samplesPerSecond:null,data:null,size:null,readLocation:null,writeLocation:null,__class__:ve};var Me=function(t,e){this.paused=!1,this.atend=!1,this.myVolume=1,this.loop=e,this.reader=ye.openFromBytes(t)};(i["kha.audio2.StreamChannel"]=Me).__name__=!0,Me.__interfaces__=[de],Me.prototype={reader:null,atend:null,loop:null,myVolume:null,paused:null,nextSamples:function(t,e,a){if(this.paused)for(var i=0,n=e;i<n;){t[i++]=0}else{var s=2*this.reader.read(t,e/2|0,2,a,!0);if(s<e){this.loop?this.reader.set_currentMillisecond(0):this.atend=!0;for(var r=s,o=e;r<o;){t[r++]=0}}}},play:function(){this.paused=!1},get_volume:function(){return this.myVolume},set_volume:function(t){return this.myVolume=t},get_finished:function(){return this.atend},__class__:Me,__properties__:{get_finished:"get_finished",set_volume:"set_volume",get_volume:"get_volume"}};var Ce=function(){};(i["kha.audio2.ogg.tools.Crc32"]=Ce).__name__=!0,Ce.init=function(){if(null==Ce.table){var t=new Array(256);Ce.table=t;for(var e=0;e<256;){for(var a=e++,i=a<<24,n=0;n<8;){n++;i=i<<1^(Xt.gte(i,1<<31)?79764919:0)}Ce.table[a]=i}}};var ye=function(t,e,a){this.seekFunc=e,this.inputLength=a,this.decoder=xe.start(t),this.decoder.setupSampleNumber(e,a),this.loopStart=this.get_header().comment.get_loopStart(),this.loopLength=this.get_header().comment.get_loopLength()};(i["kha.audio2.ogg.vorbis.Reader"]=ye).__name__=!0,ye.openFromBytes=function(t){var e=new st(t),a=e;return new ye(e,function(t){ye.seekBytes(a,t)},t.length)},ye.seekBytes=function(t,e){t.set_position(e)},ye.readAll=function(t,e,a){null==a&&(a=!1);var i=new st(t),n=xe.start(i),s=i;n.setupSampleNumber(function(t){ye.seekBytes(s,t)},t.length);for(var r=n.header,o=new _s(4096*r.channel);;){for(var l=n.read(o,4096,r.channel,r.sampleRate,a),_=0,h=l*r.channel;_<h;){var c=_++;e.writeFloat(o[c])}if(0==l)break;l}return n.header},ye.prototype={decoder:null,get_header:function(){return this.decoder.header},get_currentSample:function(){return this.decoder.currentSample},set_currentSample:function(t){return this.decoder.seek(this.seekFunc,this.inputLength,t),this.decoder.currentSample},get_currentMillisecond:function(){var t=this.get_currentSample(),e=this.get_header().sampleRate;return Xt.toFloat(t)/Xt.toFloat(e)*1e3},set_currentMillisecond:function(t){var e=t/1e3,a=this.get_header().sampleRate;return this.set_currentSample(Math.floor(Xt.toFloat(a)*e)),this.get_currentMillisecond()},loopStart:null,loopLength:null,seekFunc:null,inputLength:null,read:function(t,e,a,i,n){return null==n&&(n=!1),this.decoder.ensurePosition(this.seekFunc),null==e&&(e=this.decoder.totalSample),null==a&&(a=this.get_header().channel),null==i&&(i=this.get_header().sampleRate),this.decoder.read(t,e,a,i,n)},__class__:ye,__properties__:{set_currentMillisecond:"set_currentMillisecond",get_currentMillisecond:"get_currentMillisecond",set_currentSample:"set_currentSample",get_currentSample:"get_currentSample",get_header:"get_header"}};var we=function(t){this.nextSeg=0,this.firstDecode=!1,this.bytesInSeg=0,this.validBits=0,this.input=t,this.inputPosition=0,this.page=new Te,Ce.init()};(i["kha.audio2.ogg.vorbis.VorbisDecodeState"]=we).__name__=!0,we.prototype={page:null,eof:null,pFirst:null,pLast:null,validBits:null,inputPosition:null,input:null,discardSamplesDeferred:null,segments:null,bytesInSeg:null,firstDecode:null,nextSeg:null,acc:null,lastSeg:null,lastSegWhich:null,endSegWithKnownLoc:null,knownLocForPacket:null,error:null,currentLoc:null,currentLocValid:null,firstAudioPageOffset:null,setup:function(t,e){this.inputPosition+=1;var a=this.input.readByte();this.inputPosition+=a;for(var i=new Array(a),n=0,s=a;n<s;){i[n++]=this.input.readByte()}if(this.segments=i,this.endSegWithKnownLoc=-2,-1!=t||-1!=e)for(var r=a-1;0<=r&&!(this.segments[r]<255);)0<=r&&(this.endSegWithKnownLoc=r,this.knownLocForPacket=t),--r;if(this.firstDecode){for(var o=0,l=new Re,_=0,h=a;_<h;){var c=_++;o+=this.segments[c]}o+=27+a,l.pageStart=this.firstAudioPageOffset,l.pageEnd=l.pageStart+o,l.firstDecodedSample=0,l.lastDecodedSample=t,this.pFirst=l}this.nextSeg=0},clone:function(t){var e=Object.create(we.prototype);return t(this.inputPosition),e.input=this.input,e.eof=this.eof,e.validBits=this.validBits,e.discardSamplesDeferred=this.discardSamplesDeferred,e.firstDecode=this.firstDecode,e.nextSeg=this.nextSeg,e.bytesInSeg=this.bytesInSeg,e.acc=e.acc,e.lastSeg=this.lastSeg,e.lastSegWhich=this.lastSegWhich,e.currentLoc=this.currentLoc,e.currentLocValid=this.currentLocValid,e.inputPosition=this.inputPosition,e.firstAudioPageOffset=this.firstAudioPageOffset,e.error=this.error,e.segments=this.segments,e.pFirst=this.pFirst,e.pLast=this.pLast,e.page=this.page.clone(),e},next:function(){if(this.lastSeg)return 0;if(-1==this.nextSeg){this.lastSegWhich=this.segments.length-1;try{this.page.start(this)}catch(t){var e=t instanceof Ot?t.val:t;if(e instanceof Pe)return this.lastSeg=!0,this.error=e,0;throw t}if(0==(1&this.page.flag))throw new Ot(new Pe(Je.CONTINUED_PACKET_FLAG_INVALID,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:171,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"next"}))}var t=this.segments[this.nextSeg++];return t<255&&(this.lastSeg=!0,this.lastSegWhich=this.nextSeg-1),this.nextSeg>=this.segments.length&&(this.nextSeg=-1),this.bytesInSeg=t},startPacket:function(){for(;-1==this.nextSeg;)if(this.page.start(this),0!=(1&this.page.flag))throw new Ot(new Pe(Je.MISSING_CAPTURE_PATTERN,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:193,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"startPacket"}));this.lastSeg=!1,this.validBits=0,this.bytesInSeg=0},maybeStartPacket:function(){if(-1==this.nextSeg){var e,t,a,i,n=!1;try{this.inputPosition+=1,e=this.input.readByte()}catch(t){var s=t instanceof Ot?t.val:t;if(!(s instanceof X))throw t;n=!0,e=0}if(n)return!1;if(79==e?(this.inputPosition+=1,i=103!=this.input.readByte()):i=!0,i?a=!0:(this.inputPosition+=1,a=103!=this.input.readByte()),a?t=!0:(this.inputPosition+=1,t=83!=this.input.readByte()),t)throw new Ot(new Pe(Je.MISSING_CAPTURE_PATTERN,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:218,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"maybeStartPacket"}));this.page.startWithoutCapturePattern(this)}return this.startPacket(),!0},readBits:function(t){if(this.validBits<0)return 0;if(this.validBits<t){if(24<t)return this.readBits(24)+(this.readBits(t-24)<<24);for(0==this.validBits&&(this.acc=0);;){if(0==this.bytesInSeg&&(this.lastSeg||0==this.next())){this.validBits=-1;break}if(this.bytesInSeg--,this.inputPosition+=1,this.acc=this.acc+(this.input.readByte()<<this.validBits),this.validBits+=8,!(this.validBits<t))break}if(this.validBits<0)return 0;var e=this.acc&(1<<t)-1;return this.acc=this.acc>>>t,this.validBits-=t,e}var a=this.acc&(1<<t)-1;return this.acc=this.acc>>>t,this.validBits-=t,a},firstPageValidate:function(){if(1!=this.segments.length)throw new Ot(new Pe(Je.INVALID_FIRST_PAGE,"segmentCount",{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:308,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"firstPageValidate"}));if(30!=this.segments[0])throw new Ot(new Pe(Je.INVALID_FIRST_PAGE,"decodeState head",{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:311,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"firstPageValidate"}))},startFirstDecode:function(){this.firstAudioPageOffset=this.inputPosition,this.firstDecode=!0},prepHuffman:function(){if(this.validBits<=24)for(0==this.validBits&&(this.acc=0);;){if(0==this.bytesInSeg&&(this.lastSeg||0==this.next()))return;if(this.bytesInSeg--,this.inputPosition+=1,this.acc=this.acc+(this.input.readByte()<<this.validBits),this.validBits+=8,!(this.validBits<=24))break}},finishDecodePacket:function(t,e,a){var i=a.left.start,n=!1,s=e>>1;if(this.firstDecode)this.currentLoc=-s,this.discardSamplesDeferred=e-a.right.end,n=!0,this.firstDecode=!1;else if(0!=this.discardSamplesDeferred)a.left.start+=this.discardSamplesDeferred,i=a.left.start,this.discardSamplesDeferred=0;else;if(this.lastSegWhich==this.endSegWithKnownLoc){if(n&&0!=(4&this.page.flag)){var r=this.knownLocForPacket-(e-a.right.end);if(r<this.currentLoc+a.right.end){var o=r<this.currentLoc?0:r-this.currentLoc;return o+=a.left.start,this.currentLoc+=o,{len:o,left:i,right:a.right.start}}}this.currentLoc=this.knownLocForPacket-(s-a.left.start),n=!0}return n&&(this.currentLoc+=a.right.start-a.left.start),{len:a.right.end,left:i,right:a.right.start}},getSampleNumber:function(t,e){var a=this.inputPosition,i=Xt.gte(e,65536)&&Xt.gte(e-65536,this.firstAudioPageOffset)?e-65536:this.firstAudioPageOffset;t(this.inputPosition=i);var n=0,s=!1,r=this.findPage(t,e);switch(r._hx_index){case 0:var o=r.last;n=r.end,s=o;break;case 1:throw new Ot(new Pe(Je.CANT_FIND_LAST_PAGE,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:519,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"getSampleNumber"}))}var l=this.inputPosition;t:for(;!s;){t(this.inputPosition=n);var _=this.findPage(t,e);switch(_._hx_index){case 0:var h=_.last;n=_.end,s=h;break;case 1:break t}i=l+1,l=this.inputPosition}t(this.inputPosition=l),this.inputPosition+=6;for(var c=new Array(6),g=0;g<6;){c[g++]=this.input.readByte()}this.inputPosition+=4;var u=this.input.readInt32();this.inputPosition+=4;var f=this.input.readInt32();if(-1==u&&-1==f||0<f)throw new Ot(new Pe(Je.CANT_FIND_LAST_PAGE,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:553,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"getSampleNumber"}));return this.pLast=new Re,this.pLast.pageStart=l,this.pLast.pageEnd=n,this.pLast.lastDecodedSample=u,this.pLast.firstDecodedSample=null,this.pLast.afterPreviousPageStart=i,t(this.inputPosition=a),u},findPage:function(t,e){try{for(;;){if(this.inputPosition+=1,79==this.input.readByte()){var a,i,n=this.inputPosition;if(e<n-25)return Ae.NotFound;if(this.inputPosition+=1,103==this.input.readByte()?(this.inputPosition+=1,i=103!=this.input.readByte()):i=!0,i?a=!0:(this.inputPosition+=1,a=83!=this.input.readByte()),a)continue;var s=new Array(27);s[0]=79,s[1]=103,s[2]=103,s[3]=83;for(var r=4;r<27;){var o=r++;this.inputPosition+=1,s[o]=this.input.readByte()}if(0!=s[4]){t(this.inputPosition=n);continue}for(var l=s[22]+(s[23]<<8)+(s[24]<<16)+(s[25]<<24),_=22;_<26;){s[_++]=0}for(var h=0,c=0;c<27;){var g=c++;h=h<<8^Ce.table[s[g]^h>>>24]}var u=0;try{for(var f=0,d=s[26];f<d;){f++;this.inputPosition+=1;var b=this.input.readByte();h=h<<8^Ce.table[b^h>>>24],u+=b}for(var p=0,m=u;p<m;){p++;this.inputPosition+=1;var I=this.input.readByte();h=h<<8^Ce.table[I^h>>>24]}}catch(t){var v=t instanceof Ot?t.val:t;if(v instanceof X){return Ae.NotFound}throw t}if(h==l){var M=this.inputPosition;return t(this.inputPosition=n-1),Ae.Found(M,0!=(4&s[5]))}}}}catch(t){var C=t instanceof Ot?t.val:t;if(C instanceof X){return Ae.NotFound}throw t}},analyzePage:function(t,e){var a=new Re,i=new Array(255);a.pageStart=this.inputPosition,this.inputPosition+=27;for(var n=new Array(27),s=0;s<27;){n[s++]=this.input.readByte()}var r=n,o=r[26];this.inputPosition+=o;for(var l=new Array(o),_=0,h=o;_<h;){l[_++]=this.input.readByte()}for(var c=l,g=0,u=0,f=r[26];u<f;){g+=c[u++]}if(a.pageEnd=a.pageStart+27+r[26]+g,a.lastDecodedSample=r[6]+(r[7]<<8)+(r[8]<<16)+(r[9]<<16),0!=(4&r[5]))return a.firstDecodedSample=null,t(this.inputPosition=a.pageStart),a;for(var d=0,b=0==(1&r[5]),p=e.modes.length,m=0,I=r[26];m<I;){var v=m++;if(b){if(0==c[v])return t(this.inputPosition=a.pageStart),null;this.inputPosition+=1;var M=this.input.readByte();if(0!=(1&M))return t(this.inputPosition=a.pageStart),null;M>>=1;var C=p-1,y=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];if(p<=(M&=(1<<(C<16384?C<16?y[C]:C<512?5+y[C>>5]:10+y[C>>10]:C<16777216?C<524288?15+y[C>>15]:20+y[C>>20]:C<536870912?25+y[C>>25]:C<-2147483648?30+y[C>>30]:0))-1))return t(this.inputPosition=a.pageStart),null;i[d++]=e.modes[M].blockflag;var w=c[v]-1;this.inputPosition+=w;for(var A=new Array(w),x=0,Z=w;x<Z;){A[x++]=this.input.readByte()}}else{var z=c[v];this.inputPosition+=z;for(var B=new Array(z),N=0,G=z;N<G;){B[N++]=this.input.readByte()}}b=c[v]<255}var k=0;1<d&&(k+=i[d-1]?e.blocksize1:e.blocksize0);for(var S=d-2;1<=S;)i[--S]?i[S+1]?k+=e.blocksize1>>1:k+=(e.blocksize1-e.blocksize0>>2)+(e.blocksize0>>1):k+=e.blocksize0>>1,--S;return a.firstDecodedSample=a.lastDecodedSample-k,t(this.inputPosition=a.pageStart),a},decodeScalarRaw:function(t){this.prepHuffman();var e=t.codewordLengths,a=t.codewords,i=t.sortedCodewords;if(8<t.entries?null!=i:null!=a){for(var n=this.acc,s=(n=(-16711936&(n=(-252645136&(n=(-858993460&(n=(-1431655766&n)>>>1|(1431655765&n)<<1))>>>2|(858993459&n)<<2))>>>4|(252645135&n)<<4))>>>8|(16711935&n)<<8)>>>16|n<<16,r=0,o=t.sortedEntries;1<o;){var l=r+(o>>1);Xt.gte(s,i[l])?(r=l,o-=o>>1):o>>=1}t.sparse||(r=t.sortedValues[r]);var _=e[r];return this.validBits>=_?(this.acc=this.acc>>>_,this.validBits-=_,r):(this.validBits=0,-1)}for(var h=0,c=t.entries;h<c;){var g=h++,u=e[g];if(255!=u&&a[g]==(this.acc&(1<<u)-1))return this.validBits>=u?(this.acc=this.acc>>>u,this.validBits-=u,g):(this.validBits=0,-1)}return this.error=new Pe(Je.INVALID_STREAM,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:847,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"decodeScalarRaw"}),this.validBits=0,-1},__class__:we};var Ae=v["kha.audio2.ogg.vorbis._VorbisDecodeState.FindPageResult"]={__ename__:!0,__constructs__:["Found","NotFound"],Found:(a=function(t,e){return{_hx_index:0,end:t,last:e,__enum__:"kha.audio2.ogg.vorbis._VorbisDecodeState.FindPageResult",toString:n}},a.__params__=["end","last"],a),NotFound:{_hx_index:1,__enum__:"kha.audio2.ogg.vorbis._VorbisDecodeState.FindPageResult",toString:n}},xe=function(t,e){this.header=t,this.decodeState=e,this.totalSample=null,this.currentSample=0,this.previousLength=0;var a=new Array(t.channel);this.channelBuffers=a;var i=new Array(t.channel);this.previousWindow=i;var n=new Array(t.channel);this.finalY=n;for(var s=0,r=t.channel;s<r;){var o=s++,l=this.channelBuffers,_=new Array(t.blocksize1);l[o]=_;var h=this.previousWindow,c=new Array(t.blocksize1/2|0);h[o]=c,this.finalY[o]=[]}var g=new Array(2);this.a=g;var u=new Array(2);this.b=u;var f=new Array(2);this.c=f;var d=new Array(2);this.window=d;var b=new Array(2);this.bitReverseData=b,this.initBlocksize(0,t.blocksize0),this.initBlocksize(1,t.blocksize1)};(i["kha.audio2.ogg.vorbis.VorbisDecoder"]=xe).__name__=!0,xe.start=function(t){var e=new we(t),a=De.read(e),i=new xe(a,e);return e.startFirstDecode(),i.pumpFirstFrame(),i},xe.prototype={previousWindow:null,previousLength:null,finalY:null,a:null,b:null,c:null,window:null,bitReverseData:null,channelBuffers:null,channelBufferStart:null,channelBufferEnd:null,header:null,currentSample:null,totalSample:null,decodeState:null,read:function(t,e,a,i,n){var s=this.header.sampleRate;if(0!=(Xt.toFloat(i)%Xt.toFloat(s)|0))throw new Ot("Unsupported sampleRate : can't convert "+k.string(Xt.toFloat(this.header.sampleRate))+" to "+i);if(a%this.header.channel!=0)throw new Ot("Unsupported channels : can't convert "+this.header.channel+" to "+a);var r=this.header.sampleRate,o=Xt.toFloat(i)/Xt.toFloat(r)|0,l=a/this.header.channel|0,_=0,h=Math.floor(e/o);null!=this.totalSample&&h>this.totalSample-this.currentSample&&(h=this.totalSample-this.currentSample);for(var c=0;_<h;){var g=this.channelBufferEnd-this.channelBufferStart;h-_<=g&&(g=h-_);for(var u=this.channelBufferStart,f=this.channelBufferStart+g;u<f;)for(var d=u++,b=0,p=o;b<p;){b++;for(var m=0,I=this.header.channel;m<I;)for(var v=m++,M=0,C=l;M<C;){M++;var y=this.channelBuffers[v][d];1<y?y=1:y<-1&&(y=-1),n&&(t[c]=y,++c)}}if(_+=g,this.channelBufferStart+=g,_==h||0==this.getFrameFloat())break}for(var w=_,A=h;w<A;){w++;for(var x=0,Z=o;x<Z;){x++;for(var z=0,B=this.header.channel;z<B;){z++;for(var N=0,G=l;N<G;){N++;n&&(t[c]=0,++c)}}}}return this.currentSample+=h,h*o},skipSamples:function(t){var e=0;for(null!=this.totalSample&&t>this.totalSample-this.currentSample&&(t=this.totalSample-this.currentSample);e<t;){var a=this.channelBufferEnd-this.channelBufferStart;if(t-e<=a&&(a=t-e),e+=a,this.channelBufferStart+=a,e==t||0==this.getFrameFloat())break}return this.currentSample+=t,t},setupSampleNumber:function(t,e){null==this.totalSample&&(this.totalSample=this.decodeState.getSampleNumber(t,e))},seek:function(t,e,a){if(this.currentSample!=a){if(null==this.totalSample&&(this.setupSampleNumber(t,e),0==this.totalSample))throw new Ot(new Pe(Je.CANT_FIND_LAST_PAGE,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecoder.hx",lineNumber:187,className:"kha.audio2.ogg.vorbis.VorbisDecoder",methodName:"seek"}));a<0&&(a=0);var i=this.decodeState.pFirst,n=this.decodeState.pLast;if(a>=n.lastDecodedSample&&(a=n.lastDecodedSample-1),a<i.lastDecodedSample)this.seekFrameFromPage(t,i.pageStart,0,a);else{for(var s=0;i.pageEnd<n.pageStart;){var r=i.pageEnd,o=n.afterPreviousPageStart,l=i.lastDecodedSample,_=n.lastDecodedSample;if(null==l||null==_)throw new Ot(new Pe(Je.SEEK_FAILED,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecoder.hx",lineNumber:219,className:"kha.audio2.ogg.vorbis.VorbisDecoder",methodName:"seek"}));Xt.gt(o,r+4e3)&&(o-=4e3);var h=r+Math.floor(Xt.toFloat(o-r)/Xt.toFloat(_-l)*(a-l));if(4<=s){var c=r+(o-r>>>1);h=8<=s?c:Xt.gt(c,h)?h+(c-h>>>1):c+(h-c>>>1)}switch(++s,t(this.decodeState.inputPosition=h),this.decodeState.findPage(t,e)._hx_index){case 0:break;case 1:throw new Ot(new Pe(Je.SEEK_FAILED,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecoder.hx",lineNumber:249,className:"kha.audio2.ogg.vorbis.VorbisDecoder",methodName:"seek"}))}var g=this.decodeState.analyzePage(t,this.header);if(null==g)throw new Ot(new Pe(Je.SEEK_FAILED,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecoder.hx",lineNumber:255,className:"kha.audio2.ogg.vorbis.VorbisDecoder",methodName:"seek"}));g.afterPreviousPageStart=h,g.pageStart!=n.pageStart?a<g.lastDecodedSample?n=g:i=g:n=g}if(!(i.lastDecodedSample<=a&&a<n.lastDecodedSample))throw new Ot(new Pe(Je.SEEK_FAILED,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecoder.hx",lineNumber:275,className:"kha.audio2.ogg.vorbis.VorbisDecoder",methodName:"seek"}));this.seekFrameFromPage(t,n.pageStart,i.lastDecodedSample,a)}}},seekFrameFromPage:function(t,e,a,i){var n=0,s=a;t(this.decodeState.inputPosition=e),this.decodeState.nextSeg=-1;for(var r=0,o=0,l=null,_=null;;){l=_,_=this.decodeState.clone(t);var h=this.decodeInitial();if(null==h){_=l;break}o=h.left.start,r=h.left.end;var c=0==n?r:o;if(i<s+h.right.start-c)break;for(var g=this.decodeState;0!=g.bytesInSeg||!g.lastSeg&&0!=g.next();)g.bytesInSeg--,g.inputPosition+=1,g.input.readByte();s+=h.right.start-c,++n}this.decodeState=_,t(this.decodeState.inputPosition),this.previousLength=0,this.pumpFirstFrame(),this.currentSample=s,this.skipSamples(i-s)},ensurePosition:function(t){t(this.decodeState.inputPosition)},getFrameFloat:function(){var t=this.decodePacket();if(null==t)return this.channelBufferStart=this.channelBufferEnd=0,0;var e=this.finishFrame(t);return this.channelBufferStart=t.left,this.channelBufferEnd=t.left+e,e},pumpFirstFrame:function(){this.finishFrame(this.decodePacket())},finishFrame:function(t){var e=t.len,a=t.right,i=t.left;if(0!=this.previousLength)for(var n=this.previousLength,s=this.getWindow(n),r=0,o=this.header.channel;r<o;)for(var l=r++,_=this.channelBuffers[l],h=this.previousWindow[l],c=0,g=n;c<g;){var u=c++;_[i+u]=_[i+u]*s[u]+h[u]*s[n-1-u]}var f=this.previousLength;this.previousLength=e-a;for(var d=0,b=this.header.channel;d<b;)for(var p=d++,m=this.previousWindow[p],I=this.channelBuffers[p],v=0,M=e-a;v<M;){var C=v++;m[C]=I[a+C]}return 0==f?0:(e<a&&(a=e),a-i)},getWindow:function(t){return(t<<=1)==this.header.blocksize0?this.window[0]:t==this.header.blocksize1?this.window[1]:null},initBlocksize:function(t,e){var a=e>>1,i=e>>2,n=e>>3,s=this.a,r=new Array(a);s[t]=r;var o=this.b,l=new Array(a);o[t]=l;var _=this.c,h=new Array(i);_[t]=h;var c=this.window,g=new Array(a);c[t]=g;var u=this.bitReverseData,f=new Array(n);u[t]=f,Ge.computeTwiddleFactors(e,this.a[t],this.b[t],this.c[t]),Ge.computeWindow(e,this.window[t]),Ge.computeBitReverse(e,this.bitReverseData[t])},inverseMdct:function(t,e,a){for(var i=a?1:0,n=this.a[i],s=this.b[i],r=this.c[i],o=this.bitReverseData[i],l=e>>1,_=e>>2,h=e>>3,c=new Array(l),g=l-2,u=0,f=0,d=l;f!=d;)c[g+1]=t[f]*n[u]-t[f+2]*n[u+1],c[g]=t[f]*n[u+1]+t[f+2]*n[u],g-=2,u+=2,f+=4;for(f=l-3;0<=g;)c[g+1]=-t[f+2]*n[u]- -t[f]*n[u+1],c[g]=-t[f+2]*n[u+1]+-t[f]*n[u],g-=2,u+=2,f-=4;for(var b=t,p=c,m=l-8,I=_,v=0,M=_,C=0;0<=m;){var y=p[I+1]-p[v+1],w=p[I]-p[v];b[M+1]=p[I+1]+p[v+1],b[M]=p[I]+p[v],b[C+1]=y*n[m+4]-w*n[m+5],b[C]=w*n[m+4]+y*n[m+5],y=p[I+3]-p[v+3],w=p[I+2]-p[v+2],b[M+3]=p[I+3]+p[v+3],b[M+2]=p[I+2]+p[v+2],b[C+3]=y*n[m]-w*n[m+1],b[C+2]=w*n[m]+y*n[m+1],m-=8,M+=4,C+=4,I+=4,v+=4}for(var A=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4],x=(e<16384?e<16?A[e]:e<512?5+A[e>>5]:10+A[e>>10]:e<16777216?e<524288?15+A[e>>15]:20+A[e>>20]:e<536870912?25+A[e>>25]:e<-2147483648?30+A[e>>30]:0)-1,Z=l-1-0*_,z=Z,B=Z+-(e>>3),N=0,G=1+(e>>4>>2);0<--G;){var k=b[z]-b[B],S=b[z+-1]-b[B+-1],W=z,X=b;X[W]=X[W]+b[B];var Y=z+-1,D=b;D[Y]=D[Y]+b[B+-1],b[B]=k*n[N]-S*n[N+1],b[B+-1]=S*n[N]+k*n[N+1],N+=8,k=b[z+-2]-b[B+-2],S=b[z+-3]-b[B+-3];var K=z+-2,L=b;L[K]=L[K]+b[B+-2];var V=z+-3,H=b;H[V]=H[V]+b[B+-3],b[B+-2]=k*n[N]-S*n[N+1],b[B+-3]=S*n[N]+k*n[N+1],N+=8,k=b[z+-4]-b[B+-4],S=b[z+-5]-b[B+-5];var j=z+-4,T=b;T[j]=T[j]+b[B+-4];var R=z+-5,F=b;F[R]=F[R]+b[B+-5],b[B+-4]=k*n[N]-S*n[N+1],b[B+-5]=S*n[N]+k*n[N+1],N+=8,k=b[z+-6]-b[B+-6],S=b[z+-7]-b[B+-7];var O=z+-6,P=b;P[O]=P[O]+b[B+-6];var J=z+-7,E=b;E[J]=E[J]+b[B+-7],b[B+-6]=k*n[N]-S*n[N+1],b[B+-7]=S*n[N]+k*n[N+1],N+=8,z-=8,B-=8}for(var U=l-1-_,Q=U,q=U+-(e>>3),$=0,tt=1+(e>>4>>2);0<--tt;){var et=b[Q]-b[q],at=b[Q+-1]-b[q+-1],it=Q,nt=b;nt[it]=nt[it]+b[q];var st=Q+-1,rt=b;rt[st]=rt[st]+b[q+-1],b[q]=et*n[$]-at*n[$+1],b[q+-1]=at*n[$]+et*n[$+1],$+=8,et=b[Q+-2]-b[q+-2],at=b[Q+-3]-b[q+-3];var ot=Q+-2,lt=b;lt[ot]=lt[ot]+b[q+-2];var _t=Q+-3,ht=b;ht[_t]=ht[_t]+b[q+-3],b[q+-2]=et*n[$]-at*n[$+1],b[q+-3]=at*n[$]+et*n[$+1],$+=8,et=b[Q+-4]-b[q+-4],at=b[Q+-5]-b[q+-5];var ct=Q+-4,gt=b;gt[ct]=gt[ct]+b[q+-4];var ut=Q+-5,ft=b;ft[ut]=ft[ut]+b[q+-5],b[q+-4]=et*n[$]-at*n[$+1],b[q+-5]=at*n[$]+et*n[$+1],$+=8,et=b[Q+-6]-b[q+-6],at=b[Q+-7]-b[q+-7];var dt=Q+-6,bt=b;bt[dt]=bt[dt]+b[q+-6];var pt=Q+-7,mt=b;mt[pt]=mt[pt]+b[q+-7],b[q+-6]=et*n[$]-at*n[$+1],b[q+-7]=at*n[$]+et*n[$+1],$+=8,Q-=8,q-=8}for(var It=l-1-0*h,vt=0,Mt=It,Ct=It+-(e>>4),yt=1+(e>>5>>2);0<--yt;){var wt=b[Mt]-b[Ct],At=b[Mt+-1]-b[Ct+-1],xt=Mt,Zt=b;Zt[xt]=Zt[xt]+b[Ct];var zt=Mt+-1,Bt=b;Bt[zt]=Bt[zt]+b[Ct+-1],b[Ct]=wt*n[vt]-At*n[vt+1],b[Ct+-1]=At*n[vt]+wt*n[vt+1],vt+=16,wt=b[Mt+-2]-b[Ct+-2],At=b[Mt+-3]-b[Ct+-3];var Nt=Mt+-2,Gt=b;Gt[Nt]=Gt[Nt]+b[Ct+-2];var kt=Mt+-3,St=b;St[kt]=St[kt]+b[Ct+-3],b[Ct+-2]=wt*n[vt]-At*n[vt+1],b[Ct+-3]=At*n[vt]+wt*n[vt+1],vt+=16,wt=b[Mt+-4]-b[Ct+-4],At=b[Mt+-5]-b[Ct+-5];var Wt=Mt+-4,Xt=b;Xt[Wt]=Xt[Wt]+b[Ct+-4];var Yt=Mt+-5,Dt=b;Dt[Yt]=Dt[Yt]+b[Ct+-5],b[Ct+-4]=wt*n[vt]-At*n[vt+1],b[Ct+-5]=At*n[vt]+wt*n[vt+1],vt+=16,wt=b[Mt+-6]-b[Ct+-6],At=b[Mt+-7]-b[Ct+-7];var Kt=Mt+-6,Lt=b;Lt[Kt]=Lt[Kt]+b[Ct+-6];var Vt=Mt+-7,Ht=b;Ht[Vt]=Ht[Vt]+b[Ct+-7],b[Ct+-6]=wt*n[vt]-At*n[vt+1],b[Ct+-7]=At*n[vt]+wt*n[vt+1],Mt-=8,Ct-=8,vt+=16}for(var jt=l-1-h,Tt=0,Rt=jt,Ft=jt+-(e>>4),Ot=1+(e>>5>>2);0<--Ot;){var Pt=b[Rt]-b[Ft],Jt=b[Rt+-1]-b[Ft+-1],Et=Rt,Ut=b;Ut[Et]=Ut[Et]+b[Ft];var Qt=Rt+-1,qt=b;qt[Qt]=qt[Qt]+b[Ft+-1],b[Ft]=Pt*n[Tt]-Jt*n[Tt+1],b[Ft+-1]=Jt*n[Tt]+Pt*n[Tt+1],Tt+=16,Pt=b[Rt+-2]-b[Ft+-2],Jt=b[Rt+-3]-b[Ft+-3];var $t=Rt+-2,te=b;te[$t]=te[$t]+b[Ft+-2];var ee=Rt+-3,ae=b;ae[ee]=ae[ee]+b[Ft+-3],b[Ft+-2]=Pt*n[Tt]-Jt*n[Tt+1],b[Ft+-3]=Jt*n[Tt]+Pt*n[Tt+1],Tt+=16,Pt=b[Rt+-4]-b[Ft+-4],Jt=b[Rt+-5]-b[Ft+-5];var ie=Rt+-4,ne=b;ne[ie]=ne[ie]+b[Ft+-4];var se=Rt+-5,re=b;re[se]=re[se]+b[Ft+-5],b[Ft+-4]=Pt*n[Tt]-Jt*n[Tt+1],b[Ft+-5]=Jt*n[Tt]+Pt*n[Tt+1],Tt+=16,Pt=b[Rt+-6]-b[Ft+-6],Jt=b[Rt+-7]-b[Ft+-7];var oe=Rt+-6,le=b;le[oe]=le[oe]+b[Ft+-6];var _e=Rt+-7,he=b;he[_e]=he[_e]+b[Ft+-7],b[Ft+-6]=Pt*n[Tt]-Jt*n[Tt+1],b[Ft+-7]=Jt*n[Tt]+Pt*n[Tt+1],Rt-=8,Ft-=8,Tt+=16}for(var ce=l-1-2*h,ge=0,ue=ce,fe=ce+-(e>>4),de=1+(e>>5>>2);0<--de;){var be=b[ue]-b[fe],pe=b[ue+-1]-b[fe+-1],me=ue,Ie=b;Ie[me]=Ie[me]+b[fe];var ve=ue+-1,Me=b;Me[ve]=Me[ve]+b[fe+-1],b[fe]=be*n[ge]-pe*n[ge+1],b[fe+-1]=pe*n[ge]+be*n[ge+1],ge+=16,be=b[ue+-2]-b[fe+-2],pe=b[ue+-3]-b[fe+-3];var Ce=ue+-2,ye=b;ye[Ce]=ye[Ce]+b[fe+-2];var we=ue+-3,Ae=b;Ae[we]=Ae[we]+b[fe+-3],b[fe+-2]=be*n[ge]-pe*n[ge+1],b[fe+-3]=pe*n[ge]+be*n[ge+1],ge+=16,be=b[ue+-4]-b[fe+-4],pe=b[ue+-5]-b[fe+-5];var xe=ue+-4,Ze=b;Ze[xe]=Ze[xe]+b[fe+-4];var ze=ue+-5,Be=b;Be[ze]=Be[ze]+b[fe+-5],b[fe+-4]=be*n[ge]-pe*n[ge+1],b[fe+-5]=pe*n[ge]+be*n[ge+1],ge+=16,be=b[ue+-6]-b[fe+-6],pe=b[ue+-7]-b[fe+-7];var Ne=ue+-6,Ge=b;Ge[Ne]=Ge[Ne]+b[fe+-6];var ke=ue+-7,Se=b;Se[ke]=Se[ke]+b[fe+-7],b[fe+-6]=be*n[ge]-pe*n[ge+1],b[fe+-7]=pe*n[ge]+be*n[ge+1],ue-=8,fe-=8,ge+=16}for(var We=l-1-3*h,Xe=0,Ye=We,De=We+-(e>>4),Ke=1+(e>>5>>2);0<--Ke;){var Le=b[Ye]-b[De],Ve=b[Ye+-1]-b[De+-1],He=Ye,je=b;je[He]=je[He]+b[De];var Te=Ye+-1,Re=b;Re[Te]=Re[Te]+b[De+-1],b[De]=Le*n[Xe]-Ve*n[Xe+1],b[De+-1]=Ve*n[Xe]+Le*n[Xe+1],Xe+=16,Le=b[Ye+-2]-b[De+-2],Ve=b[Ye+-3]-b[De+-3];var Fe=Ye+-2,Oe=b;Oe[Fe]=Oe[Fe]+b[De+-2];var Pe=Ye+-3,Je=b;Je[Pe]=Je[Pe]+b[De+-3],b[De+-2]=Le*n[Xe]-Ve*n[Xe+1],b[De+-3]=Ve*n[Xe]+Le*n[Xe+1],Xe+=16,Le=b[Ye+-4]-b[De+-4],Ve=b[Ye+-5]-b[De+-5];var Ee=Ye+-4,Ue=b;Ue[Ee]=Ue[Ee]+b[De+-4];var Qe=Ye+-5,qe=b;qe[Qe]=qe[Qe]+b[De+-5],b[De+-4]=Le*n[Xe]-Ve*n[Xe+1],b[De+-5]=Ve*n[Xe]+Le*n[Xe+1],Xe+=16,Le=b[Ye+-6]-b[De+-6],Ve=b[Ye+-7]-b[De+-7];var $e=Ye+-6,ta=b;ta[$e]=ta[$e]+b[De+-6];var ea=Ye+-7,aa=b;aa[ea]=aa[ea]+b[De+-7],b[De+-6]=Le*n[Xe]-Ve*n[Xe+1],b[De+-7]=Ve*n[Xe]+Le*n[Xe+1],Ye-=8,De-=8,Xe+=16}for(var ia=2,na=x-3>>1;ia<na;)for(var sa=ia++,ra=e>>sa+2,oa=ra>>1,la=0,_a=1<<sa+1;la<_a;)for(var ha=l-1-ra*la++,ca=1<<sa+3,ga=0,ua=ha,fa=ha+-oa,da=1+(e>>sa+4>>2);0<--da;){var ba=b[ua]-b[fa],pa=b[ua+-1]-b[fa+-1],ma=ua,Ia=b;Ia[ma]=Ia[ma]+b[fa];var va=ua+-1,Ma=b;Ma[va]=Ma[va]+b[fa+-1],b[fa]=ba*n[ga]-pa*n[ga+1],b[fa+-1]=pa*n[ga]+ba*n[ga+1],ga+=ca,ba=b[ua+-2]-b[fa+-2],pa=b[ua+-3]-b[fa+-3];var Ca=ua+-2,ya=b;ya[Ca]=ya[Ca]+b[fa+-2];var wa=ua+-3,Aa=b;Aa[wa]=Aa[wa]+b[fa+-3],b[fa+-2]=ba*n[ga]-pa*n[ga+1],b[fa+-3]=pa*n[ga]+ba*n[ga+1],ga+=ca,ba=b[ua+-4]-b[fa+-4],pa=b[ua+-5]-b[fa+-5];var xa=ua+-4,Za=b;Za[xa]=Za[xa]+b[fa+-4];var za=ua+-5,Ba=b;Ba[za]=Ba[za]+b[fa+-5],b[fa+-4]=ba*n[ga]-pa*n[ga+1],b[fa+-5]=pa*n[ga]+ba*n[ga+1],ga+=ca,ba=b[ua+-6]-b[fa+-6],pa=b[ua+-7]-b[fa+-7];var Na=ua+-6,Ga=b;Ga[Na]=Ga[Na]+b[fa+-6];var ka=ua+-7,Sa=b;Sa[ka]=Sa[ka]+b[fa+-7],b[fa+-6]=ba*n[ga]-pa*n[ga+1],b[fa+-7]=pa*n[ga]+ba*n[ga+1],ua-=8,fa-=8,ga+=ca}for(var Wa=x-3>>1,Xa=x-6;Wa<Xa;)for(var Ya=Wa++,Da=e>>Ya+2,Ka=1<<Ya+3,La=Da>>1,Va=1<<Ya+1,Ha=0,ja=l-1,Ta=(e>>Ya+6)+1;0<--Ta;){for(var Ra=n[Ha],Fa=n[Ha+1],Oa=n[Ha+Ka],Pa=n[Ha+Ka+1],Ja=n[Ha+2*Ka],Ea=n[Ha+2*Ka+1],Ua=n[Ha+3*Ka],Qa=n[Ha+3*Ka+1],qa=ja,$a=ja+-La,ti=Va+1;0<--ti;){var ei=b[qa]-b[$a],ai=b[qa+-1]-b[$a+-1];b[qa]=b[qa]+b[$a],b[qa+-1]=b[qa+-1]+b[$a+-1],b[$a]=ei*Ra-ai*Fa,b[$a+-1]=ai*Ra+ei*Fa,ei=b[qa+-2]-b[$a+-2],ai=b[qa+-3]-b[$a+-3],b[qa+-2]=b[qa+-2]+b[$a+-2],b[qa+-3]=b[qa+-3]+b[$a+-3],b[$a+-2]=ei*Oa-ai*Pa,b[$a+-3]=ai*Oa+ei*Pa,ei=b[qa+-4]-b[$a+-4],ai=b[qa+-5]-b[$a+-5],b[qa+-4]=b[qa+-4]+b[$a+-4],b[qa+-5]=b[qa+-5]+b[$a+-5],b[$a+-4]=ei*Ja-ai*Ea,b[$a+-5]=ai*Ja+ei*Ea,ei=b[qa+-6]-b[$a+-6],ai=b[qa+-7]-b[$a+-7],b[qa+-6]=b[qa+-6]+b[$a+-6],b[qa+-7]=b[qa+-7]+b[$a+-7],b[$a+-6]=ei*Ua-ai*Qa,b[$a+-7]=ai*Ua+ei*Qa,qa-=Da,$a-=Da}Ha+=4*Ka,ja-=8}for(var ii=l-1,ni=n[e>>3],si=ii,ri=ii-16*(e>>5);ri<si;){var oi=b[si],li=b[si+-8];b[si+-8]=oi-li,b[si]=oi+li,oi=b[si+-1],li=b[si+-9],b[si+-9]=oi-li,b[si+-1]=oi+li;var _i=(oi=b[si+-2])-(li=b[si+-10]);b[si+-2]=oi+li;var hi=(oi=b[si+-3])-(li=b[si+-11]);b[si+-3]=oi+li,b[si+-10]=(_i+hi)*ni,b[si+-11]=(hi-_i)*ni,oi=b[si+-4],_i=(li=b[si+-12])-oi,b[si+-4]=oi+li,hi=(oi=b[si+-5])-(li=b[si+-13]),b[si+-5]=oi+li,b[si+-12]=hi,b[si+-13]=_i,oi=b[si+-6],_i=(li=b[si+-14])-oi,b[si+-6]=oi+li,hi=(oi=b[si+-7])-(li=b[si+-15]),b[si+-7]=oi+li,b[si+-14]=(_i+hi)*ni,b[si+-15]=(_i-hi)*ni;var ci=b[si],gi=b[si+-4],ui=ci-gi,fi=ci+gi,di=(ci=b[si+-2])+(gi=b[si+-6]),bi=ci-gi;b[si]=fi+di,b[si+-2]=fi-di;var pi=b[si+-3]-b[si+-7];b[si+-4]=ui+pi,b[si+-6]=ui-pi;var mi=(ci=b[si+-1])-(gi=b[si+-5]),Ii=ci+gi,vi=b[si+-3]+b[si+-7];b[si+-1]=Ii+vi,b[si+-3]=Ii-vi,b[si+-5]=mi-bi,b[si+-7]=mi+bi;var Mi=si-8,Ci=b[Mi],yi=b[Mi+-4],wi=Ci-yi,Ai=Ci+yi,xi=(Ci=b[Mi+-2])+(yi=b[Mi+-6]),Zi=Ci-yi;b[Mi]=Ai+xi,b[Mi+-2]=Ai-xi;var zi=b[Mi+-3]-b[Mi+-7];b[Mi+-4]=wi+zi,b[Mi+-6]=wi-zi;var Bi=(Ci=b[Mi+-1])-(yi=b[Mi+-5]),Ni=Ci+yi,Gi=b[Mi+-3]+b[Mi+-7];b[Mi+-1]=Ni+Gi,b[Mi+-3]=Ni-Gi,b[Mi+-5]=Bi-Zi,b[Mi+-7]=Bi+Zi,si-=16}for(var ki=0,Si=_-4,Wi=l-4;0<=Si;){var Xi=o[ki];p[Wi+3]=b[Xi],p[Wi+2]=b[Xi+1],p[Si+3]=b[Xi+2],p[Si+2]=b[Xi+3],Xi=o[ki+1],p[Wi+1]=b[Xi],p[Wi]=b[Xi+1],p[Si+1]=b[Xi+2],p[Si]=b[Xi+3],Si-=4,Wi-=4,ki+=2}for(var Yi=0,Di=0,Ki=l-4;Di<Ki;){var Li=p[Di]-p[Ki+2],Vi=p[Di+1]+p[Ki+3],Hi=r[Yi+1]*Li+r[Yi]*Vi,ji=r[Yi+1]*Vi-r[Yi]*Li,Ti=p[Di]+p[Ki+2],Ri=p[Di+1]-p[Ki+3];p[Di]=Ti+Hi,p[Di+1]=Ri+ji,p[Ki+2]=Ti-Hi,p[Ki+3]=ji-Ri,Li=p[Di+2]-p[Ki],Vi=p[Di+3]+p[Ki+1],Hi=r[Yi+3]*Li+r[Yi+2]*Vi,ji=r[Yi+3]*Vi-r[Yi+2]*Li,Ti=p[Di+2]+p[Ki],Ri=p[Di+3]-p[Ki+1],p[Di+2]=Ti+Hi,p[Di+3]=Ri+ji,p[Ki]=Ti-Hi,p[Ki+1]=ji-Ri,Yi+=4,Di+=4,Ki-=4}for(var Fi=l-8,Oi=l-8,Pi=0,Ji=l-4,Ei=l,Ui=e-4;0<=Oi;){var Qi=c[Oi+6]*s[Fi+7]-c[Oi+7]*s[Fi+6],qi=-c[Oi+6]*s[Fi+6]-c[Oi+7]*s[Fi+7];t[Pi]=Qi,t[Ji+3]=-Qi,t[Ei]=qi,t[Ui+3]=qi;var $i=c[Oi+4]*s[Fi+5]-c[Oi+5]*s[Fi+4],tn=-c[Oi+4]*s[Fi+4]-c[Oi+5]*s[Fi+5];t[Pi+1]=$i,t[Ji+2]=-$i,t[Ei+1]=tn,t[Ui+2]=tn,Qi=c[Oi+2]*s[Fi+3]-c[Oi+3]*s[Fi+2],qi=-c[Oi+2]*s[Fi+2]-c[Oi+3]*s[Fi+3],t[Pi+2]=Qi,t[Ji+1]=-Qi,t[Ei+2]=qi,t[Ui+1]=qi,$i=c[Oi]*s[Fi+1]-c[Oi+1]*s[Fi],tn=-c[Oi]*s[Fi]-c[Oi+1]*s[Fi+1],t[Pi+3]=$i,t[Ji]=-$i,t[Ei+3]=tn,t[Ui]=tn,Fi-=8,Oi-=8,Pi+=4,Ei+=4,Ji-=4,Ui-=4}},decodePacket:function(){var t=this.decodeInitial();return null==t?null:this.decodePacketRest(t)},decodeInitial:function(){for(this.channelBufferStart=this.channelBufferEnd=0;;){if(!this.decodeState.maybeStartPacket())return null;if(0==this.decodeState.readBits(1))break;for(;;){var t,e=this.decodeState;if(0!=e.bytesInSeg||!e.lastSeg&&0!=e.next()?(e.bytesInSeg--,e.inputPosition+=1,t=e.input.readByte()):t=-1,e.validBits=0,-1==t)break}}var a=this.header.modes.length-1,i=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4],n=this.decodeState.readBits(a<16384?a<16?i[a]:a<512?5+i[a>>5]:10+i[a>>10]:a<16777216?a<524288?15+i[a>>15]:20+i[a>>20]:a<536870912?25+i[a>>25]:a<-2147483648?30+i[a>>30]:0);if(-1==n||n>=this.header.modes.length)throw new Ot(new Pe(Je.SEEK_FAILED,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecoder.hx",lineNumber:519,className:"kha.audio2.ogg.vorbis.VorbisDecoder",methodName:"decodeInitial"}));var s,r,o,l=this.header.modes[n];l.blockflag?(s=this.header.blocksize1,r=this.decodeState.readBits(1),o=this.decodeState.readBits(1)):(r=o=0,s=this.header.blocksize0);var _=s>>1;return{mode:n,left:l.blockflag&&0==r?{start:s-this.header.blocksize0>>2,end:s+this.header.blocksize0>>2}:{start:0,end:_},right:l.blockflag&&0==o?{start:3*s-this.header.blocksize0>>2,end:3*s+this.header.blocksize0>>2}:{start:_,end:s}}},decodePacketRest:function(t){for(var e=this.header.modes[t.mode],a=new Array(256),i=new Array(256),n=e.blockflag?this.header.blocksize1:this.header.blocksize0,s=this.header.mapping[e.mapping],r=n>>1,o=[256,128,86,64],l=this.header.codebooks,_=0,h=this.header.channel;_<h;){var c=_++,g=s.chan[c].mux;a[c]=!1;var u=this.header.floorConfig[s.submapFloor[g]];if(0==u.type)throw new Ot(new Pe(Je.INVALID_STREAM,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecoder.hx",lineNumber:581,className:"kha.audio2.ogg.vorbis.VorbisDecoder",methodName:"decodePacketRest"}));var f=u.floor1;if(0!=this.decodeState.readBits(1)){var d=[],b=new Array(256),p=o[f.floor1Multiplier-1],m=2,I=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];(d=this.finalY[c])[0]=this.decodeState.readBits((p<16384?p<16?I[p]:p<512?5+I[p>>5]:10+I[p>>10]:p<16777216?p<524288?15+I[p>>15]:20+I[p>>20]:p<536870912?25+I[p>>25]:p<-2147483648?30+I[p>>30]:0)-1);var v=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];d[1]=this.decodeState.readBits((p<16384?p<16?v[p]:p<512?5+v[p>>5]:10+v[p>>10]:p<16777216?p<524288?15+v[p>>15]:20+v[p>>20]:p<536870912?25+v[p>>25]:p<-2147483648?30+v[p>>30]:0)-1);for(var M=0,C=f.partitions;M<C;){var y=M++,w=f.partitionClassList[y],A=f.classDimensions[w],x=f.classSubclasses[w],Z=(1<<x)-1,z=0;if(0!=x){var B=l[f.classMasterbooks[w]],N=this.decodeState;N.validBits<10&&N.prepHuffman();var G,k=B.fastHuffman[1023&N.acc];if(0<=k){var S=B.codewordLengths[k];N.acc=N.acc>>>S,N.validBits-=S,N.validBits<0?(N.validBits=0,G=-1):G=k}else G=N.decodeScalarRaw(B);B.sparse&&(G=B.sortedValues[G]),z=G}for(var W=f.subclassBooks[w],X=0,Y=A;X<Y;){X++;var D=W[z&Z];z>>=x;var K,L=m++;if(0<=D){var V=this.decodeState,H=l[D];V.validBits<10&&V.prepHuffman();var j,T=H.fastHuffman[1023&V.acc];if(0<=T){var R=H.codewordLengths[T];V.acc=V.acc>>>R,V.validBits-=R,V.validBits<0?(V.validBits=0,j=-1):j=T}else j=V.decodeScalarRaw(H);H.sparse&&(j=H.sortedValues[j]),K=j}else K=0;d[L]=K}}if(-1==this.decodeState.validBits){a[c]=!0;continue}b[0]=b[1]=!0;for(var F=f.neighbors,O=f.xlist,P=2,J=f.values;P<J;){var E=P++,U=F[E][0],Q=F[E][1],q=O[U],$=d[U],tt=d[Q]-$,et=O[Q]-q,at=Math.abs(tt)*(O[E]-q)/et|0,it=tt<0?$-at:$+at,nt=d[E],st=p-it,rt=st<it?2*st:2*it;0!=nt?(b[U]=b[Q]=!0,b[E]=!0,d[E]=rt<=nt?it<st?nt-it+it:it-nt+st-1:0!=(1&nt)?it-(nt+1>>1):it+(nt>>1)):(b[E]=!1,d[E]=it)}for(var ot=0,lt=f.values;ot<lt;){var _t=ot++;b[_t]||(d[_t]=-1)}}else a[c]=!0}for(var ht=0,ct=this.header.channel;ht<ct;){var gt=ht++;i[gt]=a[gt]}for(var ut=0,ft=s.couplingSteps;ut<ft;){var dt=ut++;a[s.chan[dt].magnitude]&&a[s.chan[dt].angle]||(a[s.chan[dt].magnitude]=a[s.chan[dt].angle]=!1)}for(var bt=0,pt=s.submaps;bt<pt;){for(var mt=bt++,It=new Array(this.header.channel),vt=new Array(256),Mt=0,Ct=0,yt=this.header.channel;Ct<yt;){var wt=Ct++;s.chan[wt].mux==mt&&(a[wt]?(vt[Mt]=!0,It[Mt]=null):(vt[Mt]=!1,It[Mt]=this.channelBuffers[wt]),++Mt)}var At=s.submapResidue[mt];this.header.residueConfig[At].decode(this.decodeState,this.header,It,Mt,r,vt,this.channelBuffers)}for(var xt=s.couplingSteps,Zt=n>>1;0<=--xt;)for(var zt=this.channelBuffers[s.chan[xt].magnitude],Bt=this.channelBuffers[s.chan[xt].angle],Nt=0,Gt=Zt;Nt<Gt;){var kt,St,Wt=Nt++;0<zt[Wt]?0<Bt[Wt]?(St=zt[Wt],kt=zt[Wt]-Bt[Wt]):(kt=zt[Wt],St=zt[Wt]+Bt[Wt]):0<Bt[Wt]?(St=zt[Wt],kt=zt[Wt]+Bt[Wt]):(kt=zt[Wt],St=zt[Wt]-Bt[Wt]),zt[Wt]=St,Bt[Wt]=kt}for(var Xt=0,Yt=this.header.channel;Xt<Yt;){var Dt=Xt++;if(i[Dt])for(var Kt=0,Lt=Zt;Kt<Lt;){var Vt=Kt++;this.channelBuffers[Dt][Vt]=0}else s.doFloor(this.header.floorConfig,Dt,n,this.channelBuffers[Dt],this.finalY[Dt],null)}for(var Ht=0,jt=this.header.channel;Ht<jt;){var Tt=Ht++;this.inverseMdct(this.channelBuffers[Tt],n,e.blockflag)}for(var Rt=this.decodeState;0!=Rt.bytesInSeg||!Rt.lastSeg&&0!=Rt.next();)Rt.bytesInSeg--,Rt.inputPosition+=1,Rt.input.readByte();return this.decodeState.finishDecodePacket(this.previousLength,n,t)},__class__:xe};var Ge=function(){};(i["kha.audio2.ogg.vorbis.VorbisTools"]=Ge).__name__=!0,Ge.pointCompare=function(t,e){return t.x<e.x?-1:t.x>e.x?1:0},Ge.uintAsc=function(t,e){return Xt.gt(e,t)?-1:t==e?0:1},Ge.lookup1Values=function(t,e){var a=0|Math.exp(Math.log(t)/e);return(0|Math.pow(a+1,e))<=t&&++a,a},Ge.computeWindow=function(t,e){for(var a=t>>1,i=0,n=a;i<n;){var s=i++;e[s]=Math.sin(1.5707963267948966*Ge.square(Math.sin((s+.5)/a*.5*3.141592653589793)))}},Ge.square=function(t){return t*t},Ge.computeBitReverse=function(t,e){for(var a=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4],i=(t<16384?t<16?a[t]:t<512?5+a[t>>5]:10+a[t>>10]:t<16777216?t<524288?15+a[t>>15]:20+a[t>>20]:t<536870912?25+a[t>>25]:t<-2147483648?30+a[t>>30]:0)-1,n=0,s=t>>3;n<s;){var r=n++,o=r;o=(-16711936&(o=(-252645136&(o=(-858993460&(o=(-1431655766&o)>>>1|(1431655765&o)<<1))>>>2|(858993459&o)<<2))>>>4|(252645135&o)<<4))>>>8|(16711935&o)<<8,e[r]=(o>>>16|o<<16)>>>32-i+3<<2}},Ge.computeTwiddleFactors=function(t,e,a,i){for(var n=t>>3,s=0,r=0,o=t>>2;r<o;){var l=r++;e[s]=Math.cos(4*l*3.141592653589793/t),e[s+1]=-Math.sin(4*l*3.141592653589793/t),a[s]=.5*Math.cos(3.141592653589793*(s+1)/t/2),a[s+1]=.5*Math.sin(3.141592653589793*(s+1)/t/2),s+=2}for(var _=0,h=0,c=n;h<c;){h++;i[_]=Math.cos(2*(_+1)*3.141592653589793/t),i[_+1]=-Math.sin(2*(_+1)*3.141592653589793/t),_+=2}},Ge.drawLine=function(t,e,a,i,n,s){if(null==Ge.integerDivideTable){var r=new Array(32);Ge.integerDivideTable=r;for(var o=0;o<32;){var l=o++,_=Ge.integerDivideTable,h=new Array(64);_[l]=h;for(var c=1;c<64;){var g=c++;Ge.integerDivideTable[l][g]=l/g|0}}}var u,f,d=n-a,b=i-e,p=d<0?-d:d,m=e,I=a,v=0;b<64&&p<32?f=d<0?(u=-Ge.integerDivideTable[p][b])-1:(u=Ge.integerDivideTable[p][b])+1:(u=d/b|0,f=d<0?u-1:u+1),p-=(u<0?-u:u)*b,s<i&&(i=s);var M=m,C=t;C[M]=C[M]*Ge.INVERSE_DB_TABLE[I];for(var y=m+1,w=i;y<w;){b<=(v+=p)?(v-=b,I+=f):I+=u;var A=y++,x=t;x[A]=x[A]*Ge.INVERSE_DB_TABLE[I]}};var ke=function(){};(i["kha.audio2.ogg.vorbis.data.Codebook"]=ke).__name__=!0,ke.read=function(t){var e=new ke;if(66!=t.readBits(8)||67!=t.readBits(8)||86!=t.readBits(8))throw new Ot(new Pe(Je.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Codebook.hx",lineNumber:40,className:"kha.audio2.ogg.vorbis.data.Codebook",methodName:"read"}));var a=t.readBits(8);e.dimensions=(t.readBits(8)<<8)+a;var i=t.readBits(8),n=t.readBits(8);e.entries=(t.readBits(8)<<16)+(n<<8)+i;var s=t.readBits(1);e.sparse=0==s&&0!=t.readBits(1);var r=new Array(e.entries);e.sparse||(e.codewordLengths=r);var o,l=0;if(0!=s)for(var _=0,h=t.readBits(5)+1;_<e.entries;){var c=e.entries-_,g=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4],u=t.readBits(c<16384?c<16?g[c]:c<512?5+g[c>>5]:10+g[c>>10]:c<16777216?c<524288?15+g[c>>15]:20+g[c>>20]:c<536870912?25+g[c>>25]:c<-2147483648?30+g[c>>30]:0);if(_+u>e.entries)throw new Ot(new Pe(Je.INVALID_SETUP,"codebook entrys",{fileName:"kha/audio2/ogg/vorbis/data/Codebook.hx",lineNumber:67,className:"kha.audio2.ogg.vorbis.data.Codebook",methodName:"read"}));for(var f=0,d=u;f<d;){r[_+f++]=h}_+=u,++h}else for(var b=0,p=e.entries;b<p;){var m=b++;0!=(e.sparse?t.readBits(1):1)?(r[m]=t.readBits(5)+1,++l):r[m]=255}if(e.sparse&&l>=e.entries>>2&&(e.codewordLengths=r,e.sparse=!1),e.sparse)o=l;else{for(var I=0,v=0,M=e.entries;v<M;){var C=r[v++];10<C&&255!=C&&++I}o=I}e.sortedEntries=o;var y=null;if(e.sparse){if(0!=e.sortedEntries){var w=new Array(e.sortedEntries);e.codewordLengths=w;var A=new Array(e.entries);e.codewords=A,y=new Array(e.entries)}e.entries,e.sortedEntries}else{var x=new Array(e.entries);e.codewords=x}if(!e.computeCodewords(r,e.entries,y))throw new Ot(new Pe(Je.INVALID_SETUP,"compute codewords",{fileName:"kha/audio2/ogg/vorbis/data/Codebook.hx",lineNumber:120,className:"kha.audio2.ogg.vorbis.data.Codebook",methodName:"read"}));if(0!=e.sortedEntries){e.sortedCodewords=[];var Z=new Array(e.sortedEntries);e.sortedValues=Z,e.computeSortedHuffman(r,y)}if(e.sparse&&(y=null,r=e.codewords=null),e.computeAcceleratedHuffman(),e.lookupType=t.readBits(4),2<e.lookupType)throw new Ot(new Pe(Je.INVALID_SETUP,"codebook lookup type",{fileName:"kha/audio2/ogg/vorbis/data/Codebook.hx",lineNumber:143,className:"kha.audio2.ogg.vorbis.data.Codebook",methodName:"read"}));if(0<e.lookupType){var z=t.readBits(32),B=Xt.toFloat(2097151&z),N=(2145386496&z)>>>21,G=0!=(-2147483648&z)?-B:B;e.minimumValue=G*Math.pow(2,N-788);var k=t.readBits(32),S=Xt.toFloat(2097151&k),W=(2145386496&k)>>>21,X=0!=(-2147483648&k)?-S:S;e.deltaValue=X*Math.pow(2,W-788),e.valueBits=t.readBits(4)+1,e.sequenceP=0!=t.readBits(1),1==e.lookupType?e.lookupValues=Ge.lookup1Values(e.entries,e.dimensions):e.lookupValues=e.entries*e.dimensions;for(var Y=new Array(e.lookupValues),D=0,K=e.lookupValues;D<K;){var L=D++,V=t.readBits(e.valueBits);if(-1==V)throw new Ot(new Pe(Je.INVALID_SETUP,"fail lookup",{fileName:"kha/audio2/ogg/vorbis/data/Codebook.hx",lineNumber:161,className:"kha.audio2.ogg.vorbis.data.Codebook",methodName:"read"}));Y[L]=V}var H=new Array(e.lookupValues);e.multiplicands=H;for(var j=0,T=e.lookupValues;j<T;){var R=j++;e.multiplicands[R]=Y[R]*e.deltaValue+e.minimumValue}if(2==e.lookupType&&e.sequenceP){for(var F=1,O=e.lookupValues;F<O;){var P=F++;e.multiplicands[P]=e.multiplicands[P-1]}e.sequenceP=!1}}return e},ke.prototype={dimensions:null,entries:null,codewordLengths:null,minimumValue:null,deltaValue:null,valueBits:null,lookupType:null,sequenceP:null,sparse:null,lookupValues:null,multiplicands:null,codewords:null,fastHuffman:null,sortedCodewords:null,sortedValues:null,sortedEntries:null,computeCodewords:function(t,e,a){for(var i=new Array(32),n=0;n<32;){i[n++]=0}for(var s=0;s<e&&!(t[s]<255);)++s;if(s==e)return!0;var r=0,o=r++;this.sparse?(this.codewords[o]=0,this.codewordLengths[o]=t[s],a[o]=s):this.codewords[s]=0;for(var l=0;++l<=t[s];)i[l]=1<<32-l;for(l=s;++l<e;){var _=t[l];if(255!=_){for(;0<_&&0==i[_];)--_;if(0==_)return!1;var h=i[_];i[_]=0;var c=h,g=(c=(-16711936&(c=(-252645136&(c=(-858993460&(c=(-1431655766&c)>>>1|(1431655765&c)<<1))>>>2|(858993459&c)<<2))>>>4|(252645135&c)<<4))>>>8|(16711935&c)<<8)>>>16|c<<16,u=r++;if(this.sparse?(this.codewords[u]=g,this.codewordLengths[u]=t[l],a[u]=l):this.codewords[l]=g,_!=t[l])for(var f=t[l];_<f;)i[f]=h+(1<<32-f),--f}}return!0},computeSortedHuffman:function(t,e){if(this.sparse)for(var a=0,i=this.sortedEntries;a<i;){var n=a++,s=this.codewords[n];s=(-16711936&(s=(-252645136&(s=(-858993460&(s=(-1431655766&s)>>>1|(1431655765&s)<<1))>>>2|(858993459&s)<<2))>>>4|(252645135&s)<<4))>>>8|(16711935&s)<<8,this.sortedCodewords[n]=s>>>16|s<<16}else for(var r=0,o=0,l=this.entries;o<l;){var _=o++,h=t[_];if(this.sparse||255!=h&&10<h){var c=this.codewords[_];c=(-16711936&(c=(-252645136&(c=(-858993460&(c=(-1431655766&c)>>>1|(1431655765&c)<<1))>>>2|(858993459&c)<<2))>>>4|(252645135&c)<<4))>>>8|(16711935&c)<<8,this.sortedCodewords[r++]=c>>>16|c<<16}}this.sortedCodewords[this.sortedEntries]=-1,this.sortedCodewords.sort(Ge.uintAsc);for(var g=0,u=this.sparse?this.sortedEntries:this.entries;g<u;){var f=g++,d=this.sparse?t[e[f]]:t[f];if(this.sparse||255!=d&&10<d){for(var b=this.codewords[f],p=(b=(-16711936&(b=(-252645136&(b=(-858993460&(b=(-1431655766&b)>>>1|(1431655765&b)<<1))>>>2|(858993459&b)<<2))>>>4|(252645135&b)<<4))>>>8|(16711935&b)<<8)>>>16|b<<16,m=0,I=this.sortedEntries;1<I;){var v=m+(I>>1);Xt.gte(p,this.sortedCodewords[v])?(m=v,I-=I>>1):I>>=1}this.sparse?(this.sortedValues[m]=e[f],this.codewordLengths[m]=d):this.sortedValues[m]=f}}},computeAcceleratedHuffman:function(){var t=new Array(1024);this.fastHuffman=t,this.fastHuffman[0]=-1;for(var e=0;e<1024;){var a=e++;this.fastHuffman[a]=-1}for(var i=0,n=this.sparse?this.sortedEntries:this.entries;i<n;){var s=i++;if(this.codewordLengths[s]<=10){var r;if(this.sparse){var o=this.sortedCodewords[s];r=(o=(-16711936&(o=(-252645136&(o=(-858993460&(o=(-1431655766&o)>>>1|(1431655765&o)<<1))>>>2|(858993459&o)<<2))>>>4|(252645135&o)<<4))>>>8|(16711935&o)<<8)>>>16|o<<16}else r=this.codewords[s];for(;r<1024;)this.fastHuffman[r]=s,r+=1<<this.codewordLengths[s]}}},codebookDecode:function(t,e,a,i){t.validBits<10&&t.prepHuffman();var n,s=this.fastHuffman[1023&t.acc];if(0<=s){var r=this.codewordLengths[s];t.acc=t.acc>>>r,t.validBits-=r,t.validBits<0?(t.validBits=0,n=-1):n=s}else n=t.decodeScalarRaw(this);this.sparse&&(n=this.sortedValues[n]);var o=n,l=this.lookupValues,_=this.sequenceP,h=this.multiplicands,c=this.minimumValue;if(o<0)return!1;if(i>this.dimensions&&(i=this.dimensions),1==this.lookupType){for(var g=1,u=0,f=0,d=i;f<d;){var b=f++,p=h[Xt.toFloat(o/g|0)%Xt.toFloat(l)|0]+u,m=a+b,I=e;I[m]=I[m]+p,_&&(u=p+c),g*=l}return!0}if(o*=this.dimensions,_)for(var v=0,M=0,C=i;M<C;){var y=M++,w=h[o+y]+v,A=a+y,x=e;x[A]=x[A]+w,v=w+c}else for(var Z=0,z=i;Z<z;){var B=Z++,N=a+B,G=e;G[N]=G[N]+(h[o+B]+0)}return!0},codebookDecodeStep:function(t,e,a,i,n){t.validBits<10&&t.prepHuffman();var s,r=this.fastHuffman[1023&t.acc];if(0<=r){var o=this.codewordLengths[r];t.acc=t.acc>>>o,t.validBits-=o,t.validBits<0?(t.validBits=0,s=-1):s=r}else s=t.decodeScalarRaw(this);this.sparse&&(s=this.sortedValues[s]);var l=s,_=0;if(l<0)return!1;i>this.dimensions&&(i=this.dimensions);var h=this.lookupValues,c=this.sequenceP,g=this.multiplicands;if(1==this.lookupType){for(var u=1,f=0,d=i;f<d;){var b=f++,p=g[Xt.toFloat(l/u|0)%Xt.toFloat(h)|0]+_,m=a+b*n,I=e;I[m]=I[m]+p,c&&(_=p),u*=h}return!0}l*=this.dimensions;for(var v=0,M=i;v<M;){var C=v++,y=g[l+C]+_,w=a+C*n,A=e;A[w]=A[w]+y,c&&(_=y)}return!0},decodeDeinterleaveRepeat:function(t,e,a,i,n,s,r){var o=this.dimensions;if(0==this.lookupType)throw new Ot(new Pe(Je.INVALID_STREAM,null,{fileName:"kha/audio2/ogg/vorbis/data/Codebook.hx",lineNumber:488,className:"kha.audio2.ogg.vorbis.data.Codebook",methodName:"decodeDeinterleaveRepeat"}));for(var l=this.multiplicands,_=this.sequenceP,h=this.lookupValues;0<r;){var c=0;t.validBits<10&&t.prepHuffman();var g,u=this.fastHuffman[1023&t.acc];if(0<=u){var f=this.codewordLengths[u];t.acc=t.acc>>>f,t.validBits-=f,t.validBits<0?(t.validBits=0,g=-1):g=u}else g=t.decodeScalarRaw(this);this.sparse&&(g=this.sortedValues[g]);var d=g;if(d<0){if(0==t.bytesInSeg&&t.lastSeg)return null;throw new Ot(new Pe(Je.INVALID_STREAM,null,{fileName:"kha/audio2/ogg/vorbis/data/Codebook.hx",lineNumber:503,className:"kha.audio2.ogg.vorbis.data.Codebook",methodName:"decodeDeinterleaveRepeat"}))}if(s*a<i+n*a+o&&(o=s*a-(n*a-i)),1==this.lookupType){var b=1;if(_)for(var p=0,m=o;p<m;){p++;var I=l[Xt.toFloat(d/b|0)%Xt.toFloat(h)|0]+c,v=n,M=e[i];M[v]=M[v]+I,++i==a&&(i=0,++n),c=I,b*=h}else for(var C=0,y=o;C<y;){C++;var w=l[Xt.toFloat(d/b|0)%Xt.toFloat(h)|0]+c,A=n,x=e[i];x[A]=x[A]+w,++i==a&&(i=0,++n),b*=h}}else if(d*=this.dimensions,_)for(var Z=0,z=o;Z<z;){var B=l[d+Z++]+c,N=n,G=e[i];G[N]=G[N]+B,++i==a&&(i=0,++n),c=B}else for(var k=0,S=o;k<S;){var W=l[d+k++]+c,X=n,Y=e[i];Y[X]=Y[X]+W,++i==a&&(i=0,++n)}r-=o}return{cInter:i,pInter:n}},residueDecode:function(t,e,a,i,n){if(0==n)for(var s=i/this.dimensions|0,r=0,o=s;r<o;){var l=r++;if(!this.codebookDecodeStep(t,e,a+l,i-a-l,s))return!1}else for(var _=0;_<i;){if(!this.codebookDecode(t,e,a,i-_))return!1;_+=this.dimensions,a+=this.dimensions}return!0},__class__:ke};var Se=function(){this.data=new et};(i["kha.audio2.ogg.vorbis.data.Comment"]=Se).__name__=!0,Se.prototype={data:null,get_loopStart:function(){return k.parseInt(this.getString("loopstart"))},get_loopLength:function(){return k.parseInt(this.getString("looplength"))},add:function(t,e){t=t.toLowerCase();var a=this.data;if(null!=rs[t]?a.existsReserved(t):a.h.hasOwnProperty(t)){var i=this.data;(null!=rs[t]?i.getReserved(t):i.h[t]).push(e)}else{var n=[e],s=this.data;null!=rs[t]?s.setReserved(t,n):s.h[t]=n}},getString:function(t){t=t.toLowerCase();var e=this.data;if(null!=rs[t]?e.existsReserved(t):e.h.hasOwnProperty(t)){var a=this.data;return(null!=rs[t]?a.getReserved(t):a.h[t])[0]}return null},__class__:Se,__properties__:{get_loopLength:"get_loopLength",get_loopStart:"get_loopStart"}};var We=function(){};(i["kha.audio2.ogg.vorbis.data.Floor"]=We).__name__=!0,We.read=function(t,e){var a=new We;if(a.type=t.readBits(16),1<a.type)throw new Ot(new Pe(Je.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Floor.hx",lineNumber:28,className:"kha.audio2.ogg.vorbis.data.Floor",methodName:"read"}));if(0==a.type){var i=a.floor0=new Xe;i.order=t.readBits(8),i.rate=t.readBits(16),i.barkMapSize=t.readBits(16),i.amplitudeBits=t.readBits(6),i.amplitudeOffset=t.readBits(8),i.numberOfBooks=t.readBits(4)+1;for(var n=0,s=i.numberOfBooks;n<s;){var r=n++;i.bookList[r]=t.readBits(8)}throw new Ot(new Pe(Je.FEATURE_NOT_SUPPORTED,null,{fileName:"kha/audio2/ogg/vorbis/data/Floor.hx",lineNumber:41,className:"kha.audio2.ogg.vorbis.data.Floor",methodName:"read"}))}var o=[],l=a.floor1=new Ye,_=-1;l.partitions=t.readBits(5);var h=new Array(l.partitions);l.partitionClassList=h;for(var c=0,g=l.partitions;c<g;){var u=c++;l.partitionClassList[u]=t.readBits(4),l.partitionClassList[u]>_&&(_=l.partitionClassList[u])}var f=new Array(_+1);l.classDimensions=f;var d=new Array(_+1);l.classMasterbooks=d;var b=new Array(_+1);l.classSubclasses=b;var p=new Array(_+1);l.subclassBooks=p;for(var m=0,I=_+1;m<I;){var v=m++;if(l.classDimensions[v]=t.readBits(3)+1,l.classSubclasses[v]=t.readBits(2),0!=l.classSubclasses[v]&&(l.classMasterbooks[v]=t.readBits(8),l.classMasterbooks[v]>=e.length))throw new Ot(new Pe(Je.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Floor.hx",lineNumber:64,className:"kha.audio2.ogg.vorbis.data.Floor",methodName:"read"}));var M=1<<l.classSubclasses[v],C=l.subclassBooks,y=new Array(M);C[v]=y;for(var w=0,A=M;w<A;){var x=w++;if(l.subclassBooks[v][x]=t.readBits(8)-1,l.subclassBooks[v][x]>=e.length)throw new Ot(new Pe(Je.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Floor.hx",lineNumber:73,className:"kha.audio2.ogg.vorbis.data.Floor",methodName:"read"}))}}l.floor1Multiplier=t.readBits(2)+1,l.rangebits=t.readBits(4);var Z=new Array(250);l.xlist=Z,l.xlist[0]=0,l.xlist[1]=1<<l.rangebits,l.values=2;for(var z=0,B=l.partitions;z<B;)for(var N=z++,G=l.partitionClassList[N],k=0,S=l.classDimensions[G];k<S;){k++;l.xlist[l.values]=t.readBits(l.rangebits),l.values++}for(var W=0,X=l.values;W<X;){var Y=W++;o.push(new Ke),o[Y].x=l.xlist[Y],o[Y].y=Y}o.sort(Ge.pointCompare);var D=new Array(l.values);l.sortedOrder=D;for(var K=0,L=l.values;K<L;){var V=K++;l.sortedOrder[V]=o[V].y}var H=new Array(l.values);l.neighbors=H;for(var j=2,T=l.values;j<T;){for(var R=j++,F=l.xlist,O=-1,P=65536,J=0,E=0,U=0,Q=R;U<Q;){var q=U++;F[q]>O&&F[q]<F[R]&&(O=F[J=q]),F[q]<P&&F[q]>F[R]&&(P=F[E=q])}var $=J,tt=E,et=l.neighbors,at=new Array(l.values);et[R]=at,l.neighbors[R][0]=$,l.neighbors[R][1]=tt}return a},We.prototype={floor0:null,floor1:null,type:null,__class__:We};var Xe=function(){};(i["kha.audio2.ogg.vorbis.data.Floor0"]=Xe).__name__=!0,Xe.prototype={order:null,rate:null,barkMapSize:null,amplitudeBits:null,amplitudeOffset:null,numberOfBooks:null,bookList:null,__class__:Xe};var Ye=function(){};(i["kha.audio2.ogg.vorbis.data.Floor1"]=Ye).__name__=!0,Ye.prototype={partitions:null,partitionClassList:null,classDimensions:null,classSubclasses:null,classMasterbooks:null,subclassBooks:null,xlist:null,sortedOrder:null,neighbors:null,floor1Multiplier:null,rangebits:null,values:null,__class__:Ye};var De=function(){};(i["kha.audio2.ogg.vorbis.data.Header"]=De).__name__=!0,De.read=function(t){var e=t.page;if(e.start(t),0==(2&e.flag))throw new Ot(new Pe(Je.INVALID_FIRST_PAGE,"not firstPage",{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:46,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));if(0!=(4&e.flag))throw new Ot(new Pe(Je.INVALID_FIRST_PAGE,"lastPage",{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:49,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));if(0!=(1&e.flag))throw new Ot(new Pe(Je.INVALID_FIRST_PAGE,"continuedPacket",{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:52,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));if(t.firstPageValidate(),t.inputPosition+=1,1!=t.input.readByte())throw new Ot(new Pe(Je.INVALID_FIRST_PAGE,"decodeState head",{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:57,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));for(var a=new nt(new os(6)),i=0;i<6;){var n,s=i++;0!=t.bytesInSeg||!t.lastSeg&&0!=t.next()?(t.bytesInSeg--,t.inputPosition+=1,n=t.input.readByte()):n=-1,t.validBits=0,a.b[s]=255&n}if("vorbis"!=a.toString())throw new Ot(new Pe(Je.INVALID_SETUP,"vorbis header",{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:301,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"vorbisValidate"}));t.inputPosition+=4;var r=t.input.readInt32();if(0!=r)throw new Ot(new Pe(Je.INVALID_FIRST_PAGE,"vorbis version : "+r,{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:66,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));var o=new De;if(t.inputPosition+=1,o.channel=t.input.readByte(),0==o.channel)throw new Ot(new Pe(Je.INVALID_FIRST_PAGE,"no channel",{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:73,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));if(16<o.channel)throw new Ot(new Pe(Je.TOO_MANY_CHANNELS,"too many channels",{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:75,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));if(t.inputPosition+=4,o.sampleRate=t.input.readInt32(),0==o.sampleRate)throw new Ot(new Pe(Je.INVALID_FIRST_PAGE,"no sampling rate",{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:80,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));t.inputPosition+=4,o.maximumBitRate=t.input.readInt32(),t.inputPosition+=4,o.nominalBitRate=t.input.readInt32(),t.inputPosition+=4,o.minimumBitRate=t.input.readInt32(),t.inputPosition+=1;var l=t.input.readByte(),_=15&l,h=l>>4;if(o.blocksize0=1<<_,o.blocksize1=1<<h,_<6||13<_)throw new Ot(new Pe(Je.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:93,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));if(h<6||13<h)throw new Ot(new Pe(Je.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:96,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));if(h<_)throw new Ot(new Pe(Je.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:99,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));t.inputPosition+=1;var c=t.input.readByte();if(0==(1&c))throw new Ot(new Pe(Je.INVALID_FIRST_PAGE,null,{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:105,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));t.page.start(t),t.startPacket();for(var g=0,u=new rt;0!=(g=t.next());)t.inputPosition+=g,u.write(t.input.read(g)),t.bytesInSeg=0;var f=new st(u.getBytes());f.readByte(),f.read(6);var d,b=f.readInt32();o.vendor=f.readString(b),o.comment=new Se;for(var p=0,m=f.readInt32();p<m;){p++;var I=f.readInt32(),v=f.readString(I),M=v.indexOf("=");-1!=M&&o.comment.add(v.substring(0,M),v.substring(M+1))}if(0==(1&f.readByte()))throw new Ot(new Pe(Je.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:141,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));if(t.startPacket(),0!=t.bytesInSeg||!t.lastSeg&&0!=t.next()?(t.bytesInSeg--,t.inputPosition+=1,d=t.input.readByte()):d=-1,t.validBits=0,5!=d)throw new Ot(new Pe(Je.INVALID_SETUP,"setup packet",{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:149,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));for(var C=new nt(new os(6)),y=0;y<6;){var w,A=y++;0!=t.bytesInSeg||!t.lastSeg&&0!=t.next()?(t.bytesInSeg--,t.inputPosition+=1,w=t.input.readByte()):w=-1,t.validBits=0,C.b[A]=255&w}if("vorbis"!=C.toString())throw new Ot(new Pe(Je.INVALID_SETUP,"vorbis header",{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:301,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"vorbisValidate"}));var x=t.readBits(8)+1,Z=new Array(x);o.codebooks=Z;for(var z=0,B=x;z<B;){var N=z++;o.codebooks[N]=ke.read(t)}for(var G=0,k=c=t.readBits(6)+1;G<k;){G++;if(0!=t.readBits(16))throw new Ot(new Pe(Je.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:165,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}))}var S=t.readBits(6)+1,W=new Array(S);o.floorConfig=W;for(var X=0,Y=S;X<Y;){var D=X++;o.floorConfig[D]=We.read(t,o.codebooks)}var K=t.readBits(6)+1,L=new Array(K);o.residueConfig=L;for(var V=0,H=K;V<H;){var j=V++;o.residueConfig[j]=Ee.read(t,o.codebooks)}var T=t.readBits(6)+1,R=new Array(T);o.mapping=R;for(var F=0,O=T;F<O;)for(var P=F++,J=Le.read(t,o.channel),E=0,U=(o.mapping[P]=J).submaps;E<U;){var Q=E++;if(J.submapFloor[Q]>=o.floorConfig.length)throw new Ot(new Pe(Je.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:191,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));if(J.submapResidue[Q]>=o.residueConfig.length)throw new Ot(new Pe(Je.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:194,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}))}var q=t.readBits(6)+1,$=new Array(q);o.modes=$;for(var tt=0,et=q;tt<et;){var at=tt++,it=He.read(t);if((o.modes[at]=it).mapping>=o.mapping.length)throw new Ot(new Pe(Je.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:205,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}))}for(;0!=t.bytesInSeg||!t.lastSeg&&0!=t.next();)t.bytesInSeg--,t.inputPosition+=1,t.input.readByte();return o},De.prototype={maximumBitRate:null,nominalBitRate:null,minimumBitRate:null,sampleRate:null,channel:null,blocksize0:null,blocksize1:null,codebooks:null,floorConfig:null,residueConfig:null,mapping:null,modes:null,comment:null,vendor:null,__class__:De};var Ke=function(){};(i["kha.audio2.ogg.vorbis.data.IntPoint"]=Ke).__name__=!0,Ke.prototype={x:null,y:null,__class__:Ke};var Le=function(){};(i["kha.audio2.ogg.vorbis.data.Mapping"]=Le).__name__=!0,Le.read=function(t,e){var a=new Le,i=t.readBits(16);if(0!=i)throw new Ot(new Pe(Je.INVALID_SETUP,"mapping type "+i,{fileName:"kha/audio2/ogg/vorbis/data/Mapping.hx",lineNumber:22,className:"kha.audio2.ogg.vorbis.data.Mapping",methodName:"read"}));var n=new Array(e);a.chan=n;for(var s=0,r=e;s<r;){var o=s++;a.chan[o]=new Ve}if(0!=t.readBits(1)?a.submaps=t.readBits(4)+1:a.submaps=1,0!=t.readBits(1)){a.couplingSteps=t.readBits(8)+1;for(var l=0,_=a.couplingSteps;l<_;){var h=l++,c=e-1,g=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];a.chan[h].magnitude=t.readBits(c<16384?c<16?g[c]:c<512?5+g[c>>5]:10+g[c>>10]:c<16777216?c<524288?15+g[c>>15]:20+g[c>>20]:c<536870912?25+g[c>>25]:c<-2147483648?30+g[c>>30]:0);var u=e-1,f=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];if(a.chan[h].angle=t.readBits(u<16384?u<16?f[u]:u<512?5+f[u>>5]:10+f[u>>10]:u<16777216?u<524288?15+f[u>>15]:20+f[u>>20]:u<536870912?25+f[u>>25]:u<-2147483648?30+f[u>>30]:0),a.chan[h].magnitude>=e)throw new Ot(new Pe(Je.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Mapping.hx",lineNumber:46,className:"kha.audio2.ogg.vorbis.data.Mapping",methodName:"read"}));if(a.chan[h].angle>=e)throw new Ot(new Pe(Je.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Mapping.hx",lineNumber:49,className:"kha.audio2.ogg.vorbis.data.Mapping",methodName:"read"}));if(a.chan[h].magnitude==a.chan[h].angle)throw new Ot(new Pe(Je.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Mapping.hx",lineNumber:52,className:"kha.audio2.ogg.vorbis.data.Mapping",methodName:"read"}))}}else a.couplingSteps=0;if(0!=t.readBits(2))throw new Ot(new Pe(Je.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Mapping.hx",lineNumber:61,className:"kha.audio2.ogg.vorbis.data.Mapping",methodName:"read"}));if(1<a.submaps)for(var d=0,b=e;d<b;){var p=d++;if(a.chan[p].mux=t.readBits(4),a.chan[p].mux>=a.submaps)throw new Ot(new Pe(Je.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Mapping.hx",lineNumber:67,className:"kha.audio2.ogg.vorbis.data.Mapping",methodName:"read"}))}else for(var m=0,I=e;m<I;){var v=m++;a.chan[v].mux=0}var M=new Array(a.submaps);a.submapFloor=M;var C=new Array(a.submaps);a.submapResidue=C;for(var y=0,w=a.submaps;y<w;){var A=y++;t.readBits(8),a.submapFloor[A]=t.readBits(8),a.submapResidue[A]=t.readBits(8)}return a},Le.prototype={couplingSteps:null,chan:null,submaps:null,submapFloor:null,submapResidue:null,doFloor:function(t,e,a,i,n,s){var r=a>>1,o=this.chan[e].mux,l=t[this.submapFloor[o]];if(0==l.type)throw new Ot(new Pe(Je.INVALID_STREAM,null,{fileName:"kha/audio2/ogg/vorbis/data/Mapping.hx",lineNumber:94,className:"kha.audio2.ogg.vorbis.data.Mapping",methodName:"doFloor"}));for(var _=l.floor1,h=0,c=n[0]*_.floor1Multiplier,g=1,u=_.values;g<u;){var f=g++,d=_.sortedOrder[f];if(0<=n[d]){var b=n[d]*_.floor1Multiplier,p=_.xlist[d];Ge.drawLine(i,h,c,p,b,r),h=p,c=b}}if(h<r)for(var m=h,I=r;m<I;){var v=m++,M=i;M[v]=M[v]*Ge.INVERSE_DB_TABLE[c]}},__class__:Le};var Ve=function(){};(i["kha.audio2.ogg.vorbis.data.MappingChannel"]=Ve).__name__=!0,Ve.prototype={magnitude:null,angle:null,mux:null,__class__:Ve};var He=function(){};(i["kha.audio2.ogg.vorbis.data.Mode"]=He).__name__=!0,He.read=function(t){var e=new He;if(e.blockflag=0!=t.readBits(1),e.windowtype=t.readBits(16),e.transformtype=t.readBits(16),e.mapping=t.readBits(8),0!=e.windowtype)throw new Ot(new Pe(Je.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Mode.hx",lineNumber:22,className:"kha.audio2.ogg.vorbis.data.Mode",methodName:"read"}));if(0!=e.transformtype)throw new Ot(new Pe(Je.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Mode.hx",lineNumber:25,className:"kha.audio2.ogg.vorbis.data.Mode",methodName:"read"}));return e},He.prototype={blockflag:null,mapping:null,windowtype:null,transformtype:null,__class__:He};var Te=function(){};(i["kha.audio2.ogg.vorbis.data.Page"]=Te).__name__=!0,Te.prototype={flag:null,clone:function(){var t=new Te;return t.flag=this.flag,t},start:function(t){var e,a,i;if(t.inputPosition+=1,79==t.input.readByte()?(t.inputPosition+=1,i=103!=t.input.readByte()):i=!0,i?a=!0:(t.inputPosition+=1,a=103!=t.input.readByte()),a?e=!0:(t.inputPosition+=1,e=83!=t.input.readByte()),e)throw new Ot(new Pe(Je.MISSING_CAPTURE_PATTERN,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:324,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"capturePattern"}));this.startWithoutCapturePattern(t)},startWithoutCapturePattern:function(t){t.inputPosition+=1;var e=t.input.readByte();if(0!=e)throw new Ot(new Pe(Je.INVALID_STREAM_STRUCTURE_VERSION,""+e,{fileName:"kha/audio2/ogg/vorbis/data/Page.hx",lineNumber:34,className:"kha.audio2.ogg.vorbis.data.Page",methodName:"startWithoutCapturePattern"}));t.inputPosition+=1,this.flag=t.input.readByte(),t.inputPosition+=4;var a=t.input.readInt32();t.inputPosition+=4;var i=t.input.readInt32();t.inputPosition+=4,t.input.readInt32(),t.inputPosition+=4,t.input.readInt32(),t.inputPosition+=4,t.input.readInt32(),t.setup(a,i)},__class__:Te};var Re=function(){};(i["kha.audio2.ogg.vorbis.data.ProbedPage"]=Re).__name__=!0,Re.prototype={pageStart:null,pageEnd:null,afterPreviousPageStart:null,firstDecodedSample:null,lastDecodedSample:null,__class__:Re};var Pe=function(t,e,a){null==e&&(e=""),this.type=t,this.message=e,this.posInfos=a};(i["kha.audio2.ogg.vorbis.data.ReaderError"]=Pe).__name__=!0,Pe.prototype={type:null,message:null,posInfos:null,__class__:Pe};var Je=v["kha.audio2.ogg.vorbis.data.ReaderErrorType"]={__ename__:!0,__constructs__:["NEED_MORE_DATA","INVALID_API_MIXING","OUTOFMEM","FEATURE_NOT_SUPPORTED","TOO_MANY_CHANNELS","FILE_OPEN_FAILURE","SEEK_WITHOUT_LENGTH","UNEXPECTED_EOF","SEEK_INVALID","INVALID_SETUP","INVALID_STREAM","MISSING_CAPTURE_PATTERN","INVALID_STREAM_STRUCTURE_VERSION","CONTINUED_PACKET_FLAG_INVALID","INCORRECT_STREAM_SERIAL_NUMBER","INVALID_FIRST_PAGE","BAD_PACKET_TYPE","CANT_FIND_LAST_PAGE","SEEK_FAILED","OTHER"],NEED_MORE_DATA:{_hx_index:0,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:n},INVALID_API_MIXING:{_hx_index:1,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:n},OUTOFMEM:{_hx_index:2,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:n},FEATURE_NOT_SUPPORTED:{_hx_index:3,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:n},TOO_MANY_CHANNELS:{_hx_index:4,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:n},FILE_OPEN_FAILURE:{_hx_index:5,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:n},SEEK_WITHOUT_LENGTH:{_hx_index:6,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:n},UNEXPECTED_EOF:{_hx_index:7,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:n},SEEK_INVALID:{_hx_index:8,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:n},INVALID_SETUP:{_hx_index:9,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:n},INVALID_STREAM:{_hx_index:10,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:n},MISSING_CAPTURE_PATTERN:{_hx_index:11,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:n},INVALID_STREAM_STRUCTURE_VERSION:{_hx_index:12,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:n},CONTINUED_PACKET_FLAG_INVALID:{_hx_index:13,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:n},INCORRECT_STREAM_SERIAL_NUMBER:{_hx_index:14,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:n},INVALID_FIRST_PAGE:{_hx_index:15,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:n},BAD_PACKET_TYPE:{_hx_index:16,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:n},CANT_FIND_LAST_PAGE:{_hx_index:17,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:n},SEEK_FAILED:{_hx_index:18,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:n},OTHER:{_hx_index:19,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:n}},Ee=function(){};(i["kha.audio2.ogg.vorbis.data.Residue"]=Ee).__name__=!0,Ee.read=function(t,e){var a=new Ee;if(a.type=t.readBits(16),2<a.type)throw new Ot(new Pe(Je.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Residue.hx",lineNumber:29,className:"kha.audio2.ogg.vorbis.data.Residue",methodName:"read"}));var i=new Array(64);a.begin=t.readBits(24),a.end=t.readBits(24),a.partSize=t.readBits(24)+1;var n=a.classifications=t.readBits(6)+1;a.classbook=t.readBits(8);for(var s=0,r=a.classifications;s<r;){var o=s++,l=0,_=t.readBits(3);0!=t.readBits(1)&&(l=t.readBits(5)),i[o]=8*l+_}var h=new Array(a.classifications);a.residueBooks=h;for(var c=0,g=a.classifications;c<g;){var u=c++,f=a.residueBooks,d=new Array(8);f[u]=d;for(var b=0;b<8;){var p=b++;if(0!=(i[u]&1<<p)){if(a.residueBooks[u][p]=t.readBits(8),a.residueBooks[u][p]>=e.length)throw new Ot(new Pe(Je.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Residue.hx",lineNumber:55,className:"kha.audio2.ogg.vorbis.data.Residue",methodName:"read"}))}else a.residueBooks[u][p]=-1}}var m=e[a.classbook].entries,I=e[a.classbook].dimensions,v=new Array(m);a.classdata=v;for(var M=0,C=m;M<C;)for(var y=M++,w=y,A=I,x=a.classdata,Z=new Array(I),z=x[y]=Z;0<=--A;)z[A]=w%n,w=w/n|0;return a},Ee.prototype={begin:null,end:null,partSize:null,classifications:null,classbook:null,classdata:null,residueBooks:null,type:null,decode:function(t,e,a,i,n,s,r){for(var o=e.codebooks,l=o[this.classbook].dimensions,_=this.end-this.begin,h=this.partSize,c=Xt.toFloat(_)/Xt.toFloat(h)|0,g=new Array(e.channel*c+1),u=0,f=i;u<f;){var d=u++;if(!s[d])for(var b=a[d],p=0,m=b.length;p<m;){b[p++]=0}}if(2!=this.type||1==i)for(var I=0;I<8;)for(var v=I++,M=0;M<c;){if(0==v)for(var C=0,y=i;C<y;){var w=C++;if(!s[w]){var A=o[this.classbook];t.validBits<10&&t.prepHuffman();var x,Z=A.fastHuffman[1023&t.acc];if(0<=Z){var z=A.codewordLengths[Z];t.acc=t.acc>>>z,t.validBits-=z,t.validBits<0?(t.validBits=0,x=-1):x=Z}else x=t.decodeScalarRaw(A);A.sparse&&(x=A.sortedValues[x]);var B=x;if(-1==B)return;for(var N=l;0<=--N;)g[w*c+N+M]=B%this.classifications,B=B/this.classifications|0}}for(var G=0,k=l;G<k;){G++;if(c<=M)break;for(var S=0,W=i;S<W;){var X=S++;if(!s[X]){var Y=g[X*c+M],D=this.residueBooks[Y][v];if(0<=D){var K=a[X],L=this.begin+M*h,V=h;if(!o[D].residueDecode(t,K,L,V,this.type))return}}}++M}}else{for(var H=0,j=i;H<j;){var T=H++;if(!s[T])break;if(T==i-1)return}for(var R=0;R<8;){var F=R++,O=0;if(2==i)for(;O<c;){var P=this.begin+O*h,J=1&P,E=P>>>1;if(0==F){var U=o[this.classbook];t.validBits<10&&t.prepHuffman();var Q,q=U.fastHuffman[1023&t.acc];if(0<=q){var $=U.codewordLengths[q];t.acc=t.acc>>>$,t.validBits-=$,t.validBits<0?(t.validBits=0,Q=-1):Q=q}else Q=t.decodeScalarRaw(U);U.sparse&&(Q=U.sortedValues[Q]);var tt=Q;if(-1==tt)return;for(var et=l;0<=--et;)g[et+O]=tt%this.classifications,tt=tt/this.classifications|0}for(var at=0,it=l;at<it;){at++;if(c<=O)break;var nt=this.begin+O*h,st=g[O],rt=this.residueBooks[st][F];if(0<=rt){var ot=o[rt].decodeDeinterleaveRepeat(t,a,i,J,E,n,h);if(null==ot)return;J=ot.cInter,E=ot.pInter}else J=1&(nt+=h),E=nt>>>1;++O}}else if(1==i)for(;O<c;){var lt=0,_t=this.begin+O*h;if(0==F){var ht=o[this.classbook];t.validBits<10&&t.prepHuffman();var ct,gt=ht.fastHuffman[1023&t.acc];if(0<=gt){var ut=ht.codewordLengths[gt];t.acc=t.acc>>>ut,t.validBits-=ut,t.validBits<0?(t.validBits=0,ct=-1):ct=gt}else ct=t.decodeScalarRaw(ht);ht.sparse&&(ct=ht.sortedValues[ct]);var ft=ct;if(-1==ft)return;for(var dt=l;0<=--dt;)g[dt+O]=ft%this.classifications,ft=ft/this.classifications|0}for(var bt=0,pt=l;bt<pt;){bt++;if(c<=O)break;var mt=this.begin+O*h,It=this.residueBooks[g[O]][F];if(0<=It){var vt=o[It].decodeDeinterleaveRepeat(t,a,i,lt,_t,n,h);if(null==vt)return;lt=vt.cInter,_t=vt.pInter}else lt=0,_t=mt+=h;++O}}else for(;O<c;){var Mt=this.begin+O*h,Ct=Xt.toFloat(Mt)%Xt.toFloat(i)|0,yt=Xt.toFloat(Mt)/Xt.toFloat(i)|0;if(0==F){var wt=o[this.classbook];t.validBits<10&&t.prepHuffman();var At,xt=wt.fastHuffman[1023&t.acc];if(0<=xt){var Zt=wt.codewordLengths[xt];t.acc=t.acc>>>Zt,t.validBits-=Zt,t.validBits<0?(t.validBits=0,At=-1):At=xt}else At=t.decodeScalarRaw(wt);wt.sparse&&(At=wt.sortedValues[At]);var zt=At;if(-1==zt)return;for(var Bt=l;0<=--Bt;)g[Bt+O]=zt%this.classifications,zt=zt/this.classifications|0}for(var Nt=0,Gt=l;Nt<Gt;){Nt++;if(c<=O)break;var kt=this.begin+O*h,St=this.residueBooks[g[O]][F];if(0<=St){var Wt=o[St].decodeDeinterleaveRepeat(t,a,i,Ct,yt,n,h);if(null==Wt)return;Ct=Wt.cInter,yt=Wt.pInter}else kt+=h,Ct=Xt.toFloat(kt)%Xt.toFloat(i)|0,yt=Xt.toFloat(kt)/Xt.toFloat(i)|0;++O}}}}},__class__:Ee};var Ue=function(){};(i["kha.graphics1.Graphics"]=Ue).__name__=!0;var Qe=function(){this.transformations=[],this.transformations.push(new Mt(1,0,0,0,1,0,0,0,1)),this.opacities=[],this.opacities.push(1),this.myFontSize=12,this.pipe=null};(i["kha.graphics2.Graphics"]=Qe).__name__=!0,Qe.prototype={begin:function(t,e){null==t&&(t=!0)},end:function(){},fillRect:function(t,e,a,i){},set_color:function(t){return-16777216},get_fontSize:function(){return this.myFontSize},get_opacity:function(){return this.opacities[this.opacities.length-1]},pipe:null,transformations:null,opacities:null,myFontSize:null,__class__:Qe,__properties__:{get_opacity:"get_opacity",get_fontSize:"get_fontSize",set_color:"set_color"}};var qe=function(t){this.canvas=t};(i["kha.graphics2.Graphics1"]=qe).__name__=!0,qe.__interfaces__=[Ue],qe.prototype={canvas:null,__class__:qe};v["kha.graphics2.ImageScaleQuality"]={__ename__:!0,__constructs__:["Low","High"],Low:{_hx_index:0,__enum__:"kha.graphics2.ImageScaleQuality",toString:n},High:{_hx_index:1,__enum__:"kha.graphics2.ImageScaleQuality",toString:n}};var $e=function(){};(i["kha.graphics2.truetype.VectorOfIntPointer"]=$e).__name__=!0,$e.prototype={value:null,__class__:$e};var ta=function(){};(i["kha.graphics2.truetype.Stbtt_temp_rect"]=ta).__name__=!0,ta.prototype={x0:null,y0:null,x1:null,y1:null,__class__:ta};var ea=function(){};(i["kha.graphics2.truetype.Stbtt_temp_glyph_h_metrics"]=ea).__name__=!0,ea.prototype={advanceWidth:null,leftSideBearing:null,__class__:ea};var aa=function(){};(i["kha.graphics2.truetype.Stbtt_temp_font_v_metrics"]=aa).__name__=!0,aa.prototype={ascent:null,descent:null,lineGap:null,__class__:aa};var ia=function(){};(i["kha.graphics2.truetype.Stbtt_bakedchar"]=ia).__name__=!0,ia.prototype={x0:null,y0:null,x1:null,y1:null,xoff:null,yoff:null,xadvance:null,__class__:ia};var na=function(){};(i["kha.graphics2.truetype.Stbtt_fontinfo"]=na).__name__=!0,na.prototype={data:null,fontstart:null,numGlyphs:null,loca:null,head:null,glyf:null,hhea:null,hmtx:null,kern:null,index_map:null,indexToLocFormat:null,__class__:na};var ra=function(){};(i["kha.graphics2.truetype.Stbtt_vertex"]=ra).__name__=!0,ra.prototype={x:null,y:null,cx:null,cy:null,type:null,__class__:ra};var oa=function(){};(i["kha.graphics2.truetype.Stbtt__bitmap"]=oa).__name__=!0,oa.prototype={w:null,h:null,stride:null,pixels:null,pixels_offset:null,__class__:oa};var la=function(){};(i["kha.graphics2.truetype.Stbtt__edge"]=la).__name__=!0,la.prototype={x0:null,y0:null,x1:null,y1:null,invert:null,__class__:la};var _a=function(){};(i["kha.graphics2.truetype.Stbtt__active_edge"]=_a).__name__=!0,_a.prototype={next:null,fx:null,fdx:null,fdy:null,direction:null,sy:null,ey:null,__class__:_a};var ha=function(){};(i["kha.graphics2.truetype.Stbtt__point"]=ha).__name__=!0,ha.prototype={x:null,y:null,__class__:ha};var ca=function(){};(i["kha.graphics2.truetype.StbTruetype"]=ca).__name__=!0,ca.stbtt__find_table=function(t,e,a){for(var i=e+4,n=t.readU8(i),s=e+12,r=0,o=t.readU8(i+1)|n<<8;r<o;){var l=s+16*r++,_=q.cca(a,0),h=q.cca(a,1),c=q.cca(a,2),g=q.cca(a,3);if(t.readU8(l)==_&&t.readU8(l+1)==h&&t.readU8(l+2)==c&&t.readU8(l+3)==g){var u=l+8,f=t.readU8(u),d=t.readU8(u+1),b=t.readU8(u+2);return t.readU8(u+3)|b<<8|d<<16|f<<24}}return 0},ca.stbtt_InitFont=function(t,e,a){t.data=e,t.fontstart=a;var i=ca.stbtt__find_table(e,a,"cmap");if(t.loca=ca.stbtt__find_table(e,a,"loca"),t.head=ca.stbtt__find_table(e,a,"head"),t.glyf=ca.stbtt__find_table(e,a,"glyf"),t.hhea=ca.stbtt__find_table(e,a,"hhea"),t.hmtx=ca.stbtt__find_table(e,a,"hmtx"),t.kern=ca.stbtt__find_table(e,a,"kern"),0==i||0==t.loca||0==t.head||0==t.glyf||0==t.hhea||0==t.hmtx)return!1;var n=ca.stbtt__find_table(e,a,"maxp");if(0!=n){var s=n+4,r=e.readU8(s),o=e.readU8(s+1);t.numGlyphs=o|r<<8}else t.numGlyphs=65535;for(var l=i+2,_=e.readU8(l),h=e.readU8(l+1)|_<<8,c=t.index_map=0,g=h;c<g;){var u=i+4+8*c++,f=e.readU8(u);switch(e.readU8(u+1)|f<<8){case 0:var d=u+4,b=e.readU8(d),p=e.readU8(d+1),m=e.readU8(d+2),I=e.readU8(d+3);t.index_map=i+(I|m<<8|p<<16|b<<24);break;case 3:var v=u+2,M=e.readU8(v);switch(e.readU8(v+1)|M<<8){case 1:case 10:var C=u+4,y=e.readU8(C),w=e.readU8(C+1),A=e.readU8(C+2),x=e.readU8(C+3);t.index_map=i+(x|A<<8|w<<16|y<<24)}}}if(0==t.index_map)return!1;var Z=t.head+50,z=e.readU8(Z),B=e.readU8(Z+1);return t.indexToLocFormat=B|z<<8,!0},ca.stbtt_FindGlyphIndex=function(t,e){var a=t.data,i=t.index_map,n=a.readU8(i),s=a.readU8(i+1)|n<<8;if(0==s){var r=i+2,o=a.readU8(r);return e<(a.readU8(r+1)|o<<8)-6?a.readU8(i+6+e):0}if(6==s){var l=i+6,_=a.readU8(l),h=a.readU8(l+1)|_<<8,c=i+8,g=a.readU8(c),u=a.readU8(c+1);if(h<=e&&e<h+(u|g<<8)){var f=i+10+2*(e-h),d=a.readU8(f);return a.readU8(f+1)|d<<8}return 0}if(2==s)throw new Ot("Error");if(4==s){var b=i+6,p=a.readU8(b),m=(a.readU8(b+1)|p<<8)>>1,I=i+8,v=a.readU8(I),M=(a.readU8(I+1)|v<<8)>>1,C=i+10,y=a.readU8(C),w=a.readU8(C+1)|y<<8,A=i+12,x=a.readU8(A),Z=(a.readU8(A+1)|x<<8)>>1,z=i+14,B=z;if(65535<e)return 0;var N=B+2*Z,G=a.readU8(N);for((a.readU8(N+1)|G<<8)<=e&&(B+=2*Z),B-=2;0!=w;){var k=B+2*(M>>=1),S=a.readU8(k);(a.readU8(k+1)|S<<8)<e&&(B+=2*M),--w}var W=(B+=2)-z>>1,X=z+2*W,Y=a.readU8(X);if((a.readU8(X+1)|Y<<8)<e)throw new Ot("Error");var D=i+14+2*m+2+2*W,K=a.readU8(D),L=a.readU8(D+1)|K<<8;if(e<L)return 0;var V=i+14+6*m+2+2*W,H=a.readU8(V),j=a.readU8(V+1)|H<<8;if(0==j){var T=i+14+4*m+2+2*W,R=a.readU8(T),F=a.readU8(T+1)|R<<8;return e+(0!=(32768&F)?F-65536:F)}var O=j+2*(e-L)+i+14+6*m+2+2*W,P=a.readU8(O);return a.readU8(O+1)|P<<8}if(12==s||13==s){for(var J=i+12,E=a.readU8(J),U=a.readU8(J+1),Q=a.readU8(J+2),q=0,$=a.readU8(J+3)|Q<<8|U<<16|E<<24;q<$;){var tt=q+($-q>>1),et=i+16+12*tt,at=a.readU8(et),it=a.readU8(et+1),nt=a.readU8(et+2),st=a.readU8(et+3)|nt<<8|it<<16|at<<24,rt=i+16+12*tt+4,ot=a.readU8(rt),lt=a.readU8(rt+1),_t=a.readU8(rt+2),ht=a.readU8(rt+3);if(e<st)$=tt;else{if(!((ht|_t<<8|lt<<16|ot<<24)<e)){var ct=i+16+12*tt+8,gt=a.readU8(ct),ut=a.readU8(ct+1),ft=a.readU8(ct+2),dt=a.readU8(ct+3)|ft<<8|ut<<16|gt<<24;return 12==s?dt+e-st:dt}q=tt+1}}return 0}throw new Ot("Error")},ca.stbtt_setvertex=function(t,e,a,i,n,s){t.type=e,t.x=a,t.y=i,t.cx=n,t.cy=s},ca.stbtt__GetGlyfOffset=function(t,e){var a,i;if(e>=t.numGlyphs)return-1;if(2<=t.indexToLocFormat)return-1;if(0==t.indexToLocFormat){var n=t.glyf,s=t.data,r=t.loca+2*e,o=s.readU8(r);a=n+2*(s.readU8(r+1)|o<<8);var l=t.glyf,_=t.data,h=t.loca+2*e+2,c=_.readU8(h);i=l+2*(_.readU8(h+1)|c<<8)}else{var g=t.glyf,u=t.data,f=t.loca+4*e,d=u.readU8(f),b=u.readU8(f+1),p=u.readU8(f+2);a=g+(u.readU8(f+3)|p<<8|b<<16|d<<24);var m=t.glyf,I=t.data,v=t.loca+4*e+4,M=I.readU8(v),C=I.readU8(v+1),y=I.readU8(v+2);i=m+(I.readU8(v+3)|y<<8|C<<16|M<<24)}return a==i?-1:a},ca.stbtt_GetGlyphBox=function(t,e,a){var i=ca.stbtt__GetGlyfOffset(t,e);if(i<0)return!1;var n=t.data,s=i+2,r=n.readU8(s),o=n.readU8(s+1)|r<<8;a.x0=0!=(32768&o)?o-65536:o;var l=t.data,_=i+4,h=l.readU8(_),c=l.readU8(_+1)|h<<8;a.y0=0!=(32768&c)?c-65536:c;var g=t.data,u=i+6,f=g.readU8(u),d=g.readU8(u+1)|f<<8;a.x1=0!=(32768&d)?d-65536:d;var b=t.data,p=i+8,m=b.readU8(p),I=b.readU8(p+1)|m<<8;return a.y1=0!=(32768&I)?I-65536:I,!0},ca.stbtt__close_shape=function(t,e,a,i,n,s,r,o,l,_){return i?(a&&ca.stbtt_setvertex(t[e++],3,l+r>>1,_+o>>1,l,_),ca.stbtt_setvertex(t[e++],3,n,s,r,o)):a?ca.stbtt_setvertex(t[e++],3,n,s,l,_):ca.stbtt_setvertex(t[e++],2,n,s,0,0),e},ca.copyVertices=function(t,e,a,i){for(var n=0,s=i;n<s;){var r=n++;e[a+r]=t[r]}},ca.stbtt_GetGlyphShape=function(t,e){var a,i=t.data,n=null,s=0,r=ca.stbtt__GetGlyfOffset(t,e);if(r<0)return null;var o=i.readU8(r),l=i.readU8(r+1)|o<<8,_=0!=(32768&l)?l-65536:l;if(0<_){var h,c=0,g=0,u=0,f=!1,d=!1,b=0;a=i.sub(r+10,i.get_length()-(r+10));var p=r+10+2*_,m=i.readU8(p),I=i.readU8(p+1)|m<<8,v=i.sub(r+10+2*_+2+I,i.get_length()-(r+10+2*_+2+I)),M=2*_-2,C=a.readU8(M),y=1+(a.readU8(M+1)|C<<8),w=y+2*_;if(null==(n=new Array(w)))return null;for(var A=0,x=n.length;A<x;){n[A++]=new ra}var Z=u=0;h=w-y;for(var z=0,B=y;z<B;){var N=z++;0==Z?0!=(8&(c=v.readU8(b++)))&&(Z=v.readU8(b++)):--Z,n[h+N].type=c}for(var G=0,k=0,S=y;k<S;){var W=k++;if(0!=(2&(c=n[h+W].type))){var X=v.readU8(b++);G+=0!=(16&c)?X:-X}else if(0==(16&c)){var Y=v.readU8(b),D=v.readU8(b+1)|Y<<8;G+=0!=(32768&D)?D-65536:D,b+=2}n[h+W].x=G}for(var K=0,L=0,V=y;L<V;){var H=L++;if(0!=(4&(c=n[h+H].type))){var j=v.readU8(b++);K+=0!=(32&c)?j:-j}else if(0==(32&c)){var T=v.readU8(b),R=v.readU8(b+1)|T<<8;K+=0!=(32768&R)?R-65536:R,b+=2}n[h+H].y=K}for(var F=s=0,O=F,P=O,J=P,E=J,U=E,Q=0;Q<y;){if(c=n[h+Q].type,G=n[h+Q].x,K=n[h+Q].y,u==Q){0!=Q&&(s=ca.stbtt__close_shape(n,s,f,d,U,E,O,F,J,P)),(d=0==(1&c))?(O=G,F=K,0==(1&n[h+Q+1].type)?(U=G+n[h+Q+1].x>>1,E=K+n[h+Q+1].y>>1):(U=n[h+Q+1].x,E=n[h+Q+1].y,++Q)):(U=G,E=K),ca.stbtt_setvertex(n[s++],1,U,E,0,0),f=!1;var q=2*g,$=a.readU8(q);u=1+(a.readU8(q+1)|$<<8),++g}else 0==(1&c)?(f&&ca.stbtt_setvertex(n[s++],3,J+G>>1,P+K>>1,J,P),J=G,P=K,f=!0):(f?ca.stbtt_setvertex(n[s++],3,G,K,J,P):ca.stbtt_setvertex(n[s++],2,G,K,0,0),f=!1);++Q}s=ca.stbtt__close_shape(n,s,f,d,U,E,O,F,J,P)}else if(-1==_){var tt=1,et=i.sub(r+10,i.get_length()-(r+10)),at=0;for(s=0,n=null;0!=tt;){var it,nt,st=null,rt=1,ot=0,lt=0,_t=1,ht=0,ct=0,gt=et.readU8(at),ut=et.readU8(at+1)|gt<<8,ft=0!=(32768&ut)?ut-65536:ut;at+=2;var dt=et.readU8(at),bt=et.readU8(at+1)|dt<<8,pt=0!=(32768&bt)?bt-65536:bt;if(at+=2,0==(2&ft))throw new Ot("Error");if(0!=(1&ft)){var mt=et.readU8(at),It=et.readU8(at+1)|mt<<8;ht=0!=(32768&It)?It-65536:It,at+=2;var vt=et.readU8(at),Mt=et.readU8(at+1)|vt<<8;ct=0!=(32768&Mt)?Mt-65536:Mt,at+=2}else{var Ct=et.readU8(at);ht=128<=Ct?Ct-256:Ct,++at;var yt=et.readU8(at);ct=128<=yt?yt-256:yt,++at}if(0!=(8&ft)){var wt=et.readU8(at),At=et.readU8(at+1)|wt<<8;rt=_t=(0!=(32768&At)?At-65536:At)/16384,at+=2,ot=lt=0}else if(0!=(64&ft)){var xt=et.readU8(at),Zt=et.readU8(at+1)|xt<<8;rt=(0!=(32768&Zt)?Zt-65536:Zt)/16384,at+=2,ot=lt=0;var zt=et.readU8(at),Bt=et.readU8(at+1)|zt<<8;_t=(0!=(32768&Bt)?Bt-65536:Bt)/16384,at+=2}else if(0!=(128&ft)){var Nt=et.readU8(at),Gt=et.readU8(at+1)|Nt<<8;rt=(0!=(32768&Gt)?Gt-65536:Gt)/16384,at+=2;var kt=et.readU8(at),St=et.readU8(at+1)|kt<<8;ot=(0!=(32768&St)?St-65536:St)/16384,at+=2;var Wt=et.readU8(at),Xt=et.readU8(at+1)|Wt<<8;lt=(0!=(32768&Xt)?Xt-65536:Xt)/16384,at+=2;var Yt=et.readU8(at),Dt=et.readU8(at+1)|Yt<<8;_t=(0!=(32768&Dt)?Dt-65536:Dt)/16384,at+=2}var Kt=Math.sqrt(rt*rt+ot*ot),Lt=Math.sqrt(lt*lt+_t*_t);if(0<(it=null==(nt=ca.stbtt_GetGlyphShape(t,pt))?0:nt.length)){for(var Vt=0,Ht=it;Vt<Ht;){var jt=nt[Vt++],Tt=jt.x,Rt=jt.y;jt.x=Kt*(rt*Tt+lt*Rt+ht)|0,jt.y=Lt*(ot*Tt+_t*Rt+ct)|0,Tt=jt.cx,Rt=jt.cy,jt.cx=Kt*(rt*Tt+lt*Rt+ht)|0,jt.cy=Lt*(ot*Tt+_t*Rt+ct)|0}if(null==(st=new Array(s+it)))return null;0<s&&ca.copyVertices(n,st,0,s),ca.copyVertices(nt,st,s,it),n=st,s+=it}tt=32&ft}}else if(_<0)throw new Ot("Error");if(null==n)return null;if(n.length<s)throw new Ot("Error");if(s<n.length){var Ft=new Array(s);return ca.copyVertices(n,Ft,0,s),Ft}return n},ca.stbtt_GetGlyphHMetrics=function(t,e){var a=t.data,i=t.hhea+34,n=a.readU8(i),s=a.readU8(i+1)|n<<8,r=new ea;if(e<s){var o=t.data,l=t.hmtx+4*e,_=o.readU8(l),h=o.readU8(l+1)|_<<8;r.advanceWidth=0!=(32768&h)?h-65536:h;var c=t.data,g=t.hmtx+4*e+2,u=c.readU8(g),f=c.readU8(g+1)|u<<8;r.leftSideBearing=0!=(32768&f)?f-65536:f}else{var d=t.data,b=t.hmtx+4*(s-1),p=d.readU8(b),m=d.readU8(b+1)|p<<8;r.advanceWidth=0!=(32768&m)?m-65536:m;var I=t.data,v=t.hmtx+4*s+2*(e-s),M=I.readU8(v),C=I.readU8(v+1)|M<<8;r.leftSideBearing=0!=(32768&C)?C-65536:C}return r},ca.stbtt_GetFontVMetrics=function(t){var e=new aa,a=t.data,i=t.hhea+4,n=a.readU8(i),s=a.readU8(i+1)|n<<8;e.ascent=0!=(32768&s)?s-65536:s;var r=t.data,o=t.hhea+6,l=r.readU8(o),_=r.readU8(o+1)|l<<8;e.descent=0!=(32768&_)?_-65536:_;var h=t.data,c=t.hhea+8,g=h.readU8(c),u=h.readU8(c+1)|g<<8;return e.lineGap=0!=(32768&u)?u-65536:u,e},ca.stbtt_ScaleForPixelHeight=function(t,e){var a=t.data,i=t.hhea+4,n=a.readU8(i),s=a.readU8(i+1)|n<<8,r=t.data,o=t.hhea+6,l=r.readU8(o),_=r.readU8(o+1)|l<<8;return e/((0!=(32768&s)?s-65536:s)-(0!=(32768&_)?_-65536:_))},ca.stbtt_GetGlyphBitmapBoxSubpixel=function(t,e,a,i,n,s){var r=new ta;if(ca.stbtt_GetGlyphBox(t,e,r)){var o=r.x0,l=r.x1,_=r.y0,h=r.y1;r.x0=Math.floor(o*a+n),r.y0=Math.floor(-h*i+s),r.x1=Math.ceil(l*a+n),r.y1=Math.ceil(-_*i+s)}else r.x0=0,r.y0=0,r.x1=0,r.y1=0;return r},ca.stbtt_GetGlyphBitmapBox=function(t,e,a,i){return ca.stbtt_GetGlyphBitmapBoxSubpixel(t,e,a,i,0,0)},ca.stbtt__new_active=function(t,e,a,i){var n=new _a,s=(t[e].x1-t[e].x0)/(t[e].y1-t[e].y0);return null==n||(n.fdx=s,n.fdy=0!=s?1/s:0,n.fx=t[e].x0+s*(i-t[e].y0),n.fx-=a,n.direction=t[e].invert?1:-1,n.sy=t[e].y0,n.ey=t[e].y1,n.next=null),n},ca.stbtt__handle_clipped_edge=function(t,e,a,i,n,s,r,o){if(s!=o){if(!(s<o))throw new Ot("Error");if(!(i.sy<=i.ey))throw new Ot("Error");if(!(s>i.ey||o<i.sy)){if(s<i.sy&&(n+=(r-n)*(i.sy-s)/(o-s),s=i.sy),o>i.ey&&(r+=(r-n)*(i.ey-o)/(o-s),o=i.ey),n==a){if(!(r<=a+1))throw new Ot("Error")}else if(n==a+1){if(!(a<=r))throw new Ot("Error")}else if(n<=a){if(!(r<=a))throw new Ot("Error")}else if(a+1<=n){if(!(a+1<=r))throw new Ot("Error")}else if(!(a<=r&&r<=a+1))throw new Ot("Error");if(n<=a&&r<=a){var l=e+a,_=t;_[l]=_[l]+i.direction*(o-s)}else if(!(a+1<=n&&a+1<=r)){if(!(a<=n&&n<=a+1&&a<=r&&r<=a+1))throw new Ot("Error");var h=e+a,c=t;c[h]=c[h]+i.direction*(o-s)*(1-(n-a+(r-a))/2)}}}},ca.stbtt__fill_active_edges_new=function(t,e,a,i,n,s){for(var r=s+1;null!=n;){if(!(n.ey>=s))throw new Ot("Error");if(0==n.fdx){var o=n.fx;o<i&&(0<=o?(ca.stbtt__handle_clipped_edge(t,0,0|o,n,o,s,o,r),ca.stbtt__handle_clipped_edge(e,a-1,o+1|0,n,o,s,o,r)):ca.stbtt__handle_clipped_edge(e,a-1,0,n,o,s,o,r))}else{var l,_,h,c,g=n.fx,u=n.fdx,f=g+u,d=n.fdy;if(!(n.sy<=r&&n.ey>=s))throw new Ot("Error");if(n.sy>s?(l=g+u*(n.sy-s),h=n.sy):(l=g,h=s),n.ey<r?(_=g+u*(n.ey-s),c=n.ey):(_=f,c=r),0<=l&&0<=_&&l<i&&_<i)if((0|l)==(0|_)){var b=0|l,p=c-h;if(!(0<=b&&b<i))throw new Ot("Error");var m=b,I=t;I[m]=I[m]+n.direction*(1-(l-b+(_-b))/2)*p;var v=a+b,M=e;M[v]=M[v]+n.direction*p}else{if(_<l){var C=h=r-(h-s);h=c=r-(c-s),c=C,C=_,_=l,l=C,u=-u,d=-d,C=g,g=f,f=C}var y=0|l,w=0|_,A=(y+1-g)*d+s,x=n.direction,Z=x*(A-h),z=y,B=t;B[z]=B[z]+Z*(1-(l-y+(y+1-y))/2);for(var N=x*d,G=y+1,k=w;G<k;){var S=G++,W=t;W[S]=W[S]+(Z+N/2),Z+=N}if(A+=d*(w-(y+1)),!(Math.abs(Z)<=1.01))throw new Ot("Error");var X=w,Y=t;Y[X]=Y[X]+(Z+x*(1-(w-w+(_-w))/2)*(c-A));var D=a+w,K=e;K[D]=K[D]+x*(c-h)}else for(var L=0,V=i;L<V;){var H=L++,j=s,T=H,R=H+1,F=f,O=r,P=(H-g)/u+s,J=(H+1-g)/u+s;g<T&&R<F?(ca.stbtt__handle_clipped_edge(t,0,H,n,g,j,T,P),ca.stbtt__handle_clipped_edge(t,0,H,n,T,P,R,J),ca.stbtt__handle_clipped_edge(t,0,H,n,R,J,F,O)):F<T&&R<g?(ca.stbtt__handle_clipped_edge(t,0,H,n,g,j,R,J),ca.stbtt__handle_clipped_edge(t,0,H,n,R,J,T,P),ca.stbtt__handle_clipped_edge(t,0,H,n,T,P,F,O)):g<T&&T<F?(ca.stbtt__handle_clipped_edge(t,0,H,n,g,j,T,P),ca.stbtt__handle_clipped_edge(t,0,H,n,T,P,F,O)):F<T&&T<g?(ca.stbtt__handle_clipped_edge(t,0,H,n,g,j,T,P),ca.stbtt__handle_clipped_edge(t,0,H,n,T,P,F,O)):g<R&&R<F?(ca.stbtt__handle_clipped_edge(t,0,H,n,g,j,R,J),ca.stbtt__handle_clipped_edge(t,0,H,n,R,J,F,O)):F<R&&R<g?(ca.stbtt__handle_clipped_edge(t,0,H,n,g,j,R,J),ca.stbtt__handle_clipped_edge(t,0,H,n,R,J,F,O)):ca.stbtt__handle_clipped_edge(t,0,H,n,g,j,F,O)}}n=n.next}},ca.stbtt__rasterize_sorted_edges=function(t,e,a,i,n,s){var r,o,l=null,_=0,h=0;64<t.w?r=new Array(2*t.w+1):r=new Array(129);var c=r;o=t.w;var g=s;for(e[h+a].y0=s+t.h+1;_<t.h;){for(var u=g+0,f=g+1,d=l,b=null,p=0,m=t.w;p<m;){r[p++]=0}for(var I=0,v=t.w+1;I<v;){c[o+I++]=0}for(;null!=d;){var M=d;if(M.ey<=u){if(null==b?l=M.next:b.next=M.next,d=M.next,0==M.direction)throw new Ot("Error");M.direction=0}else d=(b=d).next}for(;e[h].y0<=f;){if(e[h].y0!=e[h].y1){var C=ca.stbtt__new_active(e,h,n,u);if(!(C.ey>=u))throw new Ot("Error");C.next=l,l=C}++h}null!=l&&ca.stbtt__fill_active_edges_new(r,c,o+1,t.w,l,u);for(var y=0,w=0,A=t.w;w<A;){var x=w++;y+=c[o+x];var Z=r[x]+y,z=0|(Z=255*Math.abs(Z)+.5);255<z&&(z=255),t.pixels.writeU8(t.pixels_offset+_*t.stride+x,z)}for(b=null,d=l;null!=d;){var B=d;B.fx+=B.fdx,d=(b=d).next}++g,++_}},ca.STBTT__COMPARE=function(t,e){return t.y0<e.y0},ca.stbtt__sort_edges_ins_sort=function(t,e){for(var a,i=1,n=e;i<n;){var s=i++,r=t[s],o=r;for(a=s;0<a;){var l=t[a-1];if(!ca.STBTT__COMPARE(o,l))break;t[a]=t[a-1],--a}s!=a&&(t[a]=r)}},ca.stbtt__sort_edges_quicksort=function(t,e,a){for(;12<a;){var i,n=a>>1,s=ca.STBTT__COMPARE(t[e],t[e+n]),r=ca.STBTT__COMPARE(t[e+n],t[e+a-1]);if(s!=r){var o=ca.STBTT__COMPARE(t[e],t[e+a-1])==r?0:a-1;i=t[e+o],t[e+o]=t[e+n],t[e+n]=i}i=t[e],t[e]=t[e+n],t[e+n]=i;for(var l=1,_=a-1;;){for(;ca.STBTT__COMPARE(t[e+l],t[e]);)++l;for(;ca.STBTT__COMPARE(t[e],t[e+_]);)--_;if(_<=l)break;i=t[e+l],t[e+l]=t[e+_],t[e+_]=i,++l,--_}_<a-l?(ca.stbtt__sort_edges_quicksort(t,e,_),e+=l,a-=l):(ca.stbtt__sort_edges_quicksort(t,e+l,a-l),a=_)}},ca.stbtt__sort_edges=function(t,e){ca.stbtt__sort_edges_quicksort(t,0,e),ca.stbtt__sort_edges_ins_sort(t,e)},ca.stbtt__rasterize=function(t,e,a,i,n,s,r,o,l,_,h){for(var c,g=h?-s:s,u=0,f=0,d=i;f<d;){u+=a[f++]}var b=new Array(u+1);if(null!=b){for(var p=0,m=b.length;p<m;){b[p++]=new la}for(var I=u=0,v=0,M=i;v<M;){var C=v++,y=e,w=0+I;I+=a[C],c=a[C]-1;for(var A=0,x=a[C];A<x;){var Z=A++,z=Z,B=c;y[w+c].y!=y[w+Z].y?(b[u].invert=!1,(h?y[w+c].y>y[w+Z].y:y[w+c].y<y[w+Z].y)&&(b[u].invert=!0,z=c,B=Z),b[u].x0=y[w+z].x*n+r,b[u].y0=1*(y[w+z].y*g+o),b[u].x1=y[w+B].x*n+r,b[u].y1=1*(y[w+B].y*g+o),++u,c=Z):c=Z}}ca.stbtt__sort_edges(b,u),ca.stbtt__rasterize_sorted_edges(t,b,u,1,l,_)}},ca.stbtt__add_point=function(t,e,a,i){null!=t&&(t[e].x=a,t[e].y=i)},ca.stbtt__tesselate_curve=function(t,e,a,i,n,s,r,o,l,_){var h=(a+2*n+r)/4,c=(i+2*s+o)/4,g=(a+r)/2-h,u=(i+o)/2-c;return 16<_||(l<g*g+u*u?(ca.stbtt__tesselate_curve(t,e,a,i,(a+n)/2,(i+s)/2,h,c,l,_+1),ca.stbtt__tesselate_curve(t,e,h,c,(n+r)/2,(s+o)/2,r,o,l,_+1)):(ca.stbtt__add_point(t,e.value,r,o),e.value+=1)),1},ca.stbtt_FlattenCurves=function(t,e,a,i,n){for(var s=null,r=0,o=a*a,l=0,_=0,h=0,c=e;h<c;){1==t[h++].type&&++l}if(0==(n.value=l))return null;var g=new Array(l);if(i.value=g,null==i.value)return n.value=0,null;for(var u=0;u<2;){var f=0,d=0;if(1==u++){if(null==(s=new Array(r)))return i.value=null,n.value=0,null;for(var b=0,p=s.length;b<p;){s[b++]=new ha}}l=-1;for(var m=r=0,I=e;m<I;){var v=m++;switch(t[v].type){case 1:0<=l&&(i.value[l]=r-_),++l,_=r,f=t[v].x,d=t[v].y,ca.stbtt__add_point(s,r++,f,d);break;case 2:f=t[v].x,d=t[v].y,ca.stbtt__add_point(s,r++,f,d);break;case 3:var M={value:r};ca.stbtt__tesselate_curve(s,M,f,d,t[v].cx,t[v].cy,t[v].x,t[v].y,o,0),r=M.value,f=t[v].x,d=t[v].y}}i.value[l]=r-_}return s},ca.stbtt_Rasterize=function(t,e,a,i,n,s,r,o,l,_,h){var c,g=s<n?s:n,u=0,f={value:u},d=new $e,b=ca.stbtt_FlattenCurves(a,i,e/g,d,f);u=f.value,c=d.value,null!=b&&ca.stbtt__rasterize(t,b,c,u,n,s,r,o,l,_,h)},ca.stbtt_MakeGlyphBitmapSubpixel=function(t,e,a,i,n,s,r,o,l,_,h){var c,g,u=ca.stbtt_GetGlyphShape(t,h),f=null==u?0:u.length,d=new oa,b=ca.stbtt_GetGlyphBitmapBoxSubpixel(t,h,r,o,l,_);c=b.x0,g=b.y0,d.pixels=e,d.pixels_offset=a,d.w=i,d.h=n,d.stride=s,0!=d.w&&0!=d.h&&ca.stbtt_Rasterize(d,.35,u,f,r,o,l,_,c,g,!0)},ca.stbtt_MakeGlyphBitmap=function(t,e,a,i,n,s,r,o,l){ca.stbtt_MakeGlyphBitmapSubpixel(t,e,a,i,n,s,r,o,0,0,l)},ca.stbtt_BakeFontBitmap=function(t,e,a,i,n,s,r,o){var l=new na;if(!ca.stbtt_InitFont(l,t,e))return-1;for(var _=0,h=n*s;_<h;){var c=_++;i.writeU8(c,0)}for(var g=1,u=g,f=1,d=ca.stbtt_ScaleForPixelHeight(l,a),b=0,p=0;p<r.length;){var m=r[p];++p;var I=ca.stbtt_FindGlyphIndex(l,m),v=ca.stbtt_GetGlyphHMetrics(l,I),M=v.advanceWidth,C=(v.leftSideBearing,ca.stbtt_GetGlyphBitmapBox(l,I,d,d)),y=C.x0,w=C.y0,A=C.x1-y,x=C.y1-w;if(n<=u+A+1&&(g=f,u=1),s<=g+x+1)return-b;if(n<=u+A)throw new Ot("Error");if(s<=g+x)throw new Ot("Error");ca.stbtt_MakeGlyphBitmap(l,i,u+g*n,A,x,n,d,d,I),o[b].x0=u,o[b].y0=g,o[b].x1=u+A,o[b].y1=g+x,o[b].xadvance=d*M,o[b].xoff=y,o[b].yoff=w,u=u+A+1,f<g+x+1&&(f=g+x+1),++b}return f};var ga=v["kha.graphics4.BlendingFactor"]={__ename__:!0,__constructs__:["Undefined","BlendOne","BlendZero","SourceAlpha","DestinationAlpha","InverseSourceAlpha","InverseDestinationAlpha","SourceColor","DestinationColor","InverseSourceColor","InverseDestinationColor"],Undefined:{_hx_index:0,__enum__:"kha.graphics4.BlendingFactor",toString:n},BlendOne:{_hx_index:1,__enum__:"kha.graphics4.BlendingFactor",toString:n},BlendZero:{_hx_index:2,__enum__:"kha.graphics4.BlendingFactor",toString:n},SourceAlpha:{_hx_index:3,__enum__:"kha.graphics4.BlendingFactor",toString:n},DestinationAlpha:{_hx_index:4,__enum__:"kha.graphics4.BlendingFactor",toString:n},InverseSourceAlpha:{_hx_index:5,__enum__:"kha.graphics4.BlendingFactor",toString:n},InverseDestinationAlpha:{_hx_index:6,__enum__:"kha.graphics4.BlendingFactor",toString:n},SourceColor:{_hx_index:7,__enum__:"kha.graphics4.BlendingFactor",toString:n},DestinationColor:{_hx_index:8,__enum__:"kha.graphics4.BlendingFactor",toString:n},InverseSourceColor:{_hx_index:9,__enum__:"kha.graphics4.BlendingFactor",toString:n},InverseDestinationColor:{_hx_index:10,__enum__:"kha.graphics4.BlendingFactor",toString:n}},ua=v["kha.graphics4.BlendingOperation"]={__ename__:!0,__constructs__:["Add","Subtract","ReverseSubtract","Min","Max"],Add:{_hx_index:0,__enum__:"kha.graphics4.BlendingOperation",toString:n},Subtract:{_hx_index:1,__enum__:"kha.graphics4.BlendingOperation",toString:n},ReverseSubtract:{_hx_index:2,__enum__:"kha.graphics4.BlendingOperation",toString:n},Min:{_hx_index:3,__enum__:"kha.graphics4.BlendingOperation",toString:n},Max:{_hx_index:4,__enum__:"kha.graphics4.BlendingOperation",toString:n}},da=v["kha.graphics4.CompareMode"]={__ename__:!0,__constructs__:["Always","Never","Equal","NotEqual","Less","LessEqual","Greater","GreaterEqual"],Always:{_hx_index:0,__enum__:"kha.graphics4.CompareMode",toString:n},Never:{_hx_index:1,__enum__:"kha.graphics4.CompareMode",toString:n},Equal:{_hx_index:2,__enum__:"kha.graphics4.CompareMode",toString:n},NotEqual:{_hx_index:3,__enum__:"kha.graphics4.CompareMode",toString:n},Less:{_hx_index:4,__enum__:"kha.graphics4.CompareMode",toString:n},LessEqual:{_hx_index:5,__enum__:"kha.graphics4.CompareMode",toString:n},Greater:{_hx_index:6,__enum__:"kha.graphics4.CompareMode",toString:n},GreaterEqual:{_hx_index:7,__enum__:"kha.graphics4.CompareMode",toString:n}},ba=function(){};(i["kha.graphics4.ConstantLocation"]=ba).__name__=!0;var pa=function(t,e,a,i){this.isDepthAttachment=!1,this.depthTexture=null,this.texture=null,this.frameBuffer=null,this.myWidth=t,this.myHeight=t,this.format=e,this.renderTarget=a,this.depthStencilFormat=i,a&&this.createTexture()};(i["kha.graphics4.CubeMap"]=pa).__name__=!0,pa.__interfaces__=[Rt,Tt],pa.createRenderTarget=function(t,e,a,i){return null==i&&(i=0),null==e&&(e=Xa.RGBA32),null==a&&(a=0),new pa(t,e,!0,a)},pa.prototype={myWidth:null,myHeight:null,format:null,renderTarget:null,depthStencilFormat:null,graphics4:null,frameBuffer:null,texture:null,depthTexture:null,isDepthAttachment:null,createTexture:function(){if(null!=he.gl){if(this.texture=he.gl.createTexture(),he.gl.bindTexture(34067,this.texture),he.gl.texParameteri(34067,10240,9729),he.gl.texParameteri(34067,10241,9729),he.gl.texParameteri(34067,10242,33071),he.gl.texParameteri(34067,10243,33071),this.renderTarget){switch(this.frameBuffer=he.gl.createFramebuffer(),he.gl.bindFramebuffer(36160,this.frameBuffer),this.format._hx_index){case 0:for(var t=0;t<6;){var e=t++;he.gl.texImage2D(34069+e,0,6408,this.myWidth,this.myHeight,0,6408,5121,null)}break;case 2:for(var a=0;a<6;){var i=a++;he.gl.texImage2D(34069+i,0,he.gl2?34836:6408,this.myWidth,this.myHeight,0,6408,5126,null)}break;case 3:for(var n=0;n<6;){var s=n++;he.gl.texImage2D(34069+s,0,he.gl2?33189:6402,this.myWidth,this.myHeight,0,6402,5123,null)}break;case 4:for(var r=0;r<6;){var o=r++;he.gl.texImage2D(34069+o,0,he.gl2?34842:6408,this.myWidth,this.myHeight,0,6408,he.halfFloat.HALF_FLOAT_OES,null)}break;case 5:for(var l=0;l<6;){var _=l++;he.gl.texImage2D(34069+_,0,he.gl2?33326:6406,this.myWidth,this.myHeight,0,6406,5126,null)}break;case 6:for(var h=0;h<6;){var c=h++;he.gl.texImage2D(34069+c,0,he.gl2?33325:6406,this.myWidth,this.myHeight,0,6406,he.halfFloat.HALF_FLOAT_OES,null)}break;default:for(var g=0;g<6;){var u=g++;he.gl.texImage2D(34069+u,0,6408,this.myWidth,this.myHeight,0,6408,5121,null)}}if(this.format==Xa.DEPTH16&&(he.gl.texParameteri(34067,10240,9728),he.gl.texParameteri(34067,10241,9728),this.isDepthAttachment=!0,!he.gl2)){var f=he.gl.createTexture();he.gl.bindTexture(34067,f);for(var d=0;d<6;){var b=d++;he.gl.texImage2D(34069+b,0,6408,this.myWidth,this.myHeight,0,6408,5121,null),he.gl.framebufferTexture2D(36160,36064,34069+b,f,0)}he.gl.bindTexture(34067,this.texture)}this.initDepthStencilBuffer(this.depthStencilFormat),he.gl.bindFramebuffer(36160,null)}he.gl.bindTexture(34067,null)}},initDepthStencilBuffer:function(t){switch(t){case 0:break;case 1:case 5:this.depthTexture=he.gl.createTexture(),he.gl.bindTexture(34067,this.depthTexture),1==t?he.gl.texImage2D(34067,0,he.gl2?33190:6402,this.myWidth,this.myHeight,0,6402,5125,null):he.gl.texImage2D(34067,0,he.gl2?33189:6402,this.myWidth,this.myHeight,0,6402,5123,null),he.gl.texParameteri(34067,10240,9728),he.gl.texParameteri(34067,10241,9728),he.gl.texParameteri(34067,10242,33071),he.gl.texParameteri(34067,10243,33071),he.gl.bindFramebuffer(36160,this.frameBuffer),he.gl.framebufferTexture2D(36160,36096,34067,this.depthTexture,0);break;case 2:case 3:case 4:this.depthTexture=he.gl.createTexture(),he.gl.bindTexture(34067,this.depthTexture),he.gl.texImage2D(34067,0,he.gl2?35056:34041,this.myWidth,this.myHeight,0,34041,he.depthTexture.UNSIGNED_INT_24_8_WEBGL,null),he.gl.texParameteri(34067,10240,9728),he.gl.texParameteri(34067,10241,9728),he.gl.texParameteri(34067,10242,33071),he.gl.texParameteri(34067,10243,33071),he.gl.bindFramebuffer(36160,this.frameBuffer),he.gl.framebufferTexture2D(36160,33306,34067,this.depthTexture,0)}},set:function(t){he.gl.activeTexture(33984+t),he.gl.bindTexture(34067,this.texture)},setDepth:function(t){he.gl.activeTexture(33984+t),he.gl.bindTexture(34067,this.depthTexture)},get_width:function(){return this.myWidth},get_height:function(){return this.myHeight},get_g4:function(){return null==this.graphics4&&(this.graphics4=new li(this)),this.graphics4},__class__:pa,__properties__:{get_g4:"get_g4",get_height:"get_height",get_width:"get_width"}};var ma=v["kha.graphics4.CullMode"]={__ename__:!0,__constructs__:["Clockwise","CounterClockwise","None"],Clockwise:{_hx_index:0,__enum__:"kha.graphics4.CullMode",toString:n},CounterClockwise:{_hx_index:1,__enum__:"kha.graphics4.CullMode",toString:n},None:{_hx_index:2,__enum__:"kha.graphics4.CullMode",toString:n}},Ia=function(t,e){this.sources=[];for(var a=0;a<t.length;){var i=t[a];++a,this.sources.push(i.toString())}this.type=35632,this.shader=null,this.files=e};(i["kha.graphics4.FragmentShader"]=Ia).__name__=!0,Ia.fromSource=function(t){var e=new Ia([],["runtime-string"]);return e.sources.push(t),e},Ia.prototype={sources:null,type:null,shader:null,files:null,__class__:Ia};var va=function(){};(i["kha.graphics4.GeometryShader"]=va).__name__=!0;var Ma=function(){};(i["kha.graphics4.Graphics"]=Ma).__name__=!0,Ma.prototype={begin:null,beginFace:null,end:null,clear:null,viewport:null,scissor:null,disableScissor:null,setVertexBuffer:null,setVertexBuffers:null,setIndexBuffer:null,setTexture:null,setTextureDepth:null,setImageTexture:null,setTextureParameters:null,setTexture3DParameters:null,setCubeMap:null,setCubeMapDepth:null,renderTargetsInvertedY:null,setPipeline:null,setBool:null,setInt:null,setFloat:null,setFloat2:null,setFloat3:null,setFloat4:null,setFloats:null,setMatrix:null,setMatrix3:null,drawIndexedVertices:null,drawIndexedVerticesInstanced:null,__class__:Ma};var Ca=function(t){this.myPipeline=null,this.bilinearMipmaps=!1,this.bilinear=!1,this.g=t,Ca.bufferIndex=0,Ca.initShaders(),this.initBuffers(),this.projectionLocation=Ca.shaderPipeline.getConstantLocation("projectionMatrix"),this.textureLocation=Ca.shaderPipeline.getTextureUnit("tex")};(i["kha.graphics4.ImageShaderPainter"]=Ca).__name__=!0,Ca.initShaders=function(){null==Ca.structure&&(Ca.structure=Aa.createImageVertexStructure()),null==Ca.shaderPipeline&&(Ca.shaderPipeline=Aa.createImagePipeline(Ca.structure),Ca.shaderPipeline.compile())},Ca.prototype={projectionMatrix:null,bilinear:null,bilinearMipmaps:null,g:null,myPipeline:null,projectionLocation:null,textureLocation:null,get_pipeline:function(){return this.myPipeline},setProjection:function(t){this.projectionMatrix=t},initBuffers:function(){if(null==Ca.rectVertexBuffer){Ca.rectVertexBuffer=new Ka(6e3,Ca.structure,Da.DynamicUsage),Ca.rectVertices=Ca.rectVertexBuffer.lock(),Ca.indexBuffer=new xa(9e3,Da.StaticUsage);for(var t=Ca.indexBuffer.lock(),e=0;e<1500;){var a=e++;t[3*a*2]=4*a,t[3*a*2+1]=4*a+1,t[3*a*2+2]=4*a+2,t[3*a*2+3]=4*a,t[3*a*2+4]=4*a+2,t[3*a*2+5]=4*a+3}Ca.indexBuffer.unlock()}},drawBuffer:function(){Ca.rectVertexBuffer.unlock(),this.g.setVertexBuffer(Ca.rectVertexBuffer),this.g.setIndexBuffer(Ca.indexBuffer),this.g.setPipeline(null==this.get_pipeline()?Ca.shaderPipeline:this.get_pipeline()),this.g.setTexture(this.textureLocation,Ca.lastTexture),this.g.setTextureParameters(this.textureLocation,Sa.Clamp,Sa.Clamp,this.bilinear?Wa.LinearFilter:Wa.PointFilter,this.bilinear?Wa.LinearFilter:Wa.PointFilter,this.bilinearMipmaps?Za.LinearMipFilter:Za.NoMipFilter),this.g.setMatrix(this.projectionLocation,this.projectionMatrix),this.g.drawIndexedVertices(0,2*Ca.bufferIndex*3),this.g.setTexture(this.textureLocation,null),Ca.bufferIndex=0,Ca.rectVertices=Ca.rectVertexBuffer.lock()},end:function(){0<Ca.bufferIndex&&this.drawBuffer(),Ca.lastTexture=null},__class__:Ca,__properties__:{get_pipeline:"get_pipeline"}};var ya=function(t){this.myPipeline=null,this.g=t,ya.bufferIndex=0,ya.triangleBufferIndex=0,ya.initShaders(),this.initBuffers(),this.projectionLocation=ya.shaderPipeline.getConstantLocation("projectionMatrix")};(i["kha.graphics4.ColoredShaderPainter"]=ya).__name__=!0,ya.initShaders=function(){null==ya.structure&&(ya.structure=Aa.createColoredVertexStructure()),null==ya.shaderPipeline&&(ya.shaderPipeline=Aa.createColoredPipeline(ya.structure),ya.shaderPipeline.compile())},ya.prototype={projectionMatrix:null,g:null,myPipeline:null,projectionLocation:null,get_pipeline:function(){return this.myPipeline},setProjection:function(t){this.projectionMatrix=t},initBuffers:function(){if(null==ya.rectVertexBuffer){ya.rectVertexBuffer=new Ka(400,ya.structure,Da.DynamicUsage),ya.rectVertices=ya.rectVertexBuffer.lock(),ya.indexBuffer=new xa(600,Da.StaticUsage);for(var t=ya.indexBuffer.lock(),e=0;e<100;){var a=e++;t[3*a*2]=4*a,t[3*a*2+1]=4*a+1,t[3*a*2+2]=4*a+2,t[3*a*2+3]=4*a,t[3*a*2+4]=4*a+2,t[3*a*2+5]=4*a+3}ya.indexBuffer.unlock(),ya.triangleVertexBuffer=new Ka(300,ya.structure,Da.DynamicUsage),ya.triangleVertices=ya.triangleVertexBuffer.lock(),ya.triangleIndexBuffer=new xa(300,Da.StaticUsage);for(var i=ya.triangleIndexBuffer.lock(),n=0;n<100;){var s=n++;i[3*s]=3*s,i[3*s+1]=3*s+1,i[3*s+2]=3*s+2}ya.triangleIndexBuffer.unlock()}},setRectVertices:function(t,e,a,i,n,s,r,o){var l=7*ya.bufferIndex*4;ya.rectVertices[l]=t,ya.rectVertices[l+1]=e,ya.rectVertices[l+2]=-5,ya.rectVertices[l+7]=a,ya.rectVertices[l+8]=i,ya.rectVertices[l+9]=-5,ya.rectVertices[l+14]=n,ya.rectVertices[l+15]=s,ya.rectVertices[l+16]=-5,ya.rectVertices[l+21]=r,ya.rectVertices[l+22]=o,ya.rectVertices[l+23]=-5},setRectColors:function(t,e){var a=7*ya.bufferIndex*4,i=t*(.00392156862745098*(e>>>24));ya.rectVertices[a+3]=.00392156862745098*((16711680&e)>>>16),ya.rectVertices[a+4]=.00392156862745098*((65280&e)>>>8),ya.rectVertices[a+5]=.00392156862745098*(255&e),ya.rectVertices[a+6]=i,ya.rectVertices[a+10]=.00392156862745098*((16711680&e)>>>16),ya.rectVertices[a+11]=.00392156862745098*((65280&e)>>>8),ya.rectVertices[a+12]=.00392156862745098*(255&e),ya.rectVertices[a+13]=i,ya.rectVertices[a+17]=.00392156862745098*((16711680&e)>>>16),ya.rectVertices[a+18]=.00392156862745098*((65280&e)>>>8),ya.rectVertices[a+19]=.00392156862745098*(255&e),ya.rectVertices[a+20]=i,ya.rectVertices[a+24]=.00392156862745098*((16711680&e)>>>16),ya.rectVertices[a+25]=.00392156862745098*((65280&e)>>>8),ya.rectVertices[a+26]=.00392156862745098*(255&e),ya.rectVertices[a+27]=i},drawBuffer:function(t){t||0<ya.triangleBufferIndex&&this.drawTriBuffer(!0),ya.rectVertexBuffer.unlock(),this.g.setVertexBuffer(ya.rectVertexBuffer),this.g.setIndexBuffer(ya.indexBuffer),this.g.setPipeline(null==this.get_pipeline()?ya.shaderPipeline:this.get_pipeline()),this.g.setMatrix(this.projectionLocation,this.projectionMatrix),this.g.drawIndexedVertices(0,2*ya.bufferIndex*3),ya.bufferIndex=0,ya.rectVertices=ya.rectVertexBuffer.lock()},drawTriBuffer:function(t){t||0<ya.bufferIndex&&this.drawBuffer(!0),ya.triangleVertexBuffer.unlock(),this.g.setVertexBuffer(ya.triangleVertexBuffer),this.g.setIndexBuffer(ya.triangleIndexBuffer),this.g.setPipeline(null==this.get_pipeline()?ya.shaderPipeline:this.get_pipeline()),this.g.setMatrix(this.projectionLocation,this.projectionMatrix),this.g.drawIndexedVertices(0,3*ya.triangleBufferIndex),ya.triangleBufferIndex=0,ya.triangleVertices=ya.triangleVertexBuffer.lock()},fillRect:function(t,e,a,i,n,s,r,o,l,_){0<ya.triangleBufferIndex&&this.drawTriBuffer(!0),100<=ya.bufferIndex+1&&this.drawBuffer(!1),this.setRectColors(t,e),this.setRectVertices(a,i,n,s,r,o,l,_),++ya.bufferIndex},__class__:ya,__properties__:{get_pipeline:"get_pipeline"}};var wa=function(t){this.bilinear=!1,this.myPipeline=null,this.g=t,wa.bufferIndex=0,wa.initShaders(),this.initBuffers(),this.projectionLocation=wa.shaderPipeline.getConstantLocation("projectionMatrix"),this.textureLocation=wa.shaderPipeline.getTextureUnit("tex")};(i["kha.graphics4.TextShaderPainter"]=wa).__name__=!0,wa.initShaders=function(){null==wa.structure&&(wa.structure=Aa.createTextVertexStructure()),null==wa.shaderPipeline&&(wa.shaderPipeline=Aa.createTextPipeline(wa.structure),wa.shaderPipeline.compile())},wa.prototype={projectionMatrix:null,g:null,myPipeline:null,projectionLocation:null,textureLocation:null,fontSize:null,bilinear:null,get_pipeline:function(){return this.myPipeline},setProjection:function(t){this.projectionMatrix=t},initBuffers:function(){if(null==wa.rectVertexBuffer){wa.rectVertexBuffer=new Ka(400,wa.structure,Da.DynamicUsage),wa.rectVertices=wa.rectVertexBuffer.lock(),wa.indexBuffer=new xa(600,Da.StaticUsage);for(var t=wa.indexBuffer.lock(),e=0;e<100;){var a=e++;t[3*a*2]=4*a,t[3*a*2+1]=4*a+1,t[3*a*2+2]=4*a+2,t[3*a*2+3]=4*a,t[3*a*2+4]=4*a+2,t[3*a*2+5]=4*a+3}wa.indexBuffer.unlock()}},drawBuffer:function(){wa.rectVertexBuffer.unlock(),this.g.setVertexBuffer(wa.rectVertexBuffer),this.g.setIndexBuffer(wa.indexBuffer),this.g.setPipeline(null==this.get_pipeline()?wa.shaderPipeline:this.get_pipeline()),this.g.setTexture(this.textureLocation,wa.lastTexture),this.g.setMatrix(this.projectionLocation,this.projectionMatrix),this.g.setTextureParameters(this.textureLocation,Sa.Clamp,Sa.Clamp,this.bilinear?Wa.LinearFilter:Wa.PointFilter,this.bilinear?Wa.LinearFilter:Wa.PointFilter,Za.NoMipFilter),this.g.drawIndexedVertices(0,2*wa.bufferIndex*3),this.g.setTexture(this.textureLocation,null),wa.bufferIndex=0,wa.rectVertices=wa.rectVertexBuffer.lock()},end:function(){0<wa.bufferIndex&&this.drawBuffer(),wa.lastTexture=null},__class__:wa,__properties__:{get_pipeline:"get_pipeline"}};var Aa=function(t){Qe.call(this),this.set_color(-1),this.canvas=t,this.g=t.get_g4(),this.imagePainter=new Ca(this.g),this.coloredPainter=new ya(this.g),this.textPainter=new wa(this.g),this.textPainter.fontSize=this.get_fontSize(),this.setProjection(),null==Aa.videoPipeline&&(Aa.videoPipeline=Aa.createImagePipeline(Aa.createImageVertexStructure()),Aa.videoPipeline.fragmentShader=Ne.painter_video_frag,Aa.videoPipeline.vertexShader=Ne.painter_video_vert,Aa.videoPipeline.compile())};(i["kha.graphics4.Graphics2"]=Aa).__name__=!0,Aa.upperPowerOfTwo=function(t){return--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,++t},Aa.createImageVertexStructure=function(){var t=new Ha;return t.add("vertexPosition",2),t.add("texPosition",1),t.add("vertexColor",3),t},Aa.createImagePipeline=function(t){var e=new Ba;return e.fragmentShader=Ne.painter_image_frag,e.vertexShader=Ne.painter_image_vert,e.inputLayout=[t],e.blendSource=ga.BlendOne,e.blendDestination=ga.InverseSourceAlpha,e.alphaBlendSource=ga.BlendOne,e.alphaBlendDestination=ga.InverseSourceAlpha,e},Aa.createColoredVertexStructure=function(){var t=new Ha;return t.add("vertexPosition",2),t.add("vertexColor",3),t},Aa.createColoredPipeline=function(t){var e=new Ba;return e.fragmentShader=Ne.painter_colored_frag,e.vertexShader=Ne.painter_colored_vert,e.inputLayout=[t],e.blendSource=ga.SourceAlpha,e.blendDestination=ga.InverseSourceAlpha,e.alphaBlendSource=ga.SourceAlpha,e.alphaBlendDestination=ga.InverseSourceAlpha,e},Aa.createTextVertexStructure=function(){var t=new Ha;return t.add("vertexPosition",2),t.add("texPosition",1),t.add("vertexColor",3),t},Aa.createTextPipeline=function(t){var e=new Ba;return e.fragmentShader=Ne.painter_text_frag,e.vertexShader=Ne.painter_text_vert,e.inputLayout=[t],e.blendSource=ga.SourceAlpha,e.blendDestination=ga.InverseSourceAlpha,e.alphaBlendSource=ga.SourceAlpha,e.alphaBlendDestination=ga.InverseSourceAlpha,e},Aa.__super__=Qe,Aa.prototype=s(Qe.prototype,{myColor:null,projectionMatrix:null,imagePainter:null,coloredPainter:null,textPainter:null,canvas:null,g:null,setProjection:function(){var t=this.canvas.get_width(),e=this.canvas.get_height();this.canvas instanceof te?this.projectionMatrix=ct.orthogonalProjection(0,t,e,0,.1,1e3):(Ft.get_nonPow2Supported()||(t=Aa.upperPowerOfTwo(t),e=Aa.upperPowerOfTwo(e)),this.g.renderTargetsInvertedY()?this.projectionMatrix=ct.orthogonalProjection(0,t,0,e,.1,1e3):this.projectionMatrix=ct.orthogonalProjection(0,t,e,0,.1,1e3)),this.imagePainter.setProjection(this.projectionMatrix),this.coloredPainter.setProjection(this.projectionMatrix),this.textPainter.setProjection(this.projectionMatrix)},get_color:function(){return this.myColor},set_color:function(t){return this.myColor=t},fillRect:function(t,e,a,i){this.imagePainter.end(),this.textPainter.end();var n=this.transformations[this.transformations.length-1],s=t,r=e+i,o=n._02*s+n._12*r+n._22,l=(n._00*s+n._10*r+n._20)/o,_=(n._01*s+n._11*r+n._21)/o,h=this.transformations[this.transformations.length-1],c=t,g=e,u=h._02*c+h._12*g+h._22,f=(h._00*c+h._10*g+h._20)/u,d=(h._01*c+h._11*g+h._21)/u,b=this.transformations[this.transformations.length-1],p=t+a,m=e,I=b._02*p+b._12*m+b._22,v=(b._00*p+b._10*m+b._20)/I,M=(b._01*p+b._11*m+b._21)/I,C=this.transformations[this.transformations.length-1],y=t+a,w=e+i,A=C._02*y+C._12*w+C._22,x=(C._00*y+C._10*w+C._20)/A,Z=(C._01*y+C._11*w+C._21)/A;this.coloredPainter.fillRect(this.get_opacity(),this.get_color(),l,_,f,d,v,M,x,Z)},begin:function(t,e){null==t&&(t=!0),this.g.begin(),t&&this.clear(e),this.setProjection()},clear:function(t){this.flush(),this.g.clear(null==t?-16777216:t)},flush:function(){this.imagePainter.end(),this.textPainter.end();var t=this.coloredPainter;0<ya.triangleBufferIndex&&t.drawTriBuffer(!1),0<ya.bufferIndex&&t.drawBuffer(!1)},end:function(){this.flush(),this.g.end()},__class__:Aa});var xa=function(t,e,a){null==a&&(a=!1),this.usage=e,this.mySize=t,this.buffer=he.gl.createBuffer();var i=new Uint32Array(t);this._data=i};(i["kha.graphics4.IndexBuffer"]=xa).__name__=!0,xa.prototype={buffer:null,_data:null,mySize:null,usage:null,lock:function(t,e){return null==t&&(t=0),null==e&&(e=this.mySize),this._data.subarray(t,t+e)},unlock:function(){he.gl.bindBuffer(34963,this.buffer);var t=null==he.elementIndexUint?new Uint16Array(this._data):this._data;he.gl.bufferData(34963,t,this.usage==Da.DynamicUsage?35048:35044)},set:function(){he.gl.bindBuffer(34963,this.buffer)},count:function(){return this.mySize},__class__:xa};var Za=v["kha.graphics4.MipMapFilter"]={__ename__:!0,__constructs__:["NoMipFilter","PointMipFilter","LinearMipFilter"],NoMipFilter:{_hx_index:0,__enum__:"kha.graphics4.MipMapFilter",toString:n},PointMipFilter:{_hx_index:1,__enum__:"kha.graphics4.MipMapFilter",toString:n},LinearMipFilter:{_hx_index:2,__enum__:"kha.graphics4.MipMapFilter",toString:n}},za=function(){this.inputLayout=null,this.vertexShader=null,this.fragmentShader=null,this.geometryShader=null,this.tessellationControlShader=null,this.tessellationEvaluationShader=null,this.cullMode=ma.None,this.depthWrite=!1,this.depthMode=da.Always,this.stencilMode=da.Always,this.stencilBothPass=Na.Keep,this.stencilDepthFail=Na.Keep,this.stencilFail=Na.Keep,this.stencilReferenceValue=0,this.stencilReadMask=255,this.stencilWriteMask=255,this.blendSource=ga.BlendOne,this.blendDestination=ga.BlendZero,this.blendOperation=ua.Add,this.alphaBlendSource=ga.BlendOne,this.alphaBlendDestination=ga.BlendZero,this.alphaBlendOperation=ua.Add,this.colorWriteMaskRed=this.colorWriteMaskBlue=this.colorWriteMaskGreen=this.colorWriteMaskAlpha=!0,this.conservativeRasterization=!1};(i["kha.graphics4.PipelineStateBase"]=za).__name__=!0,za.prototype={inputLayout:null,vertexShader:null,fragmentShader:null,geometryShader:null,tessellationControlShader:null,tessellationEvaluationShader:null,cullMode:null,depthWrite:null,depthMode:null,stencilMode:null,stencilBothPass:null,stencilDepthFail:null,stencilFail:null,stencilReferenceValue:null,stencilReadMask:null,stencilWriteMask:null,blendSource:null,blendDestination:null,blendOperation:null,alphaBlendSource:null,alphaBlendDestination:null,alphaBlendOperation:null,colorWriteMaskRed:null,colorWriteMaskGreen:null,colorWriteMaskBlue:null,colorWriteMaskAlpha:null,conservativeRasterization:null,__class__:za};var Ba=function(){this.program=null,za.call(this),this.textures=[],this.textureValues=[]};(i["kha.graphics4.PipelineState"]=Ba).__name__=!0,Ba.__super__=za,Ba.prototype=s(za.prototype,{program:null,textures:null,textureValues:null,delete:function(){null!=this.program&&he.gl.deleteProgram(this.program)},compile:function(){null!=this.program&&he.gl.deleteProgram(this.program),this.program=he.gl.createProgram(),this.compileShader(this.vertexShader),this.compileShader(this.fragmentShader),he.gl.attachShader(this.program,this.vertexShader.shader),he.gl.attachShader(this.program,this.fragmentShader.shader);for(var t=0,e=0,a=this.inputLayout;e<a.length;){var i=a[e];++e;for(var n=0,s=i.elements;n<s.length;){var r=s[n];++n,he.gl.bindAttribLocation(this.program,t,r.name),4==r.data?t+=4:++t}}if(he.gl.linkProgram(this.program),!he.gl.getProgramParameter(this.program,35714))throw new Ot("Could not link the shader program:\n"+he.gl.getProgramInfoLog(this.program))},set:function(){he.gl.useProgram(this.program);for(var t=0,e=this.textureValues.length;t<e;){var a=t++;he.gl.uniform1i(this.textureValues[a],a)}he.gl.colorMask(this.colorWriteMaskRed,this.colorWriteMaskGreen,this.colorWriteMaskBlue,this.colorWriteMaskAlpha)},compileShader:function(t){if(null==t.shader){for(var e=he.gl.createShader(t.type),a=0!=he.gl.getShaderPrecisionFormat(35632,36338).precision,i=t.files,n=0,s=i.length;n<s;){var r=n++;if(he.gl2){if(0<=i[r].indexOf("-webgl2")||0<=i[r].indexOf("runtime-string")){he.gl.shaderSource(e,t.sources[r]);break}}else{if(!a&&(0<=i[r].indexOf("-relaxed")||0<=i[r].indexOf("runtime-string"))){he.gl.shaderSource(e,t.sources[r]);break}if(a&&(i[r].indexOf("-relaxed")<0||0<=i[r].indexOf("runtime-string"))){he.gl.shaderSource(e,t.sources[r]);break}}}if(he.gl.compileShader(e),!he.gl.getShaderParameter(e,35713))throw new Ot("Could not compile shader:\n"+he.gl.getShaderInfoLog(e));t.shader=e}},getConstantLocation:function(t){var e=he.gl.getUniformLocation(this.program,t);null==e&&Oe.trace("Warning: Uniform "+t+" not found.",{fileName:"kha/graphics4/PipelineState.hx",lineNumber:92,className:"kha.graphics4.PipelineState",methodName:"getConstantLocation"});for(var a=5126,i=0,n=he.gl.getProgramParameter(this.program,35718);i<n;){var s=i++,r=he.gl.getActiveUniform(this.program,s);if(r.name==t||r.name==t+"[0]"){a=r.type;break}}return new oi(e,a)},getTextureUnit:function(t){var e=this.findTexture(t);if(e<0){var a=he.gl.getUniformLocation(this.program,t);null==a&&Oe.trace("Warning: Sampler "+t+" not found.",{fileName:"kha/graphics4/PipelineState.hx",lineNumber:111,className:"kha.graphics4.PipelineState",methodName:"getTextureUnit"}),e=this.textures.length,this.textureValues.push(a),this.textures.push(t)}return new hi(e)},findTexture:function(t){for(var e=0,a=this.textures.length;e<a;){var i=e++;if(this.textures[i]==t)return i}return-1},__class__:Ba});var Na=v["kha.graphics4.StencilAction"]={__ename__:!0,__constructs__:["Keep","Zero","Replace","Increment","IncrementWrap","Decrement","DecrementWrap","Invert"],Keep:{_hx_index:0,__enum__:"kha.graphics4.StencilAction",toString:n},Zero:{_hx_index:1,__enum__:"kha.graphics4.StencilAction",toString:n},Replace:{_hx_index:2,__enum__:"kha.graphics4.StencilAction",toString:n},Increment:{_hx_index:3,__enum__:"kha.graphics4.StencilAction",toString:n},IncrementWrap:{_hx_index:4,__enum__:"kha.graphics4.StencilAction",toString:n},Decrement:{_hx_index:5,__enum__:"kha.graphics4.StencilAction",toString:n},DecrementWrap:{_hx_index:6,__enum__:"kha.graphics4.StencilAction",toString:n},Invert:{_hx_index:7,__enum__:"kha.graphics4.StencilAction",toString:n}},Ga=function(){};(i["kha.graphics4.TessellationControlShader"]=Ga).__name__=!0;var ka=function(){};(i["kha.graphics4.TessellationEvaluationShader"]=ka).__name__=!0;var Sa=v["kha.graphics4.TextureAddressing"]={__ename__:!0,__constructs__:["Repeat","Mirror","Clamp"],Repeat:{_hx_index:0,__enum__:"kha.graphics4.TextureAddressing",toString:n},Mirror:{_hx_index:1,__enum__:"kha.graphics4.TextureAddressing",toString:n},Clamp:{_hx_index:2,__enum__:"kha.graphics4.TextureAddressing",toString:n}},Wa=v["kha.graphics4.TextureFilter"]={__ename__:!0,__constructs__:["PointFilter","LinearFilter","AnisotropicFilter"],PointFilter:{_hx_index:0,__enum__:"kha.graphics4.TextureFilter",toString:n},LinearFilter:{_hx_index:1,__enum__:"kha.graphics4.TextureFilter",toString:n},AnisotropicFilter:{_hx_index:2,__enum__:"kha.graphics4.TextureFilter",toString:n}},Xa=v["kha.graphics4.TextureFormat"]={__ename__:!0,__constructs__:["RGBA32","L8","RGBA128","DEPTH16","RGBA64","A32","A16"],RGBA32:{_hx_index:0,__enum__:"kha.graphics4.TextureFormat",toString:n},L8:{_hx_index:1,__enum__:"kha.graphics4.TextureFormat",toString:n},RGBA128:{_hx_index:2,__enum__:"kha.graphics4.TextureFormat",toString:n},DEPTH16:{_hx_index:3,__enum__:"kha.graphics4.TextureFormat",toString:n},RGBA64:{_hx_index:4,__enum__:"kha.graphics4.TextureFormat",toString:n},A32:{_hx_index:5,__enum__:"kha.graphics4.TextureFormat",toString:n},A16:{_hx_index:6,__enum__:"kha.graphics4.TextureFormat",toString:n}},Ya=function(){};(i["kha.graphics4.TextureUnit"]=Ya).__name__=!0;var Da=v["kha.graphics4.Usage"]={__ename__:!0,__constructs__:["StaticUsage","DynamicUsage","ReadableUsage"],StaticUsage:{_hx_index:0,__enum__:"kha.graphics4.Usage",toString:n},DynamicUsage:{_hx_index:1,__enum__:"kha.graphics4.Usage",toString:n},ReadableUsage:{_hx_index:2,__enum__:"kha.graphics4.Usage",toString:n}},Ka=function(t,e,a,i,n){null==n&&(n=!1),null==i&&(i=0),this.usage=a,this.instanceDataStepRate=i,this.mySize=t;for(var s=this.myStride=0,r=e.elements;s<r.length;){var o=r[s];switch(++s,o.data){case 0:this.myStride+=4;break;case 1:this.myStride+=8;break;case 2:this.myStride+=12;break;case 3:this.myStride+=16;break;case 4:this.myStride+=64}}this.buffer=he.gl.createBuffer();var l=new _s(t*this.myStride/4|0);this._data=l,this.sizes=[],this.offsets=[],this.sizes[e.elements.length-1]=0;for(var _=this.offsets[e.elements.length-1]=0,h=0,c=0,g=e.elements;c<g.length;){var u,f=g[c];switch(++c,f.data){case 0:u=1;break;case 1:u=2;break;case 2:u=3;break;case 3:u=4;break;case 4:u=16}switch(this.sizes[h]=u,this.offsets[h]=_,f.data){case 0:_+=4;break;case 1:_+=8;break;case 2:_+=12;break;case 3:_+=16;break;case 4:_+=64}++h}};(i["kha.graphics4.VertexBuffer"]=Ka).__name__=!0,Ka.prototype={buffer:null,_data:null,mySize:null,myStride:null,sizes:null,offsets:null,usage:null,instanceDataStepRate:null,lock:function(t,e){return null==t&&(t=0),null==e&&(e=this.mySize),this._data.subarray(t*this.stride(),(t+e)*this.stride())},unlock:function(){he.gl.bindBuffer(34962,this.buffer),he.gl.bufferData(34962,this._data,this.usage==Da.DynamicUsage?35048:35044)},stride:function(){return this.myStride},set:function(t){var e=!!he.gl2||he.gl.getExtension("ANGLE_instanced_arrays");he.gl.bindBuffer(34962,this.buffer);for(var a=0,i=0,n=this.sizes.length;i<n;){var s=i++;if(4<this.sizes[s])for(var r=this.sizes[s],o=0;0<r;)he.gl.enableVertexAttribArray(t+a),he.gl.vertexAttribPointer(t+a,4,5126,!1,this.myStride,this.offsets[s]+o),e&&(he.gl2?he.gl.vertexAttribDivisor(t+a,this.instanceDataStepRate):e.vertexAttribDivisorANGLE(t+a,this.instanceDataStepRate)),r-=4,o+=16,++a;else he.gl.enableVertexAttribArray(t+a),he.gl.vertexAttribPointer(t+a,this.sizes[s],5126,!1,this.myStride,this.offsets[s]),e&&(he.gl2?he.gl.vertexAttribDivisor(t+a,this.instanceDataStepRate):e.vertexAttribDivisorANGLE(t+a,this.instanceDataStepRate)),++a}return a},__class__:Ka};var La=function(t,e){this.name=t,this.data=e};(i["kha.graphics4.VertexElement"]=La).__name__=!0,La.prototype={name:null,data:null,__class__:La};var Va=function(t,e){this.sources=[];for(var a=0;a<t.length;){var i=t[a];++a,this.sources.push(i.toString())}this.type=35633,this.shader=null,this.files=e};(i["kha.graphics4.VertexShader"]=Va).__name__=!0,Va.fromSource=function(t){var e=new Va([],["runtime-string"]);return e.sources.push(t),e},Va.prototype={sources:null,type:null,shader:null,files:null,__class__:Va};var Ha=function(){this.elements=[],this.instanced=!1};(i["kha.graphics4.VertexStructure"]=Ha).__name__=!0,Ha.prototype={elements:null,instanced:null,add:function(t,e){this.elements.push(new La(t,e))},size:function(){return this.elements.length},byteSize:function(){for(var t=0,e=0,a=this.elements.length;e<a;){var i=e++;t+=this.dataByteSize(this.elements[i].data)}return t},dataByteSize:function(t){switch(t){case 0:return 4;case 1:return 8;case 2:return 12;case 3:return 16;case 4:return 64}},get:function(t){return this.elements[t]},__class__:Ha};var ja=t.kha.input.Gamepad=function(t,e){null==e&&(e="unknown"),null==t&&(t=0),this.index=t,this.axisListeners=[],this.buttonListeners=[],ja.instances[t]=this};(i["kha.input.Gamepad"]=ja).__name__=!0,ja.get=function(t){return null==t&&(t=0),t>=ja.instances.length?null:ja.instances[t]},ja.sendConnectEvent=function(t){ja.instances[t].connected=!0;for(var e=0,a=ja.connectListeners;e<a.length;){var i=a[e];++e,i(t)}},ja.sendDisconnectEvent=function(t){ja.instances[t].connected=!1;for(var e=0,a=ja.disconnectListeners;e<a.length;){var i=a[e];++e,i(t)}},ja.prototype={index:null,notify:function(t,e){null!=t&&this.axisListeners.push(t),null!=e&&this.buttonListeners.push(e)},axisListeners:null,buttonListeners:null,connected:null,sendAxisEvent:function(t,e){for(var a=0,i=this.axisListeners;a<i.length;){var n=i[a];++a,n(t,e)}},sendButtonEvent:function(t,e){for(var a=0,i=this.buttonListeners;a<i.length;){var n=i[a];++a,n(t,e)}},__class__:ja};var Ta=function(){this.__id=fi.nextId++,this._inputBuffer=new nt(new os(1))};(i["kha.network.Controller"]=Ta).__name__=!0,Ta.prototype={__id:null,_inputBufferIndex:null,_inputBuffer:null,_id:function(){return this.__id},__class__:Ta};var Ra=t.kha.input.Keyboard=function(){Ta.call(this),this.downListeners=[],this.upListeners=[],this.pressListeners=[],Ra.instance=this};(i["kha.input.Keyboard"]=Ra).__name__=!0,Ra.get=function(t){return null==t&&(t=0),he.getKeyboard(t)},Ra.__super__=Ta,Ra.prototype=s(Ta.prototype,{notify:function(t,e,a){null!=t&&this.downListeners.push(t),null!=e&&this.upListeners.push(e),null!=a&&this.pressListeners.push(a)},downListeners:null,upListeners:null,pressListeners:null,sendDownEvent:function(t){if(null!=di.the()){var e=new nt(new os(5));e.setInt32(0,0),e.b[4]=255&t,di.the().sendControllerUpdate(this._id(),e)}for(var a=0,i=this.downListeners;a<i.length;){var n=i[a];++a,n(t)}},sendUpEvent:function(t){if(null!=di.the()){var e=new nt(new os(5));e.setInt32(0,1),e.b[4]=255&t,di.the().sendControllerUpdate(this._id(),e)}for(var a=0,i=this.upListeners;a<i.length;){var n=i[a];++a,n(t)}},sendPressEvent:function(t){if(null!=di.the()){var e=new nt(new os(5));e.setInt32(0,2),e.b[4]=255&q.cca(t,0),di.the().sendControllerUpdate(this._id(),e)}for(var a=0,i=this.pressListeners;a<i.length;){var n=i[a];++a,n(t)}},__class__:Ra});var Fa=t.kha.input.Mouse=function(){Ta.call(this),Fa.instance=this};(i["kha.input.Mouse"]=Fa).__name__=!0,Fa.get=function(t){return null==t&&(t=0),he.getMouse(t)},Fa.__super__=Ta,Fa.prototype=s(Ta.prototype,{notify:function(t,e,a,i,n){this.notifyWindowed(0,t,e,a,i,n)},notifyWindowed:function(t,e,a,i,n,s){if(null!=e){for(null==this.windowDownListeners&&(this.windowDownListeners=[]);this.windowDownListeners.length<=t;)this.windowDownListeners.push([]);this.windowDownListeners[t].push(e)}if(null!=a){for(null==this.windowUpListeners&&(this.windowUpListeners=[]);this.windowUpListeners.length<=t;)this.windowUpListeners.push([]);this.windowUpListeners[t].push(a)}if(null!=i){for(null==this.windowMoveListeners&&(this.windowMoveListeners=[]);this.windowMoveListeners.length<=t;)this.windowMoveListeners.push([]);this.windowMoveListeners[t].push(i)}if(null!=n){for(null==this.windowWheelListeners&&(this.windowWheelListeners=[]);this.windowWheelListeners.length<=t;)this.windowWheelListeners.push([]);this.windowWheelListeners[t].push(n)}if(null!=s){for(null==this.windowLeaveListeners&&(this.windowLeaveListeners=[]);this.windowLeaveListeners.length<=t;)this.windowLeaveListeners.push([]);this.windowLeaveListeners[t].push(s)}},windowDownListeners:null,windowUpListeners:null,windowMoveListeners:null,windowWheelListeners:null,windowLeaveListeners:null,sendLeaveEvent:function(t){if(null!=di.the()){var e=new nt(new os(8));e.setInt32(0,0),e.setInt32(4,t),di.the().sendControllerUpdate(this._id(),e)}if(null!=this.windowLeaveListeners)for(var a=0,i=this.windowLeaveListeners[t];a<i.length;){var n=i[a];++a,n()}},sendDownEvent:function(t,e,a,i){if(null!=di.the()){var n=new nt(new os(20));n.setInt32(0,1),n.setInt32(4,t),n.setInt32(8,e),n.setInt32(12,a),n.setInt32(16,i),di.the().sendControllerUpdate(this._id(),n)}if(null!=this.windowDownListeners)for(var s=0,r=this.windowDownListeners[t];s<r.length;){var o=r[s];++s,o(e,a,i)}},sendUpEvent:function(t,e,a,i){if(null!=di.the()){var n=new nt(new os(20));n.setInt32(0,2),n.setInt32(4,t),n.setInt32(8,e),n.setInt32(12,a),n.setInt32(16,i),di.the().sendControllerUpdate(this._id(),n)}if(null!=this.windowUpListeners)for(var s=0,r=this.windowUpListeners[t];s<r.length;){var o=r[s];++s,o(e,a,i)}},sendMoveEvent:function(t,e,a,i,n){if(null!=di.the()){var s=new nt(new os(24));s.setInt32(0,3),s.setInt32(4,t),s.setInt32(8,e),s.setInt32(12,a),s.setInt32(16,i),s.setInt32(20,n),di.the().sendControllerUpdate(this._id(),s)}if(null!=this.windowMoveListeners)for(var r=0,o=this.windowMoveListeners[t];r<o.length;){var l=o[r];++r,l(e,a,i,n)}},sendWheelEvent:function(t,e){if(null!=di.the()){var a=new nt(new os(12));a.setInt32(0,4),a.setInt32(4,t),a.setInt32(8,e),di.the().sendControllerUpdate(this._id(),a)}if(null!=this.windowWheelListeners)for(var i=0,n=this.windowWheelListeners[t];i<n.length;){var s=n[i];++i,s(e)}},__class__:Fa});var Oa=function(){Fa.call(this)};(i["kha.input.MouseImpl"]=Oa).__name__=!0,Oa.__super__=Fa,Oa.prototype=s(Fa.prototype,{__class__:Oa});var Pa=function(){Pa.instance=this};(i["kha.input.Pen"]=Pa).__name__=!0,Pa.get=function(t){return null==t&&(t=0),he.getPen(t)},Pa.prototype={notify:function(t,e,a){this.notifyWindowed(0,t,e,a)},notifyWindowed:function(t,e,a,i){if(null!=e){for(null==this.windowDownListeners&&(this.windowDownListeners=[]);this.windowDownListeners.length<=t;)this.windowDownListeners.push([]);this.windowDownListeners[t].push(e)}if(null!=a){for(null==this.windowUpListeners&&(this.windowUpListeners=[]);this.windowUpListeners.length<=t;)this.windowUpListeners.push([]);this.windowUpListeners[t].push(a)}if(null!=i){for(null==this.windowMoveListeners&&(this.windowMoveListeners=[]);this.windowMoveListeners.length<=t;)this.windowMoveListeners.push([]);this.windowMoveListeners[t].push(i)}},windowDownListeners:null,windowUpListeners:null,windowMoveListeners:null,__class__:Pa};var Ja=t.kha.input.Surface=function(){this.touchStartListeners=[],this.touchEndListeners=[],this.moveListeners=[],Ja.instance=this};(i["kha.input.Surface"]=Ja).__name__=!0,Ja.prototype={touchStartListeners:null,touchEndListeners:null,moveListeners:null,sendTouchStartEvent:function(t,e,a){for(var i=0,n=this.touchStartListeners;i<n.length;){var s=n[i];++i,s(t,e,a)}},sendTouchEndEvent:function(t,e,a){for(var i=0,n=this.touchEndListeners;i<n.length;){var s=n[i];++i,s(t,e,a)}},sendMoveEvent:function(t,e,a){for(var i=0,n=this.moveListeners;i<n.length;){var s=n[i];++i,s(t,e,a)}},__class__:Ja};var Ea=function(t){this.bytes=t};(i["kha.internal.BytesBlob"]=Ea).__name__=!0,Ea.__interfaces__=[Rt],Ea.fromBytes=function(t){return new Ea(t)},Ea.alloc=function(t){return new Ea(new nt(new os(t)))},Ea.readF32=function(t){var e=0==(-2147483648&t)?1:-1,a=t>>23&255,i=8388607&t;switch(a){case 0:return 0;case 255:return 0!=i?NaN:0<e?1/0:-1/0;default:return e*((i+8388608)/8388608)*Math.pow(2,a-127)}},Ea.bit=function(t,e){if(1==(t>>>e&1)){return 0,!0}return 0,!1},Ea.toText=function(t,e){for(var a="",i=0,n=e;i<n;){var s=i++;a+=String.fromCharCode(t[s])}return a},Ea.prototype={bytes:null,sub:function(t,e){return new Ea(this.bytes.sub(t,e))},length:null,get_length:function(){return this.bytes.length},writeU8:function(t,e){this.bytes.b[t]=255&e},readU8:function(t){var e=this.bytes.b[t];return++t,e},readS8:function(t){var e=this.bytes.b[t];return++t,(0==(128&e)?1:-1)*(e&=127)},readU16BE:function(t){var e=this.bytes.b[t],a=this.bytes.b[t+1];return t+=2,256*e+a},readU16LE:function(t){var e=this.bytes.b[t],a=this.bytes.b[t+1];return t+=2,256*a+e},readU32LE:function(t){var e=this.bytes.b[t],a=this.bytes.b[t+1],i=this.bytes.b[t+2],n=this.bytes.b[t+3];return t+=4,e+256*a+256*i*256+256*n*256*256},readU32BE:function(t){var e=this.bytes.b[t],a=this.bytes.b[t+1],i=this.bytes.b[t+2],n=this.bytes.b[t+3];return t+=4,n+256*i+256*a*256+256*e*256*256},readS16BE:function(t){var e=this.bytes.b[t],a=this.bytes.b[t+1];t+=2;var i=0==(128&e)?1:-1;return e&=127,-1==i?256*e-32767+a:256*e+a},readS16LE:function(t){var e=this.bytes.b[t],a=this.bytes.b[t+1],i=0==(128&a)?1:-1;return a&=127,t+=2,-1==i?256*a-32767+e:256*a+e},readS32LE:function(t){var e=this.bytes.b[t],a=this.bytes.b[t+1],i=this.bytes.b[t+2],n=this.bytes.b[t+3],s=0==(128&n)?1:-1;return n&=127,t+=4,-1==s?-2147483647+e+256*a+256*i*256+256*n*256*256:e+256*a+256*i*256+256*n*256*256},readS32BE:function(t){var e=this.bytes.b[t],a=this.bytes.b[t+1],i=this.bytes.b[t+2],n=this.bytes.b[t+3],s=0==(128&e)?1:-1;return e&=127,t+=4,-1==s?-2147483647+n+256*i+256*a*256+256*e*256*256:n+256*i+256*a*256+256*e*256*256},readF32LE:function(t){return Ea.readF32(this.readS32LE(t))},readF32BE:function(t){return Ea.readF32(this.readS32BE(t))},toString:function(){return this.bytes.toString()},readUtf8Char:function(t){if(t.value>=this.get_length())return-1;var e=this.readU8(t.value);++t.value;var a=0;if(Ea.bit(e,7))if(Ea.bit(e,7)&&Ea.bit(e,6)&&!Ea.bit(e,5)){var i=31&e,n=this.readU8(t.value);++t.value,a=i<<6|63&n}else Ea.bit(e,7)&&Ea.bit(e,6)&&Ea.bit(e,5)&&!Ea.bit(e,4)?t.value+=2:Ea.bit(e,7)&&Ea.bit(e,6)&&Ea.bit(e,5)&&Ea.bit(e,4)&&!Ea.bit(e,3)&&(t.value+=3);else a=e;return a},readUtf8Block:function(t,e){var a=0;if(e.value>=this.get_length())return"";for(;a<2e3;){var i=this.readUtf8Char(e);if(i<0)break;t[a]=i,++a}return Ea.toText(t,a)},readUtf8String:function(){var t=new Array(2e3),e="",a=0;3<=this.get_length()&&239==this.bytes.b[0]&&187==this.bytes.b[1]&&191==this.bytes.b[2]&&(a=3);for(var i={value:a};i.value<this.get_length();)e+=this.readUtf8Block(t,i);return e},toBytes:function(){return this.bytes},unload:function(){this.bytes=null},__class__:Ea,__properties__:{get_length:"get_length"}};var Ua=function(){};(i["kha.internal.HdrFormat"]=Ua).__name__=!0,Ua.readBuf=function(t){for(var e=0;t[e++]=255&Ua.buffer[Ua.fileOffset],++Ua.fileOffset<Ua.bufferLength&&e<t.length;);return e},Ua.readBufOffset=function(t,e,a){for(var i=0;t[e+i++]=255&Ua.buffer[Ua.fileOffset],++Ua.fileOffset<Ua.bufferLength&&i<a;);return i},Ua.readPixelsRaw=function(t,e,a,i){var n=4*i,s=Ua.readBufOffset(e,a,n);s<n&&Oe.trace("Error reading raw pixels: got "+s+" bytes, expected "+n,{fileName:"kha/internal/HdrFormat.hx",lineNumber:43,className:"kha.internal.HdrFormat",methodName:"readPixelsRaw"})},Ua.readPixelsRawRLE=function(t,e,a,i,n){var s,r,o,l=new hs(4),_=null,h=new hs(2);for(t.length;0<n;){if(Ua.readBuf(l)<l.length)return void Oe.trace("Error reading bytes: expected "+l.length,{fileName:"kha/internal/HdrFormat.hx",lineNumber:59,className:"kha.internal.HdrFormat",methodName:"readPixelsRawRLE"});if(2!=l[0]||2!=l[1]||0!=(128&l[2]))return e[a++]=255&l[0],e[a++]=255&l[1],e[a++]=255&l[2],e[a++]=255&l[3],void Ua.readPixelsRaw(t,e,a,i*n-1);if(((255&l[2])<<8|255&l[3])!=i)return void Oe.trace("Wrong scanline width "+((255&l[2])<<8|255&l[3])+", expected "+i,{fileName:"kha/internal/HdrFormat.hx",lineNumber:74,className:"kha.internal.HdrFormat",methodName:"readPixelsRawRLE"});if(null==_)_=new hs(4*i);for(var c=s=0;c<4;){for(r=(c+++1)*i;s<r;){if(Ua.readBuf(h)<h.length)return void Oe.trace("Error reading 2-byte buffer",{fileName:"kha/internal/HdrFormat.hx",lineNumber:88,className:"kha.internal.HdrFormat",methodName:"readPixelsRawRLE"});if(128<(255&h[0])){if(0==(o=(255&h[0])-128)||r-s<o)return void Oe.trace("Bad scanline data",{fileName:"kha/internal/HdrFormat.hx",lineNumber:95,className:"kha.internal.HdrFormat",methodName:"readPixelsRawRLE"});for(;0<o--;)_[s++]=255&h[1]}else{if(0==(o=255&h[0])||r-s<o)return void Oe.trace("Bad scanline data",{fileName:"kha/internal/HdrFormat.hx",lineNumber:106,className:"kha.internal.HdrFormat",methodName:"readPixelsRawRLE"});if(_[s++]=255&h[1],0<--o){if(Ua.readBufOffset(_,s,o)<o)return void Oe.trace("Error reading non-run data",{fileName:"kha/internal/HdrFormat.hx",lineNumber:112,className:"kha.internal.HdrFormat",methodName:"readPixelsRawRLE"});s+=o}}}}for(var g=0,u=i;g<u;){var f=g++;e[a]=255&_[f],e[a+1]=255&_[f+i],e[a+2]=255&_[f+2*i],e[a+3]=255&_[f+3*i],a+=4}--n}},Ua.readLine=function(){for(var t="";;){var e=Ua.buffer[Ua.fileOffset];if(10==e){++Ua.fileOffset;break}if(t+=String.fromCharCode(e),!(++Ua.fileOffset<Ua.bufferLength))break}return t},Ua.parse=function(t){Ua.buffer=K.fromBytes(t),Ua.bufferLength=Ua.buffer.length;for(var e=Ua.fileOffset=0,a=0,i=!1,n=0;n<20;){n++;var s=Ua.readLine();if(Ua.formatPattern.match(s))i=!0;else if(Ua.exposurePattern.match(s))parseFloat(Ua.exposurePattern.matched(1));else if(Ua.widthHeightPattern.match(s)){a=k.parseInt(Ua.widthHeightPattern.matched(1)),e=k.parseInt(Ua.widthHeightPattern.matched(2));break}}if(!i)return Oe.trace("File is not run length encoded!",{fileName:"kha/internal/HdrFormat.hx",lineNumber:175,className:"kha.internal.HdrFormat",methodName:"parse"}),null;var r=new hs(e*a*4),o=e,l=a;Ua.readPixelsRawRLE(Ua.buffer,r,0,o,l);for(var _=new _s(e*a*4),h=0;h<r.length;){var c=r[h]/255,g=r[h+1]/255,u=r[h+2]/255,f=r[h+3],d=Math.pow(2,f-128);c*=d,g*=d,u*=d,_[h]=c,_[h+1]=g,_[h+2]=u,_[h+3]=1,h+=4}return{width:e,height:a,data:_}};var Qa=function(t){this.stopped=!1,this.element=t};(i["kha.js.AEAudioChannel"]=Qa).__name__=!0,Qa.__interfaces__=[de],Qa.prototype={element:null,stopped:null,play:function(){this.stopped=!1,he.mobile?he.insideInputEvent?(this.element.play(),he.mobileAudioPlaying=!0):he.mobileAudioPlaying?this.element.play():Qa.todo.push(this):this.element.play()},get_length:function(){return isFinite(this.element.duration)?this.element.duration:1/0},get_position:function(){return this.element.currentTime},set_volume:function(t){return this.element.volume=t},get_finished:function(){return!!this.stopped||this.get_position()>=this.get_length()},__class__:Qa,__properties__:{get_finished:"get_finished",set_volume:"set_volume",get_position:"get_position",get_length:"get_length"}};var qa=function(){};(i["kha.js.AudioElementAudio"]=qa).__name__=!0,qa._compile=function(){},qa.play=function(t,e){return null==e&&(e=!1),qa.stream(t,e)},qa.stream=function(t,e){null==e&&(e=!1),t.element.loop=e;var a=new Qa(t.element);return a.play(),a};var $a=function(t){Qe.call(this),this.canvas=t,($a.instance=this).myColor=Ut.fromBytes(0,0,0),t.save()};(i["kha.js.CanvasGraphics"]=$a).__name__=!0,$a.__super__=Qe,$a.prototype=s(Qe.prototype,{canvas:null,myColor:null,begin:function(t,e){null==t&&(t=!0),t&&this.clear(e)},clear:function(t){null==t&&(t=0),this.canvas.strokeStyle="rgba("+((16711680&t)>>>16)+","+((65280&t)>>>8)+","+(255&t)+","+.00392156862745098*(t>>>24)+")",this.canvas.fillStyle="rgba("+((16711680&t)>>>16)+","+((65280&t)>>>8)+","+(255&t)+","+.00392156862745098*(t>>>24)+")",.00392156862745098*(t>>>24)==0?this.canvas.clearRect(0,0,this.canvas.canvas.width,this.canvas.canvas.height):this.canvas.fillRect(0,0,this.canvas.canvas.width,this.canvas.canvas.height),this.set_color(this.myColor)},end:function(){},set_color:function(t){return this.myColor=t,this.canvas.strokeStyle="rgba("+((16711680&t)>>>16)+","+((65280&t)>>>8)+","+(255&t)+","+.00392156862745098*(t>>>24)+")",this.canvas.fillStyle="rgba("+((16711680&t)>>>16)+","+((65280&t)>>>8)+","+(255&t)+","+.00392156862745098*(t>>>24)+")",t},fillRect:function(t,e,a,i){var n=this.get_opacity();this.canvas.globalAlpha=n*(.00392156862745098*(this.myColor>>>24)),this.canvas.fillRect(t,e,a,i),this.canvas.globalAlpha=this.get_opacity()},__class__:$a});var ti=function(t){this.images=new $,this.kravur=new ti.Kravur(t)};(i["kha.js.Font"]=ti).__name__=!0,ti.__interfaces__=[Rt],ti.fromBytes=function(t){return new ti(Ea.fromBytes(t))},ti.prototype={kravur:null,images:null,height:function(t){return this.kravur._get(t).getHeight()},width:function(t,e){return this.kravur._get(t).stringWidth(e)},widthOfCharacters:function(t,e,a,i){return this.kravur._get(t).charactersWidth(e,a,i)},baseline:function(t){return this.kravur._get(t).getBaselinePosition()},getImage:function(t,e,a){var i=null==a?t:1e4*t+a.length;if(!this.images.h.hasOwnProperty(i)){var n=this.images,s=new $;n.h[i]=s}if(!this.images.h[i].h.hasOwnProperty(e)){var r=this.kravur._get(t,a),o=window.document.createElement("canvas");o.width=r.width,o.height=r.height;var l=o.getContext("2d");l.fillStyle="black",l.fillRect(0,0,r.width,r.height);for(var _=l.getImageData(0,0,r.width,r.height),h=f_.__cast(r.getTexture(),Et).bytes,c=0,g=h.length;c<g;){var u=c++;_.data[4*u]=(16711680&e)>>>16,_.data[4*u+1]=(65280&e)>>>8,_.data[4*u+2]=255&e,_.data[4*u+3]=h.b[u]}l.putImageData(_,0,0);var f=window.document.createElement("img");return f.src=o.toDataURL("image/png"),this.images.h[i].h[e]=f}return this.images.h[i].h[e]},unload:function(){this.kravur=null,this.images=null},__class__:ti};var ei=function(){};(i["kha.js.MobileWebAudio"]=ei).__name__=!0,ei._init=function(){try{return void(ei._context=new AudioContext)}catch(t){t instanceof Ot&&t.val}try{return void(this._context=new webkitAudioContext)}catch(t){t instanceof Ot&&t.val}},ei.play=function(t,e){null==e&&(e=!1);var a=new ai(t,e);return a.play(),a},ei.stream=function(t,e){return null==e&&(e=!1),ei.play(t,e)};var ai=function(t,e){this.stopped=!1,this.paused=!1,this.buffer=t._buffer,this.loop=e,this.createSource()};(i["kha.js.MobileWebAudioChannel"]=ai).__name__=!0,ai.__interfaces__=[de],ai.prototype={buffer:null,loop:null,source:null,gain:null,startTime:null,pauseTime:null,paused:null,stopped:null,createSource:function(){var t=this;this.source=ei._context.createBufferSource(),this.source.loop=this.loop,this.source.buffer=this.buffer,this.source.onended=function(){t.stopped=!0},this.gain=ei._context.createGain(),this.source.connect(this.gain),this.gain.connect(ei._context.destination)},play:function(){(this.paused||this.stopped)&&this.createSource(),this.stopped=!1,this.paused?(this.paused=!1,this.startTime=ei._context.currentTime-this.pauseTime,this.source.start(0,this.pauseTime)):(this.startTime=ei._context.currentTime,this.source.start())},set_volume:function(t){return this.gain.gain.value=t},get_finished:function(){return this.stopped},__class__:ai,__properties__:{get_finished:"get_finished",set_volume:"set_volume"}};var ii=function(t,e,a){var i=this;oe.call(this);var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="arraybuffer",n.onerror=function(){a({url:t})},n.onload=function(){i.compressedData=nt.ofData(n.response),i.uncompressedData=null,ei._context.decodeAudioData(i.compressedData.b.bufferValue,function(t){i._buffer=t,e(i)},function(){a({url:t,error:"Audio format not supported"})})},n.send(null)};(i["kha.js.MobileWebAudioSound"]=ii).__name__=!0,ii.__super__=oe,ii.prototype=s(oe.prototype,{_buffer:null,uncompress:function(t){t()},__class__:ii});var ni=function(t,e,a){oe.call(this),this.done=e,this.failed=a,ni.loading.push(this),this.element=window.document.createElement("audio"),this.filenames=[];for(var i=0;i<t.length;){var n=t[i];++i,""!=this.element.canPlayType("audio/ogg")&&P.endsWith(n,".ogg")&&this.filenames.push(n),""!=this.element.canPlayType("audio/mp4")&&P.endsWith(n,".mp4")&&this.filenames.push(n)}this.element.addEventListener("error",$n(this,this.errorListener),!1),this.element.addEventListener("canplay",$n(this,this.canPlayThroughListener),!1),this.element.src=this.filenames[0],this.element.preload="auto",this.element.load()};(i["kha.js.Sound"]=ni).__name__=!0,ni.__super__=oe,ni.prototype=s(oe.prototype,{filenames:null,done:null,failed:null,element:null,errorListener:function(t){if(4==this.element.error.code)for(var e=0,a=this.filenames.length-1;e<a;){var i=e++;if(this.element.src==this.filenames[i])return void(this.element.src=this.filenames[i+1])}this.failed({url:this.element.src}),this.finishAsset()},canPlayThroughListener:function(t){this.finishAsset()},finishAsset:function(){this.element.removeEventListener("error",$n(this,this.errorListener),!1),this.element.removeEventListener("canplaythrough",$n(this,this.canPlayThroughListener),!1),this.done(this),q.remove(ni.loading,this)},uncompress:function(t){t()},__class__:ni});var si=function(){ce.call(this)};(i["kha.js.Video"]=si).__name__=!0,si.fromFile=function(t,e){var a=new si;a.done=e,a.element=window.document.createElement("video"),a.filenames=[];for(var i=0;i<t.length;){var n=t[i];++i,""!=a.element.canPlayType("video/webm")&&P.endsWith(n,".webm")&&a.filenames.push(n),""!=a.element.canPlayType("video/mp4")&&P.endsWith(n,".mp4")&&a.filenames.push(n)}a.element.addEventListener("error",$n(a,a.errorListener),!1),a.element.addEventListener("canplaythrough",$n(a,a.canPlayThroughListener),!1),a.element.preload="auto",a.element.src=a.filenames[0]},si.__super__=ce,si.prototype=s(ce.prototype,{filenames:null,element:null,done:null,texture:null,errorListener:function(t){if(4==this.element.error.code)for(var e=0,a=this.filenames.length-1;e<a;){var i=e++;if(this.element.src==this.filenames[i])return void(this.element.src=this.filenames[i+1])}Oe.trace("Error loading "+this.element.src,{fileName:"kha/js/Video.hx",lineNumber:120,className:"kha.js.Video",methodName:"errorListener"}),this.finishAsset()},canPlayThroughListener:function(t){this.finishAsset()},finishAsset:function(){this.element.removeEventListener("error",$n(this,this.errorListener),!1),this.element.removeEventListener("canplaythrough",$n(this,this.canPlayThroughListener),!1),null!=he.gl&&(this.texture=Ft.fromVideo(this)),this.done(this)},__class__:si});var ri=function(t,e,a){var i=this;oe.call(this);var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="arraybuffer",n.onerror=function(){a({url:t})},n.onload=function(){i.compressedData=nt.ofData(n.response),i.uncompressedData=null,e(i)},n.send(null)};(i["kha.js.WebAudioSound"]=ri).__name__=!0,ri.__super__=oe,ri.prototype=s(oe.prototype,{superUncompress:function(t){oe.prototype.uncompress.call(this,t)},uncompress:function(u){var f=this;be._context.decodeAudioData(this.compressedData.b.bufferValue,function(t){var a=t.getChannelData(0),e=a.length,i=new _s(2*e);if(f.uncompressedData=i,1==t.numberOfChannels){var n=0,s=0,r=2*e,o=function(){};(o=function(){for(var t=n+11025,e=r<t?r:t;n<e;)f.uncompressedData[n]=a[s],f.uncompressedData[n+1]=a[s],n+=2,s+=1;n<r?window.setTimeout(o,0):f.compressedData=null})(),window.setTimeout(u,250)}else{var l=t.getChannelData(1),_=0,h=0,c=2*e,g=function(){};(g=function(){for(var t=_+11025,e=c<t?c:t;_<e;)f.uncompressedData[_]=a[h],f.uncompressedData[_+1]=l[h],_+=2,h+=1;_<c?window.setTimeout(g,0):f.compressedData=null})(),window.setTimeout(u,250)}},function(){f.superUncompress(u)})},__class__:ri});var oi=function(t,e){this.value=t,this.type=e};(i["kha.js.graphics4.ConstantLocation"]=oi).__name__=!0,oi.__interfaces__=[ba],oi.prototype={value:null,type:null,__class__:oi};var li=function(t){this.matrix3Cache=new _s(9),this.matrixCache=new _s(16),this.isDepthAttachment=!1,this.isCubeMap=!1,this.colorMaskAlpha=!0,this.colorMaskBlue=!0,this.colorMaskGreen=!0,this.colorMaskRed=!0,this.depthMask=!1,this.depthTest=!1,this.renderTarget=t,this.init(),he.gl2?this.instancedExtension=!0:(this.instancedExtension=he.gl.getExtension("ANGLE_instanced_arrays"),this.blendMinMaxExtension=he.gl.getExtension("EXT_blend_minmax"))};(i["kha.js.graphics4.Graphics"]=li).__name__=!0,li.__interfaces__=[Ma],li.getBlendFunc=function(t){switch(t._hx_index){case 0:case 2:return 0;case 1:return 1;case 3:return 770;case 4:return 772;case 5:return 771;case 6:return 773;case 7:return 768;case 8:return 774;case 9:return 769;case 10:return 775}},li.getBlendOp=function(t){switch(t._hx_index){case 0:return 32774;case 1:return 32778;case 2:return 32779;case 3:return 32775;case 4:return 32776}},li.prototype={depthTest:null,depthMask:null,colorMaskRed:null,colorMaskGreen:null,colorMaskBlue:null,colorMaskAlpha:null,indicesCount:null,renderTarget:null,renderTargetFrameBuffer:null,renderTargetTexture:null,isCubeMap:null,isDepthAttachment:null,instancedExtension:null,blendMinMaxExtension:null,init:function(){if(null!=this.renderTarget)if(this.isCubeMap=this.renderTarget instanceof pa,this.isCubeMap){var t=f_.__cast(this.renderTarget,pa);this.renderTargetFrameBuffer=t.frameBuffer,this.renderTargetTexture=t.texture,this.isDepthAttachment=t.isDepthAttachment}else{var e=f_.__cast(this.renderTarget,ge);this.renderTargetFrameBuffer=e.frameBuffer,this.renderTargetTexture=e.texture}},begin:function(t){if(he.gl.enable(3042),he.gl.blendFunc(770,771),null==this.renderTarget)he.gl.bindFramebuffer(36160,null),he.gl.viewport(0,0,uo.windowWidth(),uo.windowHeight());else if(he.gl.bindFramebuffer(36160,this.renderTargetFrameBuffer),he.gl.viewport(0,0,this.renderTarget.get_width(),this.renderTarget.get_height()),null!=t){he.gl.framebufferTexture2D(36160,he.drawBuffers.COLOR_ATTACHMENT0_WEBGL,3553,this.renderTargetTexture,0);for(var e=0,a=t.length;e<a;){var i=e++;he.gl.framebufferTexture2D(36160,he.drawBuffers.COLOR_ATTACHMENT0_WEBGL+i+1,3553,f_.__cast(t[i],ge).texture,0)}for(var n=[he.drawBuffers.COLOR_ATTACHMENT0_WEBGL],s=0,r=t.length;s<r;){var o=s++;n.push(he.drawBuffers.COLOR_ATTACHMENT0_WEBGL+o+1)}he.gl2?he.gl.drawBuffers(n):he.drawBuffers.drawBuffersWEBGL(n)}},beginFace:function(t){he.gl.enable(3042),he.gl.blendFunc(770,771),he.gl.bindFramebuffer(36160,this.renderTargetFrameBuffer),he.gl.framebufferTexture2D(36160,this.isDepthAttachment?36096:36064,34069+t,this.renderTargetTexture,0),he.gl.viewport(0,0,this.renderTarget.get_width(),this.renderTarget.get_height())},end:function(){},clear:function(t,e,a){var i=0;null!=t&&(i|=16384,he.gl.colorMask(!0,!0,!0,!0),he.gl.clearColor(.00392156862745098*((16711680&t)>>>16),.00392156862745098*((65280&t)>>>8),.00392156862745098*(255&t),.00392156862745098*(t>>>24))),null!=e&&(i|=256,he.gl.enable(2929),he.gl.depthMask(!0),he.gl.clearDepth(e)),null!=a&&(i|=1024,he.gl.enable(2960),he.gl.stencilMask(255),he.gl.clearStencil(a)),he.gl.clear(i),he.gl.colorMask(this.colorMaskRed,this.colorMaskGreen,this.colorMaskBlue,this.colorMaskAlpha),this.depthTest?he.gl.enable(2929):he.gl.disable(2929),he.gl.depthMask(this.depthMask)},viewport:function(t,e,a,i){null==this.renderTarget?he.gl.viewport(t,uo.windowHeight(0)-e-i,a,i):he.gl.viewport(t,e,a,i)},scissor:function(t,e,a,i){he.gl.enable(3089),null==this.renderTarget?he.gl.scissor(t,uo.windowHeight(0)-e-i,a,i):he.gl.scissor(t,e,a,i)},disableScissor:function(){he.gl.disable(3089)},renderTargetsInvertedY:function(){return!0},setDepthMode:function(t,e){switch(e._hx_index){case 0:t?he.gl.enable(2929):he.gl.disable(2929),this.depthTest=t,he.gl.depthFunc(519);break;case 1:he.gl.enable(2929),this.depthTest=!0,he.gl.depthFunc(512);break;case 2:he.gl.enable(2929),this.depthTest=!0,he.gl.depthFunc(514);break;case 3:he.gl.enable(2929),this.depthTest=!0,he.gl.depthFunc(517);break;case 4:he.gl.enable(2929),this.depthTest=!0,he.gl.depthFunc(513);break;case 5:he.gl.enable(2929),this.depthTest=!0,he.gl.depthFunc(515);break;case 6:he.gl.enable(2929),this.depthTest=!0,he.gl.depthFunc(516);break;case 7:he.gl.enable(2929),this.depthTest=!0,he.gl.depthFunc(518)}he.gl.depthMask(t),this.depthMask=t},setBlendingMode:function(t,e,a,i,n,s){t==ga.BlendOne&&e==ga.BlendZero?he.gl.disable(3042):(he.gl.enable(3042),he.gl.blendFuncSeparate(li.getBlendFunc(t),li.getBlendFunc(e),li.getBlendFunc(i),li.getBlendFunc(n)),he.gl.blendEquationSeparate(li.getBlendOp(a),li.getBlendOp(s)))},setVertexBuffer:function(t){f_.__cast(t,Ka).set(0)},setVertexBuffers:function(t){for(var e=0,a=0;a<t.length;){var i=t[a];++a,e+=f_.__cast(i,Ka).set(e)}},setIndexBuffer:function(t){this.indicesCount=t.count(),f_.__cast(t,xa).set()},setTexture:function(t,e){null==e?(he.gl.activeTexture(33984+f_.__cast(t,hi).value),he.gl.bindTexture(3553,null)):f_.__cast(e,ge).set(f_.__cast(t,hi).value)},setTextureDepth:function(t,e){f_.__cast(e,ge).setDepth(f_.__cast(t,hi).value)},setImageTexture:function(t,e){},setTextureParameters:function(t,e,a,i,n,s){switch(he.gl.activeTexture(33984+f_.__cast(t,hi).value),e._hx_index){case 0:he.gl.texParameteri(3553,10242,10497);break;case 1:he.gl.texParameteri(3553,10242,33648);break;case 2:he.gl.texParameteri(3553,10242,33071)}switch(a._hx_index){case 0:he.gl.texParameteri(3553,10243,10497);break;case 1:he.gl.texParameteri(3553,10243,33648);break;case 2:he.gl.texParameteri(3553,10243,33071)}switch(i._hx_index){case 0:switch(s._hx_index){case 0:he.gl.texParameteri(3553,10241,9728);break;case 1:he.gl.texParameteri(3553,10241,9984);break;case 2:he.gl.texParameteri(3553,10241,9986)}break;case 1:case 2:switch(s._hx_index){case 0:he.gl.texParameteri(3553,10241,9729);break;case 1:he.gl.texParameteri(3553,10241,9985);break;case 2:he.gl.texParameteri(3553,10241,9987)}i==Wa.AnisotropicFilter&&he.gl.texParameteri(3553,he.anisotropicFilter.TEXTURE_MAX_ANISOTROPY_EXT,4)}switch(n._hx_index){case 0:he.gl.texParameteri(3553,10240,9728);break;case 1:case 2:he.gl.texParameteri(3553,10240,9729)}},setTexture3DParameters:function(t,e,a,i,n,s,r){},setCubeMap:function(t,e){null==e?(he.gl.activeTexture(33984+f_.__cast(t,hi).value),he.gl.bindTexture(34067,null)):e.set(f_.__cast(t,hi).value)},setCubeMapDepth:function(t,e){e.setDepth(f_.__cast(t,hi).value)},setCullMode:function(t){switch(t._hx_index){case 0:he.gl.enable(2884),he.gl.cullFace(1029);break;case 1:he.gl.enable(2884),he.gl.cullFace(1028);break;case 2:he.gl.disable(2884)}},setPipeline:function(t){this.setCullMode(t.cullMode),this.setDepthMode(t.depthWrite,t.depthMode),this.setStencilParameters(t.stencilMode,t.stencilBothPass,t.stencilDepthFail,t.stencilFail,t.stencilReferenceValue,t.stencilReadMask,t.stencilWriteMask),this.setBlendingMode(t.blendSource,t.blendDestination,t.blendOperation,t.alphaBlendSource,t.alphaBlendDestination,t.alphaBlendOperation),t.set(),this.colorMaskRed=t.colorWriteMaskRed,this.colorMaskGreen=t.colorWriteMaskGreen,this.colorMaskBlue=t.colorWriteMaskBlue,this.colorMaskAlpha=t.colorWriteMaskAlpha},setBool:function(t,e){he.gl.uniform1i(f_.__cast(t,oi).value,e?1:0)},setInt:function(t,e){he.gl.uniform1i(f_.__cast(t,oi).value,e)},setFloat:function(t,e){he.gl.uniform1f(f_.__cast(t,oi).value,e)},setFloat2:function(t,e,a){he.gl.uniform2f(f_.__cast(t,oi).value,e,a)},setFloat3:function(t,e,a,i){he.gl.uniform3f(f_.__cast(t,oi).value,e,a,i)},setFloat4:function(t,e,a,i,n){he.gl.uniform4f(f_.__cast(t,oi).value,e,a,i,n)},setFloats:function(t,e){var a=f_.__cast(t,oi);switch(a.type){case 35664:he.gl.uniform2fv(a.value,e);break;case 35665:he.gl.uniform3fv(a.value,e);break;case 35666:he.gl.uniform4fv(a.value,e);break;case 35676:he.gl.uniformMatrix4fv(a.value,!1,e);break;default:he.gl.uniform1fv(a.value,e)}},matrixCache:null,setMatrix:function(t,e){this.matrixCache[0]=e._00,this.matrixCache[1]=e._01,this.matrixCache[2]=e._02,this.matrixCache[3]=e._03,this.matrixCache[4]=e._10,this.matrixCache[5]=e._11,this.matrixCache[6]=e._12,this.matrixCache[7]=e._13,this.matrixCache[8]=e._20,this.matrixCache[9]=e._21,this.matrixCache[10]=e._22,this.matrixCache[11]=e._23,this.matrixCache[12]=e._30,this.matrixCache[13]=e._31,this.matrixCache[14]=e._32,this.matrixCache[15]=e._33,he.gl.uniformMatrix4fv(f_.__cast(t,oi).value,!1,this.matrixCache)},matrix3Cache:null,setMatrix3:function(t,e){this.matrix3Cache[0]=e._00,this.matrix3Cache[1]=e._01,this.matrix3Cache[2]=e._02,this.matrix3Cache[3]=e._10,this.matrix3Cache[4]=e._11,this.matrix3Cache[5]=e._12,this.matrix3Cache[6]=e._20,this.matrix3Cache[7]=e._21,this.matrix3Cache[8]=e._22,he.gl.uniformMatrix3fv(f_.__cast(t,oi).value,!1,this.matrix3Cache)},drawIndexedVertices:function(t,e){null==e&&(e=-1),null==t&&(t=0);var a=null==he.elementIndexUint?5123:5125,i=5123==a?2:4;he.gl.drawElements(4,-1==e?this.indicesCount:e,a,t*i)},convertStencilAction:function(t){switch(t._hx_index){case 0:return 7680;case 1:return 0;case 2:return 7681;case 3:return 7682;case 4:return 34055;case 5:return 7683;case 6:return 34056;case 7:return 5386}},setStencilParameters:function(t,e,a,i,n,s,r){if(null==r&&(r=255),null==s&&(s=255),t==da.Always&&e==Na.Keep&&a==Na.Keep&&i==Na.Keep)he.gl.disable(2960);else{he.gl.enable(2960);var o=0;switch(t._hx_index){case 0:o=519;break;case 1:o=512;break;case 2:o=514;break;case 3:o=517;break;case 4:o=513;break;case 5:o=515;break;case 6:o=516;break;case 7:o=518}he.gl.stencilMask(r),he.gl.stencilOp(this.convertStencilAction(i),this.convertStencilAction(a),this.convertStencilAction(e)),he.gl.stencilFunc(o,n,s)}},drawIndexedVerticesInstanced:function(t,e,a){if(null==a&&(a=-1),null==e&&(e=0),this.instancedRenderingAvailable()){var i=null==he.elementIndexUint?5123:5125,n=null==he.elementIndexUint?2:4;he.gl2?he.gl.drawElementsInstanced(4,-1==a?this.indicesCount:a,i,e*n,t):this.instancedExtension.drawElementsInstancedANGLE(4,-1==a?this.indicesCount:a,i,e*n,t)}},instancedRenderingAvailable:function(){return this.instancedExtension},__class__:li};var _i=function(t){Aa.call(this,t)};(i["kha.js.graphics4.Graphics2"]=_i).__name__=!0,_i.__super__=Aa,_i.prototype=s(Aa.prototype,{begin:function(t,e){null==t&&(t=!0),he.gl.colorMask(!0,!0,!0,!0),he.gl.disable(2929),he.gl.depthFunc(519),Aa.prototype.begin.call(this,t,e)},__class__:_i});var hi=function(t){this.value=t};(i["kha.js.graphics4.TextureUnit"]=hi).__name__=!0,hi.__interfaces__=[Ya],hi.prototype={value:null,__class__:hi};var ci=function(){};(i["kha.vr.VrInterface"]=ci).__name__=!0,ci.prototype={IsVrEnabled:function(){return!1},__class__:ci};var gi=function(){this.vrHeight=0,this.vrWidth=0,this.height=0,this.width=0,this.vrEnabled=!1,ci.call(this)};(i["kha.js.vr.VrInterface"]=gi).__name__=!0,gi.__super__=ci,gi.prototype=s(ci.prototype,{vrEnabled:null,vrDisplay:null,frameData:null,width:null,height:null,vrWidth:null,vrHeight:null,getVRDisplays:function(){var i=this;navigator.getVRDisplays().then(function(t){if(0<t.length){i.frameData=new VRFrameData,i.vrDisplay=t[0],i.vrDisplay.depthNear=.1,i.vrDisplay.depthFar=1024;var e=i.vrDisplay.getEyeParameters("left"),a=i.vrDisplay.getEyeParameters("right");i.width=he.khanvas.width,i.height=he.khanvas.height,i.vrWidth=2*Math.max(e.renderWidth,a.renderWidth)|0,i.vrHeight=0|Math.max(e.renderHeight,a.renderHeight)}else Oe.trace("There are no VR displays connected.",{fileName:"kha/js/vr/VrInterface.hx",lineNumber:59,className:"kha.js.vr.VrInterface",methodName:"getVRDisplays"})})},IsVrEnabled:function(){return this.vrEnabled},__class__:gi});var ui=function(t,e,a){null==a&&(a=0),null==e&&(e=0),null==t&&(t=0),this.x=t,this.y=e,this.z=a};(i["kha.math.FastVector3"]=ui).__name__=!0,ui.prototype={x:null,y:null,z:null,__class__:ui};var fi=function(){};(i["kha.network.ControllerBuilder"]=fi).__name__=!0;var di=function(t,e,a){this.controllers=new $,(di.instance=this).maxPlayers=t,this.address=e,this.port=a};(i["kha.network.Session"]=di).__name__=!0,di.the=function(){return di.instance},di.prototype={controllers:null,maxPlayers:null,address:null,port:null,sendControllerUpdate:function(t,e){if(this.controllers.h.hasOwnProperty(t)){if(this.controllers.h[t]._inputBuffer.length<this.controllers.h[t]._inputBufferIndex+4+e.length){var a=new nt(new os(this.controllers.h[t]._inputBufferIndex+4+e.length));a.blit(0,this.controllers.h[t]._inputBuffer,0,this.controllers.h[t]._inputBufferIndex),this.controllers.h[t]._inputBuffer=a}this.controllers.h[t]._inputBuffer.setInt32(this.controllers.h[t]._inputBufferIndex,e.length),this.controllers.h[t]._inputBuffer.blit(this.controllers.h[t]._inputBufferIndex+4,e,0,e.length),this.controllers.h[t]._inputBufferIndex+=4+e.length}},__class__:di};var bi=function(t){this._type=t,this._numProxies=0,this._proxyList=null,this._proxyListLast=null,this._proxyPairList=null,this._incremental=!1,this._testCount=0,this._proxyPairPool=null,this._idCount=0,this._convexSweep=new Ii,this._aabb=new vi,this.identity=new tn,this.zero=new Jt,this.rayCastHit=new Yi};(i["oimo.collision.broadphase.BroadPhase"]=bi).__name__=!0,bi.prototype={_type:null,_numProxies:null,_proxyList:null,_proxyListLast:null,_proxyPairList:null,_incremental:null,_testCount:null,_proxyPairPool:null,_idCount:null,_convexSweep:null,_aabb:null,identity:null,zero:null,rayCastHit:null,createProxy:function(t,e){return null},destroyProxy:function(t){},moveProxy:function(t,e,a){},collectPairs:function(){},__class__:bi};var pi=function(t){this._type=t,this._volume=0};(i["oimo.collision.geometry.Geometry"]=pi).__name__=!0,pi.prototype={_type:null,_volume:null,_inertiaCoeff00:null,_inertiaCoeff01:null,_inertiaCoeff02:null,_inertiaCoeff10:null,_inertiaCoeff11:null,_inertiaCoeff12:null,_inertiaCoeff20:null,_inertiaCoeff21:null,_inertiaCoeff22:null,_updateMass:function(){},_computeAabb:function(t,e){},__class__:pi};var mi=function(t){pi.call(this,t),this._gjkMargin=wn.defaultGJKMargin,this._useGjkRayCast=!1};(i["oimo.collision.geometry.ConvexGeometry"]=mi).__name__=!0,mi.__super__=pi,mi.prototype=s(pi.prototype,{_gjkMargin:null,_useGjkRayCast:null,computeLocalSupportingVertex:function(t,e){},__class__:mi});var Ii=function(){mi.call(this,-1)};(i["oimo.collision.broadphase._BroadPhase.ConvexSweepGeometry"]=Ii).__name__=!0,Ii.__super__=mi,Ii.prototype=s(mi.prototype,{c:null,localTranslation:null,computeLocalSupportingVertex:function(t,e){this.c.computeLocalSupportingVertex(t,e);var a=this.localTranslation;if(0<t.x*a.x+t.y*a.y+t.z*a.z){var i=this.localTranslation,n=e.x+i.x,s=e.y+i.y,r=e.z+i.z;e.x=n,e.y=s,e.z=r}},__class__:Ii});var vi=function(){mi.call(this,-1),this.min=new Jt,this.max=new Jt};(i["oimo.collision.broadphase._BroadPhase.AabbGeometry"]=vi).__name__=!0,vi.__super__=mi,vi.prototype=s(mi.prototype,{min:null,max:null,computeLocalSupportingVertex:function(t,e){e.x=0<t.x?this.max.x:this.min.x,e.y=0<t.y?this.max.y:this.min.y,e.z=0<t.z?this.max.z:this.min.z},__class__:vi});var Mi=function(){};(i["oimo.collision.broadphase.BroadPhaseProxyCallback"]=Mi).__name__=!0,Mi.prototype={__class__:Mi};var Ci=function(t,e){this.userData=t,this._id=e,this._prev=null,this._next=null,this._aabbMinX=0,this._aabbMinY=0,this._aabbMinZ=0,this._aabbMaxX=0,this._aabbMaxY=0,this._aabbMaxZ=0};(i["oimo.collision.broadphase.Proxy"]=Ci).__name__=!0,Ci.prototype={_prev:null,_next:null,_aabbMinX:null,_aabbMinY:null,_aabbMinZ:null,_aabbMaxX:null,_aabbMaxY:null,_aabbMaxZ:null,_id:null,userData:null,__class__:Ci};var yi=function(){this._p1=null,this._p2=null};(i["oimo.collision.broadphase.ProxyPair"]=yi).__name__=!0,yi.prototype={_next:null,_p1:null,_p2:null,__class__:yi};var wi=function(){bi.call(this,1),this._incremental=!1};(i["oimo.collision.broadphase.bruteforce.BruteForceBroadPhase"]=wi).__name__=!0,wi.__super__=bi,wi.prototype=s(bi.prototype,{createProxy:function(t,e){var a=new Ci(t,this._idCount++);return this._numProxies++,null==this._proxyList?this._proxyList=a:(this._proxyListLast._next=a)._prev=this._proxyListLast,(this._proxyListLast=a)._aabbMinX=e._minX,a._aabbMinY=e._minY,a._aabbMinZ=e._minZ,a._aabbMaxX=e._maxX,a._aabbMaxY=e._maxY,a._aabbMaxZ=e._maxZ,a},destroyProxy:function(t){this._numProxies--;var e=t._prev,a=t._next;null!=e&&(e._next=a),null!=a&&(a._prev=e),t==this._proxyList&&(this._proxyList=this._proxyList._next),t==this._proxyListLast&&(this._proxyListLast=this._proxyListLast._prev),t._next=null,t._prev=null,t.userData=null},moveProxy:function(t,e,a){t._aabbMinX=e._minX,t._aabbMinY=e._minY,t._aabbMinZ=e._minZ,t._aabbMaxX=e._maxX,t._aabbMaxY=e._maxY,t._aabbMaxZ=e._maxZ},collectPairs:function(){var t=this._proxyPairList;if(null!=t){for(;t._p1=null,(t._p2=null)!=(t=t._next););this._proxyPairList._next=this._proxyPairPool,this._proxyPairPool=this._proxyPairList,this._proxyPairList=null}this._testCount=0;for(var e=this._proxyList;null!=e;){for(var a=e._next,i=e._next;null!=i;){var n=i._next;if(this._testCount++,e._aabbMinX<i._aabbMaxX&&e._aabbMaxX>i._aabbMinX&&e._aabbMinY<i._aabbMaxY&&e._aabbMaxY>i._aabbMinY&&e._aabbMinZ<i._aabbMaxZ&&e._aabbMaxZ>i._aabbMinZ){var s=this._proxyPairPool;null!=s?(this._proxyPairPool=s._next,s._next=null):s=new yi;var r=s;null==this._proxyPairList||(r._next=this._proxyPairList),(this._proxyPairList=r)._p1=e,r._p2=i}i=n}e=a}},__class__:wi});var Ai=function(){bi.call(this,2),this._incremental=!0,this._tree=new Bi;var t=new Array(1024);this.movedProxies=t,this.numMovedProxies=0};(i["oimo.collision.broadphase.bvh.BvhBroadPhase"]=Ai).__name__=!0,Ai.__super__=bi,Ai.prototype=s(bi.prototype,{_tree:null,movedProxies:null,numMovedProxies:null,collide:function(t,e){this._testCount++;var a=0==t._height,i=0==e._height;if(t==e){if(a)return;return this.collide(t._children[0],e),void this.collide(t._children[1],e)}if(t._aabbMinX<e._aabbMaxX&&t._aabbMaxX>e._aabbMinX&&t._aabbMinY<e._aabbMaxY&&t._aabbMaxY>e._aabbMinY&&t._aabbMinZ<e._aabbMaxZ&&t._aabbMaxZ>e._aabbMinZ){if(a&&i){var n=t._proxy,s=e._proxy,r=this._proxyPairPool;null!=r?(this._proxyPairPool=r._next,r._next=null):r=new yi;var o=r;return null==this._proxyPairList||(o._next=this._proxyPairList),(this._proxyPairList=o)._p1=n,void(o._p2=s)}i||t._height>e._height?(this.collide(t._children[0],e),this.collide(t._children[1],e)):(this.collide(e._children[0],t),this.collide(e._children[1],t))}},createProxy:function(t,e){var a=new Zi(t,this._idCount++);this._numProxies++,null==this._proxyList?this._proxyList=a:(this._proxyListLast._next=a)._prev=this._proxyListLast,(this._proxyListLast=a)._aabbMinX=e._minX,a._aabbMinY=e._minY,a._aabbMinZ=e._minZ,a._aabbMaxX=e._maxX,a._aabbMaxY=e._maxY,a._aabbMaxZ=e._maxZ;var i,n,s,r=wn.bvhProxyPadding;s=n=i=r,a._aabbMinX-=i,a._aabbMinY-=n,a._aabbMinZ-=s,a._aabbMaxX+=i,a._aabbMaxY+=n,a._aabbMaxZ+=s;var o=this._tree,l=o._nodePool;null!=l?(o._nodePool=l._next,l._next=null):l=new xi;var _=l;if(((_._proxy=a)._leaf=_)._aabbMinX=a._aabbMinX,_._aabbMinY=a._aabbMinY,_._aabbMinZ=a._aabbMinZ,_._aabbMaxX=a._aabbMaxX,_._aabbMaxY=a._aabbMaxY,_._aabbMaxZ=a._aabbMaxZ,o._numLeaves++,null==o.leafList?o.leafList=_:(o.leafListLast._nextLeaf=_)._prevLeaf=o.leafListLast,o.leafListLast=_,null==o._root)o._root=_;else{for(var h=o._root;0<h._height;){var c=o._strategy._decideInsertion(h,_);if(-1==c)break;h=h._children[c]}var g=h._parent,u=o._nodePool;null!=u?(o._nodePool=u._next,u._next=null):u=new xi;var f=u;if(null==g)o._root=f;else{var d=h._childIndex;(g._children[d]=f)._parent=g,f._childIndex=d}var b=h._childIndex;(f._children[b]=h)._parent=f,h._childIndex=b;var p=1^h._childIndex;for((f._children[p]=_)._parent=f,_._childIndex=p;null!=f;){if(o._strategy._balancingEnabled)if(f._height<2)f=f;else{var m=f._parent,I=f._children[0],v=f._children[1],M=I._height-v._height,C=f._childIndex;if(1<M){var y=I._children[0],w=I._children[1],A=y._height;if(w._height<A){(I._children[1]=f)._parent=I,f._childIndex=1,(f._children[0]=w)._parent=f,w._childIndex=0;var x=I._children[0],Z=I._children[1];I._aabbMinX=x._aabbMinX<Z._aabbMinX?x._aabbMinX:Z._aabbMinX,I._aabbMinY=x._aabbMinY<Z._aabbMinY?x._aabbMinY:Z._aabbMinY,I._aabbMinZ=x._aabbMinZ<Z._aabbMinZ?x._aabbMinZ:Z._aabbMinZ,I._aabbMaxX=x._aabbMaxX>Z._aabbMaxX?x._aabbMaxX:Z._aabbMaxX,I._aabbMaxY=x._aabbMaxY>Z._aabbMaxY?x._aabbMaxY:Z._aabbMaxY,I._aabbMaxZ=x._aabbMaxZ>Z._aabbMaxZ?x._aabbMaxZ:Z._aabbMaxZ;var z=I._children[0]._height,B=I._children[1]._height;I._height=(B<z?z:B)+1;var N=f._children[0],G=f._children[1];f._aabbMinX=N._aabbMinX<G._aabbMinX?N._aabbMinX:G._aabbMinX,f._aabbMinY=N._aabbMinY<G._aabbMinY?N._aabbMinY:G._aabbMinY,f._aabbMinZ=N._aabbMinZ<G._aabbMinZ?N._aabbMinZ:G._aabbMinZ,f._aabbMaxX=N._aabbMaxX>G._aabbMaxX?N._aabbMaxX:G._aabbMaxX,f._aabbMaxY=N._aabbMaxY>G._aabbMaxY?N._aabbMaxY:G._aabbMaxY,f._aabbMaxZ=N._aabbMaxZ>G._aabbMaxZ?N._aabbMaxZ:G._aabbMaxZ;var k=f._children[0]._height,S=f._children[1]._height;f._height=(S<k?k:S)+1}else{(I._children[0]=f)._parent=I,f._childIndex=0,(f._children[0]=y)._parent=f,y._childIndex=0;var W=I._children[0],X=I._children[1];I._aabbMinX=W._aabbMinX<X._aabbMinX?W._aabbMinX:X._aabbMinX,I._aabbMinY=W._aabbMinY<X._aabbMinY?W._aabbMinY:X._aabbMinY,I._aabbMinZ=W._aabbMinZ<X._aabbMinZ?W._aabbMinZ:X._aabbMinZ,I._aabbMaxX=W._aabbMaxX>X._aabbMaxX?W._aabbMaxX:X._aabbMaxX,I._aabbMaxY=W._aabbMaxY>X._aabbMaxY?W._aabbMaxY:X._aabbMaxY,I._aabbMaxZ=W._aabbMaxZ>X._aabbMaxZ?W._aabbMaxZ:X._aabbMaxZ;var Y=I._children[0]._height,D=I._children[1]._height;I._height=(D<Y?Y:D)+1;var K=f._children[0],L=f._children[1];f._aabbMinX=K._aabbMinX<L._aabbMinX?K._aabbMinX:L._aabbMinX,f._aabbMinY=K._aabbMinY<L._aabbMinY?K._aabbMinY:L._aabbMinY,f._aabbMinZ=K._aabbMinZ<L._aabbMinZ?K._aabbMinZ:L._aabbMinZ,f._aabbMaxX=K._aabbMaxX>L._aabbMaxX?K._aabbMaxX:L._aabbMaxX,f._aabbMaxY=K._aabbMaxY>L._aabbMaxY?K._aabbMaxY:L._aabbMaxY,f._aabbMaxZ=K._aabbMaxZ>L._aabbMaxZ?K._aabbMaxZ:L._aabbMaxZ;var V=f._children[0]._height,H=f._children[1]._height;f._height=(H<V?V:H)+1}null!=m?((m._children[C]=I)._parent=m,I._childIndex=C):(o._root=I)._parent=null,f=I}else if(M<-1){var j=v._children[0],T=v._children[1],R=j._height;if(T._height<R){(v._children[1]=f)._parent=v,f._childIndex=1,(f._children[1]=T)._parent=f,T._childIndex=1;var F=v._children[0],O=v._children[1];v._aabbMinX=F._aabbMinX<O._aabbMinX?F._aabbMinX:O._aabbMinX,v._aabbMinY=F._aabbMinY<O._aabbMinY?F._aabbMinY:O._aabbMinY,v._aabbMinZ=F._aabbMinZ<O._aabbMinZ?F._aabbMinZ:O._aabbMinZ,v._aabbMaxX=F._aabbMaxX>O._aabbMaxX?F._aabbMaxX:O._aabbMaxX,v._aabbMaxY=F._aabbMaxY>O._aabbMaxY?F._aabbMaxY:O._aabbMaxY,v._aabbMaxZ=F._aabbMaxZ>O._aabbMaxZ?F._aabbMaxZ:O._aabbMaxZ;var P=v._children[0]._height,J=v._children[1]._height;v._height=(J<P?P:J)+1;var E=f._children[0],U=f._children[1];f._aabbMinX=E._aabbMinX<U._aabbMinX?E._aabbMinX:U._aabbMinX,f._aabbMinY=E._aabbMinY<U._aabbMinY?E._aabbMinY:U._aabbMinY,f._aabbMinZ=E._aabbMinZ<U._aabbMinZ?E._aabbMinZ:U._aabbMinZ,f._aabbMaxX=E._aabbMaxX>U._aabbMaxX?E._aabbMaxX:U._aabbMaxX,f._aabbMaxY=E._aabbMaxY>U._aabbMaxY?E._aabbMaxY:U._aabbMaxY,f._aabbMaxZ=E._aabbMaxZ>U._aabbMaxZ?E._aabbMaxZ:U._aabbMaxZ;var Q=f._children[0]._height,q=f._children[1]._height;f._height=(q<Q?Q:q)+1}else{(v._children[0]=f)._parent=v,f._childIndex=0,(f._children[1]=j)._parent=f,j._childIndex=1;var $=v._children[0],tt=v._children[1];v._aabbMinX=$._aabbMinX<tt._aabbMinX?$._aabbMinX:tt._aabbMinX,v._aabbMinY=$._aabbMinY<tt._aabbMinY?$._aabbMinY:tt._aabbMinY,v._aabbMinZ=$._aabbMinZ<tt._aabbMinZ?$._aabbMinZ:tt._aabbMinZ,v._aabbMaxX=$._aabbMaxX>tt._aabbMaxX?$._aabbMaxX:tt._aabbMaxX,v._aabbMaxY=$._aabbMaxY>tt._aabbMaxY?$._aabbMaxY:tt._aabbMaxY,v._aabbMaxZ=$._aabbMaxZ>tt._aabbMaxZ?$._aabbMaxZ:tt._aabbMaxZ;var et=v._children[0]._height,at=v._children[1]._height;v._height=(at<et?et:at)+1;var it=f._children[0],nt=f._children[1];f._aabbMinX=it._aabbMinX<nt._aabbMinX?it._aabbMinX:nt._aabbMinX,f._aabbMinY=it._aabbMinY<nt._aabbMinY?it._aabbMinY:nt._aabbMinY,f._aabbMinZ=it._aabbMinZ<nt._aabbMinZ?it._aabbMinZ:nt._aabbMinZ,f._aabbMaxX=it._aabbMaxX>nt._aabbMaxX?it._aabbMaxX:nt._aabbMaxX,f._aabbMaxY=it._aabbMaxY>nt._aabbMaxY?it._aabbMaxY:nt._aabbMaxY,f._aabbMaxZ=it._aabbMaxZ>nt._aabbMaxZ?it._aabbMaxZ:nt._aabbMaxZ;var st=f._children[0]._height,rt=f._children[1]._height;f._height=(rt<st?st:rt)+1}null!=m?((m._children[C]=v)._parent=m,v._childIndex=C):(o._root=v)._parent=null,f=v}else f=f}var ot=f._children[0]._height,lt=f._children[1]._height;f._height=(lt<ot?ot:lt)+1;var _t=f._children[0],ht=f._children[1];f._aabbMinX=_t._aabbMinX<ht._aabbMinX?_t._aabbMinX:ht._aabbMinX,f._aabbMinY=_t._aabbMinY<ht._aabbMinY?_t._aabbMinY:ht._aabbMinY,f._aabbMinZ=_t._aabbMinZ<ht._aabbMinZ?_t._aabbMinZ:ht._aabbMinZ,f._aabbMaxX=_t._aabbMaxX>ht._aabbMaxX?_t._aabbMaxX:ht._aabbMaxX,f._aabbMaxY=_t._aabbMaxY>ht._aabbMaxY?_t._aabbMaxY:ht._aabbMaxY,f._aabbMaxZ=_t._aabbMaxZ>ht._aabbMaxZ?_t._aabbMaxZ:ht._aabbMaxZ,f=f._parent}}if(!a._moved){if(a._moved=!0,this.movedProxies.length==this.numMovedProxies){for(var ct=this.numMovedProxies<<1,gt=new Array(ct),ut=0,ft=this.numMovedProxies;ut<ft;){var dt=ut++;gt[dt]=this.movedProxies[dt],this.movedProxies[dt]=null}this.movedProxies=gt}this.movedProxies[this.numMovedProxies++]=a}return a},destroyProxy:function(t){this._numProxies--;var e=t._prev,a=t._next;null!=e&&(e._next=a),null!=a&&(a._prev=e),t==this._proxyList&&(this._proxyList=this._proxyList._next),t==this._proxyListLast&&(this._proxyListLast=this._proxyListLast._prev),t._next=null,t._prev=null;var i=t,n=this._tree,s=i._leaf;n._numLeaves--;var r=s._prevLeaf,o=s._nextLeaf;if(null!=r&&(r._nextLeaf=o),null!=o&&(o._prevLeaf=r),s==n.leafList&&(n.leafList=n.leafList._nextLeaf),s==n.leafListLast&&(n.leafListLast=n.leafListLast._prevLeaf),s._nextLeaf=null,s._prevLeaf=null,n._root==s)n._root=null;else{var l=s._parent,_=l._children[1^s._childIndex],h=l._parent;if(null==h)_._parent=null,_._childIndex=0,n._root=_,l._next=null,l._childIndex=0,l._children[0]=null,l._children[1]=null,l._childIndex=0,l._parent=null,l._height=0,l._proxy=null,l._next=n._nodePool,n._nodePool=l;else{_._parent=h;var c=l._childIndex;(h._children[c]=_)._parent=h,_._childIndex=c,l._next=null,l._childIndex=0,l._children[0]=null,l._children[1]=null,l._childIndex=0,l._parent=null,l._height=0,l._proxy=null,l._next=n._nodePool,n._nodePool=l;for(var g=h;null!=g;){if(n._strategy._balancingEnabled)if(g._height<2)g=g;else{var u=g._parent,f=g._children[0],d=g._children[1],b=f._height-d._height,p=g._childIndex;if(1<b){var m=f._children[0],I=f._children[1],v=m._height;if(I._height<v){(f._children[1]=g)._parent=f,g._childIndex=1,(g._children[0]=I)._parent=g,I._childIndex=0;var M=f._children[0],C=f._children[1];f._aabbMinX=M._aabbMinX<C._aabbMinX?M._aabbMinX:C._aabbMinX,f._aabbMinY=M._aabbMinY<C._aabbMinY?M._aabbMinY:C._aabbMinY,f._aabbMinZ=M._aabbMinZ<C._aabbMinZ?M._aabbMinZ:C._aabbMinZ,f._aabbMaxX=M._aabbMaxX>C._aabbMaxX?M._aabbMaxX:C._aabbMaxX,f._aabbMaxY=M._aabbMaxY>C._aabbMaxY?M._aabbMaxY:C._aabbMaxY,f._aabbMaxZ=M._aabbMaxZ>C._aabbMaxZ?M._aabbMaxZ:C._aabbMaxZ;var y=f._children[0]._height,w=f._children[1]._height;f._height=(w<y?y:w)+1;var A=g._children[0],x=g._children[1];g._aabbMinX=A._aabbMinX<x._aabbMinX?A._aabbMinX:x._aabbMinX,g._aabbMinY=A._aabbMinY<x._aabbMinY?A._aabbMinY:x._aabbMinY,g._aabbMinZ=A._aabbMinZ<x._aabbMinZ?A._aabbMinZ:x._aabbMinZ,g._aabbMaxX=A._aabbMaxX>x._aabbMaxX?A._aabbMaxX:x._aabbMaxX,g._aabbMaxY=A._aabbMaxY>x._aabbMaxY?A._aabbMaxY:x._aabbMaxY,g._aabbMaxZ=A._aabbMaxZ>x._aabbMaxZ?A._aabbMaxZ:x._aabbMaxZ;var Z=g._children[0]._height,z=g._children[1]._height;g._height=(z<Z?Z:z)+1}else{(f._children[0]=g)._parent=f,g._childIndex=0,(g._children[0]=m)._parent=g,m._childIndex=0;var B=f._children[0],N=f._children[1];f._aabbMinX=B._aabbMinX<N._aabbMinX?B._aabbMinX:N._aabbMinX,f._aabbMinY=B._aabbMinY<N._aabbMinY?B._aabbMinY:N._aabbMinY,f._aabbMinZ=B._aabbMinZ<N._aabbMinZ?B._aabbMinZ:N._aabbMinZ,f._aabbMaxX=B._aabbMaxX>N._aabbMaxX?B._aabbMaxX:N._aabbMaxX,f._aabbMaxY=B._aabbMaxY>N._aabbMaxY?B._aabbMaxY:N._aabbMaxY,f._aabbMaxZ=B._aabbMaxZ>N._aabbMaxZ?B._aabbMaxZ:N._aabbMaxZ;var G=f._children[0]._height,k=f._children[1]._height;f._height=(k<G?G:k)+1;var S=g._children[0],W=g._children[1];g._aabbMinX=S._aabbMinX<W._aabbMinX?S._aabbMinX:W._aabbMinX,g._aabbMinY=S._aabbMinY<W._aabbMinY?S._aabbMinY:W._aabbMinY,g._aabbMinZ=S._aabbMinZ<W._aabbMinZ?S._aabbMinZ:W._aabbMinZ,g._aabbMaxX=S._aabbMaxX>W._aabbMaxX?S._aabbMaxX:W._aabbMaxX,g._aabbMaxY=S._aabbMaxY>W._aabbMaxY?S._aabbMaxY:W._aabbMaxY,g._aabbMaxZ=S._aabbMaxZ>W._aabbMaxZ?S._aabbMaxZ:W._aabbMaxZ;var X=g._children[0]._height,Y=g._children[1]._height;g._height=(Y<X?X:Y)+1}null!=u?((u._children[p]=f)._parent=u,f._childIndex=p):(n._root=f)._parent=null,g=f}else if(b<-1){var D=d._children[0],K=d._children[1],L=D._height;if(K._height<L){(d._children[1]=g)._parent=d,g._childIndex=1,(g._children[1]=K)._parent=g,K._childIndex=1;var V=d._children[0],H=d._children[1];d._aabbMinX=V._aabbMinX<H._aabbMinX?V._aabbMinX:H._aabbMinX,d._aabbMinY=V._aabbMinY<H._aabbMinY?V._aabbMinY:H._aabbMinY,d._aabbMinZ=V._aabbMinZ<H._aabbMinZ?V._aabbMinZ:H._aabbMinZ,d._aabbMaxX=V._aabbMaxX>H._aabbMaxX?V._aabbMaxX:H._aabbMaxX,d._aabbMaxY=V._aabbMaxY>H._aabbMaxY?V._aabbMaxY:H._aabbMaxY,d._aabbMaxZ=V._aabbMaxZ>H._aabbMaxZ?V._aabbMaxZ:H._aabbMaxZ;var j=d._children[0]._height,T=d._children[1]._height;d._height=(T<j?j:T)+1;var R=g._children[0],F=g._children[1];g._aabbMinX=R._aabbMinX<F._aabbMinX?R._aabbMinX:F._aabbMinX,g._aabbMinY=R._aabbMinY<F._aabbMinY?R._aabbMinY:F._aabbMinY,g._aabbMinZ=R._aabbMinZ<F._aabbMinZ?R._aabbMinZ:F._aabbMinZ,g._aabbMaxX=R._aabbMaxX>F._aabbMaxX?R._aabbMaxX:F._aabbMaxX,g._aabbMaxY=R._aabbMaxY>F._aabbMaxY?R._aabbMaxY:F._aabbMaxY,g._aabbMaxZ=R._aabbMaxZ>F._aabbMaxZ?R._aabbMaxZ:F._aabbMaxZ;var O=g._children[0]._height,P=g._children[1]._height;g._height=(P<O?O:P)+1}else{(d._children[0]=g)._parent=d,g._childIndex=0,(g._children[1]=D)._parent=g,D._childIndex=1;var J=d._children[0],E=d._children[1];d._aabbMinX=J._aabbMinX<E._aabbMinX?J._aabbMinX:E._aabbMinX,d._aabbMinY=J._aabbMinY<E._aabbMinY?J._aabbMinY:E._aabbMinY,d._aabbMinZ=J._aabbMinZ<E._aabbMinZ?J._aabbMinZ:E._aabbMinZ,d._aabbMaxX=J._aabbMaxX>E._aabbMaxX?J._aabbMaxX:E._aabbMaxX,d._aabbMaxY=J._aabbMaxY>E._aabbMaxY?J._aabbMaxY:E._aabbMaxY,d._aabbMaxZ=J._aabbMaxZ>E._aabbMaxZ?J._aabbMaxZ:E._aabbMaxZ;var U=d._children[0]._height,Q=d._children[1]._height;d._height=(Q<U?U:Q)+1;var q=g._children[0],$=g._children[1];g._aabbMinX=q._aabbMinX<$._aabbMinX?q._aabbMinX:$._aabbMinX,g._aabbMinY=q._aabbMinY<$._aabbMinY?q._aabbMinY:$._aabbMinY,g._aabbMinZ=q._aabbMinZ<$._aabbMinZ?q._aabbMinZ:$._aabbMinZ,g._aabbMaxX=q._aabbMaxX>$._aabbMaxX?q._aabbMaxX:$._aabbMaxX,g._aabbMaxY=q._aabbMaxY>$._aabbMaxY?q._aabbMaxY:$._aabbMaxY,g._aabbMaxZ=q._aabbMaxZ>$._aabbMaxZ?q._aabbMaxZ:$._aabbMaxZ;var tt=g._children[0]._height,et=g._children[1]._height;g._height=(et<tt?tt:et)+1}null!=u?((u._children[p]=d)._parent=u,d._childIndex=p):(n._root=d)._parent=null,g=d}else g=g}var at=g._children[0]._height,it=g._children[1]._height;g._height=(it<at?at:it)+1;var nt=g._children[0],st=g._children[1];g._aabbMinX=nt._aabbMinX<st._aabbMinX?nt._aabbMinX:st._aabbMinX,g._aabbMinY=nt._aabbMinY<st._aabbMinY?nt._aabbMinY:st._aabbMinY,g._aabbMinZ=nt._aabbMinZ<st._aabbMinZ?nt._aabbMinZ:st._aabbMinZ,g._aabbMaxX=nt._aabbMaxX>st._aabbMaxX?nt._aabbMaxX:st._aabbMaxX,g._aabbMaxY=nt._aabbMaxY>st._aabbMaxY?nt._aabbMaxY:st._aabbMaxY,g._aabbMaxZ=nt._aabbMaxZ>st._aabbMaxZ?nt._aabbMaxZ:st._aabbMaxZ,g=g._parent}}}i._leaf=null,s._next=null,s._childIndex=0,s._children[0]=null,s._children[1]=null,s._childIndex=0,s._parent=null,s._height=0,s._proxy=null,s._next=n._nodePool,n._nodePool=s,i.userData=null,i._next=null,i._prev=null,i._moved&&(i._moved=!1)},moveProxy:function(t,e,a){var i=t;if(!(i._aabbMinX<=e._minX&&i._aabbMaxX>=e._maxX&&i._aabbMinY<=e._minY&&i._aabbMaxY>=e._maxY&&i._aabbMinZ<=e._minZ&&i._aabbMaxZ>=e._maxZ)){i._aabbMinX=e._minX,i._aabbMinY=e._minY,i._aabbMinZ=e._minZ,i._aabbMaxX=e._maxX,i._aabbMaxY=e._maxY,i._aabbMaxZ=e._maxZ;var n,s,r,o=wn.bvhProxyPadding;if(r=s=n=o,i._aabbMinX-=n,i._aabbMinY-=s,i._aabbMinZ-=r,i._aabbMaxX+=n,i._aabbMaxY+=s,i._aabbMaxZ+=r,null!=a){var l,_,h,c,g,u,f,d,b,p=a;c=0<(l=p.x)?0:l,g=0<(_=p.y)?0:_,u=0<(h=p.z)?0:h,f=l<0?0:l,d=_<0?0:_,b=h<0?0:h,i._aabbMinX+=c,i._aabbMinY+=g,i._aabbMinZ+=u,i._aabbMaxX+=f,i._aabbMaxY+=d,i._aabbMaxZ+=b}if(!i._moved){if(i._moved=!0,this.movedProxies.length==this.numMovedProxies){for(var m=this.numMovedProxies<<1,I=new Array(m),v=0,M=this.numMovedProxies;v<M;){var C=v++;I[C]=this.movedProxies[C],this.movedProxies[C]=null}this.movedProxies=I}this.movedProxies[this.numMovedProxies++]=i}}},collectPairs:function(){var t=this._proxyPairList;if(null!=t){for(;t._p1=null,(t._p2=null)!=(t=t._next););this._proxyPairList._next=this._proxyPairPool,this._proxyPairPool=this._proxyPairList,this._proxyPairList=null}if(this._testCount=0,!(this._numProxies<2)){for(var e=this.numMovedProxies/this._numProxies<wn.bvhIncrementalCollisionThreshold,a=0,i=this.numMovedProxies;a<i;){var n=a++,s=this.movedProxies[n];if(s._moved){var r=this._tree,o=s._leaf;r._numLeaves--;var l=o._prevLeaf,_=o._nextLeaf;if(null!=l&&(l._nextLeaf=_),null!=_&&(_._prevLeaf=l),o==r.leafList&&(r.leafList=r.leafList._nextLeaf),o==r.leafListLast&&(r.leafListLast=r.leafListLast._prevLeaf),o._nextLeaf=null,o._prevLeaf=null,r._root==o)r._root=null;else{var h=o._parent,c=h._children[1^o._childIndex],g=h._parent;if(null==g)c._parent=null,c._childIndex=0,r._root=c,h._next=null,h._childIndex=0,h._children[0]=null,h._children[1]=null,h._childIndex=0,h._parent=null,h._height=0,h._proxy=null,h._next=r._nodePool,r._nodePool=h;else{c._parent=g;var u=h._childIndex;(g._children[u]=c)._parent=g,c._childIndex=u,h._next=null,h._childIndex=0,h._children[0]=null,h._children[1]=null,h._childIndex=0,h._parent=null,h._height=0,h._proxy=null,h._next=r._nodePool,r._nodePool=h;for(var f=g;null!=f;){if(r._strategy._balancingEnabled)if(f._height<2)f=f;else{var d=f._parent,b=f._children[0],p=f._children[1],m=b._height-p._height,I=f._childIndex;if(1<m){var v=b._children[0],M=b._children[1],C=v._height;if(M._height<C){(b._children[1]=f)._parent=b,f._childIndex=1,(f._children[0]=M)._parent=f,M._childIndex=0;var y=b._children[0],w=b._children[1];b._aabbMinX=y._aabbMinX<w._aabbMinX?y._aabbMinX:w._aabbMinX,b._aabbMinY=y._aabbMinY<w._aabbMinY?y._aabbMinY:w._aabbMinY,b._aabbMinZ=y._aabbMinZ<w._aabbMinZ?y._aabbMinZ:w._aabbMinZ,b._aabbMaxX=y._aabbMaxX>w._aabbMaxX?y._aabbMaxX:w._aabbMaxX,b._aabbMaxY=y._aabbMaxY>w._aabbMaxY?y._aabbMaxY:w._aabbMaxY,b._aabbMaxZ=y._aabbMaxZ>w._aabbMaxZ?y._aabbMaxZ:w._aabbMaxZ;var A=b._children[0]._height,x=b._children[1]._height;b._height=(x<A?A:x)+1;var Z=f._children[0],z=f._children[1];f._aabbMinX=Z._aabbMinX<z._aabbMinX?Z._aabbMinX:z._aabbMinX,f._aabbMinY=Z._aabbMinY<z._aabbMinY?Z._aabbMinY:z._aabbMinY,f._aabbMinZ=Z._aabbMinZ<z._aabbMinZ?Z._aabbMinZ:z._aabbMinZ,f._aabbMaxX=Z._aabbMaxX>z._aabbMaxX?Z._aabbMaxX:z._aabbMaxX,f._aabbMaxY=Z._aabbMaxY>z._aabbMaxY?Z._aabbMaxY:z._aabbMaxY,f._aabbMaxZ=Z._aabbMaxZ>z._aabbMaxZ?Z._aabbMaxZ:z._aabbMaxZ;var B=f._children[0]._height,N=f._children[1]._height;f._height=(N<B?B:N)+1}else{(b._children[0]=f)._parent=b,f._childIndex=0,(f._children[0]=v)._parent=f,v._childIndex=0;var G=b._children[0],k=b._children[1];b._aabbMinX=G._aabbMinX<k._aabbMinX?G._aabbMinX:k._aabbMinX,b._aabbMinY=G._aabbMinY<k._aabbMinY?G._aabbMinY:k._aabbMinY,b._aabbMinZ=G._aabbMinZ<k._aabbMinZ?G._aabbMinZ:k._aabbMinZ,b._aabbMaxX=G._aabbMaxX>k._aabbMaxX?G._aabbMaxX:k._aabbMaxX,b._aabbMaxY=G._aabbMaxY>k._aabbMaxY?G._aabbMaxY:k._aabbMaxY,b._aabbMaxZ=G._aabbMaxZ>k._aabbMaxZ?G._aabbMaxZ:k._aabbMaxZ;var S=b._children[0]._height,W=b._children[1]._height;b._height=(W<S?S:W)+1;var X=f._children[0],Y=f._children[1];f._aabbMinX=X._aabbMinX<Y._aabbMinX?X._aabbMinX:Y._aabbMinX,f._aabbMinY=X._aabbMinY<Y._aabbMinY?X._aabbMinY:Y._aabbMinY,f._aabbMinZ=X._aabbMinZ<Y._aabbMinZ?X._aabbMinZ:Y._aabbMinZ,f._aabbMaxX=X._aabbMaxX>Y._aabbMaxX?X._aabbMaxX:Y._aabbMaxX,f._aabbMaxY=X._aabbMaxY>Y._aabbMaxY?X._aabbMaxY:Y._aabbMaxY,f._aabbMaxZ=X._aabbMaxZ>Y._aabbMaxZ?X._aabbMaxZ:Y._aabbMaxZ;var D=f._children[0]._height,K=f._children[1]._height;f._height=(K<D?D:K)+1}null!=d?((d._children[I]=b)._parent=d,b._childIndex=I):(r._root=b)._parent=null,f=b}else if(m<-1){var L=p._children[0],V=p._children[1],H=L._height;if(V._height<H){(p._children[1]=f)._parent=p,f._childIndex=1,(f._children[1]=V)._parent=f,V._childIndex=1;var j=p._children[0],T=p._children[1];p._aabbMinX=j._aabbMinX<T._aabbMinX?j._aabbMinX:T._aabbMinX,p._aabbMinY=j._aabbMinY<T._aabbMinY?j._aabbMinY:T._aabbMinY,p._aabbMinZ=j._aabbMinZ<T._aabbMinZ?j._aabbMinZ:T._aabbMinZ,p._aabbMaxX=j._aabbMaxX>T._aabbMaxX?j._aabbMaxX:T._aabbMaxX,p._aabbMaxY=j._aabbMaxY>T._aabbMaxY?j._aabbMaxY:T._aabbMaxY,p._aabbMaxZ=j._aabbMaxZ>T._aabbMaxZ?j._aabbMaxZ:T._aabbMaxZ;var R=p._children[0]._height,F=p._children[1]._height;p._height=(F<R?R:F)+1;var O=f._children[0],P=f._children[1];f._aabbMinX=O._aabbMinX<P._aabbMinX?O._aabbMinX:P._aabbMinX,f._aabbMinY=O._aabbMinY<P._aabbMinY?O._aabbMinY:P._aabbMinY,f._aabbMinZ=O._aabbMinZ<P._aabbMinZ?O._aabbMinZ:P._aabbMinZ,f._aabbMaxX=O._aabbMaxX>P._aabbMaxX?O._aabbMaxX:P._aabbMaxX,f._aabbMaxY=O._aabbMaxY>P._aabbMaxY?O._aabbMaxY:P._aabbMaxY,f._aabbMaxZ=O._aabbMaxZ>P._aabbMaxZ?O._aabbMaxZ:P._aabbMaxZ;var J=f._children[0]._height,E=f._children[1]._height;f._height=(E<J?J:E)+1}else{(p._children[0]=f)._parent=p,f._childIndex=0,(f._children[1]=L)._parent=f,L._childIndex=1;var U=p._children[0],Q=p._children[1];p._aabbMinX=U._aabbMinX<Q._aabbMinX?U._aabbMinX:Q._aabbMinX,p._aabbMinY=U._aabbMinY<Q._aabbMinY?U._aabbMinY:Q._aabbMinY,p._aabbMinZ=U._aabbMinZ<Q._aabbMinZ?U._aabbMinZ:Q._aabbMinZ,p._aabbMaxX=U._aabbMaxX>Q._aabbMaxX?U._aabbMaxX:Q._aabbMaxX,p._aabbMaxY=U._aabbMaxY>Q._aabbMaxY?U._aabbMaxY:Q._aabbMaxY,p._aabbMaxZ=U._aabbMaxZ>Q._aabbMaxZ?U._aabbMaxZ:Q._aabbMaxZ;var q=p._children[0]._height,$=p._children[1]._height;p._height=($<q?q:$)+1;var tt=f._children[0],et=f._children[1];f._aabbMinX=tt._aabbMinX<et._aabbMinX?tt._aabbMinX:et._aabbMinX,f._aabbMinY=tt._aabbMinY<et._aabbMinY?tt._aabbMinY:et._aabbMinY,f._aabbMinZ=tt._aabbMinZ<et._aabbMinZ?tt._aabbMinZ:et._aabbMinZ,f._aabbMaxX=tt._aabbMaxX>et._aabbMaxX?tt._aabbMaxX:et._aabbMaxX,f._aabbMaxY=tt._aabbMaxY>et._aabbMaxY?tt._aabbMaxY:et._aabbMaxY,f._aabbMaxZ=tt._aabbMaxZ>et._aabbMaxZ?tt._aabbMaxZ:et._aabbMaxZ;var at=f._children[0]._height,it=f._children[1]._height;f._height=(it<at?at:it)+1}null!=d?((d._children[I]=p)._parent=d,p._childIndex=I):(r._root=p)._parent=null,f=p}else f=f}var nt=f._children[0]._height,st=f._children[1]._height;f._height=(st<nt?nt:st)+1;var rt=f._children[0],ot=f._children[1];f._aabbMinX=rt._aabbMinX<ot._aabbMinX?rt._aabbMinX:ot._aabbMinX,f._aabbMinY=rt._aabbMinY<ot._aabbMinY?rt._aabbMinY:ot._aabbMinY,f._aabbMinZ=rt._aabbMinZ<ot._aabbMinZ?rt._aabbMinZ:ot._aabbMinZ,f._aabbMaxX=rt._aabbMaxX>ot._aabbMaxX?rt._aabbMaxX:ot._aabbMaxX,f._aabbMaxY=rt._aabbMaxY>ot._aabbMaxY?rt._aabbMaxY:ot._aabbMaxY,f._aabbMaxZ=rt._aabbMaxZ>ot._aabbMaxZ?rt._aabbMaxZ:ot._aabbMaxZ,f=f._parent}}}s._leaf=null,o._next=null,o._childIndex=0,o._children[0]=null,o._children[1]=null,o._childIndex=0,o._parent=null,o._height=0,o._proxy=null,o._next=r._nodePool,r._nodePool=o;var lt=this._tree,_t=lt._nodePool;null!=_t?(lt._nodePool=_t._next,_t._next=null):_t=new xi;var ht=_t;if(((ht._proxy=s)._leaf=ht)._aabbMinX=s._aabbMinX,ht._aabbMinY=s._aabbMinY,ht._aabbMinZ=s._aabbMinZ,ht._aabbMaxX=s._aabbMaxX,ht._aabbMaxY=s._aabbMaxY,ht._aabbMaxZ=s._aabbMaxZ,lt._numLeaves++,null==lt.leafList?lt.leafList=ht:(lt.leafListLast._nextLeaf=ht)._prevLeaf=lt.leafListLast,lt.leafListLast=ht,null==lt._root)lt._root=ht;else{for(var ct=lt._root;0<ct._height;){var gt=lt._strategy._decideInsertion(ct,ht);if(-1==gt)break;ct=ct._children[gt]}var ut=ct._parent,ft=lt._nodePool;null!=ft?(lt._nodePool=ft._next,ft._next=null):ft=new xi;var dt=ft;if(null==ut)lt._root=dt;else{var bt=ct._childIndex;(ut._children[bt]=dt)._parent=ut,dt._childIndex=bt}var pt=ct._childIndex;(dt._children[pt]=ct)._parent=dt,ct._childIndex=pt;var mt=1^ct._childIndex;for((dt._children[mt]=ht)._parent=dt,ht._childIndex=mt;null!=dt;){if(lt._strategy._balancingEnabled)if(dt._height<2)dt=dt;else{var It=dt._parent,vt=dt._children[0],Mt=dt._children[1],Ct=vt._height-Mt._height,yt=dt._childIndex;if(1<Ct){var wt=vt._children[0],At=vt._children[1],xt=wt._height;if(At._height<xt){(vt._children[1]=dt)._parent=vt,dt._childIndex=1,(dt._children[0]=At)._parent=dt,At._childIndex=0;var Zt=vt._children[0],zt=vt._children[1];vt._aabbMinX=Zt._aabbMinX<zt._aabbMinX?Zt._aabbMinX:zt._aabbMinX,vt._aabbMinY=Zt._aabbMinY<zt._aabbMinY?Zt._aabbMinY:zt._aabbMinY,vt._aabbMinZ=Zt._aabbMinZ<zt._aabbMinZ?Zt._aabbMinZ:zt._aabbMinZ,vt._aabbMaxX=Zt._aabbMaxX>zt._aabbMaxX?Zt._aabbMaxX:zt._aabbMaxX,vt._aabbMaxY=Zt._aabbMaxY>zt._aabbMaxY?Zt._aabbMaxY:zt._aabbMaxY,vt._aabbMaxZ=Zt._aabbMaxZ>zt._aabbMaxZ?Zt._aabbMaxZ:zt._aabbMaxZ;var Bt=vt._children[0]._height,Nt=vt._children[1]._height;vt._height=(Nt<Bt?Bt:Nt)+1;var Gt=dt._children[0],kt=dt._children[1];dt._aabbMinX=Gt._aabbMinX<kt._aabbMinX?Gt._aabbMinX:kt._aabbMinX,dt._aabbMinY=Gt._aabbMinY<kt._aabbMinY?Gt._aabbMinY:kt._aabbMinY,dt._aabbMinZ=Gt._aabbMinZ<kt._aabbMinZ?Gt._aabbMinZ:kt._aabbMinZ,dt._aabbMaxX=Gt._aabbMaxX>kt._aabbMaxX?Gt._aabbMaxX:kt._aabbMaxX,dt._aabbMaxY=Gt._aabbMaxY>kt._aabbMaxY?Gt._aabbMaxY:kt._aabbMaxY,dt._aabbMaxZ=Gt._aabbMaxZ>kt._aabbMaxZ?Gt._aabbMaxZ:kt._aabbMaxZ;var St=dt._children[0]._height,Wt=dt._children[1]._height;dt._height=(Wt<St?St:Wt)+1}else{(vt._children[0]=dt)._parent=vt,dt._childIndex=0,(dt._children[0]=wt)._parent=dt,wt._childIndex=0;var Xt=vt._children[0],Yt=vt._children[1];vt._aabbMinX=Xt._aabbMinX<Yt._aabbMinX?Xt._aabbMinX:Yt._aabbMinX,vt._aabbMinY=Xt._aabbMinY<Yt._aabbMinY?Xt._aabbMinY:Yt._aabbMinY,vt._aabbMinZ=Xt._aabbMinZ<Yt._aabbMinZ?Xt._aabbMinZ:Yt._aabbMinZ,vt._aabbMaxX=Xt._aabbMaxX>Yt._aabbMaxX?Xt._aabbMaxX:Yt._aabbMaxX,vt._aabbMaxY=Xt._aabbMaxY>Yt._aabbMaxY?Xt._aabbMaxY:Yt._aabbMaxY,vt._aabbMaxZ=Xt._aabbMaxZ>Yt._aabbMaxZ?Xt._aabbMaxZ:Yt._aabbMaxZ;var Dt=vt._children[0]._height,Kt=vt._children[1]._height;vt._height=(Kt<Dt?Dt:Kt)+1;var Lt=dt._children[0],Vt=dt._children[1];dt._aabbMinX=Lt._aabbMinX<Vt._aabbMinX?Lt._aabbMinX:Vt._aabbMinX,dt._aabbMinY=Lt._aabbMinY<Vt._aabbMinY?Lt._aabbMinY:Vt._aabbMinY,dt._aabbMinZ=Lt._aabbMinZ<Vt._aabbMinZ?Lt._aabbMinZ:Vt._aabbMinZ,dt._aabbMaxX=Lt._aabbMaxX>Vt._aabbMaxX?Lt._aabbMaxX:Vt._aabbMaxX,dt._aabbMaxY=Lt._aabbMaxY>Vt._aabbMaxY?Lt._aabbMaxY:Vt._aabbMaxY,dt._aabbMaxZ=Lt._aabbMaxZ>Vt._aabbMaxZ?Lt._aabbMaxZ:Vt._aabbMaxZ;var Ht=dt._children[0]._height,jt=dt._children[1]._height;dt._height=(jt<Ht?Ht:jt)+1}null!=It?((It._children[yt]=vt)._parent=It,vt._childIndex=yt):(lt._root=vt)._parent=null,dt=vt}else if(Ct<-1){var Tt=Mt._children[0],Rt=Mt._children[1],Ft=Tt._height;if(Rt._height<Ft){(Mt._children[1]=dt)._parent=Mt,dt._childIndex=1,(dt._children[1]=Rt)._parent=dt,Rt._childIndex=1;var Ot=Mt._children[0],Pt=Mt._children[1];Mt._aabbMinX=Ot._aabbMinX<Pt._aabbMinX?Ot._aabbMinX:Pt._aabbMinX,Mt._aabbMinY=Ot._aabbMinY<Pt._aabbMinY?Ot._aabbMinY:Pt._aabbMinY,Mt._aabbMinZ=Ot._aabbMinZ<Pt._aabbMinZ?Ot._aabbMinZ:Pt._aabbMinZ,Mt._aabbMaxX=Ot._aabbMaxX>Pt._aabbMaxX?Ot._aabbMaxX:Pt._aabbMaxX,Mt._aabbMaxY=Ot._aabbMaxY>Pt._aabbMaxY?Ot._aabbMaxY:Pt._aabbMaxY,Mt._aabbMaxZ=Ot._aabbMaxZ>Pt._aabbMaxZ?Ot._aabbMaxZ:Pt._aabbMaxZ;var Jt=Mt._children[0]._height,Et=Mt._children[1]._height;Mt._height=(Et<Jt?Jt:Et)+1;var Ut=dt._children[0],Qt=dt._children[1];dt._aabbMinX=Ut._aabbMinX<Qt._aabbMinX?Ut._aabbMinX:Qt._aabbMinX,dt._aabbMinY=Ut._aabbMinY<Qt._aabbMinY?Ut._aabbMinY:Qt._aabbMinY,dt._aabbMinZ=Ut._aabbMinZ<Qt._aabbMinZ?Ut._aabbMinZ:Qt._aabbMinZ,dt._aabbMaxX=Ut._aabbMaxX>Qt._aabbMaxX?Ut._aabbMaxX:Qt._aabbMaxX,dt._aabbMaxY=Ut._aabbMaxY>Qt._aabbMaxY?Ut._aabbMaxY:Qt._aabbMaxY,dt._aabbMaxZ=Ut._aabbMaxZ>Qt._aabbMaxZ?Ut._aabbMaxZ:Qt._aabbMaxZ;var qt=dt._children[0]._height,$t=dt._children[1]._height;dt._height=($t<qt?qt:$t)+1}else{(Mt._children[0]=dt)._parent=Mt,dt._childIndex=0,(dt._children[1]=Tt)._parent=dt,Tt._childIndex=1;var te=Mt._children[0],ee=Mt._children[1];Mt._aabbMinX=te._aabbMinX<ee._aabbMinX?te._aabbMinX:ee._aabbMinX,Mt._aabbMinY=te._aabbMinY<ee._aabbMinY?te._aabbMinY:ee._aabbMinY,Mt._aabbMinZ=te._aabbMinZ<ee._aabbMinZ?te._aabbMinZ:ee._aabbMinZ,Mt._aabbMaxX=te._aabbMaxX>ee._aabbMaxX?te._aabbMaxX:ee._aabbMaxX,Mt._aabbMaxY=te._aabbMaxY>ee._aabbMaxY?te._aabbMaxY:ee._aabbMaxY,Mt._aabbMaxZ=te._aabbMaxZ>ee._aabbMaxZ?te._aabbMaxZ:ee._aabbMaxZ;var ae=Mt._children[0]._height,ie=Mt._children[1]._height;Mt._height=(ie<ae?ae:ie)+1;var ne=dt._children[0],se=dt._children[1];dt._aabbMinX=ne._aabbMinX<se._aabbMinX?ne._aabbMinX:se._aabbMinX,dt._aabbMinY=ne._aabbMinY<se._aabbMinY?ne._aabbMinY:se._aabbMinY,dt._aabbMinZ=ne._aabbMinZ<se._aabbMinZ?ne._aabbMinZ:se._aabbMinZ,dt._aabbMaxX=ne._aabbMaxX>se._aabbMaxX?ne._aabbMaxX:se._aabbMaxX,dt._aabbMaxY=ne._aabbMaxY>se._aabbMaxY?ne._aabbMaxY:se._aabbMaxY,dt._aabbMaxZ=ne._aabbMaxZ>se._aabbMaxZ?ne._aabbMaxZ:se._aabbMaxZ;var re=dt._children[0]._height,oe=dt._children[1]._height;dt._height=(oe<re?re:oe)+1}null!=It?((It._children[yt]=Mt)._parent=It,Mt._childIndex=yt):(lt._root=Mt)._parent=null,dt=Mt}else dt=dt}var le=dt._children[0]._height,_e=dt._children[1]._height;dt._height=(_e<le?le:_e)+1;var he=dt._children[0],ce=dt._children[1];dt._aabbMinX=he._aabbMinX<ce._aabbMinX?he._aabbMinX:ce._aabbMinX,dt._aabbMinY=he._aabbMinY<ce._aabbMinY?he._aabbMinY:ce._aabbMinY,dt._aabbMinZ=he._aabbMinZ<ce._aabbMinZ?he._aabbMinZ:ce._aabbMinZ,dt._aabbMaxX=he._aabbMaxX>ce._aabbMaxX?he._aabbMaxX:ce._aabbMaxX,dt._aabbMaxY=he._aabbMaxY>ce._aabbMaxY?he._aabbMaxY:ce._aabbMaxY,dt._aabbMaxZ=he._aabbMaxZ>ce._aabbMaxZ?he._aabbMaxZ:ce._aabbMaxZ,dt=dt._parent}}e&&this.collide(this._tree._root,s._leaf),s._moved=!1}this.movedProxies[n]=null}e||this.collide(this._tree._root,this._tree._root),this.numMovedProxies=0}},__class__:Ai});var xi=function(){this._next=null,this._prevLeaf=null,this._nextLeaf=null;var t=new Array(2);this._children=t,this._childIndex=0,this._parent=null,this._height=0,this._proxy=null,this._aabbMinX=0,this._aabbMinY=0,this._aabbMinZ=0,this._aabbMaxX=0,this._aabbMaxY=0,this._aabbMaxZ=0};(i["oimo.collision.broadphase.bvh.BvhNode"]=xi).__name__=!0,xi.prototype={_next:null,_prevLeaf:null,_nextLeaf:null,_children:null,_childIndex:null,_parent:null,_height:null,_proxy:null,_aabbMinX:null,_aabbMinY:null,_aabbMinZ:null,_aabbMaxX:null,_aabbMaxY:null,_aabbMaxZ:null,_tmpX:null,_tmpY:null,_tmpZ:null,__class__:xi};var Zi=function(t,e){Ci.call(this,t,e),this._leaf=null,this._moved=!1};(i["oimo.collision.broadphase.bvh.BvhProxy"]=Zi).__name__=!0,Zi.__super__=Ci,Zi.prototype=s(Ci.prototype,{_leaf:null,_moved:null,__class__:Zi});var zi=function(){this._insertionStrategy=0,this._balancingEnabled=!1};(i["oimo.collision.broadphase.bvh.BvhStrategy"]=zi).__name__=!0,zi.prototype={_insertionStrategy:null,_balancingEnabled:null,_decideInsertion:function(t,e){switch(this._insertionStrategy){case 0:var a,i,n;a=e._aabbMinX+e._aabbMaxX,i=e._aabbMinY+e._aabbMaxY,n=e._aabbMinZ+e._aabbMaxZ;var s,r,o,l,_,h,c=t._children[0],g=t._children[1];return s=c._aabbMinX+c._aabbMaxX,r=c._aabbMinY+c._aabbMaxY,o=c._aabbMinZ+c._aabbMaxZ,l=g._aabbMinX+g._aabbMaxX,_=g._aabbMinY+g._aabbMaxY,h=g._aabbMinZ+g._aabbMaxZ,(s-=a)*s+(r-=i)*r+(o-=n)*o<(l-=a)*l+(_-=i)*_+(h-=n)*h?0:1;case 1:var u,f,d,b,p,m,I=t._children[0],v=t._children[1],M=t._aabbMaxX-t._aabbMinX,C=t._aabbMaxY-t._aabbMinY,y=t._aabbMaxZ-t._aabbMinZ,w=2*(M*(C+y)+C*y);u=t._aabbMinX<e._aabbMinX?t._aabbMinX:e._aabbMinX,f=t._aabbMinY<e._aabbMinY?t._aabbMinY:e._aabbMinY,d=t._aabbMinZ<e._aabbMinZ?t._aabbMinZ:e._aabbMinZ,b=t._aabbMaxX>e._aabbMaxX?t._aabbMaxX:e._aabbMaxX;var A=(p=t._aabbMaxY>e._aabbMaxY?t._aabbMaxY:e._aabbMaxY)-f,x=(m=t._aabbMaxZ>e._aabbMaxZ?t._aabbMaxZ:e._aabbMaxZ)-d,Z=2*((b-u)*(A+x)+A*x),z=2*Z,B=2*(Z-w),N=B;if(u=I._aabbMinX<e._aabbMinX?I._aabbMinX:e._aabbMinX,f=I._aabbMinY<e._aabbMinY?I._aabbMinY:e._aabbMinY,d=I._aabbMinZ<e._aabbMinZ?I._aabbMinZ:e._aabbMinZ,b=I._aabbMaxX>e._aabbMaxX?I._aabbMaxX:e._aabbMaxX,p=I._aabbMaxY>e._aabbMaxY?I._aabbMaxY:e._aabbMaxY,m=I._aabbMaxZ>e._aabbMaxZ?I._aabbMaxZ:e._aabbMaxZ,0==I._height){var G=p-f,k=m-d;N+=2*((b-u)*(G+k)+G*k)}else{var S=b-u,W=p-f,X=m-d,Y=I._aabbMaxX-I._aabbMinX,D=I._aabbMaxY-I._aabbMinY,K=I._aabbMaxZ-I._aabbMinZ;N+=2*(S*(W+X)+W*X)-2*(Y*(D+K)+D*K)}var L=B;if(u=v._aabbMinX<e._aabbMinX?v._aabbMinX:e._aabbMinX,f=v._aabbMinY<e._aabbMinY?v._aabbMinY:e._aabbMinY,d=v._aabbMinZ<e._aabbMinZ?v._aabbMinZ:e._aabbMinZ,b=v._aabbMaxX>e._aabbMaxX?v._aabbMaxX:e._aabbMaxX,p=v._aabbMaxY>e._aabbMaxY?v._aabbMaxY:e._aabbMaxY,m=v._aabbMaxZ>e._aabbMaxZ?v._aabbMaxZ:e._aabbMaxZ,0==v._height){var V=p-f,H=m-d;L+=2*((b-u)*(V+H)+V*H)}else{var j=b-u,T=p-f,R=m-d,F=v._aabbMaxX-v._aabbMinX,O=v._aabbMaxY-v._aabbMinY,P=v._aabbMaxZ-v._aabbMinZ;L+=2*(j*(T+R)+T*R)-2*(F*(O+P)+O*P)}return z<N?z<L?-1:1:N<L?0:1;default:return Oe.trace("invalid BVH insertion strategy: "+this._insertionStrategy,{fileName:"Sources/oimo/collision/broadphase/bvh/BvhStrategy.hx",lineNumber:37,className:"oimo.collision.broadphase.bvh.BvhStrategy",methodName:"_decideInsertion"}),-1}},_splitLeaves:function(t,e,a){var i,n,s,r=1/(a-e);s=n=i=0;for(var o,l,_,h=e,c=a;h<c;){var g=t[h++];g._tmpX=g._aabbMaxX+g._aabbMinX,g._tmpY=g._aabbMaxY+g._aabbMinY,g._tmpZ=g._aabbMaxZ+g._aabbMinZ,i+=g._tmpX,n+=g._tmpY,s+=g._tmpZ}i*=r,n*=r,s*=r,_=l=o=0;for(var u=e,f=a;u<f;){var d,b,p,m=t[u++];d=m._tmpX-i,b=m._tmpY-n,p=m._tmpZ-s,o+=d*=d,l+=b*=b,_+=p*=p}var I=l,v=_,M=e,C=a-1;if(I<o)if(v<o)for(var y=i;;){for(;;){if(t[M]._tmpX<=y)break;++M}for(;;){if(t[C]._tmpX>=y)break;--C}if(C<=M)break;var w=t[M];t[M]=t[C],t[C]=w,++M,--C}else for(var A=s;;){for(;;){if(t[M]._tmpZ<=A)break;++M}for(;;){if(t[C]._tmpZ>=A)break;--C}if(C<=M)break;var x=t[M];t[M]=t[C],t[C]=x,++M,--C}else if(v<I)for(var Z=n;;){for(;;){if(t[M]._tmpY<=Z)break;++M}for(;;){if(t[C]._tmpY>=Z)break;--C}if(C<=M)break;var z=t[M];t[M]=t[C],t[C]=z,++M,--C}else for(var B=s;;){for(;;){if(t[M]._tmpZ<=B)break;++M}for(;;){if(t[C]._tmpZ>=B)break;--C}if(C<=M)break;var N=t[M];t[M]=t[C],t[C]=N,++M,--C}return M},__class__:zi};var Bi=function(){this._root=null,this._numLeaves=0,this._strategy=new zi,this._nodePool=null,this.leafList=null,this.leafListLast=null;var t=new Array(1024);this.tmp=t};(i["oimo.collision.broadphase.bvh.BvhTree"]=Bi).__name__=!0,Bi.prototype={_root:null,_numLeaves:null,_strategy:null,_nodePool:null,leafList:null,leafListLast:null,tmp:null,decomposeRecursive:function(t){if(0==t._height)return t._childIndex=0,void(t._parent=null);this.decomposeRecursive(t._children[0]),this.decomposeRecursive(t._children[1]),t._next=null,t._childIndex=0,t._children[0]=null,t._children[1]=null,t._childIndex=0,t._parent=null,t._height=0,t._proxy=null,t._next=this._nodePool,this._nodePool=t},buildTopDownRecursive:function(t,e,a){if(1==a-e){var i=t[e],n=i._proxy;return i._aabbMinX=n._aabbMinX,i._aabbMinY=n._aabbMinY,i._aabbMinZ=n._aabbMinZ,i._aabbMaxX=n._aabbMaxX,i._aabbMaxY=n._aabbMaxY,i._aabbMaxZ=n._aabbMaxZ,i}var s=this._strategy._splitLeaves(t,e,a),r=this.buildTopDownRecursive(t,e,s),o=this.buildTopDownRecursive(t,s,a),l=this._nodePool;null!=l?(this._nodePool=l._next,l._next=null):l=new xi;var _=l;(_._children[0]=r)._parent=_,r._childIndex=0,(_._children[1]=o)._parent=_,o._childIndex=1;var h=_._children[0],c=_._children[1];_._aabbMinX=h._aabbMinX<c._aabbMinX?h._aabbMinX:c._aabbMinX,_._aabbMinY=h._aabbMinY<c._aabbMinY?h._aabbMinY:c._aabbMinY,_._aabbMinZ=h._aabbMinZ<c._aabbMinZ?h._aabbMinZ:c._aabbMinZ,_._aabbMaxX=h._aabbMaxX>c._aabbMaxX?h._aabbMaxX:c._aabbMaxX,_._aabbMaxY=h._aabbMaxY>c._aabbMaxY?h._aabbMaxY:c._aabbMaxY,_._aabbMaxZ=h._aabbMaxZ>c._aabbMaxZ?h._aabbMaxZ:c._aabbMaxZ;var g=_._children[0]._height,u=_._children[1]._height;return _._height=(u<g?g:u)+1,_},__class__:Bi};var Ni=function(){this._minX=0,this._minY=0,this._minZ=0,this._maxX=0,this._maxY=0,this._maxZ=0};(i["oimo.collision.geometry.Aabb"]=Ni).__name__=!0,Ni.prototype={_minX:null,_minY:null,_minZ:null,_maxX:null,_maxY:null,_maxZ:null,__class__:Ni};var Gi=function(t){mi.call(this,1);var e=t;this._halfExtentsX=e.x,this._halfExtentsY=e.y,this._halfExtentsZ=e.z,this._halfAxisXX=t.x,this._halfAxisXY=0,this._halfAxisXZ=0,this._halfAxisYX=0,this._halfAxisYY=t.y,this._halfAxisYZ=0,this._halfAxisZX=0,this._halfAxisZY=0,this._halfAxisZZ=t.z,this._updateMass();var a=t.x<t.y?t.z<t.x?t.z:t.x:t.z<t.y?t.z:t.y;this._gjkMargin>.2*a&&(this._gjkMargin=.2*a)};(i["oimo.collision.geometry.BoxGeometry"]=Gi).__name__=!0,Gi.__super__=mi,Gi.prototype=s(mi.prototype,{_halfExtentsX:null,_halfExtentsY:null,_halfExtentsZ:null,_halfAxisXX:null,_halfAxisXY:null,_halfAxisXZ:null,_halfAxisYX:null,_halfAxisYY:null,_halfAxisYZ:null,_halfAxisZX:null,_halfAxisZY:null,_halfAxisZZ:null,_updateMass:function(){var t,e,a;this._volume=this._halfExtentsX*this._halfExtentsY*this._halfExtentsZ*8,t=this._halfExtentsX*this._halfExtentsX,e=this._halfExtentsY*this._halfExtentsY,a=this._halfExtentsZ*this._halfExtentsZ,this._inertiaCoeff00=.3333333333333333*(e+a),this._inertiaCoeff01=0,this._inertiaCoeff02=0,this._inertiaCoeff10=0,this._inertiaCoeff11=.3333333333333333*(a+t),this._inertiaCoeff12=0,this._inertiaCoeff20=0,this._inertiaCoeff21=0,this._inertiaCoeff22=.3333333333333333*(t+e)},_computeAabb:function(t,e){var a,i,n,s,r,o,l,_,h,c,g,u,f;c=e._rotation00*this._halfAxisXX+e._rotation01*this._halfAxisXY+e._rotation02*this._halfAxisXZ,i=e._rotation10*this._halfAxisXX+e._rotation11*this._halfAxisXY+e._rotation12*this._halfAxisXZ,n=e._rotation20*this._halfAxisXX+e._rotation21*this._halfAxisXY+e._rotation22*this._halfAxisXZ,g=(a=(a=c)<0?-a:a)+(s=(s=e._rotation00*this._halfAxisYX+e._rotation01*this._halfAxisYY+e._rotation02*this._halfAxisYZ)<0?-s:s),u=(i=i<0?-i:i)+(r=(r=e._rotation10*this._halfAxisYX+e._rotation11*this._halfAxisYY+e._rotation12*this._halfAxisYZ)<0?-r:r),f=(n=n<0?-n:n)+(o=(o=e._rotation20*this._halfAxisYX+e._rotation21*this._halfAxisYY+e._rotation22*this._halfAxisYZ)<0?-o:o),g+=l=(l=e._rotation00*this._halfAxisZX+e._rotation01*this._halfAxisZY+e._rotation02*this._halfAxisZZ)<0?-l:l,u+=_=(_=e._rotation10*this._halfAxisZX+e._rotation11*this._halfAxisZY+e._rotation12*this._halfAxisZZ)<0?-_:_,f+=h=(h=e._rotation20*this._halfAxisZX+e._rotation21*this._halfAxisZY+e._rotation22*this._halfAxisZZ)<0?-h:h,t._minX=e._positionX-g,t._minY=e._positionY-u,t._minZ=e._positionZ-f,t._maxX=e._positionX+g,t._maxY=e._positionY+u,t._maxZ=e._positionZ+f},computeLocalSupportingVertex:function(t,e){var a,i,n,s,r,o;a=this._gjkMargin,i=this._gjkMargin,n=this._gjkMargin,a=a<this._halfExtentsX?a:this._halfExtentsX,i=i<this._halfExtentsY?i:this._halfExtentsY,n=n<this._halfExtentsZ?n:this._halfExtentsZ,s=this._halfExtentsX-a,r=this._halfExtentsY-i,o=this._halfExtentsZ-n,e.x=0<t.x?s:-s,e.y=0<t.y?r:-r,e.z=0<t.z?o:-o},__class__:Gi});var ki=function(t,e){mi.call(this,4),this._radius=t,this._halfHeight=e,this._gjkMargin=this._radius,this._updateMass()};(i["oimo.collision.geometry.CapsuleGeometry"]=ki).__name__=!0,ki.__super__=mi,ki.prototype=s(mi.prototype,{_radius:null,_halfHeight:null,_updateMass:function(){var t=this._radius*this._radius,e=this._halfHeight*this._halfHeight,a=6.28318530717958*t*this._halfHeight,i=3.14159265358979*t*this._radius*4/3;this._volume=a+i;var n=0==this._volume?0:1/this._volume,s=n*(a*t*.5+i*t*.4),r=n*(a*(.25*t+e/3)+i*(.4*t+this._halfHeight*this._radius*.75+e));this._inertiaCoeff00=r,this._inertiaCoeff01=0,this._inertiaCoeff02=0,this._inertiaCoeff10=0,this._inertiaCoeff11=s,this._inertiaCoeff12=0,this._inertiaCoeff20=0,this._inertiaCoeff21=0,this._inertiaCoeff22=r},_computeAabb:function(t,e){var a,i,n,s,r,o;a=this._radius,i=this._radius,n=this._radius,s=(s=e._rotation01)<0?-s:s,r=(r=e._rotation11)<0?-r:r,o=(o=e._rotation21)<0?-o:o,a+=s*=this._halfHeight,i+=r*=this._halfHeight,n+=o*=this._halfHeight,t._minX=e._positionX-a,t._minY=e._positionY-i,t._minZ=e._positionZ-n,t._maxX=e._positionX+a,t._maxY=e._positionY+i,t._maxZ=e._positionZ+n},computeLocalSupportingVertex:function(t,e){0<t.y?e.init(0,this._halfHeight,0):e.init(0,-this._halfHeight,0)},__class__:ki});var Si=function(t,e){mi.call(this,3),this._radius=t,this._halfHeight=e,this.sinTheta=t/Math.sqrt(t*t+4*e*e),this.cosTheta=2*e/Math.sqrt(t*t+4*e*e),this._updateMass()};(i["oimo.collision.geometry.ConeGeometry"]=Si).__name__=!0,Si.__super__=mi,Si.prototype=s(mi.prototype,{_radius:null,_halfHeight:null,sinTheta:null,cosTheta:null,_updateMass:function(){var t=this._radius*this._radius,e=this._halfHeight*this._halfHeight*4;this._volume=3.14159265358979*t*this._halfHeight*2/3,this._inertiaCoeff00=.05*(3*t+2*e),this._inertiaCoeff01=0,this._inertiaCoeff02=0,this._inertiaCoeff10=0,this._inertiaCoeff11=.3*t,this._inertiaCoeff12=0,this._inertiaCoeff20=0,this._inertiaCoeff21=0,this._inertiaCoeff22=.08333333333333333*(3*t+2*e)},_computeAabb:function(t,e){var a,i,n,s,r,o,l,_,h,c,g,u,f,d,b,p,m,I,v,M,C,y=(a=e._rotation01)*a,w=(i=e._rotation11)*i,A=(n=e._rotation21)*n;l=Math.sqrt(1-y),_=Math.sqrt(1-w),h=Math.sqrt(1-A),l*=this._radius,_*=this._radius,h*=this._radius,f=c=-(s=a*this._halfHeight),d=g=-(r=i*this._halfHeight),b=u=-(o=n*this._halfHeight),p=s<(p=(f+=l)<(c-=l)?c:f)?p:s,m=r<(m=(d+=_)<(g-=_)?g:d)?m:r,I=o<(I=(b+=h)<(u-=h)?u:b)?I:o,v=(v=c<f?c:f)<s?v:s,M=(M=g<d?g:d)<r?M:r,C=(C=u<b?u:b)<o?C:o,t._minX=e._positionX+v,t._minY=e._positionY+M,t._minZ=e._positionZ+C,t._maxX=e._positionX+p,t._maxY=e._positionY+m,t._maxZ=e._positionZ+I},computeLocalSupportingVertex:function(t,e){var a=t.x,i=t.y,n=t.z;if(0<i&&i*i>this.sinTheta*this.sinTheta*(a*a+i*i+n*n))return e.init(0,this._halfHeight-this._gjkMargin/this.sinTheta,0),void(e.y<0&&(e.y=0));var s=t.x,r=t.z,o=s*s+r*r,l=2*this._halfHeight,_=(l-this._gjkMargin)/l*this._radius-this._gjkMargin/this.cosTheta;_<0&&(_=0);var h=0<o?_/Math.sqrt(o):0,c=this._halfHeight-this._gjkMargin;c<0&&(c=0),e.x=s*h,e.y=-c,e.z=r*h},__class__:Si});var Wi=function(t){mi.call(this,5),this._numVertices=t.length;var e=new Array(this._numVertices);this._vertices=e;var a=new Array(this._numVertices);this._tmpVertices=a;for(var i=0,n=this._numVertices;i<n;){var s=i++;this._vertices[s]=t[s],this._tmpVertices[s]=new Jt}this._useGjkRayCast=!0,this._updateMass()};(i["oimo.collision.geometry.ConvexHullGeometry"]=Wi).__name__=!0,Wi.__super__=mi,Wi.prototype=s(mi.prototype,{_vertices:null,_tmpVertices:null,_numVertices:null,_updateMass:function(){this._volume=1,this._inertiaCoeff00=1,this._inertiaCoeff01=0,this._inertiaCoeff02=0,this._inertiaCoeff10=0,this._inertiaCoeff11=1,this._inertiaCoeff12=0,this._inertiaCoeff20=0,this._inertiaCoeff21=0,this._inertiaCoeff22=1;for(var t=this._vertices[0].x,e=this._vertices[0].y,a=this._vertices[0].z,i=this._vertices[0].x,n=this._vertices[0].y,s=this._vertices[0].z,r=1,o=this._numVertices;r<o;){var l=r++,_=this._vertices[l].x,h=this._vertices[l].y,c=this._vertices[l].z;_<t?t=_:i<_&&(i=_),h<e?e=h:n<h&&(n=h),c<a?a=c:s<c&&(s=c)}var g=i-t,u=n-e,f=s-a;this._volume=g*u*f;var d=.25*((t+i)*(t+i)+(e+n)*(e+n)+(a+s)*(a+s));g=g*g*.25,u=u*u*.25,f=f*f*.25,this._inertiaCoeff00=.3333333333333333*(u+f)+d,this._inertiaCoeff01=0,this._inertiaCoeff02=0,this._inertiaCoeff10=0,this._inertiaCoeff11=.3333333333333333*(f+g)+d,this._inertiaCoeff12=0,this._inertiaCoeff20=0,this._inertiaCoeff21=0,this._inertiaCoeff22=.3333333333333333*(g+u)+d},_computeAabb:function(t,e){var a,i,n,s,r,o,l,_,h,c,g,u;l=this._gjkMargin,_=this._gjkMargin,h=this._gjkMargin;var f,d,b,p=this._vertices[0];c=p.x,g=p.y,u=p.z,f=e._rotation00*c+e._rotation01*g+e._rotation02*u,d=e._rotation10*c+e._rotation11*g+e._rotation12*u,b=e._rotation20*c+e._rotation21*g+e._rotation22*u,s=a=f+=e._positionX,r=i=d+=e._positionY,o=n=b+=e._positionZ;for(var m=1,I=this._numVertices;m<I;){var v=m++,M=this._vertices[v];c=M.x,g=M.y,u=M.z,f=e._rotation00*c+e._rotation01*g+e._rotation02*u,d=e._rotation10*c+e._rotation11*g+e._rotation12*u,b=e._rotation20*c+e._rotation21*g+e._rotation22*u,a=a<(f+=e._positionX)?a:f,i=i<(d+=e._positionY)?i:d,n=n<(b+=e._positionZ)?n:b,s=f<s?s:f,r=d<r?r:d,o=b<o?o:b}t._minX=a-l,t._minY=i-_,t._minZ=n-h,t._maxX=s+l,t._maxY=r+_,t._maxZ=o+h},computeLocalSupportingVertex:function(t,e){for(var a=this._vertices[0],i=a.x*t.x+a.y*t.y+a.z*t.z,n=0,s=1,r=this._numVertices;s<r;){var o=s++,l=this._vertices[o],_=l.x*t.x+l.y*t.y+l.z*t.z;i<_&&(i=_,n=o)}var h=this._vertices[n];e.x=h.x,e.y=h.y,e.z=h.z},__class__:Wi});var Xi=function(t,e){mi.call(this,2),this._radius=t,this._halfHeight=e,this._updateMass()};(i["oimo.collision.geometry.CylinderGeometry"]=Xi).__name__=!0,Xi.__super__=mi,Xi.prototype=s(mi.prototype,{_radius:null,_halfHeight:null,_updateMass:function(){var t=this._radius*this._radius,e=this._halfHeight*this._halfHeight*4;this._volume=3.14159265358979*t*this._halfHeight*2,this._inertiaCoeff00=.08333333333333333*(3*t+e),this._inertiaCoeff01=0,this._inertiaCoeff02=0,this._inertiaCoeff10=0,this._inertiaCoeff11=.5*t,this._inertiaCoeff12=0,this._inertiaCoeff20=0,this._inertiaCoeff21=0,this._inertiaCoeff22=.08333333333333333*(3*t+e)},_computeAabb:function(t,e){var a,i,n,s,r,o,l,_,h,c=(a=(a=e._rotation01)<0?-a:a)*a,g=(i=(i=e._rotation11)<0?-i:i)*i,u=(n=(n=e._rotation21)<0?-n:n)*n;s=Math.sqrt(1-c),r=Math.sqrt(1-g),o=Math.sqrt(1-u),s*=this._radius,r*=this._radius,o*=this._radius,l=s+a*this._halfHeight,_=r+i*this._halfHeight,h=o+n*this._halfHeight,t._minX=e._positionX-l,t._minY=e._positionY-_,t._minZ=e._positionZ-h,t._maxX=e._positionX+l,t._maxY=e._positionY+_,t._maxZ=e._positionZ+h},computeLocalSupportingVertex:function(t,e){var a=t.x,i=t.z,n=a*a+i*i,s=this._radius-this._gjkMargin;s<0&&(s=0);var r=0<n?s/Math.sqrt(n):0,o=this._halfHeight-this._gjkMargin;o<0&&(o=0),e.x=a*r,e.y=0<t.y?o:-o,e.z=i*r},__class__:Xi});var Yi=function(){this.position=new Jt,this.normal=new Jt,this.fraction=0};(i["oimo.collision.geometry.RayCastHit"]=Yi).__name__=!0,Yi.prototype={position:null,normal:null,fraction:null,__class__:Yi};var Di=function(t){mi.call(this,0),this._radius=t,this._gjkMargin=this._radius,this._updateMass()};(i["oimo.collision.geometry.SphereGeometry"]=Di).__name__=!0,Di.__super__=mi,Di.prototype=s(mi.prototype,{_radius:null,_updateMass:function(){this._volume=4.188790204786386*this._radius*this._radius*this._radius,this._inertiaCoeff00=.4*this._radius*this._radius,this._inertiaCoeff01=0,this._inertiaCoeff02=0,this._inertiaCoeff10=0,this._inertiaCoeff11=.4*this._radius*this._radius,this._inertiaCoeff12=0,this._inertiaCoeff20=0,this._inertiaCoeff21=0,this._inertiaCoeff22=.4*this._radius*this._radius},_computeAabb:function(t,e){var a,i,n;a=this._radius,i=this._radius,n=this._radius,t._minX=e._positionX-a,t._minY=e._positionY-i,t._minZ=e._positionZ-n,t._maxX=e._positionX+a,t._maxY=e._positionY+i,t._maxZ=e._positionZ+n},computeLocalSupportingVertex:function(t,e){e.zero()},__class__:Di});var Ki=function(){var t=new Array(8);this.detectors=t;for(var e=0;e<6;){var a=e++,i=this.detectors,n=new Array(8);i[a]=n}var s=new Pi;this.detectors[0][0]=new Ui,this.detectors[0][1]=new Ji(!1),this.detectors[0][2]=s,this.detectors[0][3]=s,this.detectors[0][4]=new Ei(!1),this.detectors[0][5]=s,this.detectors[1][0]=new Ji(!0),this.detectors[1][1]=new ji,this.detectors[1][2]=s,this.detectors[1][3]=s,this.detectors[1][4]=s,this.detectors[1][5]=s,this.detectors[2][0]=s,this.detectors[2][1]=s,this.detectors[2][2]=s,this.detectors[2][3]=s,this.detectors[2][4]=s,this.detectors[2][5]=s,this.detectors[3][0]=s,this.detectors[3][1]=s,this.detectors[3][2]=s,this.detectors[3][3]=s,this.detectors[3][4]=s,this.detectors[3][5]=s,this.detectors[4][0]=new Ei(!0),this.detectors[4][1]=s,this.detectors[4][2]=s,this.detectors[4][3]=s,this.detectors[4][4]=new Oi,this.detectors[4][5]=s,this.detectors[5][0]=s,this.detectors[5][1]=s,this.detectors[5][2]=s,this.detectors[5][3]=s,this.detectors[5][4]=s,this.detectors[5][5]=s};(i["oimo.collision.narrowphase.CollisionMatrix"]=Ki).__name__=!0,Ki.prototype={detectors:null,__class__:Ki};var Li=function(){this.numPoints=0,this.normal=new Jt;var t=new Array(wn.maxManifoldPoints);this.points=t,this.incremental=!1;for(var e=0,a=wn.maxManifoldPoints;e<a;){var i=e++;this.points[i]=new Vi}};(i["oimo.collision.narrowphase.DetectorResult"]=Li).__name__=!0,Li.prototype={numPoints:null,points:null,normal:null,incremental:null,getMaxDepth:function(){for(var t=0,e=0,a=this.numPoints;e<a;){var i=e++;this.points[i].depth>t&&(t=this.points[i].depth)}return t},__class__:Li};var Vi=function(){this.position1=new Jt,this.position2=new Jt,this.depth=0,this.id=0};(i["oimo.collision.narrowphase.DetectorResultPoint"]=Vi).__name__=!0,Vi.prototype={position1:null,position2:null,depth:null,id:null,__class__:Vi};var Hi=function(t){this.swapped=t};(i["oimo.collision.narrowphase.detector.Detector"]=Hi).__name__=!0,Hi.prototype={swapped:null,setNormal:function(t,e,a,i){var n=t.normal;if(n.x=e,n.y=a,n.z=i,this.swapped){var s=t.normal,r=-s.x,o=-s.y,l=-s.z;s.x=r,s.y=o,s.z=l}},addPoint:function(t,e,a,i,n,s,r,o,l){var _=t.points[t.numPoints++];if(_.depth=o,_.id=l,this.swapped){var h=_.position1;h.x=n,h.y=s,h.z=r;var c=_.position2;c.x=e,c.y=a,c.z=i}else{var g=_.position1;g.x=e,g.y=a,g.z=i;var u=_.position2;u.x=n,u.y=s,u.z=r}},detectImpl:function(t,e,a,i,n,s){},detect:function(t,e,a,i,n,s){for(var r=t.numPoints=0,o=t.points;r<o.length;){var l=o[r];++r,l.position1.zero(),l.position2.zero(),l.depth=0,l.id=0}t.normal.zero(),this.swapped?this.detectImpl(t,a,e,n,i,s):this.detectImpl(t,e,a,i,n,s)},__class__:Hi};var ji=function(){Hi.call(this,!1),this.clipper=new Ri};(i["oimo.collision.narrowphase.detector.BoxBoxDetector"]=ji).__name__=!0,ji.__super__=Hi,ji.prototype=s(Hi.prototype,{clipper:null,detectImpl:function(t,e,a,i,n,s){var r,o,l,_,h,c,g,u,f,d,b,p,m,I,v,M,C,y,w,A,x,Z,z,B,N,G,k,S=e,W=a;t.incremental=!1,r=i._positionX,o=i._positionY,l=i._positionZ,g=(_=n._positionX)-r,u=(h=n._positionY)-o,f=(c=n._positionZ)-l,d=i._rotation00,b=i._rotation10,p=i._rotation20,m=i._rotation01,I=i._rotation11,v=i._rotation21,M=i._rotation02,C=i._rotation12,y=i._rotation22,w=n._rotation00,A=n._rotation10,x=n._rotation20,Z=n._rotation01,z=n._rotation11,B=n._rotation21,N=n._rotation02,G=n._rotation12,k=n._rotation22;var X,Y,D,K,L,V,H,j,T,R,F,O,P,J,E,U,Q,q,$=S._halfExtentsX,tt=S._halfExtentsY,et=S._halfExtentsZ,at=W._halfExtentsX,it=W._halfExtentsY,nt=W._halfExtentsZ;X=d*$,Y=b*$,D=p*$,K=m*tt,L=I*tt,V=v*tt,H=M*et,j=C*et,T=y*et;var st,rt,ot,lt=1/0,_t=-1,ht=0,ct=$,gt=d*(R=w*at)+b*(F=A*at)+p*(O=x*at),ut=d*(P=Z*it)+b*(J=z*it)+p*(E=B*it),ft=d*(U=N*nt)+b*(Q=G*nt)+p*(q=k*nt);gt<(ot=rt=st=0)&&(gt=-gt),ut<0&&(ut=-ut),ft<0&&(ft=-ft);var dt=gt+ut+ft,bt=d*g+b*u+p*f,pt=ct+dt,mt=bt<0,It=mt?-bt:bt;if(It<pt){var vt=pt-It;vt<lt&&(lt=vt,_t=0,st=d,rt=b,ot=p,ht=mt?-1:1);var Mt=m*R+I*F+v*O,Ct=m*P+I*J+v*E,yt=m*U+I*Q+v*q;Mt<0&&(Mt=-Mt),Ct<0&&(Ct=-Ct),yt<0&&(yt=-yt);var wt=(ct=tt)+(dt=Mt+Ct+yt),At=(bt=m*g+I*u+v*f)<0,xt=At?-bt:bt;if(xt<wt){var Zt=wt-xt;Zt<lt&&(lt=Zt,_t=1,st=m,rt=I,ot=v,ht=At?-1:1);var zt=M*R+C*F+y*O,Bt=M*P+C*J+y*E,Nt=M*U+C*Q+y*q;zt<0&&(zt=-zt),Bt<0&&(Bt=-Bt),Nt<0&&(Nt=-Nt);var Gt=(ct=et)+(dt=zt+Bt+Nt),kt=(bt=M*g+C*u+y*f)<0,St=kt?-bt:bt;if(St<Gt){var Wt=Gt-St;Wt<lt&&(lt=Wt,_t=2,st=M,rt=C,ot=y,ht=kt?-1:1),lt>wn.linearSlop?lt-=wn.linearSlop:lt=0;var Xt=w*X+A*Y+x*D,Yt=w*K+A*L+x*V,Dt=w*H+A*j+x*T;Xt<0&&(Xt=-Xt),Yt<0&&(Yt=-Yt),Dt<0&&(Dt=-Dt);var Kt=(ct=Xt+Yt+Dt)+(dt=at),Lt=(bt=w*g+A*u+x*f)<0,Vt=Lt?-bt:bt;if(Vt<Kt){var Ht=Kt-Vt;Ht<lt&&(lt=Ht,_t=3,st=w,rt=A,ot=x,ht=Lt?-1:1);var jt=Z*X+z*Y+B*D,Tt=Z*K+z*L+B*V,Rt=Z*H+z*j+B*T;jt<0&&(jt=-jt),Tt<0&&(Tt=-Tt),Rt<0&&(Rt=-Rt);var Ft=(ct=jt+Tt+Rt)+(dt=it),Ot=(bt=Z*g+z*u+B*f)<0,Pt=Ot?-bt:bt;if(Pt<Ft){var Jt=Ft-Pt;Jt<lt&&(lt=Jt,_t=4,st=Z,rt=z,ot=B,ht=Ot?-1:1);var Et=N*X+G*Y+k*D,Ut=N*K+G*L+k*V,Qt=N*H+G*j+k*T;Et<0&&(Et=-Et),Ut<0&&(Ut=-Ut),Qt<0&&(Qt=-Qt);var qt=(ct=Et+Ut+Qt)+(dt=nt),$t=(bt=N*g+G*u+k*f)<0,te=$t?-bt:bt;if(te<qt){var ee,ae,ie,ne,se,re,oe,le,_e,he,ce,ge,ue,fe,de,be,pe,me,Ie,ve,Me,Ce=qt-te;if(Ce<lt&&(lt=Ce,_t=5,st=N,rt=G,ot=k,ht=$t?-1:1),lt>wn.linearSlop?lt-=wn.linearSlop:lt=0,ae=p*w-d*x,ie=d*A-b*w,0!=(ee=b*x-p*A)||0!=ae||0!=ie){var ye=ee*ee+ae*ae+ie*ie;0<ye&&(ye=1/Math.sqrt(ye));var we=(ee*=ye)*K+(ae*=ye)*L+(ie*=ye)*V,Ae=ee*H+ae*j+ie*T;we<0&&(we=-we),Ae<0&&(Ae=-Ae);var xe=ee*P+ae*J+ie*E,Ze=ee*U+ae*Q+ie*q;xe<0&&(xe=-xe),Ze<0&&(Ze=-Ze);var ze=(ct=we+Ae)+(dt=xe+Ze),Be=(bt=ee*g+ae*u+ie*f)<0,Ne=Be?-bt:bt;if(!(Ne<ze))return;var Ge=ze-Ne;Ge<lt&&(lt=Ge,_t=6,st=ee,rt=ae,ot=ie,ht=Be?-1:1)}if(ae=p*Z-d*B,ie=d*z-b*Z,0!=(ee=b*B-p*z)||0!=ae||0!=ie){var ke=ee*ee+ae*ae+ie*ie;0<ke&&(ke=1/Math.sqrt(ke));var Se=(ee*=ke)*K+(ae*=ke)*L+(ie*=ke)*V,We=ee*H+ae*j+ie*T;Se<0&&(Se=-Se),We<0&&(We=-We);var Xe=ee*R+ae*F+ie*O,Ye=ee*U+ae*Q+ie*q;Xe<0&&(Xe=-Xe),Ye<0&&(Ye=-Ye);var De=(ct=Se+We)+(dt=Xe+Ye),Ke=(bt=ee*g+ae*u+ie*f)<0,Le=Ke?-bt:bt;if(!(Le<De))return;var Ve=De-Le;Ve<lt&&(lt=Ve,_t=7,st=ee,rt=ae,ot=ie,ht=Ke?-1:1)}if(ae=p*N-d*k,ie=d*G-b*N,0!=(ee=b*k-p*G)||0!=ae||0!=ie){var He=ee*ee+ae*ae+ie*ie;0<He&&(He=1/Math.sqrt(He));var je=(ee*=He)*K+(ae*=He)*L+(ie*=He)*V,Te=ee*H+ae*j+ie*T;je<0&&(je=-je),Te<0&&(Te=-Te);var Re=ee*R+ae*F+ie*O,Fe=ee*P+ae*J+ie*E;Re<0&&(Re=-Re),Fe<0&&(Fe=-Fe);var Oe=(ct=je+Te)+(dt=Re+Fe),Pe=(bt=ee*g+ae*u+ie*f)<0,Je=Pe?-bt:bt;if(!(Je<Oe))return;var Ee=Oe-Je;Ee<lt&&(lt=Ee,_t=8,st=ee,rt=ae,ot=ie,ht=Pe?-1:1)}if(ae=v*w-m*x,ie=m*A-I*w,0!=(ee=I*x-v*A)||0!=ae||0!=ie){var Ue=ee*ee+ae*ae+ie*ie;0<Ue&&(Ue=1/Math.sqrt(Ue));var Qe=(ee*=Ue)*X+(ae*=Ue)*Y+(ie*=Ue)*D,qe=ee*H+ae*j+ie*T;Qe<0&&(Qe=-Qe),qe<0&&(qe=-qe);var $e=ee*P+ae*J+ie*E,ta=ee*U+ae*Q+ie*q;$e<0&&($e=-$e),ta<0&&(ta=-ta);var ea=(ct=Qe+qe)+(dt=$e+ta),aa=(bt=ee*g+ae*u+ie*f)<0,ia=aa?-bt:bt;if(!(ia<ea))return;var na=ea-ia;na<lt&&(lt=na,_t=9,st=ee,rt=ae,ot=ie,ht=aa?-1:1)}if(ae=v*Z-m*B,ie=m*z-I*Z,0!=(ee=I*B-v*z)||0!=ae||0!=ie){var sa=ee*ee+ae*ae+ie*ie;0<sa&&(sa=1/Math.sqrt(sa));var ra=(ee*=sa)*X+(ae*=sa)*Y+(ie*=sa)*D,oa=ee*H+ae*j+ie*T;ra<0&&(ra=-ra),oa<0&&(oa=-oa);var la=ee*R+ae*F+ie*O,_a=ee*U+ae*Q+ie*q;la<0&&(la=-la),_a<0&&(_a=-_a);var ha=(ct=ra+oa)+(dt=la+_a),ca=(bt=ee*g+ae*u+ie*f)<0,ga=ca?-bt:bt;if(!(ga<ha))return;var ua=ha-ga;ua<lt&&(lt=ua,_t=10,st=ee,rt=ae,ot=ie,ht=ca?-1:1)}if(ae=v*N-m*k,ie=m*G-I*N,0!=(ee=I*k-v*G)||0!=ae||0!=ie){var fa=ee*ee+ae*ae+ie*ie;0<fa&&(fa=1/Math.sqrt(fa));var da=(ee*=fa)*X+(ae*=fa)*Y+(ie*=fa)*D,ba=ee*H+ae*j+ie*T;da<0&&(da=-da),ba<0&&(ba=-ba);var pa=ee*R+ae*F+ie*O,ma=ee*P+ae*J+ie*E;pa<0&&(pa=-pa),ma<0&&(ma=-ma);var Ia=(ct=da+ba)+(dt=pa+ma),va=(bt=ee*g+ae*u+ie*f)<0,Ma=va?-bt:bt;if(!(Ma<Ia))return;var Ca=Ia-Ma;Ca<lt&&(lt=Ca,_t=11,st=ee,rt=ae,ot=ie,ht=va?-1:1)}if(ae=y*w-M*x,ie=M*A-C*w,0!=(ee=C*x-y*A)||0!=ae||0!=ie){var ya=ee*ee+ae*ae+ie*ie;0<ya&&(ya=1/Math.sqrt(ya));var wa=(ee*=ya)*X+(ae*=ya)*Y+(ie*=ya)*D,Aa=ee*K+ae*L+ie*V;wa<0&&(wa=-wa),Aa<0&&(Aa=-Aa);var xa=ee*P+ae*J+ie*E,Za=ee*U+ae*Q+ie*q;xa<0&&(xa=-xa),Za<0&&(Za=-Za);var za=(ct=wa+Aa)+(dt=xa+Za),Ba=(bt=ee*g+ae*u+ie*f)<0,Na=Ba?-bt:bt;if(!(Na<za))return;var Ga=za-Na;Ga<lt&&(lt=Ga,_t=12,st=ee,rt=ae,ot=ie,ht=Ba?-1:1)}if(ae=y*Z-M*B,ie=M*z-C*Z,0!=(ee=C*B-y*z)||0!=ae||0!=ie){var ka=ee*ee+ae*ae+ie*ie;0<ka&&(ka=1/Math.sqrt(ka));var Sa=(ee*=ka)*X+(ae*=ka)*Y+(ie*=ka)*D,Wa=ee*K+ae*L+ie*V;Sa<0&&(Sa=-Sa),Wa<0&&(Wa=-Wa);var Xa=ee*R+ae*F+ie*O,Ya=ee*U+ae*Q+ie*q;Xa<0&&(Xa=-Xa),Ya<0&&(Ya=-Ya);var Da=(ct=Sa+Wa)+(dt=Xa+Ya),Ka=(bt=ee*g+ae*u+ie*f)<0,La=Ka?-bt:bt;if(!(La<Da))return;var Va=Da-La;Va<lt&&(lt=Va,_t=13,st=ee,rt=ae,ot=ie,ht=Ka?-1:1)}if(ae=y*N-M*k,ie=M*G-C*N,0!=(ee=C*k-y*G)||0!=ae||0!=ie){var Ha=ee*ee+ae*ae+ie*ie;0<Ha&&(Ha=1/Math.sqrt(Ha));var ja=(ee*=Ha)*X+(ae*=Ha)*Y+(ie*=Ha)*D,Ta=ee*K+ae*L+ie*V;ja<0&&(ja=-ja),Ta<0&&(Ta=-Ta);var Ra=ee*R+ae*F+ie*O,Fa=ee*P+ae*J+ie*E;Ra<0&&(Ra=-Ra),Fa<0&&(Fa=-Fa);var Oa=(ct=ja+Ta)+(dt=Ra+Fa),Pa=(bt=ee*g+ae*u+ie*f)<0,Ja=Pa?-bt:bt;if(!(Ja<Oa))return;var Ea=Oa-Ja;Ea<lt&&(lt=Ea,_t=14,st=ee,rt=ae,ot=ie,ht=Pa?-1:1)}if(6<=_t){st*=ht,rt*=ht,ot*=ht;var Ua,Qa,qa,$a,ti,ei,ai,ii,ni,si,ri,oi,li,_i,hi,ci=(_t-6)/3|0,gi=_t-6-3*ci;switch(ci){case 0:ai=d,ii=b,ni=p;var ui=0<H*st+j*rt+T*ot;0<K*st+L*rt+V*ot?ui?(Ua=K+H,Qa=L+j,qa=V+T):(Ua=K-H,Qa=L-j,qa=V-T):ui?(Ua=H-K,Qa=j-L,qa=T-V):(Ua=-(Ua=K+H),Qa=-(Qa=L+j),qa=-(qa=V+T));break;case 1:ai=m,ii=I,ni=v;var fi=0<H*st+j*rt+T*ot;0<X*st+Y*rt+D*ot?fi?(Ua=X+H,Qa=Y+j,qa=D+T):(Ua=X-H,Qa=Y-j,qa=D-T):fi?(Ua=H-X,Qa=j-Y,qa=T-D):(Ua=-(Ua=X+H),Qa=-(Qa=Y+j),qa=-(qa=D+T));break;default:ai=M,ii=C,ni=y;var di=0<K*st+L*rt+V*ot;0<X*st+Y*rt+D*ot?di?(Ua=X+K,Qa=Y+L,qa=D+V):(Ua=X-K,Qa=Y-L,qa=D-V):di?(Ua=K-X,Qa=L-Y,qa=V-D):(Ua=-(Ua=X+K),Qa=-(Qa=Y+L),qa=-(qa=D+V))}switch(Ua=r+Ua,Qa=o+Qa,qa=l+qa,gi){case 0:si=w,ri=A,oi=x;var bi=0<U*st+Q*rt+q*ot;0<P*st+J*rt+E*ot?bi?($a=P+U,ti=J+Q,ei=E+q):($a=P-U,ti=J-Q,ei=E-q):bi?($a=U-P,ti=Q-J,ei=q-E):($a=-($a=P+U),ti=-(ti=J+Q),ei=-(ei=E+q));break;case 1:si=Z,ri=z,oi=B;var pi=0<U*st+Q*rt+q*ot;0<R*st+F*rt+O*ot?pi?($a=R+U,ti=F+Q,ei=O+q):($a=R-U,ti=F-Q,ei=O-q):pi?($a=U-R,ti=Q-F,ei=q-O):($a=-($a=R+U),ti=-(ti=F+Q),ei=-(ei=O+q));break;default:si=N,ri=G,oi=k;var mi=0<P*st+J*rt+E*ot;0<R*st+F*rt+O*ot?mi?($a=R+P,ti=F+J,ei=O+E):($a=R-P,ti=F-J,ei=O-E):mi?($a=P-R,ti=J-F,ei=E-O):($a=-($a=R+P),ti=-(ti=F+J),ei=-(ei=O+E))}var Ii,vi,Mi,Ci,yi,wi,Ai,xi,Zi,zi=ai*si+ii*ri+ni*oi,Bi=ai*(li=Ua-($a=_-$a))+ii*(_i=Qa-(ti=h-ti))+ni*(hi=qa-(ei=c-ei)),Ni=si*li+ri*_i+oi*hi,Gi=1/(1-zi*zi),ki=(zi*Ni-Bi)*Gi,Si=(Ni-zi*Bi)*Gi;return Ii=Ua+ai*ki,vi=Qa+ii*ki,Mi=qa+ni*ki,Ci=$a+si*Si,yi=ti+ri*Si,wi=ei+oi*Si,Ai=-st,xi=-rt,Zi=-ot,this.setNormal(t,Ai,xi,Zi),void this.addPoint(t,Ii,vi,Mi,Ci,yi,wi,lt,4)}if(3<=_t){ht=-ht,g=-g,u=-u,f=-f;var Wi=S;S=W,W=Wi;var Xi=$;$=at,at=Xi;var Yi=tt;tt=it,it=Yi;var Di=et;et=nt,nt=Di,ne=r,se=o,re=l,r=_,o=h,l=c,_=ne,h=se,c=re,ne=d,se=b,re=p,d=w,b=A,p=x,w=ne,A=se,x=re,ne=m,se=I,re=v,m=Z,I=z,v=B,Z=ne,z=se,B=re,ne=M,se=C,re=y,M=N,C=G,y=k,N=ne,G=se,k=re,ne=X,se=Y,re=D,X=R,Y=F,D=O,R=ne,F=se,O=re,ne=K,se=L,re=V,K=P,L=J,V=E,P=ne,J=se,E=re,ne=H,se=j,re=T,H=U,j=Q,T=q,U=ne,Q=se,q=re,_t-=3,oe=!0}else oe=!1;switch(_t){case 0:le=X,_e=Y,he=D,ce=d,ge=b,ue=p,fe=m,de=I,be=v,pe=M,me=C,Ie=y,ve=tt,Me=et;break;case 1:le=K,_e=L,he=V,ce=m,ge=I,ue=v,fe=M,de=C,be=y,pe=d,me=b,Ie=p,ve=et,Me=$;break;default:le=H,_e=j,he=T,ce=M,ge=C,ue=y,fe=d,de=b,be=p,pe=m,me=I,Ie=v,ve=$,Me=tt}if(ht<0){le=-le,_e=-_e,he=-he,ce=-ce,ge=-ge,ue=-ue,ne=fe,se=de,re=be,fe=pe,de=me,be=Ie,pe=ne,me=se,Ie=re;var Ki=ve;ve=Me,Me=Ki}le+=r,_e+=o,he+=l;var Li,Vi,Hi,ji,Ti,Ri,Fi,Oi,Pi,Ji,Ei,Ui,Qi=1,qi=0,$i=ce*w+ge*A+ue*x;switch($i<Qi&&(Qi=$i,qi=0),-$i<Qi&&(Qi=-$i,qi=1),($i=ce*Z+ge*z+ue*B)<Qi&&(Qi=$i,qi=2),-$i<Qi&&(Qi=-$i,qi=3),($i=ce*N+ge*G+ue*k)<Qi&&(Qi=$i,qi=4),-$i<Qi&&(Qi=-$i,qi=5),qi){case 0:Li=R+P,Vi=F+J,Hi=O+E,Li+=U,Vi+=Q,Hi+=q,ji=R-P,Ti=F-J,Ri=O-E,ji+=U,Ti+=Q,Ri+=q,Fi=R-P,Oi=F-J,Pi=O-E,Fi-=U,Oi-=Q,Pi-=q,Ji=R+P,Ei=F+J,Ui=O+E,Ji-=U,Ei-=Q,Ui-=q;break;case 1:Li=P-R,Vi=J-F,Hi=E-O,Li+=U,Vi+=Q,Hi+=q,ji=P-R,Ti=J-F,Ri=E-O,ji-=U,Ti-=Q,Ri-=q,Fi=-(Fi=R+P),Oi=-(Oi=F+J),Pi=-(Pi=O+E),Fi-=U,Oi-=Q,Pi-=q,Ji=-(Ji=R+P),Ei=-(Ei=F+J),Ui=-(Ui=O+E),Ji+=U,Ei+=Q,Ui+=q;break;case 2:Li=R+P,Vi=F+J,Hi=O+E,Li+=U,Vi+=Q,Hi+=q,ji=R+P,Ti=F+J,Ri=O+E,ji-=U,Ti-=Q,Ri-=q,Fi=P-R,Oi=J-F,Pi=E-O,Fi-=U,Oi-=Q,Pi-=q,Ji=P-R,Ei=J-F,Ui=E-O,Ji+=U,Ei+=Q,Ui+=q;break;case 3:Li=R-P,Vi=F-J,Hi=O-E,Li+=U,Vi+=Q,Hi+=q,ji=-(ji=R+P),Ti=-(Ti=F+J),Ri=-(Ri=O+E),ji+=U,Ti+=Q,Ri+=q,Fi=-(Fi=R+P),Oi=-(Oi=F+J),Pi=-(Pi=O+E),Fi-=U,Oi-=Q,Pi-=q,Ji=R-P,Ei=F-J,Ui=O-E,Ji-=U,Ei-=Q,Ui-=q;break;case 4:Li=R+P,Vi=F+J,Hi=O+E,Li+=U,Vi+=Q,Hi+=q,ji=P-R,Ti=J-F,Ri=E-O,ji+=U,Ti+=Q,Ri+=q,Fi=-(Fi=R+P),Oi=-(Oi=F+J),Pi=-(Pi=O+E),Fi+=U,Oi+=Q,Pi+=q,Ji=R-P,Ei=F-J,Ui=O-E,Ji+=U,Ei+=Q,Ui+=q;break;default:Li=R+P,Vi=F+J,Hi=O+E,Li-=U,Vi-=Q,Hi-=q,ji=R-P,Ti=F-J,Ri=O-E,ji-=U,Ti-=Q,Ri-=q,Fi=-(Fi=R+P),Oi=-(Oi=F+J),Pi=-(Pi=O+E),Fi-=U,Oi-=Q,Pi-=q,Ji=P-R,Ei=J-F,Ui=E-O,Ji-=U,Ei-=Q,Ui-=q}Li+=g,Vi+=u,Hi+=f,ji+=g,Ti+=u,Ri+=f,Fi+=g,Oi+=u,Pi+=f,Ji+=g,Ei+=u,Ui+=f;var tn=this.clipper;tn.w=ve,tn.h=Me,tn.numVertices=0,tn.numTmpVertices=0;var en=this.clipper,an=en.vertices[en.numVertices++];an.x=Li*fe+Vi*de+Hi*be,an.y=Li*pe+Vi*me+Hi*Ie,an.wx=Li,an.wy=Vi,an.wz=Hi;var nn=this.clipper,sn=nn.vertices[nn.numVertices++];sn.x=ji*fe+Ti*de+Ri*be,sn.y=ji*pe+Ti*me+Ri*Ie,sn.wx=ji,sn.wy=Ti,sn.wz=Ri;var rn=this.clipper,on=rn.vertices[rn.numVertices++];on.x=Fi*fe+Oi*de+Pi*be,on.y=Fi*pe+Oi*me+Pi*Ie,on.wx=Fi,on.wy=Oi,on.wz=Pi;var ln,_n,hn,cn=this.clipper,gn=cn.vertices[cn.numVertices++];gn.x=Ji*fe+Ei*de+Ui*be,gn.y=Ji*pe+Ei*me+Ui*Ie,gn.wx=Ji,gn.wy=Ei,gn.wz=Ui,this.clipper.clip(),this.clipper.reduce(),oe?(ln=ce,_n=ge,hn=ue):(ln=-ce,_n=-ge,hn=-ue),this.setNormal(t,ln,_n,hn);for(var un=0,fn=this.clipper.numVertices;un<fn;){var dn,bn,pn,mn=un++,In=this.clipper.vertices[mn];dn=In.wx,bn=In.wy,pn=In.wz;var vn,Mn,Cn,yn=(le-(dn+=r))*ce+(_e-(bn+=o))*ge+(he-(pn+=l))*ue;vn=dn+ce*yn,Mn=bn+ge*yn,Cn=pn+ue*yn,yn>-wn.contactPersistenceThreshold&&(oe?this.addPoint(t,dn,bn,pn,vn,Mn,Cn,yn,mn):this.addPoint(t,vn,Mn,Cn,dn,bn,pn,yn,mn))}}}}}}}},__class__:ji});var Ti=function(){this.x=0,this.y=0,this.wx=0,this.wy=0,this.wz=0};(i["oimo.collision.narrowphase.detector._BoxBoxDetector.IncidentVertex"]=Ti).__name__=!0,Ti.prototype={x:null,y:null,wx:null,wy:null,wz:null,__class__:Ti};var Ri=function(){this.w=0,this.h=0,this.numVertices=0,this.numTmpVertices=0;var t=new Array(8);this.vertices=t;var e=new Array(8);this.tmpVertices=e;for(var a=0;a<8;){var i=a++;this.vertices[i]=new Ti,this.tmpVertices[i]=new Ti}};(i["oimo.collision.narrowphase.detector._BoxBoxDetector.FaceClipper"]=Ri).__name__=!0,Ri.prototype={w:null,h:null,numVertices:null,vertices:null,numTmpVertices:null,tmpVertices:null,clip:function(){for(var t=0,e=this.numVertices;t<e;){var a=t++,i=this.vertices[a],n=this.vertices[(a+1)%this.numVertices],s=this.w+i.x,r=this.w+n.x;if(0<s&&0<r){var o=this.tmpVertices[this.numTmpVertices++];o.x=i.x,o.y=i.y,o.wx=i.wx,o.wy=i.wy,o.wz=i.wz}else if(0<s&&r<=0){var l=this.tmpVertices[this.numTmpVertices++];l.x=i.x,l.y=i.y,l.wx=i.wx,l.wy=i.wy,l.wz=i.wz;var _=s/(s-r),h=this.tmpVertices[this.numTmpVertices++];h.x=i.x+(n.x-i.x)*_,h.y=i.y+(n.y-i.y)*_,h.wx=i.wx+(n.wx-i.wx)*_,h.wy=i.wy+(n.wy-i.wy)*_,h.wz=i.wz+(n.wz-i.wz)*_}else if(s<=0&&0<r){var c=s/(s-r),g=this.tmpVertices[this.numTmpVertices++];g.x=i.x+(n.x-i.x)*c,g.y=i.y+(n.y-i.y)*c,g.wx=i.wx+(n.wx-i.wx)*c,g.wy=i.wy+(n.wy-i.wy)*c,g.wz=i.wz+(n.wz-i.wz)*c}}var u=this.vertices;this.vertices=this.tmpVertices,this.tmpVertices=u,this.numVertices=this.numTmpVertices;for(var f=this.numTmpVertices=0,d=this.numVertices;f<d;){var b=f++,p=this.vertices[b],m=this.vertices[(b+1)%this.numVertices],I=this.w-p.x,v=this.w-m.x;if(0<I&&0<v){var M=this.tmpVertices[this.numTmpVertices++];M.x=p.x,M.y=p.y,M.wx=p.wx,M.wy=p.wy,M.wz=p.wz}else if(0<I&&v<=0){var C=this.tmpVertices[this.numTmpVertices++];C.x=p.x,C.y=p.y,C.wx=p.wx,C.wy=p.wy,C.wz=p.wz;var y=I/(I-v),w=this.tmpVertices[this.numTmpVertices++];w.x=p.x+(m.x-p.x)*y,w.y=p.y+(m.y-p.y)*y,w.wx=p.wx+(m.wx-p.wx)*y,w.wy=p.wy+(m.wy-p.wy)*y,w.wz=p.wz+(m.wz-p.wz)*y}else if(I<=0&&0<v){var A=I/(I-v),x=this.tmpVertices[this.numTmpVertices++];x.x=p.x+(m.x-p.x)*A,x.y=p.y+(m.y-p.y)*A,x.wx=p.wx+(m.wx-p.wx)*A,x.wy=p.wy+(m.wy-p.wy)*A,x.wz=p.wz+(m.wz-p.wz)*A}}var Z=this.vertices;this.vertices=this.tmpVertices,this.tmpVertices=Z,this.numVertices=this.numTmpVertices;for(var z=this.numTmpVertices=0,B=this.numVertices;z<B;){var N=z++,G=this.vertices[N],k=this.vertices[(N+1)%this.numVertices],S=this.h+G.y,W=this.h+k.y;if(0<S&&0<W){var X=this.tmpVertices[this.numTmpVertices++];X.x=G.x,X.y=G.y,X.wx=G.wx,X.wy=G.wy,X.wz=G.wz}else if(0<S&&W<=0){var Y=this.tmpVertices[this.numTmpVertices++];Y.x=G.x,Y.y=G.y,Y.wx=G.wx,Y.wy=G.wy,Y.wz=G.wz;var D=S/(S-W),K=this.tmpVertices[this.numTmpVertices++];K.x=G.x+(k.x-G.x)*D,K.y=G.y+(k.y-G.y)*D,K.wx=G.wx+(k.wx-G.wx)*D,K.wy=G.wy+(k.wy-G.wy)*D,K.wz=G.wz+(k.wz-G.wz)*D}else if(S<=0&&0<W){var L=S/(S-W),V=this.tmpVertices[this.numTmpVertices++];V.x=G.x+(k.x-G.x)*L,V.y=G.y+(k.y-G.y)*L,V.wx=G.wx+(k.wx-G.wx)*L,V.wy=G.wy+(k.wy-G.wy)*L,V.wz=G.wz+(k.wz-G.wz)*L}}var H=this.vertices;this.vertices=this.tmpVertices,this.tmpVertices=H,this.numVertices=this.numTmpVertices;for(var j=this.numTmpVertices=0,T=this.numVertices;j<T;){var R=j++,F=this.vertices[R],O=this.vertices[(R+1)%this.numVertices],P=this.h-F.y,J=this.h-O.y;if(0<P&&0<J){var E=this.tmpVertices[this.numTmpVertices++];E.x=F.x,E.y=F.y,E.wx=F.wx,E.wy=F.wy,E.wz=F.wz}else if(0<P&&J<=0){var U=this.tmpVertices[this.numTmpVertices++];U.x=F.x,U.y=F.y,U.wx=F.wx,U.wy=F.wy,U.wz=F.wz;var Q=P/(P-J),q=this.tmpVertices[this.numTmpVertices++];q.x=F.x+(O.x-F.x)*Q,q.y=F.y+(O.y-F.y)*Q,q.wx=F.wx+(O.wx-F.wx)*Q,q.wy=F.wy+(O.wy-F.wy)*Q,q.wz=F.wz+(O.wz-F.wz)*Q}else if(P<=0&&0<J){var $=P/(P-J),tt=this.tmpVertices[this.numTmpVertices++];tt.x=F.x+(O.x-F.x)*$,tt.y=F.y+(O.y-F.y)*$,tt.wx=F.wx+(O.wx-F.wx)*$,tt.wy=F.wy+(O.wy-F.wy)*$,tt.wz=F.wz+(O.wz-F.wz)*$}}var et=this.vertices;this.vertices=this.tmpVertices,this.tmpVertices=et,this.numVertices=this.numTmpVertices,this.numTmpVertices=0},reduce:function(){if(!(this.numVertices<4)){for(var t=-1/0,e=1/0,a=-1/0,i=1/0,n=null,s=null,r=null,o=null,l=0,_=this.numVertices;l<_;){var h=l++,c=this.vertices[h],g=1*c.x+1*c.y,u=-1*c.x+1*c.y;t<g&&(t=g,n=c),g<e&&(e=g,s=c),a<u&&(a=u,r=c),u<i&&(i=u,o=c)}var f=this.tmpVertices[this.numTmpVertices++];f.x=n.x,f.y=n.y,f.wx=n.wx,f.wy=n.wy,f.wz=n.wz;var d=this.tmpVertices[this.numTmpVertices++];d.x=r.x,d.y=r.y,d.wx=r.wx,d.wy=r.wy,d.wz=r.wz;var b=this.tmpVertices[this.numTmpVertices++];b.x=s.x,b.y=s.y,b.wx=s.wx,b.wy=s.wy,b.wz=s.wz;var p=this.tmpVertices[this.numTmpVertices++];p.x=o.x,p.y=o.y,p.wx=o.wx,p.wy=o.wy,p.wz=o.wz;var m=this.vertices;this.vertices=this.tmpVertices,this.tmpVertices=m,this.numVertices=this.numTmpVertices,this.numTmpVertices=0}},__class__:Ri};var Fi=function(){};(i["oimo.collision.narrowphase.detector.CachedDetectorData"]=Fi).__name__=!0,Fi.prototype={_gjkCache:null,_clear:function(){null!=this._gjkCache&&this._gjkCache.clear()},__class__:Fi};var Oi=function(){Hi.call(this,!1)};(i["oimo.collision.narrowphase.detector.CapsuleCapsuleDetector"]=Oi).__name__=!0,Oi.__super__=Hi,Oi.prototype=s(Hi.prototype,{detectImpl:function(t,e,a,i,n,s){var r,o,l,_,h,c,g=e,u=a;t.incremental=!1,r=i._rotation01,o=i._rotation11,l=i._rotation21,_=n._rotation01,h=n._rotation11,c=n._rotation21;var f,d,b,p,m,I,v,M,C,y,w,A,x,Z,z,B,N,G,k=g._halfHeight,S=u._halfHeight,W=g._radius,X=u._radius;f=i._positionX+r*-k,d=i._positionY+o*-k,b=i._positionZ+l*-k,p=i._positionX+r*k,m=i._positionY+o*k,I=i._positionZ+l*k;var Y,D,K,L,V,H,j,T,R,F,O,P=-((y=f-(v=n._positionX+_*-S))*(x=p-f)+(w=d-(M=n._positionY+h*-S))*(Z=m-d)+(A=b-(C=n._positionZ+c*-S))*(z=I-b)),J=y*(B=n._positionX+_*S-v)+w*(N=n._positionY+h*S-M)+A*(G=n._positionZ+c*S-C),E=k*k*4,U=x*B+Z*N+z*G,Q=S*S*4;if(0==E&&0==Q)D=Y=0;else if(0==E)(D=J)<(Y=0)?D=0:Q<D?D=1:D/=Q;else if(0==Q)(Y=P)<(D=0)?Y=0:E<Y?Y=1:Y/=E;else{var q=E*Q-U*U;0==q?Y=0:(Y=U*J+Q*P)<0?Y=0:q<Y?Y=1:Y/=q,(D=Y*U+J)<0?(Y=P)<(D=0)?Y=0:E<Y?Y=1:Y/=E:Q<D?(D=1,(Y=U+P)<0?Y=0:E<Y?Y=1:Y/=E):D/=Q}var $=(R=(K=f+x*Y)-(H=v+B*D))*R+(F=(L=d+Z*Y)-(j=M+N*D))*F+(O=(V=b+z*Y)-(T=C+G*D))*O;if(!((W+X)*(W+X)<=$)){var tt,et,at,it,nt,st,rt,ot,lt,_t=Math.sqrt($);0<_t?(tt=R*(1/_t),et=F*(1/_t),at=O*(1/_t)):(tt=1,at=et=0),this.setNormal(t,tt,et,at),it=K+tt*-W,nt=L+et*-W,st=V+at*-W,rt=H+tt*X,ot=j+et*X,lt=T+at*X,this.addPoint(t,it,nt,st,rt,ot,lt,W+X-_t,0)}},__class__:Oi});var Pi=function(){Hi.call(this,!1)};(i["oimo.collision.narrowphase.detector.GjkEpaDetector"]=Pi).__name__=!0,Pi.__super__=Hi,Pi.prototype=s(Hi.prototype,{detectImpl:function(t,e,a,i,n,s){var r=en.instance,o=e,l=a,_=r.computeClosestPointsImpl(o,l,i,n,wn.enableGJKCaching?s:null,!0);if(t.incremental=!0,_==an.SUCCEEDED){var h=o._gjkMargin,c=l._gjkMargin;if(!(r.distance>h+c)){var g,u,f,d,b,p,m=r.closestPoint1;g=m.x,u=m.y,f=m.z;var I,v,M,C=r.closestPoint2;if((I=g-(d=C.x))*I+(v=u-(b=C.y))*v+(M=f-(p=C.z))*M!=0){r.distance<0&&(I=-I,v=-v,M=-M);var y=I*I+v*v+M*M;0<y&&(y=1/Math.sqrt(y)),I*=y,v*=y,M*=y,this.setNormal(t,I,v,M),g+=I*-o._gjkMargin,u+=v*-o._gjkMargin,f+=M*-o._gjkMargin,d+=I*l._gjkMargin,b+=v*l._gjkMargin,p+=M*l._gjkMargin,this.addPoint(t,g,u,f,d,b,p,o._gjkMargin+l._gjkMargin-r.distance,0)}}}else Oe.trace("GJK/EPA failed: status="+_,{fileName:"Sources/oimo/collision/narrowphase/detector/GjkEpaDetector.hx",lineNumber:28,className:"oimo.collision.narrowphase.detector.GjkEpaDetector",methodName:"detectImpl"})},__class__:Pi});var Ji=function(t){Hi.call(this,t)};(i["oimo.collision.narrowphase.detector.SphereBoxDetector"]=Ji).__name__=!0,Ji.__super__=Hi,Ji.prototype=s(Hi.prototype,{detectImpl:function(t,e,a,i,n,s){var r,o,l,_,h,c,g=e,u=a;t.incremental=!1,_=-(r=u._halfExtentsX),h=-(o=u._halfExtentsY),c=-(l=u._halfExtentsZ);var f,d,b,p,m,I,v,M,C,y,w=g._radius;if(f=i._positionX-n._positionX,d=i._positionY-n._positionY,b=i._positionZ-n._positionZ,v=n._rotation00*f+n._rotation10*d+n._rotation20*b,m=n._rotation01*f+n._rotation11*d+n._rotation21*b,I=n._rotation02*f+n._rotation12*d+n._rotation22*b,_<(p=v)&&p<r&&h<m&&m<o&&c<I&&I<l){var A,x,Z,z,B,N,G,k,S,W,X,Y,D,K,L,V,H,j,T,R,F,O,P,J,E;A=r-(A=p<0?-p:p),x=o-(x=m<0?-m:m),Z=l-(Z=I<0?-I:I);return A<x?A<Z?(z=0<p?1:-1,N=B=0,k=0,W=S=1,G=A):(0<I?(B=z=0,N=1):(B=z=0,N=-1),S=k=1,W=0,G=Z):x<Z?(B=0<m?1:-1,N=z=0,S=0,W=k=1,G=x):(0<I?(B=z=0,N=1):(B=z=0,N=-1),S=k=1,W=0,G=Z),X=z*r,Y=B*o,D=N*l,X+=k*p,Y+=S*m,D+=W*I,K=n._rotation00*X+n._rotation01*Y+n._rotation02*D,L=n._rotation10*X+n._rotation11*Y+n._rotation12*D,V=n._rotation20*X+n._rotation21*Y+n._rotation22*D,H=n._rotation00*z+n._rotation01*B+n._rotation02*N,j=n._rotation10*z+n._rotation11*B+n._rotation12*N,T=n._rotation20*z+n._rotation21*B+n._rotation22*N,this.setNormal(t,H,j,T),R=i._positionX+H*-w,F=i._positionY+j*-w,O=i._positionZ+T*-w,P=n._positionX+K,J=n._positionY+L,E=n._positionZ+V,void this.addPoint(t,R,F,O,P,J,E,G,0)}var U,Q,q,$=(U=p-(M=(_+=1e-9)<(M=p<(r-=1e-9)?p:r)?M:_))*U+(Q=m-(C=(h+=1e-9)<(C=m<(o-=1e-9)?m:o)?C:h))*Q+(q=I-(y=(c+=1e-9)<(y=I<(l-=1e-9)?I:l)?y:c))*q;if(!(w*w<=$)){var tt,et,at,it,nt,st,rt,ot,lt;$=Math.sqrt($),tt=n._rotation00*M+n._rotation01*C+n._rotation02*y,et=n._rotation10*M+n._rotation11*C+n._rotation12*y,at=n._rotation20*M+n._rotation21*C+n._rotation22*y;var _t,ht,ct,gt,ut,ft,dt=(it=n._rotation00*U+n._rotation01*Q+n._rotation02*q)*it+(nt=n._rotation10*U+n._rotation11*Q+n._rotation12*q)*nt+(st=n._rotation20*U+n._rotation21*Q+n._rotation22*q)*st;0<dt&&(dt=1/Math.sqrt(dt)),rt=it*dt,ot=nt*dt,lt=st*dt,this.setNormal(t,rt,ot,lt),_t=i._positionX+rt*-w,ht=i._positionY+ot*-w,ct=i._positionZ+lt*-w,gt=n._positionX+tt,ut=n._positionY+et,ft=n._positionZ+at,this.addPoint(t,_t,ht,ct,gt,ut,ft,w-$,0)}},__class__:Ji});var Ei=function(t){Hi.call(this,t)};(i["oimo.collision.narrowphase.detector.SphereCapsuleDetector"]=Ei).__name__=!0,Ei.__super__=Hi,Ei.prototype=s(Hi.prototype,{detectImpl:function(t,e,a,i,n,s){var r=e,o=a;t.incremental=!1;var l,_,h,c,g,u,f,d,b,p,m,I,v=o._halfHeight,M=r._radius,C=o._radius;l=n._rotation01,_=n._rotation11,h=n._rotation21,c=i._positionX,g=i._positionY,u=i._positionZ,f=n._positionX+l*-v,d=n._positionY+_*-v,b=n._positionZ+h*-v;var y,w,A,x,Z,z,B=v*v*4,N=(c-f)*(p=n._positionX+l*v-f)+(g-d)*(m=n._positionY+_*v-d)+(u-b)*(I=n._positionZ+h*v-b);N<0?N=0:B<N?N=1:N/=B;var G=(x=c-(y=f+p*N))*x+(Z=g-(w=d+m*N))*Z+(z=u-(A=b+I*N))*z;if(!((M+C)*(M+C)<=G)){var k,S,W,X,Y,D,K,L,V,H=Math.sqrt(G);0<H?(k=x*(1/H),S=Z*(1/H),W=z*(1/H)):(k=1,W=S=0),this.setNormal(t,k,S,W),X=c+k*-M,Y=g+S*-M,D=u+W*-M,K=y+k*C,L=w+S*C,V=A+W*C,this.addPoint(t,X,Y,D,K,L,V,M+C-H,0)}},__class__:Ei});var Ui=function(){Hi.call(this,!1)};(i["oimo.collision.narrowphase.detector.SphereSphereDetector"]=Ui).__name__=!0,Ui.__super__=Hi,Ui.prototype=s(Hi.prototype,{detectImpl:function(t,e,a,i,n,s){var r,o,l,_=e,h=a;t.incremental=!1,r=i._positionX-n._positionX,o=i._positionY-n._positionY,l=i._positionZ-n._positionZ;var c=_._radius,g=h._radius,u=r*r+o*o+l*l;if(!((c+g)*(c+g)<=u)){var f,d,b,p,m,I,v,M,C,y=Math.sqrt(u);0<y?(f=r*(1/y),d=o*(1/y),b=l*(1/y)):(f=1,b=d=0),this.setNormal(t,f,d,b),p=i._positionX+f*-c,m=i._positionY+d*-c,I=i._positionZ+b*-c,v=n._positionX+f*g,M=n._positionY+d*g,C=n._positionZ+b*g,this.addPoint(t,p,m,I,v,M,C,c+g-y,0)}},__class__:Ui});var Qi=function(){var t=new Array(wn.maxEPAVertices);this._vertices=t,this._center=new Jt,this._numVertices=0,this._triangleList=null,this._triangleListLast=null,this._numTriangles=0,this._trianglePool=null,this._vertexPool=null};(i["oimo.collision.narrowphase.detector.gjkepa.EpaPolyhedron"]=Qi).__name__=!0,Qi.prototype={_vertices:null,_numVertices:null,_triangleList:null,_triangleListLast:null,_numTriangles:null,_trianglePool:null,_vertexPool:null,_center:null,_status:null,validate:function(){for(var t=this._triangleList;null!=t;){for(var e=t._next,a=0;a<3;){var i=a++;if(t._vertices[i]._tmpEdgeLoopOuterTriangle=null,t._vertices[i]._tmpEdgeLoopNext=null,-1==t._adjacentPairIndex[i])return!(this._status=2);if(null==t._adjacentTriangles[i])return!(this._status=3)}t=e}return!0},findEdgeLoop:function(t,e,a){if(e._tmpDfsId!=t){e._tmpDfsId=t;var i=e.tmp;i.x=a.x,i.y=a.y,i.z=a.z;var n=i,s=e._vertices[0].v,r=n.x-s.x,o=n.y-s.y,l=n.z-s.z;n.x=r,n.y=o,n.z=l;var _=e.tmp,h=e._normal;if(e._tmpDfsVisible=0<_.x*h.x+_.y*h.y+_.z*h.z,e._tmpDfsVisible){for(var c=0;c<3;){var g=c++,u=e._adjacentTriangles[g];if(null!=u){var f=u.tmp;f.x=a.x,f.y=a.y,f.z=a.z;var d=f,b=u._vertices[0].v,p=d.x-b.x,m=d.y-b.y,I=d.z-b.z;d.x=p,d.y=m,d.z=I;var v=u.tmp,M=u._normal;if(u._tmpDfsVisible=0<v.x*M.x+v.y*M.y+v.z*M.z,u._tmpDfsVisible)this.findEdgeLoop(t,u,a);else{var C=e._nextIndex[g],y=e._vertices[g],w=e._vertices[C];y._tmpEdgeLoopNext=w,y._tmpEdgeLoopOuterTriangle=u}}}for(var A=0;A<3;){var x=A++,Z=e._adjacentTriangles[x];if(null!=Z){var z=e._adjacentPairIndex[x];Z._adjacentTriangles[z]=null,Z._adjacentPairIndex[z]=-1,e._adjacentTriangles[x]=null,e._adjacentPairIndex[x]=-1}}this._numTriangles--;var B=e._prev,N=e._next;null!=B&&(B._next=N),null!=N&&(N._prev=B),e==this._triangleList&&(this._triangleList=this._triangleList._next),e==this._triangleListLast&&(this._triangleListLast=this._triangleListLast._prev),e._next=null,e._prev=null,e.removeReferences(),e._next=this._trianglePool,this._trianglePool=e}else this._status=6}},_init:function(t,e,a,i){this._status=0,this._numVertices=4,this._vertices[0]=t,this._vertices[1]=e,this._vertices[2]=a,this._vertices[3]=i;var n=this._center,s=t.v;n.x=s.x,n.y=s.y,n.z=s.z;var r=n,o=e.v,l=r.x+o.x,_=r.y+o.y,h=r.z+o.z;r.x=l,r.y=_,r.z=h;var c=r,g=a.v,u=c.x+g.x,f=c.y+g.y,d=c.z+g.z;c.x=u,c.y=f,c.z=d;var b=c,p=i.v,m=b.x+p.x,I=b.y+p.y,v=b.z+p.z;b.x=m,b.y=I,b.z=v;var M=b,C=.25*M.x,y=.25*M.y,w=.25*M.z;M.x=C,M.y=y,M.z=w;var A=this._trianglePool;null!=A?(this._trianglePool=A._next,A._next=null):A=new qi;var x=A,Z=this._trianglePool;null!=Z?(this._trianglePool=Z._next,Z._next=null):Z=new qi;var z=Z,B=this._trianglePool;null!=B?(this._trianglePool=B._next,B._next=null):B=new qi;var N=B,G=this._trianglePool;null!=G?(this._trianglePool=G._next,G._next=null):G=new qi;var k=G;return x.init(t,e,a,this._center,!0)||(this._status=1),z.init(t,e,i,this._center,!0)||(this._status=1),N.init(t,a,i,this._center,!0)||(this._status=1),k.init(e,a,i,this._center,!0)||(this._status=1),x.setAdjacentTriangle(z)||(this._status=1),x.setAdjacentTriangle(N)||(this._status=1),x.setAdjacentTriangle(k)||(this._status=1),z.setAdjacentTriangle(N)||(this._status=1),z.setAdjacentTriangle(k)||(this._status=1),N.setAdjacentTriangle(k)||(this._status=1),this._numTriangles++,null==this._triangleList?this._triangleList=x:(this._triangleListLast._next=x)._prev=this._triangleListLast,this._triangleListLast=x,this._numTriangles++,null==this._triangleList?this._triangleList=z:(this._triangleListLast._next=z)._prev=this._triangleListLast,this._triangleListLast=z,this._numTriangles++,null==this._triangleList?this._triangleList=N:(this._triangleListLast._next=N)._prev=this._triangleListLast,this._triangleListLast=N,this._numTriangles++,null==this._triangleList?this._triangleList=k:(this._triangleListLast._next=k)._prev=this._triangleListLast,this._triangleListLast=k,0==this._status},_addVertex:function(t,e){this._vertices[this._numVertices++]=t;var a=e._vertices[0];if(this.findEdgeLoop(this._numVertices,e,t.v),0!=this._status)return!1;for(var i=a,n=a,s=null,r=null;;){if(null==i._tmpEdgeLoopNext)return this._dumpAsObjModel(),!(this._status=4);if(null==i._tmpEdgeLoopOuterTriangle)return!(this._status=5);var o=this._trianglePool;null!=o?(this._trianglePool=o._next,o._next=null):o=new qi;var l=o;if(null==r&&(r=l),l.init(i,i._tmpEdgeLoopNext,t,this._center,!1)||(this._status=1),0!=this._status)return!1;if(this._numTriangles++,null==this._triangleList?this._triangleList=l:(this._triangleListLast._next=l)._prev=this._triangleListLast,(this._triangleListLast=l).setAdjacentTriangle(i._tmpEdgeLoopOuterTriangle)||(this._status=1),null!=s&&(l.setAdjacentTriangle(s)||(this._status=1)),s=l,(i=i._tmpEdgeLoopNext)==n)break}return s.setAdjacentTriangle(r)||(this._status=1),0==this._status&&this.validate()},_dumpAsObjModel:function(){},__class__:Qi};var qi=function(){this._next=null,this._prev=null,this._normal=new Jt,this._distanceSq=0,this._tmpDfsId=0,this._tmpDfsVisible=!1;var t=new Array(3);this._vertices=t;var e=new Array(3);this._adjacentTriangles=e;var a=new Array(3);this._adjacentPairIndex=a,this.tmp=new Jt;var i=new Array(3);this._nextIndex=i,this._nextIndex[0]=1,this._nextIndex[1]=2,this._nextIndex[2]=0};(i["oimo.collision.narrowphase.detector.gjkepa.EpaTriangle"]=qi).__name__=!0,qi.prototype={_next:null,_prev:null,_vertices:null,_adjacentTriangles:null,_adjacentPairIndex:null,_normal:null,_distanceSq:null,_nextIndex:null,_tmpDfsId:null,_tmpDfsVisible:null,tmp:null,init:function(t,e,a,i,n){var s,r,o,l,_,h,c,g,u;null==n&&(n=!1);var f=t.v;s=f.x,r=f.y,o=f.z;var d=e.v;l=d.x,_=d.y,h=d.z;var b=a.v;c=b.x,g=b.y,u=b.z;var p,m,I,v,M,C,y,w,A,x=i,Z=!1;if((s-x.x)*(y=(m=_-r)*(C=u-o)-(I=h-o)*(M=g-r))+(r-x.y)*(w=I*(v=c-s)-(p=l-s)*C)+(o-x.z)*(A=p*M-m*v)<0)if(n){var z=e;e=a,a=z,y*=-1,w*=-1,A*=-1}else Z=!0;this._vertices[0]=t,this._vertices[1]=e,this._vertices[2]=a;var B=this._normal;B.x=y,B.y=w,B.z=A;var N,G,k,S,W,X,Y,D,K,L,V,H,j,T,R,F,O,P,J=t.v,E=e.v,U=a.v,Q=this.tmp,q=J;N=q.x,G=q.y,k=q.z;var $=E;S=$.x,W=$.y,X=$.z;var tt,et,at,it=U;Y=it.x;var nt,st,rt,ot=S*((T=(D=it.y)-W)*(at=(L=S-N)*T-(V=W-G)*(j=Y-S))-(R=(K=it.z)-X)*(et=(H=X-k)*j-L*R))+W*(R*(tt=V*R-H*T)-j*at)+X*(j*et-T*tt),lt=Y*((O=G-D)*at-(P=k-K)*et)+D*(P*tt-(F=N-Y)*at)+K*(F*et-O*tt),_t=-1;if(N*(V*at-H*et)+G*(H*tt-L*at)+k*(L*et-V*tt)<(rt=st=nt=0)){var ht,ct,gt,ut,ft,dt,bt=J;ht=bt.x,ct=bt.y,gt=bt.z;var pt,mt,It,vt,Mt=E,Ct=(pt=(ut=Mt.x)-ht)*ht+(mt=(ft=Mt.y)-ct)*ct+(It=(dt=Mt.z)-gt)*gt;if((Ct=-Ct/(pt*pt+mt*mt+It*It))<0){var yt=Q;yt.x=ht,yt.y=ct,yt.z=gt,vt=1}else if(1<Ct){var wt=Q;wt.x=ut,wt.y=ft,wt.z=dt,vt=2}else{var At,xt,Zt;At=ht+pt*Ct,xt=ct+mt*Ct,Zt=gt+It*Ct;var zt=Q;zt.x=At,zt.y=xt,zt.z=Zt,vt=3}vt,_t=Q.x*Q.x+Q.y*Q.y+Q.z*Q.z;var Bt=Q;nt=Bt.x,st=Bt.y,rt=Bt.z}if(ot<0){var Nt,Gt,kt,St,Wt,Xt,Yt=E;Nt=Yt.x,Gt=Yt.y,kt=Yt.z;var Dt,Kt,Lt,Vt,Ht=U,jt=(Dt=(St=Ht.x)-Nt)*Nt+(Kt=(Wt=Ht.y)-Gt)*Gt+(Lt=(Xt=Ht.z)-kt)*kt;if((jt=-jt/(Dt*Dt+Kt*Kt+Lt*Lt))<0){var Tt=Q;Tt.x=Nt,Tt.y=Gt,Tt.z=kt,Vt=1}else if(1<jt){var Rt=Q;Rt.x=St,Rt.y=Wt,Rt.z=Xt,Vt=2}else{var Ft,Ot,Pt;Ft=Nt+Dt*jt,Ot=Gt+Kt*jt,Pt=kt+Lt*jt;var Jt=Q;Jt.x=Ft,Jt.y=Ot,Jt.z=Pt,Vt=3}var Et=Q.x*Q.x+Q.y*Q.y+Q.z*Q.z;if(_t<0||Et<_t){Vt<<1,_t=Et;var Ut=Q;nt=Ut.x,st=Ut.y,rt=Ut.z}}if(lt<0){var Qt,qt,$t,te,ee,ae,ie=J;Qt=ie.x,qt=ie.y,$t=ie.z;var ne,se,re,oe,le=U,_e=(ne=(te=le.x)-Qt)*Qt+(se=(ee=le.y)-qt)*qt+(re=(ae=le.z)-$t)*$t;if((_e=-_e/(ne*ne+se*se+re*re))<0){var he=Q;he.x=Qt,he.y=qt,he.z=$t,oe=1}else if(1<_e){var ce=Q;ce.x=te,ce.y=ee,ce.z=ae,oe=2}else{var ge,ue,fe;ge=Qt+ne*_e,ue=qt+se*_e,fe=$t+re*_e;var de=Q;de.x=ge,de.y=ue,de.z=fe,oe=3}var be=Q.x*Q.x+Q.y*Q.y+Q.z*Q.z;if(_t<0||be<_t){1&oe|(2&oe)<<1,_t=be;var pe=Q;nt=pe.x,st=pe.y,rt=pe.z}}if(0<_t){var me=Q;me.x=nt,me.y=st,me.z=rt}else{var Ie=tt*tt+et*et+at*at;0<Ie&&(Ie=1/Math.sqrt(Ie));var ve=(tt*=Ie)*tt+(et*=Ie)*et+(at*=Ie)*at;nt=tt*(ve=(N*tt+G*et+k*at)/ve),st=et*ve,rt=at*ve;var Me=Q;Me.x=nt,Me.y=st,Me.z=rt}var Ce=this.tmp;return this._distanceSq=Ce.x*Ce.x+Ce.y*Ce.y+Ce.z*Ce.z,this._adjacentTriangles[0]=null,this._adjacentTriangles[1]=null,this._adjacentTriangles[2]=null,this._adjacentPairIndex[0]=-1,this._adjacentPairIndex[1]=-1,this._adjacentPairIndex[2]=-1,!Z},setAdjacentTriangle:function(t){for(var e=0,a=0;a<3;)for(var i=a++,n=0;n<3;){var s=n++,r=this._nextIndex[i],o=this._nextIndex[s];this._vertices[i]==t._vertices[o]&&this._vertices[r]==t._vertices[s]&&(this._adjacentTriangles[i]=t,this._adjacentPairIndex[i]=s,t._adjacentTriangles[s]=this,t._adjacentPairIndex[s]=i,++e)}return 1==e},removeReferences:function(){this._next=null,this._prev=null,this._tmpDfsId=0,this._tmpDfsVisible=!1,this._distanceSq=0,this._vertices[0]=null,this._vertices[1]=null,this._vertices[2]=null,this._adjacentTriangles[0]=null,this._adjacentTriangles[1]=null,this._adjacentTriangles[2]=null,this._adjacentPairIndex[0]=0,this._adjacentPairIndex[1]=0,this._adjacentPairIndex[2]=0},__class__:qi};var $i=function(){this.v=new Jt,this.w1=new Jt,this.w2=new Jt};(i["oimo.collision.narrowphase.detector.gjkepa.EpaVertex"]=$i).__name__=!0,$i.prototype={_next:null,v:null,w1:null,w2:null,_tmpEdgeLoopNext:null,_tmpEdgeLoopOuterTriangle:null,init:function(t,e,a){var i=this.v;i.x=t.x,i.y=t.y,i.z=t.z;var n=this.w1;n.x=e.x,n.y=e.y,n.z=e.z;var s=this.w2;return s.x=a.x,s.y=a.y,s.z=a.z,this._next=null,this._tmpEdgeLoopNext=null,this._tmpEdgeLoopOuterTriangle=null,this},removeReferences:function(){this._next=null,this._tmpEdgeLoopNext=null,this._tmpEdgeLoopOuterTriangle=null},__class__:$i};var gh=function(){this.prevClosestDir=new Jt};(i["oimo.collision.narrowphase.detector.gjkepa.GjkCache"]=gh).__name__=!0,gh.prototype={prevClosestDir:null,clear:function(){this.prevClosestDir.zero()},__class__:gh};var tn=function(){this._positionX=0,this._positionY=0,this._positionZ=0,this._rotation00=1,this._rotation01=0,this._rotation02=0,this._rotation10=0,this._rotation11=1,this._rotation12=0,this._rotation20=0,this._rotation21=0,this._rotation22=1};(i["oimo.common.Transform"]=tn).__name__=!0,tn.prototype={_positionX:null,_positionY:null,_positionZ:null,_rotation00:null,_rotation01:null,_rotation02:null,_rotation10:null,_rotation11:null,_rotation12:null,_rotation20:null,_rotation21:null,_rotation22:null,__class__:tn};var wn=function(){};(i["oimo.common.Setting"]=wn).__name__=!0;var en=function(){var t=new Array(4);this.s=t;var e=new Array(4);this.w1=e;var a=new Array(4);this.w2=a;var i=new Array(3);this.baseDirs=i,this.baseDirs[0]=new Jt(1,0,0),this.baseDirs[1]=new Jt(0,1,0),this.baseDirs[2]=new Jt(0,0,1),this.tl1=new Jt,this.tl2=new Jt,this.rayX=new Jt,this.rayR=new Jt,this.tempTransform=new tn;for(var n=0;n<4;){var s=n++;this.s[s]=new Jt,this.w1[s]=new Jt,this.w2[s]=new Jt}this.dir=new Jt,this.closest=new Jt,this.closestPoint1=new Jt,this.closestPoint2=new Jt,this.polyhedron=new Qi};(i["oimo.collision.narrowphase.detector.gjkepa.GjkEpa"]=en).__name__=!0,en.prototype={c1:null,c2:null,tf1:null,tf2:null,s:null,simplexSize:null,w1:null,w2:null,tempTransform:null,dir:null,closest:null,baseDirs:null,tl1:null,tl2:null,rayX:null,rayR:null,depth:null,polyhedron:null,closestPoint1:null,closestPoint2:null,distance:null,computeClosestPointsImpl:function(t,e,a,i,n,s){this.c1=t,this.c2=e,this.tf1=a,this.tf2=i;var r=this.s,o=this.w1,l=this.w2,_=this.closest,h=this.dir;if(null!=n?(null==n._gjkCache&&(n._gjkCache=new gh),this.loadCache(n._gjkCache)):h.zero(),h.x*h.x+h.y*h.y+h.z*h.z==0){var c,g,u;c=i._positionX-a._positionX,g=i._positionY-a._positionY,u=i._positionZ-a._positionZ;var f=h;f.x=c,f.y=g,f.z=u,h.x*h.x+h.y*h.y+h.z*h.z<1e-6&&h.init(1,0,0)}this.simplexSize=0,this.computeWitnessPoint1(!1),this.computeWitnessPoint2(!1);var d=this.s[this.simplexSize],b=this.w1[this.simplexSize];d.x=b.x,d.y=b.y,d.z=b.z;var p=d,m=this.w2[this.simplexSize],I=p.x-m.x,v=p.y-m.y,M=p.z-m.z;p.x=I,p.y=v,p.z=M,this.simplexSize=1;for(var C=0;C<40;){var y=0;switch(this.simplexSize){case 1:var w=r[0];_.x=w.x,_.y=w.y,_.z=w.z,y=1;break;case 2:var A,x,Z,z,B,N,G=r[0];A=G.x,x=G.y,Z=G.z;var k,S,W,X=r[1],Y=(k=(z=X.x)-A)*A+(S=(B=X.y)-x)*x+(W=(N=X.z)-Z)*Z;if((Y=-Y/(k*k+S*S+W*W))<0){var D=_;D.x=A,D.y=x,D.z=Z,y=1}else if(1<Y){var K=_;K.x=z,K.y=B,K.z=N,y=2}else{var L,V,H;L=A+k*Y,V=x+S*Y,H=Z+W*Y;var j=_;j.x=L,j.y=V,j.z=H,y=3}break;case 3:var T,R,F,O,P,J,E,U,Q,q,$,tt,et,at,it,nt,st,rt,ot=r[0],lt=r[1],_t=r[2],ht=ot;T=ht.x,R=ht.y,F=ht.z;var ct=lt;O=ct.x,P=ct.y,J=ct.z;var gt,ut,ft,dt=_t;E=dt.x;var bt,pt,mt,It=O*((at=(U=dt.y)-P)*(ft=(q=O-T)*at-($=P-R)*(et=E-O))-(it=(Q=dt.z)-J)*(ut=(tt=J-F)*et-q*it))+P*(it*(gt=$*it-tt*at)-et*ft)+J*(et*ut-at*gt),vt=E*((st=R-U)*ft-(rt=F-Q)*ut)+U*(rt*gt-(nt=T-E)*ft)+Q*(nt*ut-st*gt),Mt=-1,Ct=0;if(T*($*ft-tt*ut)+R*(tt*gt-q*ft)+F*(q*ut-$*gt)<(mt=pt=bt=0)){var yt,wt,At,xt,Zt,zt,Bt=ot;yt=Bt.x,wt=Bt.y,At=Bt.z;var Nt,Gt,kt,St,Wt=lt,Xt=(Nt=(xt=Wt.x)-yt)*yt+(Gt=(Zt=Wt.y)-wt)*wt+(kt=(zt=Wt.z)-At)*At;if((Xt=-Xt/(Nt*Nt+Gt*Gt+kt*kt))<0){var Yt=_;Yt.x=yt,Yt.y=wt,Yt.z=At,St=1}else if(1<Xt){var Dt=_;Dt.x=xt,Dt.y=Zt,Dt.z=zt,St=2}else{var Kt,Lt,Vt;Kt=yt+Nt*Xt,Lt=wt+Gt*Xt,Vt=At+kt*Xt;var Ht=_;Ht.x=Kt,Ht.y=Lt,Ht.z=Vt,St=3}Ct=St,Mt=_.x*_.x+_.y*_.y+_.z*_.z;var jt=_;bt=jt.x,pt=jt.y,mt=jt.z}if(It<0){var Tt,Rt,Ft,Ot,Pt,Jt,Et=lt;Tt=Et.x,Rt=Et.y,Ft=Et.z;var Ut,Qt,qt,$t,te=_t,ee=(Ut=(Ot=te.x)-Tt)*Tt+(Qt=(Pt=te.y)-Rt)*Rt+(qt=(Jt=te.z)-Ft)*Ft;if((ee=-ee/(Ut*Ut+Qt*Qt+qt*qt))<0){var ae=_;ae.x=Tt,ae.y=Rt,ae.z=Ft,$t=1}else if(1<ee){var ie=_;ie.x=Ot,ie.y=Pt,ie.z=Jt,$t=2}else{var ne,se,re;ne=Tt+Ut*ee,se=Rt+Qt*ee,re=Ft+qt*ee;var oe=_;oe.x=ne,oe.y=se,oe.z=re,$t=3}var le=_.x*_.x+_.y*_.y+_.z*_.z;if(Mt<0||le<Mt){Ct=$t<<1,Mt=le;var _e=_;bt=_e.x,pt=_e.y,mt=_e.z}}if(vt<0){var he,ce,ge,ue,fe,de,be=ot;he=be.x,ce=be.y,ge=be.z;var pe,me,Ie,ve,Me=_t,Ce=(pe=(ue=Me.x)-he)*he+(me=(fe=Me.y)-ce)*ce+(Ie=(de=Me.z)-ge)*ge;if((Ce=-Ce/(pe*pe+me*me+Ie*Ie))<0){var ye=_;ye.x=he,ye.y=ce,ye.z=ge,ve=1}else if(1<Ce){var we=_;we.x=ue,we.y=fe,we.z=de,ve=2}else{var Ae,xe,Ze;Ae=he+pe*Ce,xe=ce+me*Ce,Ze=ge+Ie*Ce;var ze=_;ze.x=Ae,ze.y=xe,ze.z=Ze,ve=3}var Be=_.x*_.x+_.y*_.y+_.z*_.z;if(Mt<0||Be<Mt){Ct=1&ve|(2&ve)<<1,Mt=Be;var Ne=_;bt=Ne.x,pt=Ne.y,mt=Ne.z}}if(0<Mt){var Ge=_;Ge.x=bt,Ge.y=pt,Ge.z=mt,y=Ct}else{var ke=gt*gt+ut*ut+ft*ft;0<ke&&(ke=1/Math.sqrt(ke));var Se=(gt*=ke)*gt+(ut*=ke)*ut+(ft*=ke)*ft;bt=gt*(Se=(T*gt+R*ut+F*ft)/Se),pt=ut*Se,mt=ft*Se;var We=_;We.x=bt,We.y=pt,We.z=mt,y=7}break;case 4:var Xe,Ye,De,Ke,Le,Ve,He,je,Te,Re,Fe,Oe,Pe,Je,Ee,Ue,Qe,qe,$e,ta,ea,aa,ia,na,sa,ra,oa,la=r[0],_a=r[1],ha=r[2],ca=r[3],ga=la;Xe=ga.x,Ye=ga.y,De=ga.z;var ua=_a;Ke=ua.x,Le=ua.y,Ve=ua.z;var fa=ha;He=fa.x,je=fa.y,Te=fa.z;var da,ba,pa,ma=ca;(Re=ma.x)-He,(Fe=ma.y)-je,(Oe=ma.z)-Te;var Ia,va,Ma,Ca=0<(Pe=Ke-Xe)*(da=(ra=Fe-Le)*(na=Te-Ve)-(oa=Oe-Ve)*(ia=je-Le))+(Je=Le-Ye)*(ba=oa*(aa=He-Ke)-(sa=Re-Ke)*na)+(Ee=Ve-De)*(pa=sa*ia-ra*aa)?1:-1,ya=Xe*((Qe=je-Ye)*(ea=Oe-De)-(qe=Te-De)*(ta=Fe-Ye))+Ye*(qe*($e=Re-Xe)-(Ue=He-Xe)*ea)+De*(Ue*ta-Qe*$e),wa=Xe*(ta*Ee-ea*Je)+Ye*(ea*Pe-$e*Ee)+De*($e*Je-ta*Pe),Aa=Ke*da+Le*ba+Ve*pa,xa=-1,Za=0;if((Xe*(Je*qe-Ee*Qe)+Ye*(Ee*Ue-Pe*qe)+De*(Pe*Qe-Je*Ue))*Ca<(Ma=va=Ia=0)){var za,Ba,Na,Ga,ka,Sa,Wa,Xa,Ya,Da,Ka,La,Va,Ha,ja,Ta,Ra,Fa,Oa=la;za=Oa.x,Ba=Oa.y,Na=Oa.z;var Pa=_a;Ga=Pa.x,ka=Pa.y,Sa=Pa.z;var Ja,Ea,Ua,Qa=ha;Wa=Qa.x;var qa,$a,ti,ei,ai=Ga*((Ha=(Xa=Qa.y)-ka)*(Ua=(Da=Ga-za)*Ha-(Ka=ka-Ba)*(Va=Wa-Ga))-(ja=(Ya=Qa.z)-Sa)*(Ea=(La=Sa-Na)*Va-Da*ja))+ka*(ja*(Ja=Ka*ja-La*Ha)-Va*Ua)+Sa*(Va*Ea-Ha*Ja),ii=Wa*((Ra=Ba-Xa)*Ua-(Fa=Na-Ya)*Ea)+Xa*(Fa*Ja-(Ta=za-Wa)*Ua)+Ya*(Ta*Ea-Ra*Ja),ni=-1,si=0;if(za*(Ka*Ua-La*Ea)+Ba*(La*Ja-Da*Ua)+Na*(Da*Ea-Ka*Ja)<(ti=$a=qa=0)){var ri,oi,li,_i,hi,ci,gi=la;ri=gi.x,oi=gi.y,li=gi.z;var ui,fi,di,bi,pi=_a,mi=(ui=(_i=pi.x)-ri)*ri+(fi=(hi=pi.y)-oi)*oi+(di=(ci=pi.z)-li)*li;if((mi=-mi/(ui*ui+fi*fi+di*di))<0){var Ii=_;Ii.x=ri,Ii.y=oi,Ii.z=li,bi=1}else if(1<mi){var vi=_;vi.x=_i,vi.y=hi,vi.z=ci,bi=2}else{var Mi,Ci,yi;Mi=ri+ui*mi,Ci=oi+fi*mi,yi=li+di*mi;var wi=_;wi.x=Mi,wi.y=Ci,wi.z=yi,bi=3}si=bi,ni=_.x*_.x+_.y*_.y+_.z*_.z;var Ai=_;qa=Ai.x,$a=Ai.y,ti=Ai.z}if(ai<0){var xi,Zi,zi,Bi,Ni,Gi,ki=_a;xi=ki.x,Zi=ki.y,zi=ki.z;var Si,Wi,Xi,Yi,Di=ha,Ki=(Si=(Bi=Di.x)-xi)*xi+(Wi=(Ni=Di.y)-Zi)*Zi+(Xi=(Gi=Di.z)-zi)*zi;if((Ki=-Ki/(Si*Si+Wi*Wi+Xi*Xi))<0){var Li=_;Li.x=xi,Li.y=Zi,Li.z=zi,Yi=1}else if(1<Ki){var Vi=_;Vi.x=Bi,Vi.y=Ni,Vi.z=Gi,Yi=2}else{var Hi,ji,Ti;Hi=xi+Si*Ki,ji=Zi+Wi*Ki,Ti=zi+Xi*Ki;var Ri=_;Ri.x=Hi,Ri.y=ji,Ri.z=Ti,Yi=3}var Fi=_.x*_.x+_.y*_.y+_.z*_.z;if(ni<0||Fi<ni){si=Yi<<1,ni=Fi;var Oi=_;qa=Oi.x,$a=Oi.y,ti=Oi.z}}if(ii<0){var Pi,Ji,Ei,Ui,Qi,qi,$i=la;Pi=$i.x,Ji=$i.y,Ei=$i.z;var tn,en,an,nn,sn=ha,rn=(tn=(Ui=sn.x)-Pi)*Pi+(en=(Qi=sn.y)-Ji)*Ji+(an=(qi=sn.z)-Ei)*Ei;if((rn=-rn/(tn*tn+en*en+an*an))<0){var on=_;on.x=Pi,on.y=Ji,on.z=Ei,nn=1}else if(1<rn){var ln=_;ln.x=Ui,ln.y=Qi,ln.z=qi,nn=2}else{var _n,hn,cn;_n=Pi+tn*rn,hn=Ji+en*rn,cn=Ei+an*rn;var gn=_;gn.x=_n,gn.y=hn,gn.z=cn,nn=3}var un=_.x*_.x+_.y*_.y+_.z*_.z;if(ni<0||un<ni){si=1&nn|(2&nn)<<1,ni=un;var fn=_;qa=fn.x,$a=fn.y,ti=fn.z}}if(0<ni){var dn=_;dn.x=qa,dn.y=$a,dn.z=ti,ei=si}else{var bn=Ja*Ja+Ea*Ea+Ua*Ua;0<bn&&(bn=1/Math.sqrt(bn));var pn=(Ja*=bn)*Ja+(Ea*=bn)*Ea+(Ua*=bn)*Ua;qa=Ja*(pn=(za*Ja+Ba*Ea+Na*Ua)/pn),$a=Ea*pn,ti=Ua*pn;var mn=_;mn.x=qa,mn.y=$a,mn.z=ti,ei=7}Za=ei,xa=_.x*_.x+_.y*_.y+_.z*_.z;var In=_;Ia=In.x,va=In.y,Ma=In.z}if(ya*Ca<0){var vn,Mn,Cn,yn,wn,An,xn,Zn,zn,Bn,Nn,Gn,kn,Sn,Wn,Xn,Yn,Dn,Kn=la;vn=Kn.x,Mn=Kn.y,Cn=Kn.z;var Ln=ha;yn=Ln.x,wn=Ln.y,An=Ln.z;var Vn,Hn,jn,Tn=ca;xn=Tn.x;var Rn,Fn,On,Pn,Jn=yn*((Sn=(Zn=Tn.y)-wn)*(jn=(Bn=yn-vn)*Sn-(Nn=wn-Mn)*(kn=xn-yn))-(Wn=(zn=Tn.z)-An)*(Hn=(Gn=An-Cn)*kn-Bn*Wn))+wn*(Wn*(Vn=Nn*Wn-Gn*Sn)-kn*jn)+An*(kn*Hn-Sn*Vn),En=xn*((Yn=Mn-Zn)*jn-(Dn=Cn-zn)*Hn)+Zn*(Dn*Vn-(Xn=vn-xn)*jn)+zn*(Xn*Hn-Yn*Vn),Un=-1,Qn=0;if(vn*(Nn*jn-Gn*Hn)+Mn*(Gn*Vn-Bn*jn)+Cn*(Bn*Hn-Nn*Vn)<(On=Fn=Rn=0)){var qn,$n,ts,es,as,is,ns=la;qn=ns.x,$n=ns.y,ts=ns.z;var ss,rs,os,ls,_s=ha,hs=(ss=(es=_s.x)-qn)*qn+(rs=(as=_s.y)-$n)*$n+(os=(is=_s.z)-ts)*ts;if((hs=-hs/(ss*ss+rs*rs+os*os))<0){var cs=_;cs.x=qn,cs.y=$n,cs.z=ts,ls=1}else if(1<hs){var gs=_;gs.x=es,gs.y=as,gs.z=is,ls=2}else{var us,fs,ds;us=qn+ss*hs,fs=$n+rs*hs,ds=ts+os*hs;var bs=_;bs.x=us,bs.y=fs,bs.z=ds,ls=3}Qn=ls,Un=_.x*_.x+_.y*_.y+_.z*_.z;var ps=_;Rn=ps.x,Fn=ps.y,On=ps.z}if(Jn<0){var ms,Is,vs,Ms,Cs,ys,ws=ha;ms=ws.x,Is=ws.y,vs=ws.z;var As,xs,Zs,zs,Bs=ca,Ns=(As=(Ms=Bs.x)-ms)*ms+(xs=(Cs=Bs.y)-Is)*Is+(Zs=(ys=Bs.z)-vs)*vs;if((Ns=-Ns/(As*As+xs*xs+Zs*Zs))<0){var Gs=_;Gs.x=ms,Gs.y=Is,Gs.z=vs,zs=1}else if(1<Ns){var ks=_;ks.x=Ms,ks.y=Cs,ks.z=ys,zs=2}else{var Ss,Ws,Xs;Ss=ms+As*Ns,Ws=Is+xs*Ns,Xs=vs+Zs*Ns;var Ys=_;Ys.x=Ss,Ys.y=Ws,Ys.z=Xs,zs=3}var Ds=_.x*_.x+_.y*_.y+_.z*_.z;if(Un<0||Ds<Un){Qn=zs<<1,Un=Ds;var Ks=_;Rn=Ks.x,Fn=Ks.y,On=Ks.z}}if(En<0){var Ls,Vs,Hs,js,Ts,Rs,Fs=la;Ls=Fs.x,Vs=Fs.y,Hs=Fs.z;var Os,Ps,Js,Es,Us=ca,Qs=(Os=(js=Us.x)-Ls)*Ls+(Ps=(Ts=Us.y)-Vs)*Vs+(Js=(Rs=Us.z)-Hs)*Hs;if((Qs=-Qs/(Os*Os+Ps*Ps+Js*Js))<0){var qs=_;qs.x=Ls,qs.y=Vs,qs.z=Hs,Es=1}else if(1<Qs){var $s=_;$s.x=js,$s.y=Ts,$s.z=Rs,Es=2}else{var tr,er,ar;tr=Ls+Os*Qs,er=Vs+Ps*Qs,ar=Hs+Js*Qs;var ir=_;ir.x=tr,ir.y=er,ir.z=ar,Es=3}var nr=_.x*_.x+_.y*_.y+_.z*_.z;if(Un<0||nr<Un){Qn=1&Es|(2&Es)<<1,Un=nr;var sr=_;Rn=sr.x,Fn=sr.y,On=sr.z}}if(0<Un){var rr=_;rr.x=Rn,rr.y=Fn,rr.z=On,Pn=Qn}else{var or=Vn*Vn+Hn*Hn+jn*jn;0<or&&(or=1/Math.sqrt(or));var lr=(Vn*=or)*Vn+(Hn*=or)*Hn+(jn*=or)*jn;Rn=Vn*(lr=(vn*Vn+Mn*Hn+Cn*jn)/lr),Fn=Hn*lr,On=jn*lr;var _r=_;_r.x=Rn,_r.y=Fn,_r.z=On,Pn=7}var hr=_.x*_.x+_.y*_.y+_.z*_.z;if(xa<0||hr<xa){Za=1&Pn|(6&Pn)<<1,xa=hr;var cr=_;Ia=cr.x,va=cr.y,Ma=cr.z}}if(wa*Ca<0){var gr,ur,fr,dr,br,pr,mr,Ir,vr,Mr,Cr,yr,wr,Ar,xr,Zr,zr,Br,Nr=la;gr=Nr.x,ur=Nr.y,fr=Nr.z;var Gr=_a;dr=Gr.x,br=Gr.y,pr=Gr.z;var kr,Sr,Wr,Xr=ca;mr=Xr.x;var Yr,Dr,Kr,Lr,Vr=dr*((Ar=(Ir=Xr.y)-br)*(Wr=(Mr=dr-gr)*Ar-(Cr=br-ur)*(wr=mr-dr))-(xr=(vr=Xr.z)-pr)*(Sr=(yr=pr-fr)*wr-Mr*xr))+br*(xr*(kr=Cr*xr-yr*Ar)-wr*Wr)+pr*(wr*Sr-Ar*kr),Hr=mr*((zr=ur-Ir)*Wr-(Br=fr-vr)*Sr)+Ir*(Br*kr-(Zr=gr-mr)*Wr)+vr*(Zr*Sr-zr*kr),jr=-1,Tr=0;if(gr*(Cr*Wr-yr*Sr)+ur*(yr*kr-Mr*Wr)+fr*(Mr*Sr-Cr*kr)<(Kr=Dr=Yr=0)){var Rr,Fr,Or,Pr,Jr,Er,Ur=la;Rr=Ur.x,Fr=Ur.y,Or=Ur.z;var Qr,qr,$r,to,eo=_a,ao=(Qr=(Pr=eo.x)-Rr)*Rr+(qr=(Jr=eo.y)-Fr)*Fr+($r=(Er=eo.z)-Or)*Or;if((ao=-ao/(Qr*Qr+qr*qr+$r*$r))<0){var io=_;io.x=Rr,io.y=Fr,io.z=Or,to=1}else if(1<ao){var no=_;no.x=Pr,no.y=Jr,no.z=Er,to=2}else{var so,ro,oo;so=Rr+Qr*ao,ro=Fr+qr*ao,oo=Or+$r*ao;var lo=_;lo.x=so,lo.y=ro,lo.z=oo,to=3}Tr=to,jr=_.x*_.x+_.y*_.y+_.z*_.z;var _o=_;Yr=_o.x,Dr=_o.y,Kr=_o.z}if(Vr<0){var ho,co,go,uo,fo,bo,po=_a;ho=po.x,co=po.y,go=po.z;var mo,Io,vo,Mo,Co=ca,yo=(mo=(uo=Co.x)-ho)*ho+(Io=(fo=Co.y)-co)*co+(vo=(bo=Co.z)-go)*go;if((yo=-yo/(mo*mo+Io*Io+vo*vo))<0){var wo=_;wo.x=ho,wo.y=co,wo.z=go,Mo=1}else if(1<yo){var Ao=_;Ao.x=uo,Ao.y=fo,Ao.z=bo,Mo=2}else{var xo,Zo,zo;xo=ho+mo*yo,Zo=co+Io*yo,zo=go+vo*yo;var Bo=_;Bo.x=xo,Bo.y=Zo,Bo.z=zo,Mo=3}var No=_.x*_.x+_.y*_.y+_.z*_.z;if(jr<0||No<jr){Tr=Mo<<1,jr=No;var Go=_;Yr=Go.x,Dr=Go.y,Kr=Go.z}}if(Hr<0){var ko,So,Wo,Xo,Yo,Do,Ko=la;ko=Ko.x,So=Ko.y,Wo=Ko.z;var Lo,Vo,Ho,jo,To=ca,Ro=(Lo=(Xo=To.x)-ko)*ko+(Vo=(Yo=To.y)-So)*So+(Ho=(Do=To.z)-Wo)*Wo;if((Ro=-Ro/(Lo*Lo+Vo*Vo+Ho*Ho))<0){var Fo=_;Fo.x=ko,Fo.y=So,Fo.z=Wo,jo=1}else if(1<Ro){var Oo=_;Oo.x=Xo,Oo.y=Yo,Oo.z=Do,jo=2}else{var Po,Jo,Eo;Po=ko+Lo*Ro,Jo=So+Vo*Ro,Eo=Wo+Ho*Ro;var Uo=_;Uo.x=Po,Uo.y=Jo,Uo.z=Eo,jo=3}var Qo=_.x*_.x+_.y*_.y+_.z*_.z;if(jr<0||Qo<jr){Tr=1&jo|(2&jo)<<1,jr=Qo;var qo=_;Yr=qo.x,Dr=qo.y,Kr=qo.z}}if(0<jr){var $o=_;$o.x=Yr,$o.y=Dr,$o.z=Kr,Lr=Tr}else{var tl=kr*kr+Sr*Sr+Wr*Wr;0<tl&&(tl=1/Math.sqrt(tl));var el=(kr*=tl)*kr+(Sr*=tl)*Sr+(Wr*=tl)*Wr;Yr=kr*(el=(gr*kr+ur*Sr+fr*Wr)/el),Dr=Sr*el,Kr=Wr*el;var al=_;al.x=Yr,al.y=Dr,al.z=Kr,Lr=7}var il=_.x*_.x+_.y*_.y+_.z*_.z;if(xa<0||il<xa){Za=3&Lr|(4&Lr)<<1,xa=il;var nl=_;Ia=nl.x,va=nl.y,Ma=nl.z}}if(Aa*Ca<0){var sl,rl,ol,ll,_l,hl,cl,gl,ul,fl,dl,bl,pl,ml,Il,vl,Ml,Cl,yl=_a;sl=yl.x,rl=yl.y,ol=yl.z;var wl=ha;ll=wl.x,_l=wl.y,hl=wl.z;var Al,xl,Zl,zl=ca;cl=zl.x;var Bl,Nl,Gl,kl,Sl=ll*((ml=(gl=zl.y)-_l)*(Zl=(fl=ll-sl)*ml-(dl=_l-rl)*(pl=cl-ll))-(Il=(ul=zl.z)-hl)*(xl=(bl=hl-ol)*pl-fl*Il))+_l*(Il*(Al=dl*Il-bl*ml)-pl*Zl)+hl*(pl*xl-ml*Al),Wl=cl*((Ml=rl-gl)*Zl-(Cl=ol-ul)*xl)+gl*(Cl*Al-(vl=sl-cl)*Zl)+ul*(vl*xl-Ml*Al),Xl=-1,Yl=0;if(sl*(dl*Zl-bl*xl)+rl*(bl*Al-fl*Zl)+ol*(fl*xl-dl*Al)<(Gl=Nl=Bl=0)){var Dl,Kl,Ll,Vl,Hl,jl,Tl=_a;Dl=Tl.x,Kl=Tl.y,Ll=Tl.z;var Rl,Fl,Ol,Pl,Jl=ha,El=(Rl=(Vl=Jl.x)-Dl)*Dl+(Fl=(Hl=Jl.y)-Kl)*Kl+(Ol=(jl=Jl.z)-Ll)*Ll;if((El=-El/(Rl*Rl+Fl*Fl+Ol*Ol))<0){var Ul=_;Ul.x=Dl,Ul.y=Kl,Ul.z=Ll,Pl=1}else if(1<El){var Ql=_;Ql.x=Vl,Ql.y=Hl,Ql.z=jl,Pl=2}else{var ql,$l,t_;ql=Dl+Rl*El,$l=Kl+Fl*El,t_=Ll+Ol*El;var e_=_;e_.x=ql,e_.y=$l,e_.z=t_,Pl=3}Yl=Pl,Xl=_.x*_.x+_.y*_.y+_.z*_.z;var a_=_;Bl=a_.x,Nl=a_.y,Gl=a_.z}if(Sl<0){var i_,n_,s_,r_,o_,l_,__=ha;i_=__.x,n_=__.y,s_=__.z;var h_,c_,g_,u_,f_=ca,d_=(h_=(r_=f_.x)-i_)*i_+(c_=(o_=f_.y)-n_)*n_+(g_=(l_=f_.z)-s_)*s_;if((d_=-d_/(h_*h_+c_*c_+g_*g_))<0){var b_=_;b_.x=i_,b_.y=n_,b_.z=s_,u_=1}else if(1<d_){var p_=_;p_.x=r_,p_.y=o_,p_.z=l_,u_=2}else{var m_,I_,v_;m_=i_+h_*d_,I_=n_+c_*d_,v_=s_+g_*d_;var M_=_;M_.x=m_,M_.y=I_,M_.z=v_,u_=3}var C_=_.x*_.x+_.y*_.y+_.z*_.z;if(Xl<0||C_<Xl){Yl=u_<<1,Xl=C_;var y_=_;Bl=y_.x,Nl=y_.y,Gl=y_.z}}if(Wl<0){var w_,A_,x_,Z_,z_,B_,N_=_a;w_=N_.x,A_=N_.y,x_=N_.z;var G_,k_,S_,W_,X_=ca,Y_=(G_=(Z_=X_.x)-w_)*w_+(k_=(z_=X_.y)-A_)*A_+(S_=(B_=X_.z)-x_)*x_;if((Y_=-Y_/(G_*G_+k_*k_+S_*S_))<0){var D_=_;D_.x=w_,D_.y=A_,D_.z=x_,W_=1}else if(1<Y_){var K_=_;K_.x=Z_,K_.y=z_,K_.z=B_,W_=2}else{var L_,V_,H_;L_=w_+G_*Y_,V_=A_+k_*Y_,H_=x_+S_*Y_;var j_=_;j_.x=L_,j_.y=V_,j_.z=H_,W_=3}var T_=_.x*_.x+_.y*_.y+_.z*_.z;if(Xl<0||T_<Xl){Yl=1&W_|(2&W_)<<1,Xl=T_;var R_=_;Bl=R_.x,Nl=R_.y,Gl=R_.z}}if(0<Xl){var F_=_;F_.x=Bl,F_.y=Nl,F_.z=Gl,kl=Yl}else{var O_=Al*Al+xl*xl+Zl*Zl;0<O_&&(O_=1/Math.sqrt(O_));var P_=(Al*=O_)*Al+(xl*=O_)*xl+(Zl*=O_)*Zl;Bl=Al*(P_=(sl*Al+rl*xl+ol*Zl)/P_),Nl=xl*P_,Gl=Zl*P_;var J_=_;J_.x=Bl,J_.y=Nl,J_.z=Gl,kl=7}var E_=_.x*_.x+_.y*_.y+_.z*_.z;if(xa<0||E_<xa){Za=kl<<1,xa=E_;var U_=_;Ia=U_.x,va=U_.y,Ma=U_.z}}if(0<xa){var Q_=_;Q_.x=Ia,Q_.y=va,Q_.z=Ma,y=Za}else _.zero(),y=15}if(_.x*_.x+_.y*_.y+_.z*_.z<1e-8){if(!s)return this.distance=0;switch(this.simplexSize){case 1:this.pointToTetrahedron();break;case 2:this.lineToTetrahedron();break;case 3:this.triangleToTetrahedron()}if(4==this.simplexSize){var q_=this.computeDepth(t,e,a,i,r,o,l);return 0!=q_?(this.distance=0,q_):(this.distance=-this.depth,0)}return this.distance=0,1}this.shrinkSimplex(y),h.x=_.x,h.y=_.y,h.z=_.z;var $_=h,th=-$_.x,eh=-$_.y,ah=-$_.z;$_.x=th,$_.y=eh,$_.z=ah,this.computeWitnessPoint1(!1),this.computeWitnessPoint2(!1);var ih=this.s[this.simplexSize],nh=this.w1[this.simplexSize];ih.x=nh.x,ih.y=nh.y,ih.z=nh.z;var sh=ih,rh=this.w2[this.simplexSize],oh=sh.x-rh.x,lh=sh.y-rh.y,_h=sh.z-rh.z;if(sh.x=oh,sh.y=lh,sh.z=_h,h.x*h.x+h.y*h.y+h.z*h.z<1e-8)throw new Error("!?");var hh=_.x*h.x+_.y*h.y+_.z*h.z,ch=r[this.simplexSize];if(ch.x*h.x+ch.y*h.y+ch.z*h.z-hh<1e-8)return this.interpolateClosestPoints(),this.distance=Math.sqrt(_.x*_.x+_.y*_.y+_.z*_.z),null!=n&&null!=n._gjkCache&&this.saveCache(n._gjkCache),0;this.simplexSize++,++C}return 2},interpolateClosestPoints:function(){switch(this.simplexSize){case 1:var t=this.closestPoint1,e=this.w1[0];t.x=e.x,t.y=e.y,t.z=e.z;var a=this.closestPoint2,i=this.w2[0];a.x=i.x,a.y=i.y,a.z=i.z;break;case 2:var n,s,r,o,l,_,h,c,g,u,f,d,b,p,m,I,v,M,C,y,w,A=this.closest;n=A.x,s=A.y,r=A.z;var x=this.s[0];o=x.x,l=x.y,_=x.z;var Z=this.w1[0];h=Z.x,c=Z.y,g=Z.z;var z=this.w2[0];u=z.x,f=z.y,d=z.z;var B=this.s[1];b=B.x,p=B.y,m=B.z;var N=this.w1[1];I=N.x,v=N.y,M=N.z;var G=this.w2[1];C=G.x,y=G.y,w=G.z;var k=this.s[2];k.x,k.y,k.z;var S=this.w1[2];S.x,S.y,S.z;var W,X,Y,D=this.w2[2];D.x,D.y,D.z;var K=(W=b-o)*W+(X=p-l)*X+(Y=m-_)*Y;0!=K&&(K=1/K);var L,V,H,j,T,R,F=((n-o)*W+(s-l)*X+(r-_)*Y)*K;L=h+(I-h)*F,V=c+(v-c)*F,H=g+(M-g)*F,j=u+(C-u)*F,T=f+(y-f)*F,R=d+(w-d)*F;var O=this.closestPoint1;O.x=L,O.y=V,O.z=H;var P=this.closestPoint2;P.x=j,P.y=T,P.z=R;break;case 3:var J,E,U,Q,q,$,tt,et,at,it,nt,st,rt,ot,lt,_t,ht,ct,gt,ut,ft,dt,bt,pt,mt,It,vt,Mt=this.closest;J=Mt.x,E=Mt.y,U=Mt.z;var Ct=this.s[0];Q=Ct.x,q=Ct.y,$=Ct.z;var yt=this.w1[0];tt=yt.x,et=yt.y,at=yt.z;var wt=this.w2[0];it=wt.x,nt=wt.y,st=wt.z;var At=this.s[1];rt=At.x,ot=At.y,lt=At.z;var xt=this.w1[1];_t=xt.x,ht=xt.y,ct=xt.z;var Zt=this.w2[1];gt=Zt.x,ut=Zt.y,ft=Zt.z;var zt=this.s[2];dt=zt.x,bt=zt.y,pt=zt.z;var Bt=this.w1[2];mt=Bt.x,It=Bt.y,vt=Bt.z;var Nt,Gt,kt,St,Wt,Xt,Yt,Dt,Kt,Lt=this.w2[2],Vt=(Nt=rt-Q)*Nt+(Gt=ot-q)*Gt+(kt=lt-$)*kt,Ht=Nt*(St=dt-Q)+Gt*(Wt=bt-q)+kt*(Xt=pt-$),jt=St*St+Wt*Wt+Xt*Xt,Tt=Nt*(Yt=J-Q)+Gt*(Dt=E-q)+kt*(Kt=U-$),Rt=St*Yt+Wt*Dt+Xt*Kt,Ft=Vt*jt-Ht*Ht;0!=Ft&&(Ft=1/Ft);var Ot,Pt,Jt,Et,Ut,Qt,qt=(Tt*jt-Rt*Ht)*Ft,$t=(-Tt*Ht+Rt*Vt)*Ft;Ot=tt+(_t-tt)*qt,Pt=et+(ht-et)*qt,Jt=at+(ct-at)*qt,Ot+=(mt-tt)*$t,Pt+=(It-et)*$t,Jt+=(vt-at)*$t,Et=it+(gt-it)*qt,Ut=nt+(ut-nt)*qt,Qt=st+(ft-st)*qt,Et+=(Lt.x-it)*$t,Ut+=(Lt.y-nt)*$t,Qt+=(Lt.z-st)*$t;var te=this.closestPoint1;te.x=Ot,te.y=Pt,te.z=Jt;var ee=this.closestPoint2;ee.x=Et,ee.y=Ut,ee.z=Qt;break;default:throw new Error("!?")}},loadCache:function(t){var e=this.dir,a=t.prevClosestDir;e.x=a.x,e.y=a.y,e.z=a.z},saveCache:function(t){var e=t.prevClosestDir,a=this.closest;e.x=a.x,e.y=a.y,e.z=a.z;var i=e,n=-i.x,s=-i.y,r=-i.z;i.x=n,i.y=s,i.z=r},shrinkSimplex:function(t){switch(this.simplexSize=t,this.simplexSize=(5&this.simplexSize)+(this.simplexSize>>1&5),this.simplexSize=(3&this.simplexSize)+(this.simplexSize>>2&3),t){case 2:var e=this.s[0],a=this.s[1];e.x=a.x,e.y=a.y,e.z=a.z;var i=this.w1[0],n=this.w1[1];i.x=n.x,i.y=n.y,i.z=n.z;var s=this.w2[0],r=this.w2[1];s.x=r.x,s.y=r.y,s.z=r.z;break;case 4:var o=this.s[0],l=this.s[2];o.x=l.x,o.y=l.y,o.z=l.z;var _=this.w1[0],h=this.w1[2];_.x=h.x,_.y=h.y,_.z=h.z;var c=this.w2[0],g=this.w2[2];c.x=g.x,c.y=g.y,c.z=g.z;break;case 5:var u=this.s[1],f=this.s[2];u.x=f.x,u.y=f.y,u.z=f.z;var d=this.w1[1],b=this.w1[2];d.x=b.x,d.y=b.y,d.z=b.z;var p=this.w2[1],m=this.w2[2];p.x=m.x,p.y=m.y,p.z=m.z;break;case 6:var I=this.s[0],v=this.s[2];I.x=v.x,I.y=v.y,I.z=v.z;var M=this.w1[0],C=this.w1[2];M.x=C.x,M.y=C.y,M.z=C.z;var y=this.w2[0],w=this.w2[2];y.x=w.x,y.y=w.y,y.z=w.z;break;case 8:var A=this.s[0],x=this.s[3];A.x=x.x,A.y=x.y,A.z=x.z;var Z=this.w1[0],z=this.w1[3];Z.x=z.x,Z.y=z.y,Z.z=z.z;var B=this.w2[0],N=this.w2[3];B.x=N.x,B.y=N.y,B.z=N.z;break;case 9:var G=this.s[1],k=this.s[3];G.x=k.x,G.y=k.y,G.z=k.z;var S=this.w1[1],W=this.w1[3];S.x=W.x,S.y=W.y,S.z=W.z;var X=this.w2[1],Y=this.w2[3];X.x=Y.x,X.y=Y.y,X.z=Y.z;break;case 10:var D=this.s[0],K=this.s[3];D.x=K.x,D.y=K.y,D.z=K.z;var L=this.w1[0],V=this.w1[3];L.x=V.x,L.y=V.y,L.z=V.z;var H=this.w2[0],j=this.w2[3];H.x=j.x,H.y=j.y,H.z=j.z;break;case 11:var T=this.s[2],R=this.s[3];T.x=R.x,T.y=R.y,T.z=R.z;var F=this.w1[2],O=this.w1[3];F.x=O.x,F.y=O.y,F.z=O.z;var P=this.w2[2],J=this.w2[3];P.x=J.x,P.y=J.y,P.z=J.z;break;case 12:var E=this.s[0],U=this.s[2];E.x=U.x,E.y=U.y,E.z=U.z;var Q=this.w1[0],q=this.w1[2];Q.x=q.x,Q.y=q.y,Q.z=q.z;var $=this.w2[0],tt=this.w2[2];$.x=tt.x,$.y=tt.y,$.z=tt.z;var et=this.s[1],at=this.s[3];et.x=at.x,et.y=at.y,et.z=at.z;var it=this.w1[1],nt=this.w1[3];it.x=nt.x,it.y=nt.y,it.z=nt.z;var st=this.w2[1],rt=this.w2[3];st.x=rt.x,st.y=rt.y,st.z=rt.z;break;case 13:var ot=this.s[1],lt=this.s[3];ot.x=lt.x,ot.y=lt.y,ot.z=lt.z;var _t=this.w1[1],ht=this.w1[3];_t.x=ht.x,_t.y=ht.y,_t.z=ht.z;var ct=this.w2[1],gt=this.w2[3];ct.x=gt.x,ct.y=gt.y,ct.z=gt.z;break;case 14:var ut=this.s[0],ft=this.s[3];ut.x=ft.x,ut.y=ft.y,ut.z=ft.z;var dt=this.w1[0],bt=this.w1[3];dt.x=bt.x,dt.y=bt.y,dt.z=bt.z;var pt=this.w2[0],mt=this.w2[3];pt.x=mt.x,pt.y=mt.y,pt.z=mt.z}},computeWitnessPoint1:function(t){var e,a,i,n,s,r,o,l,_,h,c,g,u=this.dir;n=u.x,s=u.y,r=u.z,o=this.tf1._rotation00*n+this.tf1._rotation10*s+this.tf1._rotation20*r,l=this.tf1._rotation01*n+this.tf1._rotation11*s+this.tf1._rotation21*r,_=this.tf1._rotation02*n+this.tf1._rotation12*s+this.tf1._rotation22*r;var f=this.dir;if(f.x=o,f.y=l,f.z=_,this.c1.computeLocalSupportingVertex(this.dir,this.w1[this.simplexSize]),t){var d=this.dir,b=Math.sqrt(d.x*d.x+d.y*d.y+d.z*d.z);0<b&&(b=1/b);var p=d.x*b,m=d.y*b,I=d.z*b;d.x=p,d.y=m,d.z=I;var v=this.w1[this.simplexSize],M=this.dir,C=this.c1._gjkMargin,y=v.x+M.x*C,w=v.y+M.y*C,A=v.z+M.z*C;v.x=y,v.y=w,v.z=A}var x=this.w1[this.simplexSize];e=x.x,a=x.y,i=x.z,h=this.tf1._rotation00*e+this.tf1._rotation01*a+this.tf1._rotation02*i,c=this.tf1._rotation10*e+this.tf1._rotation11*a+this.tf1._rotation12*i,g=this.tf1._rotation20*e+this.tf1._rotation21*a+this.tf1._rotation22*i,h+=this.tf1._positionX,c+=this.tf1._positionY,g+=this.tf1._positionZ;var Z=this.w1[this.simplexSize];Z.x=h,Z.y=c,Z.z=g;var z=this.dir;z.x=n,z.y=s,z.z=r},computeWitnessPoint2:function(t){var e,a,i,n,s,r,o,l,_,h,c,g,u=this.dir;n=u.x,s=u.y,r=u.z,o=-(o=this.tf2._rotation00*n+this.tf2._rotation10*s+this.tf2._rotation20*r),l=-(l=this.tf2._rotation01*n+this.tf2._rotation11*s+this.tf2._rotation21*r),_=-(_=this.tf2._rotation02*n+this.tf2._rotation12*s+this.tf2._rotation22*r);var f=this.dir;if(f.x=o,f.y=l,f.z=_,this.c2.computeLocalSupportingVertex(this.dir,this.w2[this.simplexSize]),t){var d=this.dir,b=Math.sqrt(d.x*d.x+d.y*d.y+d.z*d.z);0<b&&(b=1/b);var p=d.x*b,m=d.y*b,I=d.z*b;d.x=p,d.y=m,d.z=I;var v=this.w2[this.simplexSize],M=this.dir,C=this.c2._gjkMargin,y=v.x+M.x*C,w=v.y+M.y*C,A=v.z+M.z*C;v.x=y,v.y=w,v.z=A}var x=this.w2[this.simplexSize];e=x.x,a=x.y,i=x.z,h=this.tf2._rotation00*e+this.tf2._rotation01*a+this.tf2._rotation02*i,c=this.tf2._rotation10*e+this.tf2._rotation11*a+this.tf2._rotation12*i,g=this.tf2._rotation20*e+this.tf2._rotation21*a+this.tf2._rotation22*i,h+=this.tf2._positionX,c+=this.tf2._positionY,g+=this.tf2._positionZ;var Z=this.w2[this.simplexSize];Z.x=h,Z.y=c,Z.z=g;var z=this.dir;z.x=n,z.y=s,z.z=r},pointToTetrahedron:function(){for(var t=0;t<3;){var e=t++,a=this.dir,i=this.baseDirs[e];a.x=i.x,a.y=i.y,a.z=i.z,this.computeWitnessPoint1(!1),this.computeWitnessPoint2(!1);var n=this.s[this.simplexSize],s=this.w1[this.simplexSize];n.x=s.x,n.y=s.y,n.z=s.z;var r=n,o=this.w2[this.simplexSize],l=r.x-o.x,_=r.y-o.y,h=r.z-o.z;if(r.x=l,r.y=_,r.z=h,this.simplexSize++,this.lineToTetrahedron(),4==this.simplexSize)break;this.simplexSize--;var c=this.dir,g=-c.x,u=-c.y,f=-c.z;c.x=g,c.y=u,c.z=f,this.computeWitnessPoint1(!1),this.computeWitnessPoint2(!1);var d=this.s[this.simplexSize],b=this.w1[this.simplexSize];d.x=b.x,d.y=b.y,d.z=b.z;var p=d,m=this.w2[this.simplexSize],I=p.x-m.x,v=p.y-m.y,M=p.z-m.z;if(p.x=I,p.y=v,p.z=M,this.simplexSize++,this.lineToTetrahedron(),4==this.simplexSize)break;this.simplexSize--}},lineToTetrahedron:function(){var t,e,a,i,n,s,r,o,l,_=this.dir;t=_.x,e=_.y,a=_.z;var h=this.s[0];i=h.x,n=h.y,s=h.z;var c=this.s[1];r=i-c.x,o=n-c.y,l=s-c.z;for(var g=0;g<3;){var u,f,d,b,p,m,I=g++,v=this.baseDirs[I];u=v.x,f=v.y,b=o*(d=v.z)-l*f,p=l*u-r*d,m=r*f-o*u;var M=this.dir;M.x=b,M.y=p,M.z=m,this.computeWitnessPoint1(!1),this.computeWitnessPoint2(!1);var C=this.s[this.simplexSize],y=this.w1[this.simplexSize];C.x=y.x,C.y=y.y,C.z=y.z;var w=C,A=this.w2[this.simplexSize],x=w.x-A.x,Z=w.y-A.y,z=w.z-A.z;if(w.x=x,w.y=Z,w.z=z,this.simplexSize++,this.triangleToTetrahedron(),4==this.simplexSize)break;this.simplexSize--;var B=this.dir,N=-B.x,G=-B.y,k=-B.z;B.x=N,B.y=G,B.z=k,this.computeWitnessPoint1(!1),this.computeWitnessPoint2(!1);var S=this.s[this.simplexSize],W=this.w1[this.simplexSize];S.x=W.x,S.y=W.y,S.z=W.z;var X=S,Y=this.w2[this.simplexSize],D=X.x-Y.x,K=X.y-Y.y,L=X.z-Y.z;if(X.x=D,X.y=K,X.z=L,this.simplexSize++,this.triangleToTetrahedron(),4==this.simplexSize)break;this.simplexSize--}var V=this.dir;V.x=t,V.y=e,V.z=a},triangleToTetrahedron:function(){var t,e,a,i=this.dir;for(t=i.x,e=i.y,a=i.z;;){var n,s,r,o,l,_,h,c,g,u,f,d,b,p,m=this.s[0];n=m.x,s=m.y,r=m.z;var I=this.s[1];o=I.x,l=I.y,_=I.z;var v,M,C,y=this.s[2];h=y.x,c=y.y,v=(u=l-s)*(p=y.z-r)-(f=_-r)*(b=c-s),M=f*(d=h-n)-(g=o-n)*p,C=g*b-u*d;var w=this.dir;w.x=v,w.y=M,w.z=C,this.computeWitnessPoint1(!1),this.computeWitnessPoint2(!1);var A=this.s[this.simplexSize],x=this.w1[this.simplexSize];A.x=x.x,A.y=x.y,A.z=x.z;var Z=A,z=this.w2[this.simplexSize],B=Z.x-z.x,N=Z.y-z.y,G=Z.z-z.z;if(Z.x=B,Z.y=N,Z.z=G,this.simplexSize++,this.isValidTetrahedron())break;this.simplexSize--;var k=this.dir,S=-k.x,W=-k.y,X=-k.z;k.x=S,k.y=W,k.z=X,this.computeWitnessPoint1(!1),this.computeWitnessPoint2(!1);var Y=this.s[this.simplexSize],D=this.w1[this.simplexSize];Y.x=D.x,Y.y=D.y,Y.z=D.z;var K=Y,L=this.w2[this.simplexSize],V=K.x-L.x,H=K.y-L.y,j=K.z-L.z;if(K.x=V,K.y=H,K.z=j,this.simplexSize++,this.isValidTetrahedron())break;this.simplexSize--;break}var T=this.dir;T.x=t,T.y=e,T.z=a},isValidTetrahedron:function(){var t=this.s[1].x-this.s[0].x,e=this.s[1].y-this.s[0].y,a=this.s[1].z-this.s[0].z,i=this.s[2].x-this.s[0].x,n=this.s[2].y-this.s[0].y,s=this.s[2].z-this.s[0].z,r=this.s[3].x-this.s[0].x,o=this.s[3].y-this.s[0].y,l=this.s[3].z-this.s[0].z,_=t*(n*l-s*o)-e*(i*l-s*r)+a*(i*o-n*r);return 1e-12<_||_<-1e-12},computeDepth:function(t,e,a,i,n,s,r){for(var o=this.polyhedron;0<o._numTriangles;){var l=o._triangleList;o._numTriangles--;var _=l._prev,h=l._next;null!=_&&(_._next=h),null!=h&&(h._prev=_),l==o._triangleList&&(o._triangleList=o._triangleList._next),l==o._triangleListLast&&(o._triangleListLast=o._triangleListLast._prev),l._next=null,l._prev=null,l.removeReferences(),l._next=o._trianglePool,o._trianglePool=l}for(;0<o._numVertices;){var c=o._vertices[--o._numVertices];c.removeReferences(),c._next=o._vertexPool,o._vertexPool=c}var g=this.polyhedron,u=this.polyhedron,f=u._vertexPool;null!=f?(u._vertexPool=f._next,f._next=null):f=new $i;var d=f.init(n[0],s[0],r[0]),b=this.polyhedron,p=b._vertexPool;null!=p?(b._vertexPool=p._next,p._next=null):p=new $i;var m=p.init(n[1],s[1],r[1]),I=this.polyhedron,v=I._vertexPool;null!=v?(I._vertexPool=v._next,v._next=null):v=new $i;var M=v.init(n[2],s[2],r[2]),C=this.polyhedron,y=C._vertexPool;if(null!=y?(C._vertexPool=y._next,y._next=null):y=new $i,!g._init(d,m,M,y.init(n[3],s[3],r[3])))return an.EPA_FAILED_TO_INIT;this.simplexSize=0;for(var w=this.s[0],A=this.w1[0],x=this.w2[0],Z=0;Z<40;){for(var z=this.polyhedron._triangleList,B=1/0,N=null;null!=z;){var G=z._next;z._distanceSq<B&&(B=z._distanceSq,N=z),z=G}var k=N,S=this.dir,W=k._normal;S.x=W.x,S.y=W.y,S.z=W.z;var X=S,Y=Math.sqrt(X.x*X.x+X.y*X.y+X.z*X.z);0<Y&&(Y=1/Y);var D=X.x*Y,K=X.y*Y,L=X.z*Y;X.x=D,X.y=K,X.z=L,this.computeWitnessPoint1(!1),this.computeWitnessPoint2(!1);var V=this.s[this.simplexSize],H=this.w1[this.simplexSize];V.x=H.x,V.y=H.y,V.z=H.z;var j=V,T=this.w2[this.simplexSize],R=j.x-T.x,F=j.y-T.y,O=j.z-T.z;j.x=R,j.y=F,j.z=O;var P=k._vertices[0],J=k._vertices[1],E=k._vertices[2],U=P.v,Q=this.dir,q=U.x*Q.x+U.y*Q.y+U.z*Q.z,$=this.dir;if(w.x*$.x+w.y*$.y+w.z*$.z-q<1e-6||39==Z){var tt=this.closest,et=this.dir;tt.x=et.x,tt.y=et.y,tt.z=et.z;var at,it,nt,st=tt,rt=this.dir,ot=P.v,lt=this.dir,_t=(rt.x*ot.x+rt.y*ot.y+rt.z*ot.z)/(lt.x*lt.x+lt.y*lt.y+lt.z*lt.z),ht=st.x*_t,ct=st.y*_t,gt=st.z*_t;st.x=ht,st.y=ct,st.z=gt;var ut,ft,dt,bt,pt,mt,It,vt,Mt,Ct,yt,wt,At,xt,Zt,zt,Bt,Nt,Gt,kt,St,Wt,Xt,Yt,Dt=this.closest;at=Dt.x,it=Dt.y,nt=Dt.z;var Kt=P.v;ut=Kt.x,ft=Kt.y,dt=Kt.z;var Lt=P.w1;bt=Lt.x,pt=Lt.y,mt=Lt.z;var Vt=P.w2;It=Vt.x,vt=Vt.y,Mt=Vt.z;var Ht=J.v;Ct=Ht.x,yt=Ht.y,wt=Ht.z;var jt=J.w1;At=jt.x,xt=jt.y,Zt=jt.z;var Tt=J.w2;zt=Tt.x,Bt=Tt.y,Nt=Tt.z;var Rt=E.v;Gt=Rt.x,kt=Rt.y,St=Rt.z;var Ft=E.w1;Wt=Ft.x,Xt=Ft.y,Yt=Ft.z;var Ot,Pt,Jt,Et,Ut,Qt,qt,$t,te,ee=E.w2,ae=(Ot=Ct-ut)*Ot+(Pt=yt-ft)*Pt+(Jt=wt-dt)*Jt,ie=Ot*(Et=Gt-ut)+Pt*(Ut=kt-ft)+Jt*(Qt=St-dt),ne=Et*Et+Ut*Ut+Qt*Qt,se=Ot*(qt=at-ut)+Pt*($t=it-ft)+Jt*(te=nt-dt),re=Et*qt+Ut*$t+Qt*te,oe=ae*ne-ie*ie;0!=oe&&(oe=1/oe);var le,_e,he,ce,ge,ue,fe=(se*ne-re*ie)*oe,de=(-se*ie+re*ae)*oe;le=bt+(At-bt)*fe,_e=pt+(xt-pt)*fe,he=mt+(Zt-mt)*fe,le+=(Wt-bt)*de,_e+=(Xt-pt)*de,he+=(Yt-mt)*de,ce=It+(zt-It)*fe,ge=vt+(Bt-vt)*fe,ue=Mt+(Nt-Mt)*fe,ce+=(ee.x-It)*de,ge+=(ee.y-vt)*de,ue+=(ee.z-Mt)*de;var be=this.closestPoint1;be.x=le,be.y=_e,be.z=he;var pe=this.closestPoint2;pe.x=ce,pe.y=ge,pe.z=ue;var me=this.closest;return this.depth=Math.sqrt(me.x*me.x+me.y*me.y+me.z*me.z),an.SUCCEEDED}var Ie=this.polyhedron,ve=Ie._vertexPool;null!=ve?(Ie._vertexPool=ve._next,ve._next=null):ve=new $i;var Me=ve.init(w,A,x);if(!this.polyhedron._addVertex(Me,k))return an.EPA_FAILED_TO_ADD_VERTEX;++Z}return an.EPA_DID_NOT_CONVERGE},__class__:en};var an=function(){};(i["oimo.collision.narrowphase.detector.gjkepa.GjkEpaResultState"]=an).__name__=!0;var nn=function(t,e,a,i,n,s,r,o,l){null==l&&(l=1),null==o&&(o=0),null==r&&(r=0),null==s&&(s=0),null==n&&(n=1),null==i&&(i=0),null==a&&(a=0),null==e&&(e=0),null==t&&(t=1),this.e00=t,this.e01=e,this.e02=a,this.e10=i,this.e11=n,this.e12=s,this.e20=r,this.e21=o,this.e22=l,nn.numCreations++};(i["oimo.common.Mat3"]=nn).__name__=!0,nn.prototype={e00:null,e01:null,e02:null,e10:null,e11:null,e12:null,e20:null,e21:null,e22:null,__class__:nn};var sn=function(){};(i["oimo.common.Mat4"]=sn).__name__=!0;var rn=function(){var t=new Array(256);this.stackVec3=t,this.sizeVec3=0;var e=new Array(256);this.stackMat3=e,this.sizeMat3=0;var a=new Array(256);this.stackMat4=a,this.sizeMat4=0;var i=new Array(256);this.stackQuat=i,this.sizeQuat=0};(i["oimo.common.Pool"]=rn).__name__=!0,rn.prototype={stackVec3:null,sizeVec3:null,stackMat3:null,sizeMat3:null,stackMat4:null,sizeMat4:null,stackQuat:null,sizeQuat:null,__class__:rn};var on=function(){this._next=null,this._prev=null,this._link1=new ln,this._link2=new ln,this._s1=null,this._s2=null,this._b1=null,this._b2=null,this._detector=null,this._cachedDetectorData=new Fi,this._detectorResult=new Li,this._latest=!1,this._shouldBeSkipped=!1,this._manifold=new An,this._updater=new Zn(this._manifold),this._contactConstraint=new Cn(this._manifold),this._touching=!1};(i["oimo.dynamics.Contact"]=on).__name__=!0,on.prototype={_next:null,_prev:null,_link1:null,_link2:null,_s1:null,_s2:null,_b1:null,_b2:null,_detector:null,_cachedDetectorData:null,_detectorResult:null,_latest:null,_shouldBeSkipped:null,_manifold:null,_updater:null,_contactConstraint:null,_touching:null,_updateManifold:function(){if(null!=this._detector){var t=this._touching,e=this._detectorResult;this._detector.detect(e,this._s1._geom,this._s2._geom,this._s1._transform,this._s2._transform,this._cachedDetectorData);var a=e.numPoints;if(this._touching=0<a,this._touching?(this._manifold._buildBasis(e.normal),e.getMaxDepth()>wn.contactUseAlternativePositionCorrectionAlgorithmDepthThreshold?this._contactConstraint._positionCorrectionAlgorithm=wn.alternativeContactPositionCorrectionAlgorithm:this._contactConstraint._positionCorrectionAlgorithm=wn.defaultContactPositionCorrectionAlgorithm,e.incremental?this._updater.incrementalUpdate(e,this._b1._transform,this._b2._transform):this._updater.totalUpdate(e,this._b1._transform,this._b2._transform)):this._manifold._clear(),this._touching&&!t){var i=this._s1._contactCallback,n=this._s2._contactCallback;i==n&&(n=null),null!=i&&i.beginContact(this),null!=n&&n.beginContact(this)}if(!this._touching&&t){var s=this._s1._contactCallback,r=this._s2._contactCallback;s==r&&(r=null),null!=s&&s.endContact(this),null!=r&&r.endContact(this)}if(this._touching){var o=this._s1._contactCallback,l=this._s2._contactCallback;o==l&&(l=null),null!=o&&o.preSolve(this),null!=l&&l.preSolve(this)}}},_postSolve:function(){var t=this._s1._contactCallback,e=this._s2._contactCallback;t==e&&(e=null),null!=t&&t.postSolve(this),null!=e&&e.postSolve(this)},__class__:on};var ln=function(){this._prev=null,this._next=null,this._contact=null,this._other=null};(i["oimo.dynamics.ContactLink"]=ln).__name__=!0,ln.prototype={_prev:null,_next:null,_contact:null,_other:null,__class__:ln};var _n=function(t){this._broadPhase=t,this._collisionMatrix=new Ki,this._numContacts=0};(i["oimo.dynamics.ContactManager"]=_n).__name__=!0,_n.prototype={_numContacts:null,_contactList:null,_contactListLast:null,_contactPool:null,_broadPhase:null,_collisionMatrix:null,createContacts:function(){for(var t=this._broadPhase._proxyPairList;null!=t;){for(var e=t._next;;){var a,i;if(t._p1._id<t._p2._id?(a=t._p1.userData,i=t._p2.userData):(a=t._p2.userData,i=t._p1.userData),!this.shouldCollide(a,i))break;var n,s=a._rigidBody,r=i._rigidBody;n=s._numContactLinks<r._numContactLinks?s._contactLinkList:r._contactLinkList;for(var o=a._id,l=i._id,_=!1;null!=n;){var h=n._next,c=n._contact;if(c._s1._id==o&&c._s2._id==l){_=c._latest=!0;break}n=h}if(!_){var g=this._contactPool;null!=g?(this._contactPool=g._next,g._next=null):g=new on;var u=g;null==this._contactList?this._contactList=u:(this._contactListLast._next=u)._prev=this._contactListLast,(this._contactListLast=u)._latest=!0;var f=this._collisionMatrix.detectors[a._geom._type][i._geom._type];u._s1=a,u._s2=i,u._b1=a._rigidBody,u._b2=i._rigidBody,u._touching=!1,null==u._b1._contactLinkList?u._b1._contactLinkList=u._link1:(u._b1._contactLinkListLast._next=u._link1,u._link1._prev=u._b1._contactLinkListLast),u._b1._contactLinkListLast=u._link1,null==u._b2._contactLinkList?u._b2._contactLinkList=u._link2:(u._b2._contactLinkListLast._next=u._link2,u._link2._prev=u._b2._contactLinkListLast),u._b2._contactLinkListLast=u._link2,u._b1._numContactLinks++,u._b2._numContactLinks++,u._link1._other=u._b2,u._link2._other=u._b1,((u._link1._contact=u)._link2._contact=u)._detector=f;var d=u._contactConstraint;d._s1=a,d._s2=i,d._b1=d._s1._rigidBody,d._b2=d._s2._rigidBody,d._tf1=d._b1._transform,d._tf2=d._b2._transform,this._numContacts++}break}t=e}},destroyOutdatedContacts:function(){for(var t=this._broadPhase._incremental,e=this._contactList;null!=e;){for(var a=e._next;;){if(e._latest){e._latest=!1,e._shouldBeSkipped=!1;break}if(!t){var i=e._prev,n=e._next;if(null!=i&&(i._next=n),null!=n&&(n._prev=i),e==this._contactList&&(this._contactList=this._contactList._next),e==this._contactListLast&&(this._contactListLast=this._contactListLast._prev),e._next=null,e._prev=null,e._touching){var s=e._s1._contactCallback,r=e._s2._contactCallback;s==r&&(r=null),null!=s&&s.endContact(e),null!=r&&r.endContact(e)}var o=e._link1._prev,l=e._link1._next;null!=o&&(o._next=l),null!=l&&(l._prev=o),e._link1==e._b1._contactLinkList&&(e._b1._contactLinkList=e._b1._contactLinkList._next),e._link1==e._b1._contactLinkListLast&&(e._b1._contactLinkListLast=e._b1._contactLinkListLast._prev),e._link1._next=null,e._link1._prev=null;var _=e._link2._prev,h=e._link2._next;null!=_&&(_._next=h),null!=h&&(h._prev=_),e._link2==e._b2._contactLinkList&&(e._b2._contactLinkList=e._b2._contactLinkList._next),e._link2==e._b2._contactLinkListLast&&(e._b2._contactLinkListLast=e._b2._contactLinkListLast._prev),e._link2._next=null,e._link2._prev=null,e._b1._numContactLinks--,e._b2._numContactLinks--,e._link1._other=null,e._link2._other=null,e._link1._contact=null,e._link2._contact=null,e._s1=null,e._s2=null,e._b1=null,e._b2=null,e._touching=!1,e._cachedDetectorData._clear(),e._manifold._clear(),e._detector=null;var c=e._contactConstraint;c._s1=null,c._s2=null,c._b1=null,c._b2=null,c._tf1=null,c._tf2=null,e._next=this._contactPool,this._contactPool=e,this._numContacts--;break}var g=e._s1,u=e._s2,f=g._rigidBody,d=u._rigidBody,b=!f._sleeping&&1!=f._type,p=!d._sleeping&&1!=d._type;if(!b&&!p){e._shouldBeSkipped=!0;break}var m=g._aabb,I=u._aabb,v=g._proxy,M=u._proxy;if(!(v._aabbMinX<M._aabbMaxX&&v._aabbMaxX>M._aabbMinX&&v._aabbMinY<M._aabbMaxY&&v._aabbMaxY>M._aabbMinY&&v._aabbMinZ<M._aabbMaxZ&&v._aabbMaxZ>M._aabbMinZ&&this.shouldCollide(g,u))){var C=e._prev,y=e._next;if(null!=C&&(C._next=y),null!=y&&(y._prev=C),e==this._contactList&&(this._contactList=this._contactList._next),e==this._contactListLast&&(this._contactListLast=this._contactListLast._prev),e._next=null,e._prev=null,e._touching){var w=e._s1._contactCallback,A=e._s2._contactCallback;w==A&&(A=null),null!=w&&w.endContact(e),null!=A&&A.endContact(e)}var x=e._link1._prev,Z=e._link1._next;null!=x&&(x._next=Z),null!=Z&&(Z._prev=x),e._link1==e._b1._contactLinkList&&(e._b1._contactLinkList=e._b1._contactLinkList._next),e._link1==e._b1._contactLinkListLast&&(e._b1._contactLinkListLast=e._b1._contactLinkListLast._prev),e._link1._next=null,e._link1._prev=null;var z=e._link2._prev,B=e._link2._next;null!=z&&(z._next=B),null!=B&&(B._prev=z),e._link2==e._b2._contactLinkList&&(e._b2._contactLinkList=e._b2._contactLinkList._next),e._link2==e._b2._contactLinkListLast&&(e._b2._contactLinkListLast=e._b2._contactLinkListLast._prev),e._link2._next=null,e._link2._prev=null,e._b1._numContactLinks--,e._b2._numContactLinks--,e._link1._other=null,e._link2._other=null,e._link1._contact=null,e._link2._contact=null,e._s1=null,e._s2=null,e._b1=null,e._b2=null,e._touching=!1,e._cachedDetectorData._clear(),e._manifold._clear(),e._detector=null;var N=e._contactConstraint;N._s1=null,N._s2=null,N._b1=null,N._b2=null,N._tf1=null,N._tf2=null,e._next=this._contactPool,this._contactPool=e,this._numContacts--;break}var G=m._minX<I._maxX&&m._maxX>I._minX&&m._minY<I._maxY&&m._maxY>I._minY&&m._minZ<I._maxZ&&m._maxZ>I._minZ;e._shouldBeSkipped=!G;break}e=a}},shouldCollide:function(t,e){var a,i,n=t._rigidBody,s=e._rigidBody;if(n==s)return!1;if(0!=n._type&&0!=s._type)return!1;if(0==(t._collisionGroup&e._collisionMask)||0==(e._collisionGroup&t._collisionMask))return!1;for(n._numJointLinks<s._numJointLinks?(a=n._jointLinkList,i=s):(a=s._jointLinkList,i=n);null!=a;){var r=a._next;if(a._other==i&&!a._joint._allowCollision)return!1;a=r}return!0},_updateContacts:function(){this._broadPhase.collectPairs(),this.createContacts(),this.destroyOutdatedContacts()},_postSolve:function(){for(var t=this._contactList;null!=t;){var e=t._next;t._touching&&t._postSolve(),t=e}},__class__:_n};var hn=function(){var t=new Array(wn.islandInitialRigidBodyArraySize);this.rigidBodies=t;var e=new Array(wn.islandInitialConstraintArraySize);this.solvers=e;var a=new Array(wn.islandInitialConstraintArraySize);this.solversSi=a;var i=new Array(wn.islandInitialConstraintArraySize);this.solversNgs=i,this.numRigidBodies=0,this.numSolvers=0,this.numSolversSi=0,this.numSolversNgs=0};(i["oimo.dynamics.Island"]=hn).__name__=!0,hn.prototype={gravityX:null,gravityY:null,gravityZ:null,numRigidBodies:null,rigidBodies:null,numSolvers:null,solvers:null,numSolversSi:null,solversSi:null,numSolversNgs:null,solversNgs:null,_clear:function(){for(;0<this.numRigidBodies;)this.rigidBodies[--this.numRigidBodies]=null;for(;0<this.numSolvers;)this.solvers[--this.numSolvers]=null;for(;0<this.numSolversSi;)this.solversSi[--this.numSolversSi]=null;for(;0<this.numSolversNgs;)this.solversNgs[--this.numSolversNgs]=null},_addRigidBody:function(t){if(this.numRigidBodies==this.rigidBodies.length){for(var e=this.numRigidBodies<<1,a=new Array(e),i=0,n=this.numRigidBodies;i<n;){var s=i++;a[s]=this.rigidBodies[s],this.rigidBodies[s]=null}this.rigidBodies=a}t._addedToIsland=!0,this.rigidBodies[this.numRigidBodies++]=t},_addConstraintSolver:function(t,e){if(this.numSolvers==this.solvers.length){for(var a=this.numSolvers<<1,i=new Array(a),n=0,s=this.numSolvers;n<s;){var r=n++;i[r]=this.solvers[r],this.solvers[r]=null}this.solvers=i}if(t._addedToIsland=!0,this.solvers[this.numSolvers++]=t,e==Mn.SPLIT_IMPULSE){if(this.numSolversSi==this.solversSi.length){for(var o=this.numSolversSi<<1,l=new Array(o),_=0,h=this.numSolversSi;_<h;){var c=_++;l[c]=this.solversSi[c],this.solversSi[c]=null}this.solversSi=l}this.solversSi[this.numSolversSi++]=t}if(e==Mn.NGS){if(this.numSolversNgs==this.solversNgs.length){for(var g=this.numSolversNgs<<1,u=new Array(g),f=0,d=this.numSolversNgs;f<d;){var b=f++;u[b]=this.solversNgs[b],this.solversNgs[b]=null}this.solversNgs=u}this.solversNgs[this.numSolversNgs++]=t}},_stepSingleRigidBody:function(t,e){var a=t.dt,i=e._ptransform,n=e._transform;if(i._positionX=n._positionX,i._positionY=n._positionY,i._positionZ=n._positionZ,i._rotation00=n._rotation00,i._rotation01=n._rotation01,i._rotation02=n._rotation02,i._rotation10=n._rotation10,i._rotation11=n._rotation11,i._rotation12=n._rotation12,i._rotation20=n._rotation20,i._rotation21=n._rotation21,i._rotation22=n._rotation22,e._autoSleep&&e._velX*e._velX+e._velY*e._velY+e._velZ*e._velZ<wn.sleepingVelocityThreshold*wn.sleepingVelocityThreshold&&e._angVelX*e._angVelX+e._angVelY*e._angVelY+e._angVelZ*e._angVelZ<wn.sleepingAngularVelocityThreshold*wn.sleepingAngularVelocityThreshold?(e._sleepTime+=a,e._sleepTime>wn.sleepingTimeThreshold&&(e._sleeping=!0,e._sleepTime=0)):e._sleepTime=0,!e._sleeping){if(0==e._type){var s,r,o,l,_,h,c=a*e._linearDamping,g=c*c,u=1/(1+c+g*(.5+.16666666666666666*c+.041666666666666664*g)),f=a*e._angularDamping,d=f*f,b=1/(1+f+d*(.5+.16666666666666666*f+.041666666666666664*d));s=this.gravityX*e._gravityScale,r=this.gravityY*e._gravityScale,o=this.gravityZ*e._gravityScale,s+=e._forceX*e._invMass,r+=e._forceY*e._invMass,o+=e._forceZ*e._invMass,l=e._invInertia00*e._torqueX+e._invInertia01*e._torqueY+e._invInertia02*e._torqueZ,_=e._invInertia10*e._torqueX+e._invInertia11*e._torqueY+e._invInertia12*e._torqueZ,h=e._invInertia20*e._torqueX+e._invInertia21*e._torqueY+e._invInertia22*e._torqueZ,e._velX+=s*a,e._velY+=r*a,e._velZ+=o*a,e._velX*=u,e._velY*=u,e._velZ*=u,e._angVelX+=l*a,e._angVelY+=_*a,e._angVelZ+=h*a,e._angVelX*=b,e._angVelY*=b,e._angVelZ*=b}e._integrate(a);for(var p=e._shapeList;null!=p;){var m,I,v,M,C,y,w,A,x,Z,z,B,N=p._next,G=p._ptransform,k=p._localTransform,S=e._ptransform;m=S._rotation00*k._rotation00+S._rotation01*k._rotation10+S._rotation02*k._rotation20,I=S._rotation00*k._rotation01+S._rotation01*k._rotation11+S._rotation02*k._rotation21,v=S._rotation00*k._rotation02+S._rotation01*k._rotation12+S._rotation02*k._rotation22,M=S._rotation10*k._rotation00+S._rotation11*k._rotation10+S._rotation12*k._rotation20,C=S._rotation10*k._rotation01+S._rotation11*k._rotation11+S._rotation12*k._rotation21,y=S._rotation10*k._rotation02+S._rotation11*k._rotation12+S._rotation12*k._rotation22,w=S._rotation20*k._rotation00+S._rotation21*k._rotation10+S._rotation22*k._rotation20,A=S._rotation20*k._rotation01+S._rotation21*k._rotation11+S._rotation22*k._rotation21,x=S._rotation20*k._rotation02+S._rotation21*k._rotation12+S._rotation22*k._rotation22,G._rotation00=m,G._rotation01=I,G._rotation02=v,G._rotation10=M,G._rotation11=C,G._rotation12=y,G._rotation20=w,G._rotation21=A,G._rotation22=x,Z=S._rotation00*k._positionX+S._rotation01*k._positionY+S._rotation02*k._positionZ,z=S._rotation10*k._positionX+S._rotation11*k._positionY+S._rotation12*k._positionZ,B=S._rotation20*k._positionX+S._rotation21*k._positionY+S._rotation22*k._positionZ,G._positionX=Z,G._positionY=z,G._positionZ=B,G._positionX+=S._positionX,G._positionY+=S._positionY,G._positionZ+=S._positionZ;var W,X,Y,D,K,L,V,H,j,T,R,F,O,P,J,E,U,Q,q=p._transform,$=p._localTransform,tt=e._transform;if(W=tt._rotation00*$._rotation00+tt._rotation01*$._rotation10+tt._rotation02*$._rotation20,X=tt._rotation00*$._rotation01+tt._rotation01*$._rotation11+tt._rotation02*$._rotation21,Y=tt._rotation00*$._rotation02+tt._rotation01*$._rotation12+tt._rotation02*$._rotation22,D=tt._rotation10*$._rotation00+tt._rotation11*$._rotation10+tt._rotation12*$._rotation20,K=tt._rotation10*$._rotation01+tt._rotation11*$._rotation11+tt._rotation12*$._rotation21,L=tt._rotation10*$._rotation02+tt._rotation11*$._rotation12+tt._rotation12*$._rotation22,V=tt._rotation20*$._rotation00+tt._rotation21*$._rotation10+tt._rotation22*$._rotation20,H=tt._rotation20*$._rotation01+tt._rotation21*$._rotation11+tt._rotation22*$._rotation21,j=tt._rotation20*$._rotation02+tt._rotation21*$._rotation12+tt._rotation22*$._rotation22,q._rotation00=W,q._rotation01=X,q._rotation02=Y,q._rotation10=D,q._rotation11=K,q._rotation12=L,q._rotation20=V,q._rotation21=H,q._rotation22=j,T=tt._rotation00*$._positionX+tt._rotation01*$._positionY+tt._rotation02*$._positionZ,R=tt._rotation10*$._positionX+tt._rotation11*$._positionY+tt._rotation12*$._positionZ,F=tt._rotation20*$._positionX+tt._rotation21*$._positionY+tt._rotation22*$._positionZ,q._positionX=T,q._positionY=R,q._positionZ=F,q._positionX+=tt._positionX,q._positionY+=tt._positionY,q._positionZ+=tt._positionZ,p._geom._computeAabb(p._aabb,p._ptransform),O=p._aabb._minX,P=p._aabb._minY,J=p._aabb._minZ,E=p._aabb._maxX,U=p._aabb._maxY,Q=p._aabb._maxZ,p._geom._computeAabb(p._aabb,p._transform),p._aabb._minX=O<p._aabb._minX?O:p._aabb._minX,p._aabb._minY=P<p._aabb._minY?P:p._aabb._minY,p._aabb._minZ=J<p._aabb._minZ?J:p._aabb._minZ,p._aabb._maxX=E>p._aabb._maxX?E:p._aabb._maxX,p._aabb._maxY=U>p._aabb._maxY?U:p._aabb._maxY,p._aabb._maxZ=Q>p._aabb._maxZ?Q:p._aabb._maxZ,null!=p._proxy){var et,at,it;et=p._transform._positionX-p._ptransform._positionX,at=p._transform._positionY-p._ptransform._positionY,it=p._transform._positionZ-p._ptransform._positionZ;var nt=p.displacement;nt.x=et,nt.y=at,nt.z=it,p._rigidBody._world._broadPhase.moveProxy(p._proxy,p._aabb,p.displacement)}p=N}}},_step:function(t,e,a){for(var i=t.dt,n=!0,s=0,r=this.numRigidBodies;s<r;){var o=s++,l=this.rigidBodies[o],_=l._ptransform,h=l._transform;if(_._positionX=h._positionX,_._positionY=h._positionY,_._positionZ=h._positionZ,_._rotation00=h._rotation00,_._rotation01=h._rotation01,_._rotation02=h._rotation02,_._rotation10=h._rotation10,_._rotation11=h._rotation11,_._rotation12=h._rotation12,_._rotation20=h._rotation20,_._rotation21=h._rotation21,_._rotation22=h._rotation22,l._sleeping=!1,l._autoSleep&&l._velX*l._velX+l._velY*l._velY+l._velZ*l._velZ<wn.sleepingVelocityThreshold*wn.sleepingVelocityThreshold&&l._angVelX*l._angVelX+l._angVelY*l._angVelY+l._angVelZ*l._angVelZ<wn.sleepingAngularVelocityThreshold*wn.sleepingAngularVelocityThreshold?l._sleepTime+=i:l._sleepTime=0,l._sleepTime<wn.sleepingTimeThreshold&&(n=!1),0==l._type){var c,g,u,f,d,b,p=i*l._linearDamping,m=p*p,I=1/(1+p+m*(.5+.16666666666666666*p+.041666666666666664*m)),v=i*l._angularDamping,M=v*v,C=1/(1+v+M*(.5+.16666666666666666*v+.041666666666666664*M));c=this.gravityX*l._gravityScale,g=this.gravityY*l._gravityScale,u=this.gravityZ*l._gravityScale,c+=l._forceX*l._invMass,g+=l._forceY*l._invMass,u+=l._forceZ*l._invMass,f=l._invInertia00*l._torqueX+l._invInertia01*l._torqueY+l._invInertia02*l._torqueZ,d=l._invInertia10*l._torqueX+l._invInertia11*l._torqueY+l._invInertia12*l._torqueZ,b=l._invInertia20*l._torqueX+l._invInertia21*l._torqueY+l._invInertia22*l._torqueZ,l._velX+=c*i,l._velY+=g*i,l._velZ+=u*i,l._velX*=I,l._velY*=I,l._velZ*=I,l._angVelX+=f*i,l._angVelY+=d*i,l._angVelZ+=b*i,l._angVelX*=C,l._angVelY*=C,l._angVelZ*=C}}if(n)for(var y=0,w=this.numRigidBodies;y<w;){var A=y++,x=this.rigidBodies[A];x._sleeping=!0,x._sleepTime=0}else{for(var Z=0,z=this.numSolvers;Z<z;){var B=Z++;this.solvers[B].preSolveVelocity(t)}for(var N=0,G=this.numSolvers;N<G;){var k=N++;this.solvers[k].warmStart(t)}for(var S=0,W=e;S<W;){S++;for(var X=0,Y=this.numSolvers;X<Y;){var D=X++;this.solvers[D].solveVelocity()}}for(var K=0,L=this.numSolvers;K<L;){var V=K++;this.solvers[V].postSolveVelocity(t)}for(var H=0,j=this.numRigidBodies;H<j;){var T=H++;this.rigidBodies[T]._integrate(i)}for(var R=0,F=this.numSolversSi;R<F;){var O=R++;this.solversSi[O].preSolvePosition(t)}for(var P=0,J=a;P<J;){P++;for(var E=0,U=this.numSolversSi;E<U;){var Q=E++;this.solversSi[Q].solvePositionSplitImpulse()}}for(var q=0,$=this.numRigidBodies;q<$;){var tt=q++;this.rigidBodies[tt]._integratePseudoVelocity()}for(var et=0,at=this.numSolversNgs;et<at;){var it=et++;this.solversNgs[it].preSolvePosition(t)}for(var nt=0,st=a;nt<st;){nt++;for(var rt=0,ot=this.numSolversNgs;rt<ot;){var lt=rt++;this.solversNgs[lt].solvePositionNgs(t)}}for(var _t=0,ht=this.numSolvers;_t<ht;){var ct=_t++;this.solvers[ct].postSolve()}for(var gt=0,ut=this.numRigidBodies;gt<ut;)for(var ft=gt++,dt=this.rigidBodies[ft],bt=dt._shapeList;null!=bt;){var pt,mt,It,vt,Mt,Ct,yt,wt,At,xt,Zt,zt,Bt=bt._next,Nt=bt._ptransform,Gt=bt._localTransform,kt=dt._ptransform;pt=kt._rotation00*Gt._rotation00+kt._rotation01*Gt._rotation10+kt._rotation02*Gt._rotation20,mt=kt._rotation00*Gt._rotation01+kt._rotation01*Gt._rotation11+kt._rotation02*Gt._rotation21,It=kt._rotation00*Gt._rotation02+kt._rotation01*Gt._rotation12+kt._rotation02*Gt._rotation22,vt=kt._rotation10*Gt._rotation00+kt._rotation11*Gt._rotation10+kt._rotation12*Gt._rotation20,Mt=kt._rotation10*Gt._rotation01+kt._rotation11*Gt._rotation11+kt._rotation12*Gt._rotation21,Ct=kt._rotation10*Gt._rotation02+kt._rotation11*Gt._rotation12+kt._rotation12*Gt._rotation22,yt=kt._rotation20*Gt._rotation00+kt._rotation21*Gt._rotation10+kt._rotation22*Gt._rotation20,wt=kt._rotation20*Gt._rotation01+kt._rotation21*Gt._rotation11+kt._rotation22*Gt._rotation21,At=kt._rotation20*Gt._rotation02+kt._rotation21*Gt._rotation12+kt._rotation22*Gt._rotation22,Nt._rotation00=pt,Nt._rotation01=mt,Nt._rotation02=It,Nt._rotation10=vt,Nt._rotation11=Mt,Nt._rotation12=Ct,Nt._rotation20=yt,Nt._rotation21=wt,Nt._rotation22=At,xt=kt._rotation00*Gt._positionX+kt._rotation01*Gt._positionY+kt._rotation02*Gt._positionZ,Zt=kt._rotation10*Gt._positionX+kt._rotation11*Gt._positionY+kt._rotation12*Gt._positionZ,zt=kt._rotation20*Gt._positionX+kt._rotation21*Gt._positionY+kt._rotation22*Gt._positionZ,Nt._positionX=xt,Nt._positionY=Zt,Nt._positionZ=zt,Nt._positionX+=kt._positionX,Nt._positionY+=kt._positionY,Nt._positionZ+=kt._positionZ;var St,Wt,Xt,Yt,Dt,Kt,Lt,Vt,Ht,jt,Tt,Rt,Ft,Ot,Pt,Jt,Et,Ut,Qt=bt._transform,qt=bt._localTransform,$t=dt._transform;if(St=$t._rotation00*qt._rotation00+$t._rotation01*qt._rotation10+$t._rotation02*qt._rotation20,Wt=$t._rotation00*qt._rotation01+$t._rotation01*qt._rotation11+$t._rotation02*qt._rotation21,Xt=$t._rotation00*qt._rotation02+$t._rotation01*qt._rotation12+$t._rotation02*qt._rotation22,Yt=$t._rotation10*qt._rotation00+$t._rotation11*qt._rotation10+$t._rotation12*qt._rotation20,Dt=$t._rotation10*qt._rotation01+$t._rotation11*qt._rotation11+$t._rotation12*qt._rotation21,Kt=$t._rotation10*qt._rotation02+$t._rotation11*qt._rotation12+$t._rotation12*qt._rotation22,Lt=$t._rotation20*qt._rotation00+$t._rotation21*qt._rotation10+$t._rotation22*qt._rotation20,Vt=$t._rotation20*qt._rotation01+$t._rotation21*qt._rotation11+$t._rotation22*qt._rotation21,Ht=$t._rotation20*qt._rotation02+$t._rotation21*qt._rotation12+$t._rotation22*qt._rotation22,Qt._rotation00=St,Qt._rotation01=Wt,Qt._rotation02=Xt,Qt._rotation10=Yt,Qt._rotation11=Dt,Qt._rotation12=Kt,Qt._rotation20=Lt,Qt._rotation21=Vt,Qt._rotation22=Ht,jt=$t._rotation00*qt._positionX+$t._rotation01*qt._positionY+$t._rotation02*qt._positionZ,Tt=$t._rotation10*qt._positionX+$t._rotation11*qt._positionY+$t._rotation12*qt._positionZ,Rt=$t._rotation20*qt._positionX+$t._rotation21*qt._positionY+$t._rotation22*qt._positionZ,Qt._positionX=jt,Qt._positionY=Tt,Qt._positionZ=Rt,Qt._positionX+=$t._positionX,Qt._positionY+=$t._positionY,Qt._positionZ+=$t._positionZ,bt._geom._computeAabb(bt._aabb,bt._ptransform),Ft=bt._aabb._minX,Ot=bt._aabb._minY,Pt=bt._aabb._minZ,Jt=bt._aabb._maxX,Et=bt._aabb._maxY,Ut=bt._aabb._maxZ,bt._geom._computeAabb(bt._aabb,bt._transform),bt._aabb._minX=Ft<bt._aabb._minX?Ft:bt._aabb._minX,bt._aabb._minY=Ot<bt._aabb._minY?Ot:bt._aabb._minY,bt._aabb._minZ=Pt<bt._aabb._minZ?Pt:bt._aabb._minZ,bt._aabb._maxX=Jt>bt._aabb._maxX?Jt:bt._aabb._maxX,bt._aabb._maxY=Et>bt._aabb._maxY?Et:bt._aabb._maxY,bt._aabb._maxZ=Ut>bt._aabb._maxZ?Ut:bt._aabb._maxZ,null!=bt._proxy){var te,ee,ae;te=bt._transform._positionX-bt._ptransform._positionX,ee=bt._transform._positionY-bt._ptransform._positionY,ae=bt._transform._positionZ-bt._ptransform._positionZ;var ie=bt.displacement;ie.x=te,ie.y=ee,ie.z=ae,bt._rigidBody._world._broadPhase.moveProxy(bt._proxy,bt._aabb,bt.displacement)}bt=Bt}}},__class__:hn};var cn=function(){this.dt=0,this.invDt=0,this.dtRatio=1};(i["oimo.dynamics.TimeStep"]=cn).__name__=!0,cn.prototype={dt:null,invDt:null,dtRatio:null,__class__:cn};var gn=function(t,e){switch(null==t&&(t=2),t){case 1:this._broadPhase=new wi;break;case 2:this._broadPhase=new Ai}this._contactManager=new _n(this._broadPhase),null==e&&(e=new Jt(0,-9.80665,0)),this._gravity=new Jt(e.x,e.y,e.z),this._rigidBodyList=null,this._rigidBodyListLast=null,this._jointList=null,this._jointListLast=null,this._numRigidBodies=0,this._numShapes=0,this._numJoints=0,this._numIslands=0,this._numVelocityIterations=10,this._numPositionIterations=5,this._rayCastWrapper=new un,this._convexCastWrapper=new fn,this._aabbTestWrapper=new dn,this._island=new hn;var a=new Array(wn.islandInitialConstraintArraySize);this._solversInIslands=a;var i=new Array(wn.islandInitialRigidBodyArraySize);this._rigidBodyStack=i,this._timeStep=new cn,this._pool=new rn,this._shapeIdCount=0};(i["oimo.dynamics.World"]=gn).__name__=!0,gn.prototype={_rigidBodyList:null,_rigidBodyListLast:null,_jointList:null,_jointListLast:null,_broadPhase:null,_contactManager:null,_numRigidBodies:null,_numJoints:null,_numShapes:null,_numIslands:null,_numVelocityIterations:null,_numPositionIterations:null,_gravity:null,_timeStep:null,_island:null,_rigidBodyStack:null,_solversInIslands:null,_numSolversInIslands:null,_rayCastWrapper:null,_convexCastWrapper:null,_aabbTestWrapper:null,_pool:null,_shapeIdCount:null,_updateContacts:function(){var t=go.realTime();this._contactManager._updateContacts();var e=go.realTime();In.broadPhaseCollisionTime=1e3*(e-t);for(var a=go.realTime(),i=this._contactManager._contactList;null!=i;){var n=i._next;i._shouldBeSkipped||i._updateManifold(),i=n}var s=go.realTime();In.narrowPhaseCollisionTime=1e3*(s-a)},_solveIslands:function(){var t=go.realTime();if(wn.disableSleeping)for(var e=this._rigidBodyList;null!=e;){var a=e._next;e._sleeping=!1,e._sleepTime=0,e=a}if(this._rigidBodyStack.length<this._numRigidBodies){for(var i=this._rigidBodyStack.length<<1;i<this._numRigidBodies;)i<<=1;var n=new Array(i);this._rigidBodyStack=n}this._numIslands=0;var s=this._island,r=this._gravity;s.gravityX=r.x,s.gravityY=r.y,s.gravityZ=r.z;var o=this._rigidBodyList;for(this._numSolversInIslands=0;null!=o;){for(var l=o._next;!o._addedToIsland&&!o._sleeping&&1!=o._type;){if(0==o._numContactLinks&&0==o._numJointLinks){this._island._stepSingleRigidBody(this._timeStep,o),this._numIslands++;break}this.buildIsland(o),this._island._step(this._timeStep,this._numVelocityIterations,this._numPositionIterations),this._island._clear(),this._numIslands++;break}o=l}for(this._contactManager._postSolve(),o=this._rigidBodyList;null!=o;){var _=o._next;o._addedToIsland=!1,o=_}for(o=this._rigidBodyList;null!=o;){var h=o._next;o._forceX=0,o._forceY=0,o._forceZ=0,o._torqueX=0,o._torqueY=0,o._torqueZ=0,o=h}for(;0<this._numSolversInIslands;)this._solversInIslands[--this._numSolversInIslands]._addedToIsland=!1,this._solversInIslands[this._numSolversInIslands]=null;var c=go.realTime();In.dynamicsTime=1e3*(c-t)},buildIsland:function(t){var e=1;for(this._island._addRigidBody(t),this._rigidBodyStack[0]=t;0<e;){var a=this._rigidBodyStack[--e];if(this._rigidBodyStack[e]=null,1!=a._type){for(var i=a._contactLinkList;null!=i;){var n=i._next,s=i._contact._contactConstraint,r=i._contact._contactConstraint._solver;if(s.isTouching()&&!r._addedToIsland){if(this._solversInIslands.length==this._numSolversInIslands){for(var o=this._numSolversInIslands<<1,l=new Array(o),_=0,h=this._numSolversInIslands;_<h;){var c=_++;l[c]=this._solversInIslands[c],this._solversInIslands[c]=null}this._solversInIslands=l}this._solversInIslands[this._numSolversInIslands++]=r,this._island._addConstraintSolver(r,s._positionCorrectionAlgorithm);var g=i._other;g._addedToIsland||(this._island._addRigidBody(g),this._rigidBodyStack[e++]=g)}i=n}for(var u=a._jointLinkList;null!=u;){var f=u._next,d=u._joint,b=d._solver;if(!b._addedToIsland){if(this._solversInIslands.length==this._numSolversInIslands){for(var p=this._numSolversInIslands<<1,m=new Array(p),I=0,v=this._numSolversInIslands;I<v;){var M=I++;m[M]=this._solversInIslands[M],this._solversInIslands[M]=null}this._solversInIslands=m}this._solversInIslands[this._numSolversInIslands++]=b,this._island._addConstraintSolver(b,d._positionCorrectionAlgorithm);var C=u._other;C._addedToIsland||(this._island._addRigidBody(C),this._rigidBodyStack[e++]=C)}u=f}}}},step:function(t){0<this._timeStep.dt&&(this._timeStep.dtRatio=t/this._timeStep.dt),this._timeStep.dt=t,this._timeStep.invDt=1/t;var e=go.realTime();this._updateContacts(),this._solveIslands();var a=go.realTime();In.totalTime=1e3*(a-e)},addRigidBody:function(t){if(null!=t._world)throw new Error("A rigid body cannot belong to multiple worlds.");null==this._rigidBodyList?this._rigidBodyList=t:(this._rigidBodyListLast._next=t)._prev=this._rigidBodyListLast,(this._rigidBodyListLast=t)._world=this;for(var e=t._shapeList;null!=e;){var a=e._next;e._proxy=this._broadPhase.createProxy(e,e._aabb),e._id=this._shapeIdCount++,this._numShapes++,e=a}this._numRigidBodies++},removeRigidBody:function(t){if(t._world!=this)throw new Error("The rigid body doesn't belong to the world.");var e=t._prev,a=t._next;null!=e&&(e._next=a),null!=a&&(a._prev=e),t==this._rigidBodyList&&(this._rigidBodyList=this._rigidBodyList._next),t==this._rigidBodyListLast&&(this._rigidBodyListLast=this._rigidBodyListLast._prev),t._next=null,t._prev=null,t._world=null;for(var i=t._shapeList;null!=i;){var n=i._next;this._broadPhase.destroyProxy(i._proxy),i._proxy=null,i._id=-1;for(var s=i._rigidBody._contactLinkList;null!=s;){var r=s._next,o=s._contact;if(o._s1==i||o._s2==i){var l=s._other;l._sleeping=!1,l._sleepTime=0;var _=this._contactManager,h=o._prev,c=o._next;if(null!=h&&(h._next=c),null!=c&&(c._prev=h),o==_._contactList&&(_._contactList=_._contactList._next),o==_._contactListLast&&(_._contactListLast=_._contactListLast._prev),o._next=null,o._prev=null,o._touching){var g=o._s1._contactCallback,u=o._s2._contactCallback;g==u&&(u=null),null!=g&&g.endContact(o),null!=u&&u.endContact(o)}var f=o._link1._prev,d=o._link1._next;null!=f&&(f._next=d),null!=d&&(d._prev=f),o._link1==o._b1._contactLinkList&&(o._b1._contactLinkList=o._b1._contactLinkList._next),o._link1==o._b1._contactLinkListLast&&(o._b1._contactLinkListLast=o._b1._contactLinkListLast._prev),o._link1._next=null,o._link1._prev=null;var b=o._link2._prev,p=o._link2._next;null!=b&&(b._next=p),null!=p&&(p._prev=b),o._link2==o._b2._contactLinkList&&(o._b2._contactLinkList=o._b2._contactLinkList._next),o._link2==o._b2._contactLinkListLast&&(o._b2._contactLinkListLast=o._b2._contactLinkListLast._prev),o._link2._next=null,o._link2._prev=null,o._b1._numContactLinks--,o._b2._numContactLinks--,o._link1._other=null,o._link2._other=null,o._link1._contact=null,o._link2._contact=null,o._s1=null,o._s2=null,o._b1=null,o._b2=null,o._touching=!1,o._cachedDetectorData._clear(),o._manifold._clear(),o._detector=null;var m=o._contactConstraint;m._s1=null,m._s2=null,m._b1=null,m._b2=null,m._tf1=null,m._tf2=null,o._next=_._contactPool,_._contactPool=o,_._numContacts--}s=r}this._numShapes--,i=n}this._numRigidBodies--},removeJoint:function(t){if(t._world!=this)throw new Error("The joint doesn't belong to the world.");var e=t._prev,a=t._next;null!=e&&(e._next=a),null!=a&&(a._prev=e),t==this._jointList&&(this._jointList=this._jointList._next),t==this._jointListLast&&(this._jointListLast=this._jointListLast._prev),t._next=null,t._prev=null,t._world=null;var i=t._link1._prev,n=t._link1._next;null!=i&&(i._next=n),null!=n&&(n._prev=i),t._link1==t._b1._jointLinkList&&(t._b1._jointLinkList=t._b1._jointLinkList._next),t._link1==t._b1._jointLinkListLast&&(t._b1._jointLinkListLast=t._b1._jointLinkListLast._prev),t._link1._next=null,t._link1._prev=null;var s=t._link2._prev,r=t._link2._next;null!=s&&(s._next=r),null!=r&&(r._prev=s),t._link2==t._b2._jointLinkList&&(t._b2._jointLinkList=t._b2._jointLinkList._next),t._link2==t._b2._jointLinkListLast&&(t._b2._jointLinkListLast=t._b2._jointLinkListLast._prev),t._link2._next=null,t._link2._prev=null,t._link1._other=null,t._link2._other=null,t._b1._numJointLinks--,t._b2._numJointLinks--;var o=t._b1;o._sleeping=!1,o._sleepTime=0;var l=t._b2;l._sleeping=!1,l._sleepTime=0,this._numJoints--},__class__:gn};var un=function(){Mi.call(this),this.rayCastHit=new Yi,this.begin=new Jt,this.end=new Jt,this.callback=null};(i["oimo.dynamics._World.RayCastWrapper"]=un).__name__=!0,un.__super__=Mi,un.prototype=s(Mi.prototype,{callback:null,begin:null,end:null,rayCastHit:null,__class__:un});var fn=function(){Mi.call(this),this.rayCastHit=new Yi,this.begin=new tn,this.translation=new Jt,this.zero=new Jt,this.callback=null,this.convex=null};(i["oimo.dynamics._World.ConvexCastWrapper"]=fn).__name__=!0,fn.__super__=Mi,fn.prototype=s(Mi.prototype,{callback:null,begin:null,translation:null,convex:null,rayCastHit:null,zero:null,__class__:fn});var dn=function(){Mi.call(this),this._aabb=new Ni,this._callback=null};(i["oimo.dynamics._World.AabbTestWrapper"]=dn).__name__=!0,dn.__super__=Mi,dn.prototype=s(Mi.prototype,{_callback:null,_aabb:null,__class__:dn});var bn=function(){};(i["oimo.dynamics.callback.AabbTestCallback"]=bn).__name__=!0;var pn=function(){};(i["oimo.dynamics.callback.ContactCallback"]=pn).__name__=!0,pn.prototype={beginContact:function(t){},preSolve:function(t){},postSolve:function(t){},endContact:function(t){},__class__:pn};var mn=function(){};(i["oimo.dynamics.callback.RayCastCallback"]=mn).__name__=!0;var In=function(){};(i["oimo.dynamics.common.Performance"]=In).__name__=!0;var vn=function(){this._b1=null,this._b2=null,this._addedToIsland=!1};(i["oimo.dynamics.constraint.ConstraintSolver"]=vn).__name__=!0,vn.prototype={_b1:null,_b2:null,_addedToIsland:null,preSolveVelocity:function(t){},warmStart:function(t){},solveVelocity:function(){},postSolveVelocity:function(t){},preSolvePosition:function(t){},solvePositionSplitImpulse:function(){},solvePositionNgs:function(t){},postSolve:function(){},__class__:vn};var Mn=function(){};(i["oimo.dynamics.constraint.PositionCorrectionAlgorithm"]=Mn).__name__=!0;var Cn=function(t){this._solver=new Fn(this),this._manifold=t};(i["oimo.dynamics.constraint.contact.ContactConstraint"]=Cn).__name__=!0,Cn.prototype={_positionCorrectionAlgorithm:null,_manifold:null,_s1:null,_s2:null,_tf1:null,_tf2:null,_b1:null,_b2:null,_solver:null,_getVelocitySolverInfo:function(t,e){var a,i,n,s,r,o,l,_,h;e.b1=this._b1,e.b2=this._b2,a=this._manifold._normalX,i=this._manifold._normalY,n=this._manifold._normalZ,s=this._manifold._tangentX,r=this._manifold._tangentY,o=this._manifold._tangentZ,l=this._manifold._binormalX,_=this._manifold._binormalY,h=this._manifold._binormalZ;var c=Math.sqrt(this._s1._friction*this._s2._friction),g=Math.sqrt(this._s1._restitution*this._s2._restitution),u=this._manifold._numPoints;e.numRows=0,this._tf1._positionX,this._tf2._positionX,this._tf1._positionY,this._tf2._positionY,this._tf1._positionZ,this._tf2._positionZ;for(var f=0,d=u;f<d;){var b=f++,p=this._manifold._points[b];if(p._depth<0){p._disabled=!0;var m=p._impulse;m.impulseN=0,m.impulseT=0,m.impulseB=0,m.impulseP=0,m.impulseLX=0,m.impulseLY=0,m.impulseLZ=0}else{p._disabled=!1;var I=e.rows[e.numRows++];I.friction=c,I.cfm=0;var v=I.jacobianN;v.lin1X=a,v.lin1Y=i,v.lin1Z=n,v.lin2X=a,v.lin2Y=i,v.lin2Z=n,v.ang1X=p._relPos1Y*n-p._relPos1Z*i,v.ang1Y=p._relPos1Z*a-p._relPos1X*n,v.ang1Z=p._relPos1X*i-p._relPos1Y*a,v.ang2X=p._relPos2Y*n-p._relPos2Z*i,v.ang2Y=p._relPos2Z*a-p._relPos2X*n,v.ang2Z=p._relPos2X*i-p._relPos2Y*a,(v=I.jacobianT).lin1X=s,v.lin1Y=r,v.lin1Z=o,v.lin2X=s,v.lin2Y=r,v.lin2Z=o,v.ang1X=p._relPos1Y*o-p._relPos1Z*r,v.ang1Y=p._relPos1Z*s-p._relPos1X*o,v.ang1Z=p._relPos1X*r-p._relPos1Y*s,v.ang2X=p._relPos2Y*o-p._relPos2Z*r,v.ang2Y=p._relPos2Z*s-p._relPos2X*o,v.ang2Z=p._relPos2X*r-p._relPos2Y*s,(v=I.jacobianB).lin1X=l,v.lin1Y=_,v.lin1Z=h,v.lin2X=l,v.lin2Y=_,v.lin2Z=h,v.ang1X=p._relPos1Y*h-p._relPos1Z*_,v.ang1Y=p._relPos1Z*l-p._relPos1X*h,v.ang1Z=p._relPos1X*_-p._relPos1Y*l,v.ang2X=p._relPos2Y*h-p._relPos2Z*_,v.ang2Y=p._relPos2Z*l-p._relPos2X*h,v.ang2Z=p._relPos2X*_-p._relPos2Y*l;var M=(v=I.jacobianN).lin1X*this._b1._velX+v.lin1Y*this._b1._velY+v.lin1Z*this._b1._velZ+(v.ang1X*this._b1._angVelX+v.ang1Y*this._b1._angVelY+v.ang1Z*this._b1._angVelZ)-(v.lin2X*this._b2._velX+v.lin2Y*this._b2._velY+v.lin2Z*this._b2._velZ+(v.ang2X*this._b2._angVelX+v.ang2Y*this._b2._angVelY+v.ang2Z*this._b2._angVelZ));if(M<-wn.contactEnableBounceThreshold&&!p._warmStarted?I.rhs=-M*g:I.rhs=0,this._positionCorrectionAlgorithm==Mn.BAUMGARTE&&p._depth>wn.linearSlop){var C=(p._depth-wn.linearSlop)*wn.velocityBaumgarte*t.invDt;I.rhs<C&&(I.rhs=C)}if(!p._warmStarted){var y=p._impulse;y.impulseN=0,y.impulseT=0,y.impulseB=0,y.impulseP=0,y.impulseLX=0,y.impulseLY=0,y.impulseLZ=0}I.impulse=p._impulse}}},_getPositionSolverInfo:function(t){var e,a,i;t.b1=this._b1,t.b2=this._b2,e=this._manifold._normalX,a=this._manifold._normalY,i=this._manifold._normalZ;for(var n=this._manifold._numPoints,s=t.numRows=0,r=n;s<r;){var o=s++,l=this._manifold._points[o];if(!l._disabled){var _=t.rows[t.numRows++],h=_.jacobianN;h.lin1X=e,h.lin1Y=a,h.lin1Z=i,h.lin2X=e,h.lin2Y=a,h.lin2Z=i,h.ang1X=l._relPos1Y*i-l._relPos1Z*a,h.ang1Y=l._relPos1Z*e-l._relPos1X*i,h.ang1Z=l._relPos1X*a-l._relPos1Y*e,h.ang2X=l._relPos2Y*i-l._relPos2Z*a,h.ang2Y=l._relPos2Z*e-l._relPos2X*i,h.ang2Z=l._relPos2X*a-l._relPos2Y*e,_.rhs=l._depth-wn.linearSlop,_.rhs<0&&(_.rhs=0),_.impulse=l._impulse}}},_syncManifold:function(){this._manifold._updateDepthsAndPositions(this._tf1,this._tf2)},isTouching:function(){for(var t=0,e=this._manifold._numPoints;t<e;){var a=t++;if(0<=this._manifold._points[a]._depth)return!0}return!1},__class__:Cn};var yn=function(){this.impulseN=0,this.impulseT=0,this.impulseB=0,this.impulseP=0,this.impulseLX=0,this.impulseLY=0,this.impulseLZ=0};(i["oimo.dynamics.constraint.contact.ContactImpulse"]=yn).__name__=!0,yn.prototype={impulseN:null,impulseT:null,impulseB:null,impulseP:null,impulseLX:null,impulseLY:null,impulseLZ:null,copyFrom:function(t){this.impulseN=t.impulseN,this.impulseT=t.impulseT,this.impulseB=t.impulseB,this.impulseLX=t.impulseLX,this.impulseLY=t.impulseLY,this.impulseLZ=t.impulseLZ},__class__:yn};var An=function(){this._normalX=0,this._normalY=0,this._normalZ=0,this._tangentX=0,this._tangentY=0,this._tangentZ=0,this._binormalX=0,this._binormalY=0,this._binormalZ=0,this._numPoints=0;var t=new Array(wn.maxManifoldPoints);this._points=t;for(var e=0,a=wn.maxManifoldPoints;e<a;){var i=e++;this._points[i]=new xn}};(i["oimo.dynamics.constraint.contact.Manifold"]=An).__name__=!0,An.prototype={_normalX:null,_normalY:null,_normalZ:null,_tangentX:null,_tangentY:null,_tangentZ:null,_binormalX:null,_binormalY:null,_binormalZ:null,_numPoints:null,_points:null,_clear:function(){for(var t=0,e=this._numPoints;t<e;){var a=t++,i=this._points[a];i._localPos1X=0,i._localPos1Y=0,i._localPos1Z=0,i._localPos2X=0,i._localPos2Y=0,i._localPos2Z=0,i._relPos1X=0,i._relPos1Y=0,i._relPos1Z=0,i._relPos2X=0,i._relPos2Y=0,i._relPos2Z=0,i._pos1X=0,i._pos1Y=0,i._pos1Z=0,i._pos2X=0,i._pos2Y=0,i._pos2Z=0,i._depth=0;var n=i._impulse;n.impulseN=0,n.impulseT=0,n.impulseB=0,n.impulseP=0,n.impulseLX=0,n.impulseLY=0,n.impulseLZ=0,i._warmStarted=!1,i._disabled=!1,i._id=-1}this._numPoints=0},_buildBasis:function(t){var e=t;this._normalX=e.x,this._normalY=e.y,this._normalZ=e.z;var a,i,n,s,r,o,l=t.x,_=t.y,h=t.z,c=l*l,g=_*_,u=h*h;if(c<g)if(c<u){var f=1/Math.sqrt(g+u);a=0,s=_*(n=_*f)-h*(i=-h*f),r=-l*n,o=l*i}else{var d=1/Math.sqrt(c+g);n=0,s=-h*(i=l*d),r=h*(a=-_*d),o=l*i-_*a}else if(g<u){var b=1/Math.sqrt(c+u);i=0,s=_*(n=-l*b),r=h*(a=h*b)-l*n,o=-_*a}else{var p=1/Math.sqrt(c+g);n=0,s=-h*(i=l*p),r=h*(a=-_*p),o=l*i-_*a}this._tangentX=a,this._tangentY=i,this._tangentZ=n,this._binormalX=s,this._binormalY=r,this._binormalZ=o},_updateDepthsAndPositions:function(t,e){for(var a=0,i=this._numPoints;a<i;){var n,s,r,o,l,_,h,c,g,u=a++,f=this._points[u];n=t._rotation00*f._localPos1X+t._rotation01*f._localPos1Y+t._rotation02*f._localPos1Z,s=t._rotation10*f._localPos1X+t._rotation11*f._localPos1Y+t._rotation12*f._localPos1Z,r=t._rotation20*f._localPos1X+t._rotation21*f._localPos1Y+t._rotation22*f._localPos1Z,f._relPos1X=n,f._relPos1Y=s,f._relPos1Z=r,o=e._rotation00*f._localPos2X+e._rotation01*f._localPos2Y+e._rotation02*f._localPos2Z,l=e._rotation10*f._localPos2X+e._rotation11*f._localPos2Y+e._rotation12*f._localPos2Z,_=e._rotation20*f._localPos2X+e._rotation21*f._localPos2Y+e._rotation22*f._localPos2Z,f._relPos2X=o,f._relPos2Y=l,f._relPos2Z=_,f._pos1X=f._relPos1X+t._positionX,f._pos1Y=f._relPos1Y+t._positionY,f._pos1Z=f._relPos1Z+t._positionZ,f._pos2X=f._relPos2X+e._positionX,f._pos2Y=f._relPos2Y+e._positionY,f._pos2Z=f._relPos2Z+e._positionZ,h=f._pos1X-f._pos2X,c=f._pos1Y-f._pos2Y,g=f._pos1Z-f._pos2Z;var d=h*this._normalX+c*this._normalY+g*this._normalZ;f._depth=-d}},__class__:An};var xn=function(){this._localPos1X=0,this._localPos1Y=0,this._localPos1Z=0,this._localPos2X=0,this._localPos2Y=0,this._localPos2Z=0,this._relPos1X=0,this._relPos1Y=0,this._relPos1Z=0,this._relPos2X=0,this._relPos2Y=0,this._relPos2Z=0,this._pos1X=0,this._pos1Y=0,this._pos1Z=0,this._pos2X=0,this._pos2Y=0,this._pos2Z=0,this._depth=0,this._impulse=new yn,this._warmStarted=!1,this._disabled=!1,this._id=-1};(i["oimo.dynamics.constraint.contact.ManifoldPoint"]=xn).__name__=!0,xn.prototype={_localPos1X:null,_localPos1Y:null,_localPos1Z:null,_localPos2X:null,_localPos2Y:null,_localPos2Z:null,_relPos1X:null,_relPos1Y:null,_relPos1Z:null,_relPos2X:null,_relPos2Y:null,_relPos2Z:null,_pos1X:null,_pos1Y:null,_pos1Z:null,_pos2X:null,_pos2Y:null,_pos2Z:null,_depth:null,_impulse:null,_warmStarted:null,_disabled:null,_id:null,__class__:xn};var Zn=function(t){this._manifold=t,this.numOldPoints=0;var e=new Array(wn.maxManifoldPoints);this.oldPoints=e;for(var a=0,i=wn.maxManifoldPoints;a<i;){var n=a++;this.oldPoints[n]=new xn}};(i["oimo.dynamics.constraint.contact.ManifoldUpdater"]=Zn).__name__=!0,Zn.prototype={_manifold:null,numOldPoints:null,oldPoints:null,removeOutdatedPoints:function(){for(var t=this._manifold._numPoints;0<=--t;){var e,a,i,n=this._manifold._points[t];e=n._pos1X-n._pos2X,a=n._pos1Y-n._pos2Y,i=n._pos1Z-n._pos2Z;var s=this._manifold._normalX*e+this._manifold._normalY*a+this._manifold._normalZ*i;s>wn.contactPersistenceThreshold?this.removeManifoldPoint(t):(e+=this._manifold._normalX*-s)*e+(a+=this._manifold._normalY*-s)*a+(i+=this._manifold._normalZ*-s)*i>wn.contactPersistenceThreshold*wn.contactPersistenceThreshold&&this.removeManifoldPoint(t)}},removeManifoldPoint:function(t){var e=--this._manifold._numPoints;if(t!=e){var a=this._manifold._points[t];this._manifold._points[t]=this._manifold._points[e],this._manifold._points[e]=a}var i=this._manifold._points[e];i._localPos1X=0,i._localPos1Y=0,i._localPos1Z=0,i._localPos2X=0,i._localPos2Y=0,i._localPos2Z=0,i._relPos1X=0,i._relPos1Y=0,i._relPos1Z=0,i._relPos2X=0,i._relPos2Y=0,i._relPos2Z=0,i._pos1X=0,i._pos1Y=0,i._pos1Z=0,i._pos2X=0,i._pos2Y=0,i._pos2Z=0,i._depth=0;var n=i._impulse;n.impulseN=0,n.impulseT=0,n.impulseB=0,n.impulseP=0,n.impulseLX=0,n.impulseLY=0,n.impulseLZ=0,i._warmStarted=!1,i._disabled=!1,i._id=-1},addManifoldPoint:function(t,e,a){var i=this._manifold._numPoints;if(i==wn.maxManifoldPoints){var n=this.computeTargetIndex(t,e,a),s=this._manifold._points[n],r=t.position1;s._pos1X=r.x,s._pos1Y=r.y,s._pos1Z=r.z;var o,l,_,h,c,g,u=t.position2;s._pos2X=u.x,s._pos2Y=u.y,s._pos2Z=u.z,s._relPos1X=s._pos1X-e._positionX,s._relPos1Y=s._pos1Y-e._positionY,s._relPos1Z=s._pos1Z-e._positionZ,s._relPos2X=s._pos2X-a._positionX,s._relPos2Y=s._pos2Y-a._positionY,s._relPos2Z=s._pos2Z-a._positionZ,o=e._rotation00*s._relPos1X+e._rotation10*s._relPos1Y+e._rotation20*s._relPos1Z,l=e._rotation01*s._relPos1X+e._rotation11*s._relPos1Y+e._rotation21*s._relPos1Z,_=e._rotation02*s._relPos1X+e._rotation12*s._relPos1Y+e._rotation22*s._relPos1Z,s._localPos1X=o,s._localPos1Y=l,s._localPos1Z=_,h=a._rotation00*s._relPos2X+a._rotation10*s._relPos2Y+a._rotation20*s._relPos2Z,c=a._rotation01*s._relPos2X+a._rotation11*s._relPos2Y+a._rotation21*s._relPos2Z,g=a._rotation02*s._relPos2X+a._rotation12*s._relPos2Y+a._rotation22*s._relPos2Z,s._localPos2X=h,s._localPos2Y=c,s._localPos2Z=g,s._depth=t.depth;var f=s._impulse;return f.impulseN=0,f.impulseT=0,f.impulseB=0,f.impulseP=0,f.impulseLX=0,f.impulseLY=0,f.impulseLZ=0,s._id=t.id,s._warmStarted=!1,void(s._disabled=!1)}var d=this._manifold._points[i],b=t.position1;d._pos1X=b.x,d._pos1Y=b.y,d._pos1Z=b.z;var p,m,I,v,M,C,y=t.position2;d._pos2X=y.x,d._pos2Y=y.y,d._pos2Z=y.z,d._relPos1X=d._pos1X-e._positionX,d._relPos1Y=d._pos1Y-e._positionY,d._relPos1Z=d._pos1Z-e._positionZ,d._relPos2X=d._pos2X-a._positionX,d._relPos2Y=d._pos2Y-a._positionY,d._relPos2Z=d._pos2Z-a._positionZ,p=e._rotation00*d._relPos1X+e._rotation10*d._relPos1Y+e._rotation20*d._relPos1Z,m=e._rotation01*d._relPos1X+e._rotation11*d._relPos1Y+e._rotation21*d._relPos1Z,I=e._rotation02*d._relPos1X+e._rotation12*d._relPos1Y+e._rotation22*d._relPos1Z,d._localPos1X=p,d._localPos1Y=m,d._localPos1Z=I,v=a._rotation00*d._relPos2X+a._rotation10*d._relPos2Y+a._rotation20*d._relPos2Z,M=a._rotation01*d._relPos2X+a._rotation11*d._relPos2Y+a._rotation21*d._relPos2Z,C=a._rotation02*d._relPos2X+a._rotation12*d._relPos2Y+a._rotation22*d._relPos2Z,d._localPos2X=v,d._localPos2Y=M,d._localPos2Z=C,d._depth=t.depth;var w=d._impulse;w.impulseN=0,w.impulseT=0,w.impulseB=0,w.impulseP=0,w.impulseLX=0,w.impulseLY=0,w.impulseLZ=0,d._id=t.id,d._warmStarted=!1,d._disabled=!1,this._manifold._numPoints++},computeTargetIndex:function(t,e,a){var i,n,s,r=this._manifold._points[0],o=this._manifold._points[1],l=this._manifold._points[2],_=this._manifold._points[3],h=r._depth,c=0;o._depth>h&&(h=o._depth,c=1),l._depth>h&&(h=l._depth,c=2),_._depth>h&&(h=_._depth,c=3);var g=t.position1;i=g.x,n=g.y,s=g.z,i-=e._positionX,n-=e._positionY,s-=e._positionZ;var u,f,d,b,p,m,I,v,M,C,y,w,A,x,Z,z,B,N,G,k,S,W,X,Y,D,K,L,V,H,j,T,R,F,O,P,J,E,U,Q,q,$,tt,et,at,it,nt,st,rt,ot,lt,_t,ht,ct,gt,ut,ft,dt,bt,pt,mt,It,vt,Mt,Ct,yt,wt,At,xt,Zt,zt,Bt,Nt,Gt,kt,St,Wt,Xt,Yt,Dt,Kt,Lt,Vt,Ht,jt,Tt,Rt,Ft,Ot,Pt,Jt,Et,Ut,Qt,qt,$t,te,ee,ae,ie,ne,se,re,oe,le,_e,he,ce,ge,ue=o._relPos1X,fe=o._relPos1Y,de=o._relPos1Z,be=l._relPos1X,pe=l._relPos1Y,me=l._relPos1Z,Ie=_._relPos1X,ve=_._relPos1Y,Me=_._relPos1Z,Ce=(G=(f=pe-fe)*(m=s-Me)-(d=me-de)*(p=n-ve))*G+(k=d*(b=i-Ie)-(u=be-ue)*m)*k+(S=u*p-f*b)*S,ye=(W=(v=ve-fe)*(w=s-me)-(M=Me-de)*(y=n-pe))*W+(X=M*(C=i-be)-(I=Ie-ue)*w)*X+(Y=I*y-v*C)*Y,we=(D=(x=n-fe)*(N=Me-me)-(Z=s-de)*(B=ve-pe))*D+(K=Z*(z=Ie-be)-(A=i-ue)*N)*K+(L=A*B-x*z)*L,Ae=ye<Ce?we<Ce?Ce:we:we<ye?ye:we,xe=r._relPos1X,Ze=r._relPos1Y,ze=r._relPos1Z,Be=l._relPos1X,Ne=l._relPos1Y,Ge=l._relPos1Z,ke=_._relPos1X,Se=_._relPos1Y,We=_._relPos1Z,Xe=(nt=(H=Ne-Ze)*(F=s-We)-(j=Ge-ze)*(R=n-Se))*nt+(st=j*(T=i-ke)-(V=Be-xe)*F)*st+(rt=V*R-H*T)*rt,Ye=(ot=(P=Se-Ze)*(Q=s-Ge)-(J=We-ze)*(U=n-Ne))*ot+(lt=J*(E=i-Be)-(O=ke-xe)*Q)*lt+(_t=O*U-P*E)*_t,De=(ht=($=n-Ze)*(it=We-Ge)-(tt=s-ze)*(at=Se-Ne))*ht+(ct=tt*(et=ke-Be)-(q=i-xe)*it)*ct+(gt=q*at-$*et)*gt,Ke=Ye<Xe?De<Xe?Xe:De:De<Ye?Ye:De,Le=r._relPos1X,Ve=r._relPos1Y,He=r._relPos1Z,je=o._relPos1X,Te=o._relPos1Y,Re=o._relPos1Z,Fe=_._relPos1X,Oe=_._relPos1Y,Pe=_._relPos1Z,Je=(Gt=(ft=Te-Ve)*(mt=s-Pe)-(dt=Re-He)*(pt=n-Oe))*Gt+(kt=dt*(bt=i-Fe)-(ut=je-Le)*mt)*kt+(St=ut*pt-ft*bt)*St,Ee=(Wt=(vt=Oe-Ve)*(wt=s-Re)-(Mt=Pe-He)*(yt=n-Te))*Wt+(Xt=Mt*(Ct=i-je)-(It=Fe-Le)*wt)*Xt+(Yt=It*yt-vt*Ct)*Yt,Ue=(Dt=(xt=n-Ve)*(Nt=Pe-Re)-(Zt=s-He)*(Bt=Oe-Te))*Dt+(Kt=Zt*(zt=Fe-je)-(At=i-Le)*Nt)*Kt+(Lt=At*Bt-xt*zt)*Lt,Qe=Ee<Je?Ue<Je?Je:Ue:Ue<Ee?Ee:Ue,qe=r._relPos1X,$e=r._relPos1Y,ta=r._relPos1Z,ea=o._relPos1X,aa=o._relPos1Y,ia=o._relPos1Z,na=l._relPos1X,sa=l._relPos1Y,ra=l._relPos1Z,oa=(ne=(Ht=aa-$e)*(Ft=s-ra)-(jt=ia-ta)*(Rt=n-sa))*ne+(se=jt*(Tt=i-na)-(Vt=ea-qe)*Ft)*se+(re=Vt*Rt-Ht*Tt)*re,la=(oe=(Pt=sa-$e)*(Qt=s-ia)-(Jt=ra-ta)*(Ut=n-aa))*oe+(le=Jt*(Et=i-ea)-(Ot=na-qe)*Qt)*le+(_e=Ot*Ut-Pt*Et)*_e,_a=(he=($t=n-$e)*(ie=ra-ia)-(te=s-ta)*(ae=sa-aa))*he+(ce=te*(ee=na-ea)-(qt=i-qe)*ie)*ce+(ge=qt*ae-$t*ee)*ge,ha=la<oa?_a<oa?oa:_a:_a<la?la:_a,ca=Ae,ga=0;return(ca<Ke&&1!=c||0==c)&&(ca=Ke,ga=1),ca<Qe&&2!=c&&(ca=Qe,ga=2),ca<ha&&3!=c&&(ca=ha,ga=3),ga},findNearestContactPointIndex:function(t,e,a){for(var i=wn.contactPersistenceThreshold*wn.contactPersistenceThreshold,n=-1,s=0,r=this._manifold._numPoints;s<r;){var o,l,_,h,c,g,u=s++,f=this._manifold._points[u],d=t.position1;o=d.x,l=d.y,_=d.z;var b,p,m,I,v,M,C=t.position2;h=C.x,c=C.y,g=C.z,o-=e._positionX,l-=e._positionY,_-=e._positionZ,h-=a._positionX,c-=a._positionY,g-=a._positionZ;var y=(b=f._relPos1X-o)*b+(p=f._relPos1Y-l)*p+(m=f._relPos1Z-_)*m,w=(I=f._relPos2X-h)*I+(v=f._relPos2Y-c)*v+(M=f._relPos2Z-g)*M,A=y<w?y:w;A<i&&(i=A,n=u)}return n},totalUpdate:function(t,e,a){this.numOldPoints=this._manifold._numPoints;for(var i=0,n=this.numOldPoints;i<n;){var s=i++,r=this.oldPoints[s],o=this._manifold._points[s];r._localPos1X=o._localPos1X,r._localPos1Y=o._localPos1Y,r._localPos1Z=o._localPos1Z,r._localPos2X=o._localPos2X,r._localPos2Y=o._localPos2Y,r._localPos2Z=o._localPos2Z,r._relPos1X=o._relPos1X,r._relPos1Y=o._relPos1Y,r._relPos1Z=o._relPos1Z,r._relPos2X=o._relPos2X,r._relPos2Y=o._relPos2Y,r._relPos2Z=o._relPos2Z,r._pos1X=o._pos1X,r._pos1Y=o._pos1Y,r._pos1Z=o._pos1Z,r._pos2X=o._pos2X,r._pos2Y=o._pos2Y,r._pos2Z=o._pos2Z,r._depth=o._depth,r._impulse.copyFrom(o._impulse),r._id=o._id,r._warmStarted=o._warmStarted,r._disabled=!1}for(var l=t.numPoints,_=0,h=this._manifold._numPoints=l;_<h;){var c=_++,g=this._manifold._points[c],u=t.points[c],f=u.position1;g._pos1X=f.x,g._pos1Y=f.y,g._pos1Z=f.z;var d,b,p,m,I,v,M=u.position2;g._pos2X=M.x,g._pos2Y=M.y,g._pos2Z=M.z,g._relPos1X=g._pos1X-e._positionX,g._relPos1Y=g._pos1Y-e._positionY,g._relPos1Z=g._pos1Z-e._positionZ,g._relPos2X=g._pos2X-a._positionX,g._relPos2Y=g._pos2Y-a._positionY,g._relPos2Z=g._pos2Z-a._positionZ,d=e._rotation00*g._relPos1X+e._rotation10*g._relPos1Y+e._rotation20*g._relPos1Z,b=e._rotation01*g._relPos1X+e._rotation11*g._relPos1Y+e._rotation21*g._relPos1Z,p=e._rotation02*g._relPos1X+e._rotation12*g._relPos1Y+e._rotation22*g._relPos1Z,g._localPos1X=d,g._localPos1Y=b,g._localPos1Z=p,m=a._rotation00*g._relPos2X+a._rotation10*g._relPos2Y+a._rotation20*g._relPos2Z,I=a._rotation01*g._relPos2X+a._rotation11*g._relPos2Y+a._rotation21*g._relPos2Z,v=a._rotation02*g._relPos2X+a._rotation12*g._relPos2Y+a._rotation22*g._relPos2Z,g._localPos2X=m,g._localPos2Y=I,g._localPos2Z=v,g._depth=u.depth;var C=g._impulse;C.impulseN=0,C.impulseT=0,C.impulseB=0,C.impulseP=0,C.impulseLX=0,C.impulseLY=0,C.impulseLZ=0,g._id=u.id,g._warmStarted=!1,g._disabled=!1;for(var y=0,w=this.numOldPoints;y<w;){var A=y++,x=this.oldPoints[A];if(g._id==x._id){g._impulse.copyFrom(x._impulse),g._warmStarted=!0;break}}}},incrementalUpdate:function(t,e,a){this._manifold._updateDepthsAndPositions(e,a);for(var i=0,n=this._manifold._numPoints;i<n;){var s=i++;this._manifold._points[s]._warmStarted=!0}var r=t.points[0],o=this.findNearestContactPointIndex(r,e,a);if(-1==o)this.addManifoldPoint(r,e,a);else{var l=this._manifold._points[o],_=r.position1;l._pos1X=_.x,l._pos1Y=_.y,l._pos1Z=_.z;var h,c,g,u,f,d,b=r.position2;l._pos2X=b.x,l._pos2Y=b.y,l._pos2Z=b.z,l._relPos1X=l._pos1X-e._positionX,l._relPos1Y=l._pos1Y-e._positionY,l._relPos1Z=l._pos1Z-e._positionZ,l._relPos2X=l._pos2X-a._positionX,l._relPos2Y=l._pos2Y-a._positionY,l._relPos2Z=l._pos2Z-a._positionZ,h=e._rotation00*l._relPos1X+e._rotation10*l._relPos1Y+e._rotation20*l._relPos1Z,c=e._rotation01*l._relPos1X+e._rotation11*l._relPos1Y+e._rotation21*l._relPos1Z,g=e._rotation02*l._relPos1X+e._rotation12*l._relPos1Y+e._rotation22*l._relPos1Z,l._localPos1X=h,l._localPos1Y=c,l._localPos1Z=g,u=a._rotation00*l._relPos2X+a._rotation10*l._relPos2Y+a._rotation20*l._relPos2Z,f=a._rotation01*l._relPos2X+a._rotation11*l._relPos2Y+a._rotation21*l._relPos2Z,d=a._rotation02*l._relPos2X+a._rotation12*l._relPos2Y+a._rotation22*l._relPos2Z,l._localPos2X=u,l._localPos2Y=f,l._localPos2Z=d,l._depth=r.depth}this.removeOutdatedPoints()},__class__:Zn};var zn=function(){this.lin1X=0,this.lin1Y=0,this.lin1Z=0,this.lin2X=0,this.lin2Y=0,this.lin2Z=0,this.ang1X=0,this.ang1Y=0,this.ang1Z=0,this.ang2X=0,this.ang2Y=0,this.ang2Z=0,this.flag=0};(i["oimo.dynamics.constraint.info.JacobianRow"]=zn).__name__=!0,zn.prototype={lin1X:null,lin1Y:null,lin1Z:null,lin2X:null,lin2Y:null,lin2Z:null,ang1X:null,ang1Y:null,ang1Z:null,ang2X:null,ang2Y:null,ang2Z:null,flag:null,updateSparsity:function(){(this.flag=0)==this.lin1X&&0==this.lin1Y&&0==this.lin1Z&&0==this.lin2X&&0==this.lin2Y&&0==this.lin2Z||(this.flag|=1),0==this.ang1X&&0==this.ang1Y&&0==this.ang1Z&&0==this.ang2X&&0==this.ang2Y&&0==this.ang2Z||(this.flag|=2)},__class__:zn};var Bn=function(){this.b1=null,this.b2=null,this.numRows=0;var t=new Array(wn.maxManifoldPoints);this.rows=t;for(var e=0,a=this.rows.length;e<a;){var i=e++;this.rows[i]=new Nn}};(i["oimo.dynamics.constraint.info.contact.ContactSolverInfo"]=Bn).__name__=!0,Bn.prototype={b1:null,b2:null,numRows:null,rows:null,__class__:Bn};var Nn=function(){this.jacobianN=new zn,this.jacobianT=new zn,this.jacobianB=new zn,this.rhs=0,this.cfm=0,this.friction=0,this.impulse=null};(i["oimo.dynamics.constraint.info.contact.ContactSolverInfoRow"]=Nn).__name__=!0,Nn.prototype={jacobianN:null,jacobianT:null,jacobianB:null,rhs:null,cfm:null,friction:null,impulse:null,__class__:Nn};var Gn=function(){this.b1=null,this.b2=null,this.numRows=0;var t=new Array(wn.maxJacobianRows);this.rows=t;for(var e=0,a=this.rows.length;e<a;){var i=e++;this.rows[i]=new kn}};(i["oimo.dynamics.constraint.info.joint.JointSolverInfo"]=Gn).__name__=!0,Gn.prototype={b1:null,b2:null,numRows:null,rows:null,__class__:Gn};var kn=function(){this.jacobian=new zn,this.rhs=0,this.cfm=0,this.minImpulse=0,this.maxImpulse=0,this.motorSpeed=0,this.motorMaxImpulse=0,this.impulse=null};(i["oimo.dynamics.constraint.info.joint.JointSolverInfoRow"]=kn).__name__=!0,kn.prototype={jacobian:null,rhs:null,cfm:null,minImpulse:null,maxImpulse:null,motorSpeed:null,motorMaxImpulse:null,impulse:null,__class__:kn};var Sn=function(t,e){switch(this._link1=new Yn(this),this._link2=new Yn(this),this._positionCorrectionAlgorithm=wn.defaultJointPositionCorrectionAlgorithm,this._type=e,this._world=null,this._b1=t.rigidBody1,this._b2=t.rigidBody2,this._allowCollision=t.allowCollision,this._breakForce=t.breakForce,this._breakTorque=t.breakTorque,t.solverType){case 0:this._solver=new On(this);break;case 1:this._solver=new Tn(this)}var a=t.localAnchor1;this._localAnchor1X=a.x,this._localAnchor1Y=a.y,this._localAnchor1Z=a.z;var i=t.localAnchor2;this._localAnchor2X=i.x,this._localAnchor2Y=i.y,this._localAnchor2Z=i.z,this._relativeAnchor1X=0,this._relativeAnchor1Y=0,this._relativeAnchor1Z=0,this._relativeAnchor2X=0,this._relativeAnchor2Y=0,this._relativeAnchor2Z=0,this._anchor1X=0,this._anchor1Y=0,this._anchor1Z=0,this._anchor2X=0,this._anchor2Y=0,this._anchor2Z=0,this._localBasisX1X=0,this._localBasisX1Y=0,this._localBasisX1Z=0,this._localBasisY1X=0,this._localBasisY1Y=0,this._localBasisY1Z=0,this._localBasisZ1X=0,this._localBasisZ1Y=0,this._localBasisZ1Z=0,this._localBasisX2X=0,this._localBasisX2Y=0,this._localBasisX2Z=0,this._localBasisY2X=0,this._localBasisY2Y=0,this._localBasisY2Z=0,this._localBasisZ2X=0,this._localBasisZ2Y=0,this._localBasisZ2Z=0;var n=new Array(wn.maxJacobianRows);this._impulses=n;for(var s=0,r=wn.maxJacobianRows;s<r;){var o=s++;this._impulses[o]=new Xn}};(i["oimo.dynamics.constraint.joint.Joint"]=Sn).__name__=!0,Sn.prototype={_b1:null,_b2:null,_link1:null,_link2:null,_positionCorrectionAlgorithm:null,_allowCollision:null,_prev:null,_next:null,_world:null,_localAnchor1X:null,_localAnchor1Y:null,_localAnchor1Z:null,_localAnchor2X:null,_localAnchor2Y:null,_localAnchor2Z:null,_relativeAnchor1X:null,_relativeAnchor1Y:null,_relativeAnchor1Z:null,_relativeAnchor2X:null,_relativeAnchor2Y:null,_relativeAnchor2Z:null,_anchor1X:null,_anchor1Y:null,_anchor1Z:null,_anchor2X:null,_anchor2Y:null,_anchor2Z:null,_localBasisX1X:null,_localBasisX1Y:null,_localBasisX1Z:null,_localBasisY1X:null,_localBasisY1Y:null,_localBasisY1Z:null,_localBasisZ1X:null,_localBasisZ1Y:null,_localBasisZ1Z:null,_localBasisX2X:null,_localBasisX2Y:null,_localBasisX2Z:null,_localBasisY2X:null,_localBasisY2Y:null,_localBasisY2Z:null,_localBasisZ2X:null,_localBasisZ2Y:null,_localBasisZ2Z:null,_basisX1X:null,_basisX1Y:null,_basisX1Z:null,_basisY1X:null,_basisY1Y:null,_basisY1Z:null,_basisZ1X:null,_basisZ1Y:null,_basisZ1Z:null,_basisX2X:null,_basisX2Y:null,_basisX2Z:null,_basisY2X:null,_basisY2Y:null,_basisY2Z:null,_basisZ2X:null,_basisZ2Y:null,_basisZ2Z:null,_impulses:null,_appliedForceX:null,_appliedForceY:null,_appliedForceZ:null,_appliedTorqueX:null,_appliedTorqueY:null,_appliedTorqueZ:null,_breakForce:null,_breakTorque:null,_type:null,_solver:null,_syncAnchors:function(){var t,e,a,i,n,s,r,o,l,_,h,c,g,u,f,d,b,p,m,I,v,M,C,y,w=this._b1._transform,A=this._b2._transform;t=w._rotation00*this._localAnchor1X+w._rotation01*this._localAnchor1Y+w._rotation02*this._localAnchor1Z,e=w._rotation10*this._localAnchor1X+w._rotation11*this._localAnchor1Y+w._rotation12*this._localAnchor1Z,a=w._rotation20*this._localAnchor1X+w._rotation21*this._localAnchor1Y+w._rotation22*this._localAnchor1Z,this._relativeAnchor1X=t,this._relativeAnchor1Y=e,this._relativeAnchor1Z=a,i=A._rotation00*this._localAnchor2X+A._rotation01*this._localAnchor2Y+A._rotation02*this._localAnchor2Z,n=A._rotation10*this._localAnchor2X+A._rotation11*this._localAnchor2Y+A._rotation12*this._localAnchor2Z,s=A._rotation20*this._localAnchor2X+A._rotation21*this._localAnchor2Y+A._rotation22*this._localAnchor2Z,this._relativeAnchor2X=i,this._relativeAnchor2Y=n,this._relativeAnchor2Z=s,this._anchor1X=this._relativeAnchor1X+w._positionX,this._anchor1Y=this._relativeAnchor1Y+w._positionY,this._anchor1Z=this._relativeAnchor1Z+w._positionZ,this._anchor2X=this._relativeAnchor2X+A._positionX,this._anchor2Y=this._relativeAnchor2Y+A._positionY,this._anchor2Z=this._relativeAnchor2Z+A._positionZ,r=w._rotation00*this._localBasisX1X+w._rotation01*this._localBasisX1Y+w._rotation02*this._localBasisX1Z,o=w._rotation10*this._localBasisX1X+w._rotation11*this._localBasisX1Y+w._rotation12*this._localBasisX1Z,l=w._rotation20*this._localBasisX1X+w._rotation21*this._localBasisX1Y+w._rotation22*this._localBasisX1Z,this._basisX1X=r,this._basisX1Y=o,this._basisX1Z=l,_=w._rotation00*this._localBasisY1X+w._rotation01*this._localBasisY1Y+w._rotation02*this._localBasisY1Z,h=w._rotation10*this._localBasisY1X+w._rotation11*this._localBasisY1Y+w._rotation12*this._localBasisY1Z,c=w._rotation20*this._localBasisY1X+w._rotation21*this._localBasisY1Y+w._rotation22*this._localBasisY1Z,this._basisY1X=_,this._basisY1Y=h,this._basisY1Z=c,g=w._rotation00*this._localBasisZ1X+w._rotation01*this._localBasisZ1Y+w._rotation02*this._localBasisZ1Z,u=w._rotation10*this._localBasisZ1X+w._rotation11*this._localBasisZ1Y+w._rotation12*this._localBasisZ1Z,f=w._rotation20*this._localBasisZ1X+w._rotation21*this._localBasisZ1Y+w._rotation22*this._localBasisZ1Z,this._basisZ1X=g,this._basisZ1Y=u,this._basisZ1Z=f,d=A._rotation00*this._localBasisX2X+A._rotation01*this._localBasisX2Y+A._rotation02*this._localBasisX2Z,b=A._rotation10*this._localBasisX2X+A._rotation11*this._localBasisX2Y+A._rotation12*this._localBasisX2Z,p=A._rotation20*this._localBasisX2X+A._rotation21*this._localBasisX2Y+A._rotation22*this._localBasisX2Z,this._basisX2X=d,this._basisX2Y=b,this._basisX2Z=p,m=A._rotation00*this._localBasisY2X+A._rotation01*this._localBasisY2Y+A._rotation02*this._localBasisY2Z,I=A._rotation10*this._localBasisY2X+A._rotation11*this._localBasisY2Y+A._rotation12*this._localBasisY2Z,v=A._rotation20*this._localBasisY2X+A._rotation21*this._localBasisY2Y+A._rotation22*this._localBasisY2Z,this._basisY2X=m,this._basisY2Y=I,this._basisY2Z=v,M=A._rotation00*this._localBasisZ2X+A._rotation01*this._localBasisZ2Y+A._rotation02*this._localBasisZ2Z,C=A._rotation10*this._localBasisZ2X+A._rotation11*this._localBasisZ2Y+A._rotation12*this._localBasisZ2Z,y=A._rotation20*this._localBasisZ2X+A._rotation21*this._localBasisZ2Y+A._rotation22*this._localBasisZ2Z,this._basisZ2X=M,this._basisZ2Y=C,this._basisZ2Z=y},_getVelocitySolverInfo:function(t,e){e.b1=this._b1,e.b2=this._b2,e.numRows=0},_getPositionSolverInfo:function(t){t.b1=this._b1,t.b2=this._b2,t.numRows=0},_checkDestruction:function(){var t=this._appliedForceX*this._appliedForceX+this._appliedForceY*this._appliedForceY+this._appliedForceZ*this._appliedForceZ,e=this._appliedTorqueX*this._appliedTorqueX+this._appliedTorqueY*this._appliedTorqueY+this._appliedTorqueZ*this._appliedTorqueZ;0<this._breakForce&&t>this._breakForce*this._breakForce?this._world.removeJoint(this):0<this._breakTorque&&e>this._breakTorque*this._breakTorque&&this._world.removeJoint(this)},__class__:Sn};var Wn=function(){this.rigidBody1=null,this.rigidBody2=null,this.localAnchor1=new Jt,this.localAnchor2=new Jt,this.allowCollision=!1,this.solverType=wn.defaultJointConstraintSolverType,this.positionCorrectionAlgorithm=wn.defaultJointPositionCorrectionAlgorithm,this.breakForce=0,this.breakTorque=0};(i["oimo.dynamics.constraint.joint.JointConfig"]=Wn).__name__=!0,Wn.prototype={rigidBody1:null,rigidBody2:null,localAnchor1:null,localAnchor2:null,allowCollision:null,solverType:null,positionCorrectionAlgorithm:null,breakForce:null,breakTorque:null,__class__:Wn};var Xn=function(){this.impulse=0,this.impulseM=0,this.impulseP=0};(i["oimo.dynamics.constraint.joint.JointImpulse"]=Xn).__name__=!0,Xn.prototype={impulse:null,impulseM:null,impulseP:null,__class__:Xn};var Yn=function(t){this._joint=t};(i["oimo.dynamics.constraint.joint.JointLink"]=Yn).__name__=!0,Yn.prototype={_prev:null,_next:null,_joint:null,_other:null,__class__:Yn};var Dn=function(){this.invMLinN1X=0,this.invMLinN1Y=0,this.invMLinN1Z=0,this.invMLinN2X=0,this.invMLinN2Y=0,this.invMLinN2Z=0,this.invMAngN1X=0,this.invMAngN1Y=0,this.invMAngN1Z=0,this.invMAngN2X=0,this.invMAngN2Y=0,this.invMAngN2Z=0,this.invMLinT1X=0,this.invMLinT1Y=0,this.invMLinT1Z=0,this.invMLinT2X=0,this.invMLinT2Y=0,this.invMLinT2Z=0,this.invMAngT1X=0,this.invMAngT1Y=0,this.invMAngT1Z=0,this.invMAngT2X=0,this.invMAngT2Y=0,this.invMAngT2Z=0,this.invMLinB1X=0,this.invMLinB1Y=0,this.invMLinB1Z=0,this.invMLinB2X=0,this.invMLinB2Y=0,this.invMLinB2Z=0,this.invMAngB1X=0,this.invMAngB1Y=0,this.invMAngB1Z=0,this.invMAngB2X=0,this.invMAngB2Y=0,this.invMAngB2Z=0,this.massN=0,this.massTB00=0,this.massTB01=0,this.massTB10=0,this.massTB11=0};(i["oimo.dynamics.constraint.solver.common.ContactSolverMassDataRow"]=Dn).__name__=!0,Dn.prototype={invMLinN1X:null,invMLinN1Y:null,invMLinN1Z:null,invMLinN2X:null,invMLinN2Y:null,invMLinN2Z:null,invMAngN1X:null,invMAngN1Y:null,invMAngN1Z:null,invMAngN2X:null,invMAngN2Y:null,invMAngN2Z:null,invMLinT1X:null,invMLinT1Y:null,invMLinT1Z:null,invMLinT2X:null,invMLinT2Y:null,invMLinT2Z:null,invMAngT1X:null,invMAngT1Y:null,invMAngT1Z:null,invMAngT2X:null,invMAngT2Y:null,invMAngT2Z:null,invMLinB1X:null,invMLinB1Y:null,invMLinB1Z:null,invMLinB2X:null,invMLinB2Y:null,invMLinB2Z:null,invMAngB1X:null,invMAngB1Y:null,invMAngB1Z:null,invMAngB2X:null,invMAngB2Y:null,invMAngB2Z:null,massN:null,massTB00:null,massTB01:null,massTB10:null,massTB11:null,__class__:Dn};var Kn=function(){this.invMLin1X=0,this.invMLin1Y=0,this.invMLin1Z=0,this.invMLin2X=0,this.invMLin2Y=0,this.invMLin2Z=0,this.invMAng1X=0,this.invMAng1Y=0,this.invMAng1Z=0,this.invMAng2X=0,this.invMAng2Y=0,this.invMAng2Z=0,this.mass=0,this.massWithoutCfm=0};(i["oimo.dynamics.constraint.solver.common.JointSolverMassDataRow"]=Kn).__name__=!0,Kn.prototype={invMLin1X:null,invMLin1Y:null,invMLin1Z:null,invMLin2X:null,invMLin2Y:null,invMLin2Z:null,invMAng1X:null,invMAng1Y:null,invMAng1Z:null,invMAng2X:null,invMAng2Y:null,invMAng2Z:null,mass:null,massWithoutCfm:null,__class__:Kn};var Ln=function(t){var e=new Array(t);this.iBounded=e;var a=new Array(t);this.iUnbounded=a;var i=new Array(t);this.signs=i;var n=new Array(t);this.b=n,this.numBounded=0,this.numUnbounded=0,this.matrixId=0};(i["oimo.dynamics.constraint.solver.direct.Boundary"]=Ln).__name__=!0,Ln.prototype={numBounded:null,iBounded:null,signs:null,numUnbounded:null,iUnbounded:null,b:null,matrixId:null,init:function(t){this.numBounded=t.numBounded;for(var e=0,a=this.numBounded;e<a;){var i=e++;this.iBounded[i]=t.iBounded[i],this.signs[i]=t.signs[i]}this.numUnbounded=t.numUnbounded;for(var n=this.matrixId=0,s=this.numUnbounded;n<s;){var r=n++,o=t.iUnbounded[r];this.iUnbounded[r]=o,this.matrixId|=1<<o}},computeImpulses:function(t,e,a,i,n,s,r){for(var o=0,l=this.numUnbounded;o<l;){var _=o++,h=this.iUnbounded[_],c=t.rows[h],g=a[h];this.b[h]=c.rhs*s-g-c.cfm*i[h]}for(var u=e._invMassWithoutCfm,f=0,d=this.numBounded;f<d;){var b=f++,p=this.iBounded[b],m=this.signs[b],I=t.rows[p],v=i[p],M=(m<0?I.minImpulse:0<m?I.maxImpulse:0)-v;if(0!=(n[p]=M))for(var C=0,y=this.numUnbounded;C<y;){var w=C++,A=this.iUnbounded[w],x=u[p][A]*M,Z=A,z=this.b;z[Z]=z[Z]-x}}for(var B,N=this.iUnbounded,G=this.numUnbounded,k=0,S=0,W=G;S<W;){k|=1<<N[S++]}e._cacheComputed[k]||(e.computeSubmatrix(k,N,G),e._cacheComputed[k]=!0),B=e._cachedSubmatrices[k];for(var X=!0,Y=0,D=this.numUnbounded;Y<D;){for(var K=Y++,L=this.iUnbounded[K],V=t.rows[L],H=i[L],j=H,T=0,R=this.numUnbounded;T<R;){var F=T++,O=this.iUnbounded[F];j+=this.b[O]*B[K][F]}if(j<V.minImpulse-wn.directMlcpSolverEps||j>V.maxImpulse+wn.directMlcpSolverEps){X=!1;break}n[L]=j-H}if(r)return!0;if(!X)return!1;for(var P=0,J=this.numBounded;P<J;){for(var E,U=P++,Q=this.iBounded[U],q=t.rows[Q],$=this.signs[U],tt=i[Q]+n[Q],et=a[Q],at=0,it=t.numRows;at<it;){var nt=at++;et+=u[Q][nt]*n[nt]}if(E=q.rhs*s-et-q.cfm*tt,$<0&&E>wn.directMlcpSolverEps||0<$&&E<-wn.directMlcpSolverEps){X=!1;break}}return X},__class__:Ln};var Vn=function(t){this.size=t,this.numBounded=0;var e=new Array(t);this.iBounded=e;var a=new Array(t);this.signs=a,this.numUnbounded=0;var i=new Array(t);this.iUnbounded=i};(i["oimo.dynamics.constraint.solver.direct.BoundaryBuildInfo"]=Vn).__name__=!0,Vn.prototype={size:null,numBounded:null,iBounded:null,signs:null,numUnbounded:null,iUnbounded:null,__class__:Vn};var Hn=function(t){this.maxRows=t,this.numBoundaries=0;var e=new Array(1<<t);this.boundaries=e,this.bbInfo=new Vn(t)};(i["oimo.dynamics.constraint.solver.direct.BoundaryBuilder"]=Hn).__name__=!0,Hn.prototype={numBoundaries:null,boundaries:null,maxRows:null,bbInfo:null,buildBoundariesRecursive:function(t,e){if(e==t.numRows)return null==this.boundaries[this.numBoundaries]&&(this.boundaries[this.numBoundaries]=new Ln(this.maxRows)),void this.boundaries[this.numBoundaries++].init(this.bbInfo);var a=t.rows[e],i=a.minImpulse>-1/0,n=a.maxImpulse<1/0;if(0==a.minImpulse&&0==a.maxImpulse){var s=this.bbInfo;return s.iBounded[s.numBounded]=e,s.signs[s.numBounded]=0,s.numBounded++,this.buildBoundariesRecursive(t,e+1),void this.bbInfo.numBounded--}var r=this.bbInfo;if(r.iUnbounded[r.numUnbounded]=e,r.numUnbounded++,this.buildBoundariesRecursive(t,e+1),this.bbInfo.numUnbounded--,i){var o=this.bbInfo;o.iBounded[o.numBounded]=e,o.signs[o.numBounded]=-1,o.numBounded++,this.buildBoundariesRecursive(t,e+1),this.bbInfo.numBounded--}if(n){var l=this.bbInfo;l.iBounded[l.numBounded]=e,l.signs[l.numBounded]=1,l.numBounded++,this.buildBoundariesRecursive(t,e+1),this.bbInfo.numBounded--}},__class__:Hn};var jn=function(t){this.n=t;var e=new Array(t);this.indices=e;var a=new Array(t);this.tmpIndices=a;for(var i=0,n=t;i<n;){var s=i++;this.indices[s]=s}};(i["oimo.dynamics.constraint.solver.direct.BoundarySelector"]=jn).__name__=!0,jn.prototype={n:null,indices:null,tmpIndices:null,__class__:jn};var Tn=function(t){vn.call(this),this.joint=t,this.info=new Gn;var e=wn.maxJacobianRows;this.massMatrix=new Rn(e),this.boundaryBuilder=new Hn(e);var a=new Array(e);this.massData=a;for(var i=0,n=this.massData.length;i<n;){var s=i++;this.massData[s]=new Kn}var r=this.boundaryBuilder.boundaries.length;this.velBoundarySelector=new jn(r),this.posBoundarySelector=new jn(r);var o=new Array(e);this.relVels=o;var l=new Array(e);this.impulses=l;var _=new Array(e);this.dImpulses=_;var h=new Array(e);this.dTotalImpulses=h;for(var c=0,g=e;c<g;){var u=c++;this.relVels[u]=0,this.impulses[u]=0,this.dImpulses[u]=0,this.dTotalImpulses[u]=0}};(i["oimo.dynamics.constraint.solver.direct.DirectJointConstraintSolver"]=Tn).__name__=!0,Tn.__super__=vn,Tn.prototype=s(vn.prototype,{info:null,massData:null,relVels:null,impulses:null,dImpulses:null,dTotalImpulses:null,joint:null,massMatrix:null,boundaryBuilder:null,velBoundarySelector:null,posBoundarySelector:null,preSolveVelocity:function(t){this.joint._syncAnchors(),this.joint._getVelocitySolverInfo(t,this.info),this._b1=this.info.b1,this._b2=this.info.b2,this.massMatrix.computeInvMass(this.info,this.massData);var e=this.boundaryBuilder;e.numBoundaries=0;var a=e.bbInfo;a.numBounded=0,a.numUnbounded=0,e.buildBoundariesRecursive(this.info,0);for(var i=this.velBoundarySelector,n=this.boundaryBuilder.numBoundaries,s=0,r=0,o=0,l=i.n;o<l;){var _=o++,h=i.indices[_];h<n?(i.tmpIndices[s]=h,++s):(i.tmpIndices[n+r]=h,++r)}var c=i.indices;i.indices=i.tmpIndices,i.tmpIndices=c},warmStart:function(t){var e=this.joint._positionCorrectionAlgorithm==Mn.BAUMGARTE?wn.jointWarmStartingFactorForBaungarte:wn.jointWarmStartingFactor;if((e*=t.dtRatio)<=0)for(var a=0,i=this.info.numRows;a<i;){var n=a++,s=this.info.rows[n].impulse;s.impulse=0,s.impulseM=0,s.impulseP=0}else{for(var r=0,o=this.info.numRows;r<o;){var l=r++,_=this.info.rows[l],h=_.impulse,c=h.impulse*e;if(c<_.minImpulse?c=_.minImpulse:c>_.maxImpulse&&(c=_.maxImpulse),h.impulse=c,0<_.motorMaxImpulse){var g=h.impulseM*e,u=_.motorMaxImpulse;g<-u?g=-u:u<g&&(g=u),h.impulseM=g}else h.impulseM=0;this.dImpulses[l]=h.impulse+h.impulseM}var f,d,b,p,m,I,v,M,C,y,w,A,x=this.dImpulses,Z=!1,z=!1;f=this._b1._velX,d=this._b1._velY,b=this._b1._velZ,p=this._b2._velX,m=this._b2._velY,I=this._b2._velZ,v=this._b1._angVelX,M=this._b1._angVelY,C=this._b1._angVelZ,y=this._b2._angVelX,w=this._b2._angVelY,A=this._b2._angVelZ;for(var B=0,N=this.info.numRows;B<N;){var G=B++,k=this.info.rows[G].jacobian,S=this.massData[G],W=x[G];0!=(1&k.flag)&&(f+=S.invMLin1X*W,d+=S.invMLin1Y*W,b+=S.invMLin1Z*W,p+=S.invMLin2X*-W,m+=S.invMLin2Y*-W,I+=S.invMLin2Z*-W,Z=!0),0!=(2&k.flag)&&(v+=S.invMAng1X*W,M+=S.invMAng1Y*W,C+=S.invMAng1Z*W,y+=S.invMAng2X*-W,w+=S.invMAng2Y*-W,A+=S.invMAng2Z*-W,z=!0)}Z&&(this._b1._velX=f,this._b1._velY=d,this._b1._velZ=b,this._b2._velX=p,this._b2._velY=m,this._b2._velZ=I),z&&(this._b1._angVelX=v,this._b1._angVelY=M,this._b1._angVelZ=C,this._b2._angVelX=y,this._b2._angVelY=w,this._b2._angVelZ=A)}},solveVelocity:function(){var t,e,a,i,n,s,r,o,l,_,h,c,g=this.info.numRows;t=this._b1._velX,e=this._b1._velY,a=this._b1._velZ,i=this._b2._velX,n=this._b2._velY,s=this._b2._velZ,r=this._b1._angVelX,o=this._b1._angVelY,l=this._b1._angVelZ,_=this._b2._angVelX,h=this._b2._angVelY,c=this._b2._angVelZ;for(var u=0,f=g;u<f;){var d=u++,b=this.info.rows[d],p=b.impulse,m=b.jacobian,I=0;I+=t*m.lin1X+e*m.lin1Y+a*m.lin1Z,I-=i*m.lin2X+n*m.lin2Y+s*m.lin2Z,I+=r*m.ang1X+o*m.ang1Y+l*m.ang1Z,I-=_*m.ang2X+h*m.ang2Y+c*m.ang2Z,this.relVels[d]=I,this.impulses[d]=p.impulse,this.dTotalImpulses[d]=0}for(var v=this.massMatrix._invMassWithoutCfm,M=0,C=g;M<C;){var y=M++,w=this.info.rows[y],A=w.impulse,x=this.massData[y];if(0<w.motorMaxImpulse){var Z=A.impulseM,z=Z+x.massWithoutCfm*(-w.motorSpeed-this.relVels[y]),B=A.impulseM;z<-B?z=-B:B<z&&(z=B);var N=(A.impulseM=z)-Z;this.dTotalImpulses[y]=N;for(var G=0,k=g;G<k;){var S=G++,W=S,X=this.relVels;X[W]=X[W]+N*v[y][S]}}}for(var Y=!1,D=0,K=this.boundaryBuilder.numBoundaries;D<K;){var L=D++,V=this.velBoundarySelector.indices[L];if(this.boundaryBuilder.boundaries[V].computeImpulses(this.info,this.massMatrix,this.relVels,this.impulses,this.dImpulses,1,!1)){for(var H=0,j=g;H<j;){var T=H++,R=this.info.rows[T].impulse,F=this.dImpulses[T];R.impulse+=F;var O=T,P=this.dTotalImpulses;P[O]=P[O]+F}var J,E,U,Q,q,$,tt,et,at,it,nt,st,rt=this.dTotalImpulses,ot=!1,lt=!1;J=this._b1._velX,E=this._b1._velY,U=this._b1._velZ,Q=this._b2._velX,q=this._b2._velY,$=this._b2._velZ,tt=this._b1._angVelX,et=this._b1._angVelY,at=this._b1._angVelZ,it=this._b2._angVelX,nt=this._b2._angVelY,st=this._b2._angVelZ;for(var _t=0,ht=this.info.numRows;_t<ht;){var ct=_t++,gt=this.info.rows[ct].jacobian,ut=this.massData[ct],ft=rt[ct];0!=(1&gt.flag)&&(J+=ut.invMLin1X*ft,E+=ut.invMLin1Y*ft,U+=ut.invMLin1Z*ft,Q+=ut.invMLin2X*-ft,q+=ut.invMLin2Y*-ft,$+=ut.invMLin2Z*-ft,ot=!0),0!=(2&gt.flag)&&(tt+=ut.invMAng1X*ft,et+=ut.invMAng1Y*ft,at+=ut.invMAng1Z*ft,it+=ut.invMAng2X*-ft,nt+=ut.invMAng2Y*-ft,st+=ut.invMAng2Z*-ft,lt=!0)}ot&&(this._b1._velX=J,this._b1._velY=E,this._b1._velZ=U,this._b2._velX=Q,this._b2._velY=q,this._b2._velZ=$),lt&&(this._b1._angVelX=tt,this._b1._angVelY=et,this._b1._angVelZ=at,this._b2._angVelX=it,this._b2._angVelY=nt,this._b2._angVelZ=st);for(var dt=this.velBoundarySelector,bt=0;dt.indices[bt]!=V;)++bt;for(;0<bt;){var pt=dt.indices[bt];dt.indices[bt]=dt.indices[bt-1],dt.indices[bt-1]=pt,--bt}Y=!0;break}}Y||Oe.trace("could not find solution. (velocity)",{fileName:"Sources/oimo/dynamics/constraint/solver/direct/DirectJointConstraintSolver.hx",lineNumber:338,className:"oimo.dynamics.constraint.solver.direct.DirectJointConstraintSolver",methodName:"solveVelocity"})},postSolveVelocity:function(t){for(var e,a,i,n,s,r,o=r=s=n=i=a=e=0,l=this.info.numRows;o<l;){var _=o++,h=this.info.rows[_],c=h.impulse,g=h.jacobian;0!=(1&g.flag)?(e+=g.lin1X*c.impulse,a+=g.lin1Y*c.impulse,i+=g.lin1Z*c.impulse):0!=(2&g.flag)&&(n+=g.ang1X*c.impulse,s+=g.ang1Y*c.impulse,r+=g.ang1Z*c.impulse)}this.joint._appliedForceX=e*t.invDt,this.joint._appliedForceY=a*t.invDt,this.joint._appliedForceZ=i*t.invDt,this.joint._appliedTorqueX=n*t.invDt,this.joint._appliedTorqueY=s*t.invDt,this.joint._appliedTorqueZ=r*t.invDt},preSolvePosition:function(t){this.joint._syncAnchors(),this.joint._getPositionSolverInfo(this.info),this._b1=this.info.b1,this._b2=this.info.b2,this.massMatrix.computeInvMass(this.info,this.massData);var e=this.boundaryBuilder;e.numBoundaries=0;var a=e.bbInfo;a.numBounded=0,a.numUnbounded=0,e.buildBoundariesRecursive(this.info,0);for(var i=this.posBoundarySelector,n=this.boundaryBuilder.numBoundaries,s=0,r=0,o=0,l=i.n;o<l;){var _=o++,h=i.indices[_];h<n?(i.tmpIndices[s]=h,++s):(i.tmpIndices[n+r]=h,++r)}var c=i.indices;i.indices=i.tmpIndices,i.tmpIndices=c;for(var g=0,u=this.info.numRows;g<u;){var f=g++;this.info.rows[f].impulse.impulseP=0}},solvePositionSplitImpulse:function(){var t,e,a,i,n,s,r,o,l,_,h,c,g=this.info.numRows;t=this._b1._pseudoVelX,e=this._b1._pseudoVelY,a=this._b1._pseudoVelZ,i=this._b2._pseudoVelX,n=this._b2._pseudoVelY,s=this._b2._pseudoVelZ,r=this._b1._angPseudoVelX,o=this._b1._angPseudoVelY,l=this._b1._angPseudoVelZ,_=this._b2._angPseudoVelX,h=this._b2._angPseudoVelY,c=this._b2._angPseudoVelZ;for(var u=0,f=g;u<f;){var d=u++,b=this.info.rows[d],p=b.impulse,m=b.jacobian,I=0;I+=t*m.lin1X+e*m.lin1Y+a*m.lin1Z,I-=i*m.lin2X+n*m.lin2Y+s*m.lin2Z,I+=r*m.ang1X+o*m.ang1Y+l*m.ang1Z,I-=_*m.ang2X+h*m.ang2Y+c*m.ang2Z,this.relVels[d]=I,this.impulses[d]=p.impulseP}for(var v=!1,M=0,C=this.boundaryBuilder.numBoundaries;M<C;){var y=M++,w=this.posBoundarySelector.indices[y];if(this.boundaryBuilder.boundaries[w].computeImpulses(this.info,this.massMatrix,this.relVels,this.impulses,this.dImpulses,wn.positionSplitImpulseBaumgarte,!1)){for(var A=0,x=g;A<x;){var Z=A++,z=this.info.rows[Z].impulse,B=this.dImpulses[Z];z.impulseP+=B}var N,G,k,S,W,X,Y,D,K,L,V,H,j=this.dImpulses,T=!1,R=!1;N=this._b1._pseudoVelX,G=this._b1._pseudoVelY,k=this._b1._pseudoVelZ,S=this._b2._pseudoVelX,W=this._b2._pseudoVelY,X=this._b2._pseudoVelZ,Y=this._b1._angPseudoVelX,D=this._b1._angPseudoVelY,K=this._b1._angPseudoVelZ,L=this._b2._angPseudoVelX,V=this._b2._angPseudoVelY,H=this._b2._angPseudoVelZ;for(var F=0,O=this.info.numRows;F<O;){var P=F++,J=this.info.rows[P].jacobian,E=this.massData[P],U=j[P];0!=(1&J.flag)&&(N+=E.invMLin1X*U,G+=E.invMLin1Y*U,k+=E.invMLin1Z*U,S+=E.invMLin2X*-U,W+=E.invMLin2Y*-U,X+=E.invMLin2Z*-U,T=!0),0!=(2&J.flag)&&(Y+=E.invMAng1X*U,D+=E.invMAng1Y*U,K+=E.invMAng1Z*U,L+=E.invMAng2X*-U,V+=E.invMAng2Y*-U,H+=E.invMAng2Z*-U,R=!0)}T&&(this._b1._pseudoVelX=N,this._b1._pseudoVelY=G,this._b1._pseudoVelZ=k,this._b2._pseudoVelX=S,this._b2._pseudoVelY=W,this._b2._pseudoVelZ=X),R&&(this._b1._angPseudoVelX=Y,this._b1._angPseudoVelY=D,this._b1._angPseudoVelZ=K,this._b2._angPseudoVelX=L,this._b2._angPseudoVelY=V,this._b2._angPseudoVelZ=H);for(var Q=this.posBoundarySelector,q=0;Q.indices[q]!=w;)++q;for(;0<q;){var $=Q.indices[q];Q.indices[q]=Q.indices[q-1],Q.indices[q-1]=$,--q}v=!0;break}}v||Oe.trace("could not find solution. (split impulse)",{fileName:"Sources/oimo/dynamics/constraint/solver/direct/DirectJointConstraintSolver.hx",lineNumber:454,className:"oimo.dynamics.constraint.solver.direct.DirectJointConstraintSolver",methodName:"solvePositionSplitImpulse"})},solvePositionNgs:function(t){this.joint._syncAnchors(),this.joint._getPositionSolverInfo(this.info),this._b1=this.info.b1,this._b2=this.info.b2,this.massMatrix.computeInvMass(this.info,this.massData);var e=this.boundaryBuilder;e.numBoundaries=0;var a=e.bbInfo;a.numBounded=0,a.numUnbounded=0,e.buildBoundariesRecursive(this.info,0);for(var i=this.posBoundarySelector,n=this.boundaryBuilder.numBoundaries,s=0,r=0,o=0,l=i.n;o<l;){var _=o++,h=i.indices[_];h<n?(i.tmpIndices[s]=h,++s):(i.tmpIndices[n+r]=h,++r)}var c=i.indices;i.indices=i.tmpIndices,i.tmpIndices=c;for(var g=this.info.numRows,u=0,f=g;u<f;){var d=u++,b=this.info.rows[d],p=b.impulse;b.jacobian;this.relVels[d]=0,this.impulses[d]=p.impulseP}for(var m=!1,I=0,v=this.boundaryBuilder.numBoundaries;I<v;){var M=I++,C=this.posBoundarySelector.indices[M];if(this.boundaryBuilder.boundaries[C].computeImpulses(this.info,this.massMatrix,this.relVels,this.impulses,this.dImpulses,wn.positionNgsBaumgarte,!1)){for(var y=0,w=g;y<w;){var A=y++,x=this.info.rows[A].impulse,Z=this.dImpulses[A];x.impulseP+=Z}for(var z,B,N,G,k,S,W,X,Y,D,K,L,V=this.dImpulses,H=!1,j=!1,T=L=K=D=Y=X=W=S=k=G=N=B=z=0,R=this.info.numRows;T<R;){var F=T++,O=this.info.rows[F].jacobian,P=this.massData[F],J=V[F];0!=(1&O.flag)&&(z+=P.invMLin1X*J,B+=P.invMLin1Y*J,N+=P.invMLin1Z*J,G+=P.invMLin2X*-J,k+=P.invMLin2Y*-J,S+=P.invMLin2Z*-J,H=!0),0!=(2&O.flag)&&(W+=P.invMAng1X*J,X+=P.invMAng1Y*J,Y+=P.invMAng1Z*J,D+=P.invMAng2X*-J,K+=P.invMAng2Y*-J,L+=P.invMAng2Z*-J,j=!0)}if(H){var E=this._b1;E._transform._positionX+=z,E._transform._positionY+=B,E._transform._positionZ+=N;var U=this._b2;U._transform._positionX+=G,U._transform._positionY+=k,U._transform._positionZ+=S}if(j){var Q,q,$,tt,et,at,it,nt,st,rt,ot=this._b1,lt=Math.sqrt(W*W+X*X+Y*Y),_t=.5*lt;if(_t<.5){var ht=_t*_t;Q=.5*(1-.16666666666666666*ht+ht*ht*.008333333333333333),q=1-.5*ht+ht*ht*.041666666666666664}else Q=Math.sin(_t)/lt,q=Math.cos(_t);$=W*Q,tt=X*Q,et=Y*Q,at=q;var ct,gt=ot._transform._rotation00,ut=ot._transform._rotation11,ft=ot._transform._rotation22,dt=gt+ut+ft;0<dt?(rt=.5*(ct=Math.sqrt(dt+1)),ct=.5/ct,it=(ot._transform._rotation21-ot._transform._rotation12)*ct,nt=(ot._transform._rotation02-ot._transform._rotation20)*ct,st=(ot._transform._rotation10-ot._transform._rotation01)*ct):ut<gt?ft<gt?(it=.5*(ct=Math.sqrt(gt-ut-ft+1)),ct=.5/ct,nt=(ot._transform._rotation01+ot._transform._rotation10)*ct,st=(ot._transform._rotation02+ot._transform._rotation20)*ct,rt=(ot._transform._rotation21-ot._transform._rotation12)*ct):(st=.5*(ct=Math.sqrt(ft-gt-ut+1)),ct=.5/ct,it=(ot._transform._rotation02+ot._transform._rotation20)*ct,nt=(ot._transform._rotation12+ot._transform._rotation21)*ct,rt=(ot._transform._rotation10-ot._transform._rotation01)*ct):ft<ut?(nt=.5*(ct=Math.sqrt(ut-ft-gt+1)),ct=.5/ct,it=(ot._transform._rotation01+ot._transform._rotation10)*ct,st=(ot._transform._rotation12+ot._transform._rotation21)*ct,rt=(ot._transform._rotation02-ot._transform._rotation20)*ct):(st=.5*(ct=Math.sqrt(ft-gt-ut+1)),ct=.5/ct,it=(ot._transform._rotation02+ot._transform._rotation20)*ct,nt=(ot._transform._rotation12+ot._transform._rotation21)*ct,rt=(ot._transform._rotation10-ot._transform._rotation01)*ct);var bt=(it=at*it+$*rt+tt*st-et*nt)*it+(nt=at*nt-$*st+tt*rt+et*it)*nt+(st=at*st+$*nt-tt*it+et*rt)*st+(rt=at*rt-$*it-tt*nt-et*st)*rt;1e-32<bt&&(bt=1/Math.sqrt(bt));it*=bt,nt*=bt,st*=bt,rt*=bt;var pt,mt,It,vt,Mt,Ct,yt,wt,At,xt,Zt,zt,Bt,Nt,Gt,kt,St,Wt,Xt=2*it,Yt=2*nt,Dt=2*st,Kt=it*Xt,Lt=nt*Yt,Vt=st*Dt,Ht=it*Yt,jt=nt*Dt,Tt=it*Dt,Rt=rt*Xt,Ft=rt*Yt,Ot=rt*Dt;ot._transform._rotation00=1-Lt-Vt,ot._transform._rotation01=Ht-Ot,ot._transform._rotation02=Tt+Ft,ot._transform._rotation10=Ht+Ot,ot._transform._rotation11=1-Kt-Vt,ot._transform._rotation12=jt-Rt,ot._transform._rotation20=Tt-Ft,ot._transform._rotation21=jt+Rt,ot._transform._rotation22=1-Kt-Lt,pt=ot._transform._rotation00*ot._invLocalInertia00+ot._transform._rotation01*ot._invLocalInertia10+ot._transform._rotation02*ot._invLocalInertia20,mt=ot._transform._rotation00*ot._invLocalInertia01+ot._transform._rotation01*ot._invLocalInertia11+ot._transform._rotation02*ot._invLocalInertia21,It=ot._transform._rotation00*ot._invLocalInertia02+ot._transform._rotation01*ot._invLocalInertia12+ot._transform._rotation02*ot._invLocalInertia22,vt=ot._transform._rotation10*ot._invLocalInertia00+ot._transform._rotation11*ot._invLocalInertia10+ot._transform._rotation12*ot._invLocalInertia20,Mt=ot._transform._rotation10*ot._invLocalInertia01+ot._transform._rotation11*ot._invLocalInertia11+ot._transform._rotation12*ot._invLocalInertia21,Ct=ot._transform._rotation10*ot._invLocalInertia02+ot._transform._rotation11*ot._invLocalInertia12+ot._transform._rotation12*ot._invLocalInertia22,yt=ot._transform._rotation20*ot._invLocalInertia00+ot._transform._rotation21*ot._invLocalInertia10+ot._transform._rotation22*ot._invLocalInertia20,wt=ot._transform._rotation20*ot._invLocalInertia01+ot._transform._rotation21*ot._invLocalInertia11+ot._transform._rotation22*ot._invLocalInertia21,At=ot._transform._rotation20*ot._invLocalInertia02+ot._transform._rotation21*ot._invLocalInertia12+ot._transform._rotation22*ot._invLocalInertia22,ot._invInertia00=pt,ot._invInertia01=mt,ot._invInertia02=It,ot._invInertia10=vt,ot._invInertia11=Mt,ot._invInertia12=Ct,ot._invInertia20=yt,ot._invInertia21=wt,ot._invInertia22=At,xt=ot._invInertia00*ot._transform._rotation00+ot._invInertia01*ot._transform._rotation01+ot._invInertia02*ot._transform._rotation02,Zt=ot._invInertia00*ot._transform._rotation10+ot._invInertia01*ot._transform._rotation11+ot._invInertia02*ot._transform._rotation12,zt=ot._invInertia00*ot._transform._rotation20+ot._invInertia01*ot._transform._rotation21+ot._invInertia02*ot._transform._rotation22,Bt=ot._invInertia10*ot._transform._rotation00+ot._invInertia11*ot._transform._rotation01+ot._invInertia12*ot._transform._rotation02,Nt=ot._invInertia10*ot._transform._rotation10+ot._invInertia11*ot._transform._rotation11+ot._invInertia12*ot._transform._rotation12,Gt=ot._invInertia10*ot._transform._rotation20+ot._invInertia11*ot._transform._rotation21+ot._invInertia12*ot._transform._rotation22,kt=ot._invInertia20*ot._transform._rotation00+ot._invInertia21*ot._transform._rotation01+ot._invInertia22*ot._transform._rotation02,St=ot._invInertia20*ot._transform._rotation10+ot._invInertia21*ot._transform._rotation11+ot._invInertia22*ot._transform._rotation12,Wt=ot._invInertia20*ot._transform._rotation20+ot._invInertia21*ot._transform._rotation21+ot._invInertia22*ot._transform._rotation22,ot._invInertia00=xt,ot._invInertia01=Zt,ot._invInertia02=zt,ot._invInertia10=Bt,ot._invInertia11=Nt,ot._invInertia12=Gt,ot._invInertia20=kt,ot._invInertia21=St,ot._invInertia22=Wt,ot._invInertia00*=ot._rotFactor.x,ot._invInertia01*=ot._rotFactor.x,ot._invInertia02*=ot._rotFactor.x,ot._invInertia10*=ot._rotFactor.y,ot._invInertia11*=ot._rotFactor.y,ot._invInertia12*=ot._rotFactor.y,ot._invInertia20*=ot._rotFactor.z,ot._invInertia21*=ot._rotFactor.z,ot._invInertia22*=ot._rotFactor.z;var Pt,Jt,Et,Ut,Qt,qt,$t,te,ee,ae,ie=this._b2,ne=Math.sqrt(D*D+K*K+L*L),se=.5*ne;if(se<.5){var re=se*se;Pt=.5*(1-.16666666666666666*re+re*re*.008333333333333333),Jt=1-.5*re+re*re*.041666666666666664}else Pt=Math.sin(se)/ne,Jt=Math.cos(se);Et=D*Pt,Ut=K*Pt,Qt=L*Pt,qt=Jt;var oe,le=ie._transform._rotation00,_e=ie._transform._rotation11,he=ie._transform._rotation22,ce=le+_e+he;0<ce?(ae=.5*(oe=Math.sqrt(ce+1)),oe=.5/oe,$t=(ie._transform._rotation21-ie._transform._rotation12)*oe,te=(ie._transform._rotation02-ie._transform._rotation20)*oe,ee=(ie._transform._rotation10-ie._transform._rotation01)*oe):_e<le?he<le?($t=.5*(oe=Math.sqrt(le-_e-he+1)),oe=.5/oe,te=(ie._transform._rotation01+ie._transform._rotation10)*oe,ee=(ie._transform._rotation02+ie._transform._rotation20)*oe,ae=(ie._transform._rotation21-ie._transform._rotation12)*oe):(ee=.5*(oe=Math.sqrt(he-le-_e+1)),oe=.5/oe,$t=(ie._transform._rotation02+ie._transform._rotation20)*oe,te=(ie._transform._rotation12+ie._transform._rotation21)*oe,ae=(ie._transform._rotation10-ie._transform._rotation01)*oe):he<_e?(te=.5*(oe=Math.sqrt(_e-he-le+1)),oe=.5/oe,$t=(ie._transform._rotation01+ie._transform._rotation10)*oe,ee=(ie._transform._rotation12+ie._transform._rotation21)*oe,ae=(ie._transform._rotation02-ie._transform._rotation20)*oe):(ee=.5*(oe=Math.sqrt(he-le-_e+1)),oe=.5/oe,$t=(ie._transform._rotation02+ie._transform._rotation20)*oe,te=(ie._transform._rotation12+ie._transform._rotation21)*oe,ae=(ie._transform._rotation10-ie._transform._rotation01)*oe);var ge=($t=qt*$t+Et*ae+Ut*ee-Qt*te)*$t+(te=qt*te-Et*ee+Ut*ae+Qt*$t)*te+(ee=qt*ee+Et*te-Ut*$t+Qt*ae)*ee+(ae=qt*ae-Et*$t-Ut*te-Qt*ee)*ae;1e-32<ge&&(ge=1/Math.sqrt(ge));$t*=ge,te*=ge,ee*=ge,ae*=ge;var ue,fe,de,be,pe,me,Ie,ve,Me,Ce,ye,we,Ae,xe,Ze,ze,Be,Ne,Ge=2*$t,ke=2*te,Se=2*ee,We=$t*Ge,Xe=te*ke,Ye=ee*Se,De=$t*ke,Ke=te*Se,Le=$t*Se,Ve=ae*Ge,He=ae*ke,je=ae*Se;ie._transform._rotation00=1-Xe-Ye,ie._transform._rotation01=De-je,ie._transform._rotation02=Le+He,ie._transform._rotation10=De+je,ie._transform._rotation11=1-We-Ye,ie._transform._rotation12=Ke-Ve,ie._transform._rotation20=Le-He,ie._transform._rotation21=Ke+Ve,ie._transform._rotation22=1-We-Xe,ue=ie._transform._rotation00*ie._invLocalInertia00+ie._transform._rotation01*ie._invLocalInertia10+ie._transform._rotation02*ie._invLocalInertia20,fe=ie._transform._rotation00*ie._invLocalInertia01+ie._transform._rotation01*ie._invLocalInertia11+ie._transform._rotation02*ie._invLocalInertia21,de=ie._transform._rotation00*ie._invLocalInertia02+ie._transform._rotation01*ie._invLocalInertia12+ie._transform._rotation02*ie._invLocalInertia22,be=ie._transform._rotation10*ie._invLocalInertia00+ie._transform._rotation11*ie._invLocalInertia10+ie._transform._rotation12*ie._invLocalInertia20,pe=ie._transform._rotation10*ie._invLocalInertia01+ie._transform._rotation11*ie._invLocalInertia11+ie._transform._rotation12*ie._invLocalInertia21,me=ie._transform._rotation10*ie._invLocalInertia02+ie._transform._rotation11*ie._invLocalInertia12+ie._transform._rotation12*ie._invLocalInertia22,Ie=ie._transform._rotation20*ie._invLocalInertia00+ie._transform._rotation21*ie._invLocalInertia10+ie._transform._rotation22*ie._invLocalInertia20,ve=ie._transform._rotation20*ie._invLocalInertia01+ie._transform._rotation21*ie._invLocalInertia11+ie._transform._rotation22*ie._invLocalInertia21,Me=ie._transform._rotation20*ie._invLocalInertia02+ie._transform._rotation21*ie._invLocalInertia12+ie._transform._rotation22*ie._invLocalInertia22,ie._invInertia00=ue,ie._invInertia01=fe,ie._invInertia02=de,ie._invInertia10=be,ie._invInertia11=pe,ie._invInertia12=me,ie._invInertia20=Ie,ie._invInertia21=ve,ie._invInertia22=Me,Ce=ie._invInertia00*ie._transform._rotation00+ie._invInertia01*ie._transform._rotation01+ie._invInertia02*ie._transform._rotation02,ye=ie._invInertia00*ie._transform._rotation10+ie._invInertia01*ie._transform._rotation11+ie._invInertia02*ie._transform._rotation12,we=ie._invInertia00*ie._transform._rotation20+ie._invInertia01*ie._transform._rotation21+ie._invInertia02*ie._transform._rotation22,Ae=ie._invInertia10*ie._transform._rotation00+ie._invInertia11*ie._transform._rotation01+ie._invInertia12*ie._transform._rotation02,xe=ie._invInertia10*ie._transform._rotation10+ie._invInertia11*ie._transform._rotation11+ie._invInertia12*ie._transform._rotation12,Ze=ie._invInertia10*ie._transform._rotation20+ie._invInertia11*ie._transform._rotation21+ie._invInertia12*ie._transform._rotation22,ze=ie._invInertia20*ie._transform._rotation00+ie._invInertia21*ie._transform._rotation01+ie._invInertia22*ie._transform._rotation02,Be=ie._invInertia20*ie._transform._rotation10+ie._invInertia21*ie._transform._rotation11+ie._invInertia22*ie._transform._rotation12,Ne=ie._invInertia20*ie._transform._rotation20+ie._invInertia21*ie._transform._rotation21+ie._invInertia22*ie._transform._rotation22,ie._invInertia00=Ce,ie._invInertia01=ye,ie._invInertia02=we,ie._invInertia10=Ae,ie._invInertia11=xe,ie._invInertia12=Ze,ie._invInertia20=ze,ie._invInertia21=Be,ie._invInertia22=Ne,ie._invInertia00*=ie._rotFactor.x,ie._invInertia01*=ie._rotFactor.x,ie._invInertia02*=ie._rotFactor.x,ie._invInertia10*=ie._rotFactor.y,ie._invInertia11*=ie._rotFactor.y,ie._invInertia12*=ie._rotFactor.y,ie._invInertia20*=ie._rotFactor.z,ie._invInertia21*=ie._rotFactor.z,ie._invInertia22*=ie._rotFactor.z}for(var Te=this.posBoundarySelector,Re=0;Te.indices[Re]!=C;)++Re;for(;0<Re;){var Fe=Te.indices[Re];Te.indices[Re]=Te.indices[Re-1],Te.indices[Re-1]=Fe,--Re}m=!0;break}}m||Oe.trace("could not find solution. (NGS)",{fileName:"Sources/oimo/dynamics/constraint/solver/direct/DirectJointConstraintSolver.hx",lineNumber:506,className:"oimo.dynamics.constraint.solver.direct.DirectJointConstraintSolver",methodName:"solvePositionNgs"})},postSolve:function(){this.joint._syncAnchors(),this.joint._checkDestruction()},__class__:Tn});var Rn=function(t){this._size=t;var e=new Array(this._size);this.tmpMatrix=e;var a=new Array(this._size);this._invMass=a;var i=new Array(this._size);this._invMassWithoutCfm=i;for(var n=0,s=this._size;n<s;){var r=n++,o=this.tmpMatrix,l=new Array(this._size);o[r]=l;var _=this._invMass,h=new Array(this._size);_[r]=h;var c=this._invMassWithoutCfm,g=new Array(this._size);c[r]=g;for(var u=0,f=this._size;u<f;){var d=u++;this.tmpMatrix[r][d]=0,this._invMass[r][d]=0,this._invMassWithoutCfm[r][d]=0}}this._maxSubmatrixId=1<<this._size;var b=new Array(this._maxSubmatrixId);this._cacheComputed=b;var p=new Array(this._maxSubmatrixId);this._cachedSubmatrices=p;for(var m=0,I=this._maxSubmatrixId;m<I;){for(var v=m++,M=v,C=M=(15&(M=(51&(M=(85&M)+(M>>1&85)))+(M>>2&51)))+(M>>4&15),y=new Array(C),w=0,A=C;w<A;){var x=w++,Z=new Array(C);y[x]=Z;for(var z=0,B=C;z<B;){var N=z++;y[x][N]=0}}this._cacheComputed[v]=!1,this._cachedSubmatrices[v]=y}};(i["oimo.dynamics.constraint.solver.direct.MassMatrix"]=Rn).__name__=!0,Rn.prototype={_size:null,_invMass:null,_invMassWithoutCfm:null,_cachedSubmatrices:null,_cacheComputed:null,_maxSubmatrixId:null,tmpMatrix:null,computeSubmatrix:function(t,e,a){for(var i=0,n=a;i<n;)for(var s=i++,r=e[s],o=0,l=a;o<l;){var _=o++;this.tmpMatrix[s][_]=this._invMass[r][e[_]]}var h,c,g,u,f,d=this.tmpMatrix,b=this._cachedSubmatrices[t];switch(a){case 4:h=d[0],c=b[0],f=1/h[0],c[0]=f,h[1]=h[1]*f,h[2]=h[2]*f,h[3]=h[3]*f,g=d[1],(u=b[1])[0]=-f*g[0],g[1]=g[1]-h[1]*g[0],g[2]=g[2]-h[2]*g[0],g[3]=g[3]-h[3]*g[0],g=d[2],(u=b[2])[0]=-f*g[0],g[1]=g[1]-h[1]*g[0],g[2]=g[2]-h[2]*g[0],g[3]=g[3]-h[3]*g[0],g=d[3],(u=b[3])[0]=-f*g[0],g[1]=g[1]-h[1]*g[0],g[2]=g[2]-h[2]*g[0],g[3]=g[3]-h[3]*g[0],h=d[1],c=b[1],f=1/h[1],c[1]=f,c[0]=c[0]*f,h[2]=h[2]*f,h[3]=h[3]*f,g=d[0],(u=b[0])[0]=u[0]-c[0]*g[1],g[2]=g[2]-h[2]*g[1],g[3]=g[3]-h[3]*g[1],g=d[2],(u=b[2])[0]=u[0]-c[0]*g[1],u[1]=-f*g[1],g[2]=g[2]-h[2]*g[1],g[3]=g[3]-h[3]*g[1],g=d[3],(u=b[3])[0]=u[0]-c[0]*g[1],u[1]=-f*g[1],g[2]=g[2]-h[2]*g[1],g[3]=g[3]-h[3]*g[1],h=d[2],c=b[2],f=1/h[2],c[2]=f,c[0]=c[0]*f,c[1]=c[1]*f,h[3]=h[3]*f,g=d[0],(u=b[0])[0]=u[0]-c[0]*g[2],g[3]=g[3]-h[3]*g[2],g=d[1],(u=b[1])[0]=u[0]-c[0]*g[2],u[1]=u[1]-c[1]*g[2],g[3]=g[3]-h[3]*g[2],g=d[3],(u=b[3])[0]=u[0]-c[0]*g[2],u[1]=u[1]-c[1]*g[2],u[2]=-f*g[2],g[3]=g[3]-h[3]*g[2],h=d[3],c=b[3],f=1/h[3],c[3]=f,c[0]=c[0]*f,c[1]=c[1]*f,c[2]=c[2]*f,g=d[0],(u=b[0])[0]=u[0]-c[0]*g[3],g=d[1],(u=b[1])[0]=u[0]-c[0]*g[3],u[1]=u[1]-c[1]*g[3],g=d[2],(u=b[2])[0]=u[0]-c[0]*g[3],u[1]=u[1]-c[1]*g[3],u[2]=u[2]-c[2]*g[3],c=b[1],b[0][1]=c[0],c=b[2],b[0][2]=c[0],b[1][2]=c[1],c=b[3],b[0][3]=c[0],b[1][3]=c[1],b[2][3]=c[2];break;case 5:h=d[0],c=b[0],f=1/h[0],c[0]=f,h[1]=h[1]*f,h[2]=h[2]*f,h[3]=h[3]*f,h[4]=h[4]*f,g=d[1],(u=b[1])[0]=-f*g[0],g[1]=g[1]-h[1]*g[0],g[2]=g[2]-h[2]*g[0],g[3]=g[3]-h[3]*g[0],g[4]=g[4]-h[4]*g[0],g=d[2],(u=b[2])[0]=-f*g[0],g[1]=g[1]-h[1]*g[0],g[2]=g[2]-h[2]*g[0],g[3]=g[3]-h[3]*g[0],g[4]=g[4]-h[4]*g[0],g=d[3],(u=b[3])[0]=-f*g[0],g[1]=g[1]-h[1]*g[0],g[2]=g[2]-h[2]*g[0],g[3]=g[3]-h[3]*g[0],g[4]=g[4]-h[4]*g[0],g=d[4],(u=b[4])[0]=-f*g[0],g[1]=g[1]-h[1]*g[0],g[2]=g[2]-h[2]*g[0],g[3]=g[3]-h[3]*g[0],g[4]=g[4]-h[4]*g[0],h=d[1],c=b[1],f=1/h[1],c[1]=f,c[0]=c[0]*f,h[2]=h[2]*f,h[3]=h[3]*f,h[4]=h[4]*f,g=d[0],(u=b[0])[0]=u[0]-c[0]*g[1],g[2]=g[2]-h[2]*g[1],g[3]=g[3]-h[3]*g[1],g[4]=g[4]-h[4]*g[1],g=d[2],(u=b[2])[0]=u[0]-c[0]*g[1],u[1]=-f*g[1],g[2]=g[2]-h[2]*g[1],g[3]=g[3]-h[3]*g[1],g[4]=g[4]-h[4]*g[1],g=d[3],(u=b[3])[0]=u[0]-c[0]*g[1],u[1]=-f*g[1],g[2]=g[2]-h[2]*g[1],g[3]=g[3]-h[3]*g[1],g[4]=g[4]-h[4]*g[1],g=d[4],(u=b[4])[0]=u[0]-c[0]*g[1],u[1]=-f*g[1],g[2]=g[2]-h[2]*g[1],g[3]=g[3]-h[3]*g[1],g[4]=g[4]-h[4]*g[1],h=d[2],c=b[2],f=1/h[2],c[2]=f,c[0]=c[0]*f,c[1]=c[1]*f,h[3]=h[3]*f,h[4]=h[4]*f,g=d[0],(u=b[0])[0]=u[0]-c[0]*g[2],g[3]=g[3]-h[3]*g[2],g[4]=g[4]-h[4]*g[2],g=d[1],(u=b[1])[0]=u[0]-c[0]*g[2],u[1]=u[1]-c[1]*g[2],g[3]=g[3]-h[3]*g[2],g[4]=g[4]-h[4]*g[2],g=d[3],(u=b[3])[0]=u[0]-c[0]*g[2],u[1]=u[1]-c[1]*g[2],u[2]=-f*g[2],g[3]=g[3]-h[3]*g[2],g[4]=g[4]-h[4]*g[2],g=d[4],(u=b[4])[0]=u[0]-c[0]*g[2],u[1]=u[1]-c[1]*g[2],u[2]=-f*g[2],g[3]=g[3]-h[3]*g[2],g[4]=g[4]-h[4]*g[2],h=d[3],c=b[3],f=1/h[3],c[3]=f,c[0]=c[0]*f,c[1]=c[1]*f,c[2]=c[2]*f,h[4]=h[4]*f,g=d[0],(u=b[0])[0]=u[0]-c[0]*g[3],g[4]=g[4]-h[4]*g[3],g=d[1],(u=b[1])[0]=u[0]-c[0]*g[3],u[1]=u[1]-c[1]*g[3],g[4]=g[4]-h[4]*g[3],g=d[2],(u=b[2])[0]=u[0]-c[0]*g[3],u[1]=u[1]-c[1]*g[3],u[2]=u[2]-c[2]*g[3],g[4]=g[4]-h[4]*g[3],g=d[4],(u=b[4])[0]=u[0]-c[0]*g[3],u[1]=u[1]-c[1]*g[3],u[2]=u[2]-c[2]*g[3],u[3]=-f*g[3],g[4]=g[4]-h[4]*g[3],h=d[4],c=b[4],f=1/h[4],c[4]=f,c[0]=c[0]*f,c[1]=c[1]*f,c[2]=c[2]*f,c[3]=c[3]*f,g=d[0],(u=b[0])[0]=u[0]-c[0]*g[4],g=d[1],(u=b[1])[0]=u[0]-c[0]*g[4],u[1]=u[1]-c[1]*g[4],g=d[2],(u=b[2])[0]=u[0]-c[0]*g[4],u[1]=u[1]-c[1]*g[4],u[2]=u[2]-c[2]*g[4],g=d[3],(u=b[3])[0]=u[0]-c[0]*g[4],u[1]=u[1]-c[1]*g[4],u[2]=u[2]-c[2]*g[4],u[3]=u[3]-c[3]*g[4],c=b[1],b[0][1]=c[0],c=b[2],b[0][2]=c[0],b[1][2]=c[1],c=b[3],b[0][3]=c[0],b[1][3]=c[1],b[2][3]=c[2],c=b[4],b[0][4]=c[0],b[1][4]=c[1],b[2][4]=c[2],b[3][4]=c[3];break;case 6:h=d[0],c=b[0],f=1/h[0],c[0]=f,h[1]=h[1]*f,h[2]=h[2]*f,h[3]=h[3]*f,h[4]=h[4]*f,h[5]=h[5]*f,g=d[1],(u=b[1])[0]=-f*g[0],g[1]=g[1]-h[1]*g[0],g[2]=g[2]-h[2]*g[0],g[3]=g[3]-h[3]*g[0],g[4]=g[4]-h[4]*g[0],g[5]=g[5]-h[5]*g[0],g=d[2],(u=b[2])[0]=-f*g[0],g[1]=g[1]-h[1]*g[0],g[2]=g[2]-h[2]*g[0],g[3]=g[3]-h[3]*g[0],g[4]=g[4]-h[4]*g[0],g[5]=g[5]-h[5]*g[0],g=d[3],(u=b[3])[0]=-f*g[0],g[1]=g[1]-h[1]*g[0],g[2]=g[2]-h[2]*g[0],g[3]=g[3]-h[3]*g[0],g[4]=g[4]-h[4]*g[0],g[5]=g[5]-h[5]*g[0],g=d[4],(u=b[4])[0]=-f*g[0],g[1]=g[1]-h[1]*g[0],g[2]=g[2]-h[2]*g[0],g[3]=g[3]-h[3]*g[0],g[4]=g[4]-h[4]*g[0],g[5]=g[5]-h[5]*g[0],g=d[5],(u=b[5])[0]=-f*g[0],g[1]=g[1]-h[1]*g[0],g[2]=g[2]-h[2]*g[0],g[3]=g[3]-h[3]*g[0],g[4]=g[4]-h[4]*g[0],g[5]=g[5]-h[5]*g[0],h=d[1],c=b[1],f=1/h[1],c[1]=f,c[0]=c[0]*f,h[2]=h[2]*f,h[3]=h[3]*f,h[4]=h[4]*f,h[5]=h[5]*f,g=d[0],(u=b[0])[0]=u[0]-c[0]*g[1],g[2]=g[2]-h[2]*g[1],g[3]=g[3]-h[3]*g[1],g[4]=g[4]-h[4]*g[1],g[5]=g[5]-h[5]*g[1],g=d[2],(u=b[2])[0]=u[0]-c[0]*g[1],u[1]=-f*g[1],g[2]=g[2]-h[2]*g[1],g[3]=g[3]-h[3]*g[1],g[4]=g[4]-h[4]*g[1],g[5]=g[5]-h[5]*g[1],g=d[3],(u=b[3])[0]=u[0]-c[0]*g[1],u[1]=-f*g[1],g[2]=g[2]-h[2]*g[1],g[3]=g[3]-h[3]*g[1],g[4]=g[4]-h[4]*g[1],g[5]=g[5]-h[5]*g[1],g=d[4],(u=b[4])[0]=u[0]-c[0]*g[1],u[1]=-f*g[1],g[2]=g[2]-h[2]*g[1],g[3]=g[3]-h[3]*g[1],g[4]=g[4]-h[4]*g[1],g[5]=g[5]-h[5]*g[1],g=d[5],(u=b[5])[0]=u[0]-c[0]*g[1],u[1]=-f*g[1],g[2]=g[2]-h[2]*g[1],g[3]=g[3]-h[3]*g[1],g[4]=g[4]-h[4]*g[1],g[5]=g[5]-h[5]*g[1],h=d[2],c=b[2],f=1/h[2],c[2]=f,c[0]=c[0]*f,c[1]=c[1]*f,h[3]=h[3]*f,h[4]=h[4]*f,h[5]=h[5]*f,g=d[0],(u=b[0])[0]=u[0]-c[0]*g[2],g[3]=g[3]-h[3]*g[2],g[4]=g[4]-h[4]*g[2],g[5]=g[5]-h[5]*g[2],g=d[1],(u=b[1])[0]=u[0]-c[0]*g[2],u[1]=u[1]-c[1]*g[2],g[3]=g[3]-h[3]*g[2],g[4]=g[4]-h[4]*g[2],g[5]=g[5]-h[5]*g[2],g=d[3],(u=b[3])[0]=u[0]-c[0]*g[2],u[1]=u[1]-c[1]*g[2],u[2]=-f*g[2],g[3]=g[3]-h[3]*g[2],g[4]=g[4]-h[4]*g[2],g[5]=g[5]-h[5]*g[2],g=d[4],(u=b[4])[0]=u[0]-c[0]*g[2],u[1]=u[1]-c[1]*g[2],u[2]=-f*g[2],g[3]=g[3]-h[3]*g[2],g[4]=g[4]-h[4]*g[2],g[5]=g[5]-h[5]*g[2],g=d[5],(u=b[5])[0]=u[0]-c[0]*g[2],u[1]=u[1]-c[1]*g[2],u[2]=-f*g[2],g[3]=g[3]-h[3]*g[2],g[4]=g[4]-h[4]*g[2],g[5]=g[5]-h[5]*g[2],h=d[3],c=b[3],f=1/h[3],c[3]=f,c[0]=c[0]*f,c[1]=c[1]*f,c[2]=c[2]*f,h[4]=h[4]*f,h[5]=h[5]*f,g=d[0],(u=b[0])[0]=u[0]-c[0]*g[3],g[4]=g[4]-h[4]*g[3],g[5]=g[5]-h[5]*g[3],g=d[1],(u=b[1])[0]=u[0]-c[0]*g[3],u[1]=u[1]-c[1]*g[3],g[4]=g[4]-h[4]*g[3],g[5]=g[5]-h[5]*g[3],g=d[2],(u=b[2])[0]=u[0]-c[0]*g[3],u[1]=u[1]-c[1]*g[3],u[2]=u[2]-c[2]*g[3],g[4]=g[4]-h[4]*g[3],g[5]=g[5]-h[5]*g[3],g=d[4],(u=b[4])[0]=u[0]-c[0]*g[3],u[1]=u[1]-c[1]*g[3],u[2]=u[2]-c[2]*g[3],u[3]=-f*g[3],g[4]=g[4]-h[4]*g[3],g[5]=g[5]-h[5]*g[3],g=d[5],(u=b[5])[0]=u[0]-c[0]*g[3],u[1]=u[1]-c[1]*g[3],u[2]=u[2]-c[2]*g[3],u[3]=-f*g[3],g[4]=g[4]-h[4]*g[3],g[5]=g[5]-h[5]*g[3],h=d[4],c=b[4],f=1/h[4],c[4]=f,c[0]=c[0]*f,c[1]=c[1]*f,c[2]=c[2]*f,c[3]=c[3]*f,h[5]=h[5]*f,g=d[0],(u=b[0])[0]=u[0]-c[0]*g[4],g[5]=g[5]-h[5]*g[4],g=d[1],(u=b[1])[0]=u[0]-c[0]*g[4],u[1]=u[1]-c[1]*g[4],g[5]=g[5]-h[5]*g[4],g=d[2],(u=b[2])[0]=u[0]-c[0]*g[4],u[1]=u[1]-c[1]*g[4],u[2]=u[2]-c[2]*g[4],g[5]=g[5]-h[5]*g[4],g=d[3],(u=b[3])[0]=u[0]-c[0]*g[4],u[1]=u[1]-c[1]*g[4],u[2]=u[2]-c[2]*g[4],u[3]=u[3]-c[3]*g[4],g[5]=g[5]-h[5]*g[4],g=d[5],(u=b[5])[0]=u[0]-c[0]*g[4],u[1]=u[1]-c[1]*g[4],u[2]=u[2]-c[2]*g[4],u[3]=u[3]-c[3]*g[4],u[4]=-f*g[4],g[5]=g[5]-h[5]*g[4],h=d[5],c=b[5],f=1/h[5],c[5]=f,c[0]=c[0]*f,c[1]=c[1]*f,c[2]=c[2]*f,c[3]=c[3]*f,c[4]=c[4]*f,g=d[0],(u=b[0])[0]=u[0]-c[0]*g[5],g=d[1],(u=b[1])[0]=u[0]-c[0]*g[5],u[1]=u[1]-c[1]*g[5],g=d[2],(u=b[2])[0]=u[0]-c[0]*g[5],u[1]=u[1]-c[1]*g[5],u[2]=u[2]-c[2]*g[5],g=d[3],(u=b[3])[0]=u[0]-c[0]*g[5],u[1]=u[1]-c[1]*g[5],u[2]=u[2]-c[2]*g[5],u[3]=u[3]-c[3]*g[5],g=d[4],(u=b[4])[0]=u[0]-c[0]*g[5],u[1]=u[1]-c[1]*g[5],u[2]=u[2]-c[2]*g[5],u[3]=u[3]-c[3]*g[5],u[4]=u[4]-c[4]*g[5],c=b[1],b[0][1]=c[0],c=b[2],b[0][2]=c[0],b[1][2]=c[1],c=b[3],b[0][3]=c[0],b[1][3]=c[1],b[2][3]=c[2],c=b[4],b[0][4]=c[0],b[1][4]=c[1],b[2][4]=c[2],b[3][4]=c[3],c=b[5],b[0][5]=c[0],b[1][5]=c[1],b[2][5]=c[2],b[3][5]=c[3],b[4][5]=c[4];break;default:for(var p=0,m=a;p<m;){var I=p++;h=d[I],c=b[I];var v=1/h[I];c[I]=v;for(var M=0,C=I;M<C;){var y=M++;c[y]=c[y]*v}for(var w=I+1,A=a;w<A;){var x=w++;h[x]=h[x]*v}for(var Z=0,z=I;Z<z;){var B=Z++;g=d[B],u=b[B];for(var N=0,G=B+1;N<G;){var k=N++;u[k]=u[k]-c[k]*g[I]}for(var S=I+1,W=a;S<W;){var X=S++;g[X]=g[X]-h[X]*g[I]}}for(var Y=I+1,D=a;Y<D;){var K=Y++;g=d[K],u=b[K];for(var L=0,V=I;L<V;){var H=L++;u[H]=u[H]-c[H]*g[I]}u[I]=-v*g[I];for(var j=I+1,T=a;j<T;){var R=j++;g[R]=g[R]-h[R]*g[I]}}}for(var F=1,O=a;F<O;){var P=F++;c=b[P];for(var J=0,E=P;J<E;){var U=J++;b[U][P]=c[U]}}}},computeInvMass:function(t,e){var a,i,n,s,r,o,l,_,h,c,g,u,f,d,b,p,m,I,v=this._invMass,M=this._invMassWithoutCfm,C=t.numRows,y=t.b1,w=t.b2,A=y._invMass,x=w._invMass;a=y._invInertia00,i=y._invInertia01,n=y._invInertia02,s=y._invInertia10,r=y._invInertia11,o=y._invInertia12,l=y._invInertia20,_=y._invInertia21,h=y._invInertia22,c=w._invInertia00,g=w._invInertia01,u=w._invInertia02,f=w._invInertia10,d=w._invInertia11,b=w._invInertia12,p=w._invInertia20,m=w._invInertia21,I=w._invInertia22;for(var Z=0,z=C;Z<z;){var B,N,G,k,S,W,X=Z++,Y=t.rows[X].jacobian,D=e[X];if(Y.updateSparsity(),0!=(1&Y.flag)?(D.invMLin1X=Y.lin1X*A,D.invMLin1Y=Y.lin1Y*A,D.invMLin1Z=Y.lin1Z*A,D.invMLin2X=Y.lin2X*x,D.invMLin2Y=Y.lin2Y*x,D.invMLin2Z=Y.lin2Z*x):(D.invMLin1X=0,D.invMLin1Y=0,D.invMLin1Z=0,D.invMLin2X=0,D.invMLin2Y=0,D.invMLin2Z=0),0!=(2&Y.flag))B=a*Y.ang1X+i*Y.ang1Y+n*Y.ang1Z,N=s*Y.ang1X+r*Y.ang1Y+o*Y.ang1Z,G=l*Y.ang1X+_*Y.ang1Y+h*Y.ang1Z,D.invMAng1X=B,D.invMAng1Y=N,D.invMAng1Z=G,k=c*Y.ang2X+g*Y.ang2Y+u*Y.ang2Z,S=f*Y.ang2X+d*Y.ang2Y+b*Y.ang2Z,W=p*Y.ang2X+m*Y.ang2Y+I*Y.ang2Z,D.invMAng2X=k,D.invMAng2Y=S,D.invMAng2Z=W;else D.invMAng1X=0,D.invMAng1Y=0,D.invMAng1Z=0,D.invMAng2X=0,D.invMAng2Y=0,D.invMAng2Z=0}for(var K=0,L=C;K<L;)for(var V=K++,H=t.rows[V].jacobian,j=V,T=C;j<T;){var R=j++,F=(t.rows[R].jacobian,e[R]),O=H.lin1X*F.invMLin1X+H.lin1Y*F.invMLin1Y+H.lin1Z*F.invMLin1Z+(H.ang1X*F.invMAng1X+H.ang1Y*F.invMAng1Y+H.ang1Z*F.invMAng1Z)+(H.lin2X*F.invMLin2X+H.lin2Y*F.invMLin2Y+H.lin2Z*F.invMLin2Z)+(H.ang2X*F.invMAng2X+H.ang2Y*F.invMAng2Y+H.ang2Z*F.invMAng2Z);V==R?(v[V][R]=O+t.rows[V].cfm,M[V][R]=O,F.mass=O+t.rows[V].cfm,F.massWithoutCfm=O,0!=F.mass&&(F.mass=1/F.mass),0!=F.massWithoutCfm&&(F.massWithoutCfm=1/F.massWithoutCfm)):(v[V][R]=O,v[R][V]=O,M[V][R]=O,M[R][V]=O)}for(var P=0,J=this._maxSubmatrixId;P<J;){var E=P++;this._cacheComputed[E]=!1}},__class__:Rn};var Fn=function(t){vn.call(this),this.constraint=t,this.info=new Bn;var e=new Array(wn.maxManifoldPoints);this.massData=e;for(var a=0,i=this.massData.length;a<i;){var n=a++;this.massData[n]=new Dn}};(i["oimo.dynamics.constraint.solver.pgs.PgsContactConstraintSolver"]=Fn).__name__=!0,Fn.__super__=vn,Fn.prototype=s(vn.prototype,{constraint:null,info:null,massData:null,preSolveVelocity:function(t){this.constraint._getVelocitySolverInfo(t,this.info),this._b1=this.info.b1,this._b2=this.info.b2;var e,a,i,n,s,r,o,l,_,h,c,g,u,f,d,b,p,m,I=this._b1._invMass,v=this._b2._invMass;e=this._b1._invInertia00,a=this._b1._invInertia01,i=this._b1._invInertia02,n=this._b1._invInertia10,s=this._b1._invInertia11,r=this._b1._invInertia12,o=this._b1._invInertia20,l=this._b1._invInertia21,_=this._b1._invInertia22,h=this._b2._invInertia00,c=this._b2._invInertia01,g=this._b2._invInertia02,u=this._b2._invInertia10,f=this._b2._invInertia11,d=this._b2._invInertia12,b=this._b2._invInertia20,p=this._b2._invInertia21,m=this._b2._invInertia22;for(var M=0,C=this.info.numRows;M<C;){var y,w,A,x,Z,z,B=M++,N=this.info.rows[B],G=this.massData[B],k=N.jacobianN;G.invMLinN1X=k.lin1X*I,G.invMLinN1Y=k.lin1Y*I,G.invMLinN1Z=k.lin1Z*I,G.invMLinN2X=k.lin2X*v,G.invMLinN2Y=k.lin2Y*v,G.invMLinN2Z=k.lin2Z*v,y=e*k.ang1X+a*k.ang1Y+i*k.ang1Z,w=n*k.ang1X+s*k.ang1Y+r*k.ang1Z,A=o*k.ang1X+l*k.ang1Y+_*k.ang1Z,G.invMAngN1X=y,G.invMAngN1Y=w,G.invMAngN1Z=A,x=h*k.ang2X+c*k.ang2Y+g*k.ang2Z,Z=u*k.ang2X+f*k.ang2Y+d*k.ang2Z,z=b*k.ang2X+p*k.ang2Y+m*k.ang2Z,G.invMAngN2X=x,G.invMAngN2Y=Z,G.invMAngN2Z=z,G.massN=I+v+(G.invMAngN1X*k.ang1X+G.invMAngN1Y*k.ang1Y+G.invMAngN1Z*k.ang1Z)+(G.invMAngN2X*k.ang2X+G.invMAngN2Y*k.ang2Y+G.invMAngN2Z*k.ang2Z),0!=G.massN&&(G.massN=1/G.massN);var S,W,X,Y,D,K,L,V,H,j,T,R,F=N.jacobianT,O=N.jacobianB;G.invMLinT1X=F.lin1X*I,G.invMLinT1Y=F.lin1Y*I,G.invMLinT1Z=F.lin1Z*I,G.invMLinT2X=F.lin2X*v,G.invMLinT2Y=F.lin2Y*v,G.invMLinT2Z=F.lin2Z*v,G.invMLinB1X=O.lin1X*I,G.invMLinB1Y=O.lin1Y*I,G.invMLinB1Z=O.lin1Z*I,G.invMLinB2X=O.lin2X*v,G.invMLinB2Y=O.lin2Y*v,G.invMLinB2Z=O.lin2Z*v,S=e*F.ang1X+a*F.ang1Y+i*F.ang1Z,W=n*F.ang1X+s*F.ang1Y+r*F.ang1Z,X=o*F.ang1X+l*F.ang1Y+_*F.ang1Z,G.invMAngT1X=S,G.invMAngT1Y=W,G.invMAngT1Z=X,Y=h*F.ang2X+c*F.ang2Y+g*F.ang2Z,D=u*F.ang2X+f*F.ang2Y+d*F.ang2Z,K=b*F.ang2X+p*F.ang2Y+m*F.ang2Z,G.invMAngT2X=Y,G.invMAngT2Y=D,G.invMAngT2Z=K,L=e*O.ang1X+a*O.ang1Y+i*O.ang1Z,V=n*O.ang1X+s*O.ang1Y+r*O.ang1Z,H=o*O.ang1X+l*O.ang1Y+_*O.ang1Z,G.invMAngB1X=L,G.invMAngB1Y=V,G.invMAngB1Z=H,j=h*O.ang2X+c*O.ang2Y+g*O.ang2Z,T=u*O.ang2X+f*O.ang2Y+d*O.ang2Z,R=b*O.ang2X+p*O.ang2Y+m*O.ang2Z,G.invMAngB2X=j,G.invMAngB2Y=T,G.invMAngB2Z=R;var P=I+v+(G.invMAngT1X*F.ang1X+G.invMAngT1Y*F.ang1Y+G.invMAngT1Z*F.ang1Z)+(G.invMAngT2X*F.ang2X+G.invMAngT2Y*F.ang2Y+G.invMAngT2Z*F.ang2Z),J=G.invMAngT1X*O.ang1X+G.invMAngT1Y*O.ang1Y+G.invMAngT1Z*O.ang1Z+(G.invMAngT2X*O.ang2X+G.invMAngT2Y*O.ang2Y+G.invMAngT2Z*O.ang2Z),E=J,U=I+v+(G.invMAngB1X*O.ang1X+G.invMAngB1Y*O.ang1Y+G.invMAngB1Z*O.ang1Z)+(G.invMAngB2X*O.ang2X+G.invMAngB2Y*O.ang2Y+G.invMAngB2Z*O.ang2Z),Q=P*U-J*E;0!=Q&&(Q=1/Q),G.massTB00=U*Q,G.massTB01=-J*Q,G.massTB10=-E*Q,G.massTB11=P*Q}},warmStart:function(t){var e,a,i,n,s,r,o,l,_,h,c,g;e=this._b1._velX,a=this._b1._velY,i=this._b1._velZ,n=this._b2._velX,s=this._b2._velY,r=this._b2._velZ,o=this._b1._angVelX,l=this._b1._angVelY,_=this._b1._angVelZ,h=this._b2._angVelX,c=this._b2._angVelY,g=this._b2._angVelZ;for(var u=0,f=this.info.numRows;u<f;){var d=u++,b=this.info.rows[d],p=b.impulse,m=this.massData[d],I=b.jacobianT,v=b.jacobianB,M=p.impulseN,C=p.impulseLX*I.lin1X+p.impulseLY*I.lin1Y+p.impulseLZ*I.lin1Z,y=p.impulseLX*v.lin1X+p.impulseLY*v.lin1Y+p.impulseLZ*v.lin1Z;p.impulseT=C,p.impulseB=y,p.impulseN*=t.dtRatio,p.impulseT*=t.dtRatio,p.impulseB*=t.dtRatio,e+=m.invMLinN1X*M,a+=m.invMLinN1Y*M,i+=m.invMLinN1Z*M,e+=m.invMLinT1X*C,a+=m.invMLinT1Y*C,i+=m.invMLinT1Z*C,e+=m.invMLinB1X*y,a+=m.invMLinB1Y*y,i+=m.invMLinB1Z*y,n+=m.invMLinN2X*-M,s+=m.invMLinN2Y*-M,r+=m.invMLinN2Z*-M,n+=m.invMLinT2X*-C,s+=m.invMLinT2Y*-C,r+=m.invMLinT2Z*-C,n+=m.invMLinB2X*-y,s+=m.invMLinB2Y*-y,r+=m.invMLinB2Z*-y,o+=m.invMAngN1X*M,l+=m.invMAngN1Y*M,_+=m.invMAngN1Z*M,o+=m.invMAngT1X*C,l+=m.invMAngT1Y*C,_+=m.invMAngT1Z*C,o+=m.invMAngB1X*y,l+=m.invMAngB1Y*y,_+=m.invMAngB1Z*y,h+=m.invMAngN2X*-M,c+=m.invMAngN2Y*-M,g+=m.invMAngN2Z*-M,h+=m.invMAngT2X*-C,c+=m.invMAngT2Y*-C,g+=m.invMAngT2Z*-C,h+=m.invMAngB2X*-y,c+=m.invMAngB2Y*-y,g+=m.invMAngB2Z*-y}this._b1._velX=e,this._b1._velY=a,this._b1._velZ=i,this._b2._velX=n,this._b2._velY=s,this._b2._velZ=r,this._b1._angVelX=o,this._b1._angVelY=l,this._b1._angVelZ=_,this._b2._angVelX=h,this._b2._angVelY=c,this._b2._angVelZ=g},solveVelocity:function(){var t,e,a,i,n,s,r,o,l,_,h,c;t=this._b1._velX,e=this._b1._velY,a=this._b1._velZ,i=this._b2._velX,n=this._b2._velY,s=this._b2._velZ,r=this._b1._angVelX,o=this._b1._angVelY,l=this._b1._angVelZ,_=this._b2._angVelX,h=this._b2._angVelY,c=this._b2._angVelZ;for(var g=0,u=this.info.numRows;g<u;){var f=g++,d=this.info.rows[f],b=this.massData[f],p=d.impulse,m=0,I=d.jacobianT;m+=t*I.lin1X+e*I.lin1Y+a*I.lin1Z,m-=i*I.lin2X+n*I.lin2Y+s*I.lin2Z,m+=r*I.ang1X+o*I.ang1Y+l*I.ang1Z,m-=_*I.ang2X+h*I.ang2Y+c*I.ang2Z;var v=0;v+=t*(I=d.jacobianB).lin1X+e*I.lin1Y+a*I.lin1Z,v-=i*I.lin2X+n*I.lin2Y+s*I.lin2Z,v+=r*I.ang1X+o*I.ang1Y+l*I.ang1Z,v-=_*I.ang2X+h*I.ang2Y+c*I.ang2Z;var M=-(m*b.massTB00+v*b.massTB01),C=-(m*b.massTB10+v*b.massTB11),y=p.impulseT,w=p.impulseB;p.impulseT+=M,p.impulseB+=C;var A=d.friction*p.impulseN;if(0==A)p.impulseT=0,p.impulseB=0;else{var x=p.impulseT*p.impulseT+p.impulseB*p.impulseB;if(A*A<x){var Z=A/Math.sqrt(x);p.impulseT*=Z,p.impulseB*=Z}}M=p.impulseT-y,C=p.impulseB-w,t+=b.invMLinT1X*M,e+=b.invMLinT1Y*M,a+=b.invMLinT1Z*M,t+=b.invMLinB1X*C,e+=b.invMLinB1Y*C,a+=b.invMLinB1Z*C,i+=b.invMLinT2X*-M,n+=b.invMLinT2Y*-M,s+=b.invMLinT2Z*-M,i+=b.invMLinB2X*-C,n+=b.invMLinB2Y*-C,s+=b.invMLinB2Z*-C,r+=b.invMAngT1X*M,o+=b.invMAngT1Y*M,l+=b.invMAngT1Z*M,r+=b.invMAngB1X*C,o+=b.invMAngB1Y*C,l+=b.invMAngB1Z*C,_+=b.invMAngT2X*-M,h+=b.invMAngT2Y*-M,c+=b.invMAngT2Z*-M,_+=b.invMAngB2X*-C,h+=b.invMAngB2Y*-C,c+=b.invMAngB2Z*-C}for(var z=0,B=this.info.numRows;z<B;){var N=z++,G=this.info.rows[N],k=this.massData[N],S=G.impulse,W=0,X=G.jacobianN;W+=t*X.lin1X+e*X.lin1Y+a*X.lin1Z,W-=i*X.lin2X+n*X.lin2Y+s*X.lin2Z,W+=r*X.ang1X+o*X.ang1Y+l*X.ang1Z,W-=_*X.ang2X+h*X.ang2Y+c*X.ang2Z;var Y=(G.rhs-W)*k.massN,D=S.impulseN;S.impulseN+=Y,S.impulseN<0&&(S.impulseN=0),Y=S.impulseN-D,t+=k.invMLinN1X*Y,e+=k.invMLinN1Y*Y,a+=k.invMLinN1Z*Y,i+=k.invMLinN2X*-Y,n+=k.invMLinN2Y*-Y,s+=k.invMLinN2Z*-Y,r+=k.invMAngN1X*Y,o+=k.invMAngN1Y*Y,l+=k.invMAngN1Z*Y,_+=k.invMAngN2X*-Y,h+=k.invMAngN2Y*-Y,c+=k.invMAngN2Z*-Y}this._b1._velX=t,this._b1._velY=e,this._b1._velZ=a,this._b2._velX=i,this._b2._velY=n,this._b2._velZ=s,this._b1._angVelX=r,this._b1._angVelY=o,this._b1._angVelZ=l,this._b2._angVelX=_,this._b2._angVelY=h,this._b2._angVelZ=c},preSolvePosition:function(t){this.constraint._syncManifold(),this.constraint._getPositionSolverInfo(this.info);var e,a,i,n,s,r,o,l,_,h,c,g,u,f,d,b,p,m,I=this._b1._invMass,v=this._b2._invMass;e=this._b1._invInertia00,a=this._b1._invInertia01,i=this._b1._invInertia02,n=this._b1._invInertia10,s=this._b1._invInertia11,r=this._b1._invInertia12,o=this._b1._invInertia20,l=this._b1._invInertia21,_=this._b1._invInertia22,h=this._b2._invInertia00,c=this._b2._invInertia01,g=this._b2._invInertia02,u=this._b2._invInertia10,f=this._b2._invInertia11,d=this._b2._invInertia12,b=this._b2._invInertia20,p=this._b2._invInertia21,m=this._b2._invInertia22;for(var M=0,C=this.info.numRows;M<C;){var y,w,A,x,Z,z,B=M++,N=this.info.rows[B],G=this.massData[B],k=N.jacobianN;G.invMLinN1X=k.lin1X*I,G.invMLinN1Y=k.lin1Y*I,G.invMLinN1Z=k.lin1Z*I,G.invMLinN2X=k.lin2X*v,G.invMLinN2Y=k.lin2Y*v,G.invMLinN2Z=k.lin2Z*v,y=e*k.ang1X+a*k.ang1Y+i*k.ang1Z,w=n*k.ang1X+s*k.ang1Y+r*k.ang1Z,A=o*k.ang1X+l*k.ang1Y+_*k.ang1Z,G.invMAngN1X=y,G.invMAngN1Y=w,G.invMAngN1Z=A,x=h*k.ang2X+c*k.ang2Y+g*k.ang2Z,Z=u*k.ang2X+f*k.ang2Y+d*k.ang2Z,z=b*k.ang2X+p*k.ang2Y+m*k.ang2Z,G.invMAngN2X=x,G.invMAngN2Y=Z,G.invMAngN2Z=z,G.massN=I+v+(G.invMAngN1X*k.ang1X+G.invMAngN1Y*k.ang1Y+G.invMAngN1Z*k.ang1Z)+(G.invMAngN2X*k.ang2X+G.invMAngN2Y*k.ang2Y+G.invMAngN2Z*k.ang2Z),0!=G.massN&&(G.massN=1/G.massN)}for(var S=0,W=this.info.numRows;S<W;){var X=S++;this.info.rows[X].impulse.impulseP=0}},solvePositionSplitImpulse:function(){var t,e,a,i,n,s,r,o,l,_,h,c;t=this._b1._pseudoVelX,e=this._b1._pseudoVelY,a=this._b1._pseudoVelZ,i=this._b2._pseudoVelX,n=this._b2._pseudoVelY,s=this._b2._pseudoVelZ,r=this._b1._angPseudoVelX,o=this._b1._angPseudoVelY,l=this._b1._angPseudoVelZ,_=this._b2._angPseudoVelX,h=this._b2._angPseudoVelY,c=this._b2._angPseudoVelZ;for(var g=0,u=this.info.numRows;g<u;){var f=g++,d=this.info.rows[f],b=this.massData[f],p=d.impulse,m=d.jacobianN,I=0;I+=t*m.lin1X+e*m.lin1Y+a*m.lin1Z,I-=i*m.lin2X+n*m.lin2Y+s*m.lin2Z,I+=r*m.ang1X+o*m.ang1Y+l*m.ang1Z,I-=_*m.ang2X+h*m.ang2Y+c*m.ang2Z;var v=(d.rhs-I)*b.massN*wn.positionSplitImpulseBaumgarte,M=p.impulseP;p.impulseP+=v,p.impulseP<0&&(p.impulseP=0),v=p.impulseP-M,t+=b.invMLinN1X*v,e+=b.invMLinN1Y*v,a+=b.invMLinN1Z*v,i+=b.invMLinN2X*-v,n+=b.invMLinN2Y*-v,s+=b.invMLinN2Z*-v,r+=b.invMAngN1X*v,o+=b.invMAngN1Y*v,l+=b.invMAngN1Z*v,_+=b.invMAngN2X*-v,h+=b.invMAngN2Y*-v,c+=b.invMAngN2Z*-v}this._b1._pseudoVelX=t,this._b1._pseudoVelY=e,this._b1._pseudoVelZ=a,this._b2._pseudoVelX=i,this._b2._pseudoVelY=n,this._b2._pseudoVelZ=s,this._b1._angPseudoVelX=r,this._b1._angPseudoVelY=o,this._b1._angPseudoVelZ=l,this._b2._angPseudoVelX=_,this._b2._angPseudoVelY=h,this._b2._angPseudoVelZ=c},solvePositionNgs:function(t){this.constraint._syncManifold(),this.constraint._getPositionSolverInfo(this.info);var e,a,i,n,s,r,o,l,_,h,c,g,u,f,d,b,p,m,I=this._b1._invMass,v=this._b2._invMass;e=this._b1._invInertia00,a=this._b1._invInertia01,i=this._b1._invInertia02,n=this._b1._invInertia10,s=this._b1._invInertia11,r=this._b1._invInertia12,o=this._b1._invInertia20,l=this._b1._invInertia21,_=this._b1._invInertia22,h=this._b2._invInertia00,c=this._b2._invInertia01,g=this._b2._invInertia02,u=this._b2._invInertia10,f=this._b2._invInertia11,d=this._b2._invInertia12,b=this._b2._invInertia20,p=this._b2._invInertia21,m=this._b2._invInertia22;for(var M,C,y,w,A,x,Z,z,B,N,G,k,S=0,W=this.info.numRows;S<W;){var X,Y,D,K,L,V,H=S++,j=this.info.rows[H],T=this.massData[H],R=j.jacobianN;T.invMLinN1X=R.lin1X*I,T.invMLinN1Y=R.lin1Y*I,T.invMLinN1Z=R.lin1Z*I,T.invMLinN2X=R.lin2X*v,T.invMLinN2Y=R.lin2Y*v,T.invMLinN2Z=R.lin2Z*v,X=e*R.ang1X+a*R.ang1Y+i*R.ang1Z,Y=n*R.ang1X+s*R.ang1Y+r*R.ang1Z,D=o*R.ang1X+l*R.ang1Y+_*R.ang1Z,T.invMAngN1X=X,T.invMAngN1Y=Y,T.invMAngN1Z=D,K=h*R.ang2X+c*R.ang2Y+g*R.ang2Z,L=u*R.ang2X+f*R.ang2Y+d*R.ang2Z,V=b*R.ang2X+p*R.ang2Y+m*R.ang2Z,T.invMAngN2X=K,T.invMAngN2Y=L,T.invMAngN2Z=V,T.massN=I+v+(T.invMAngN1X*R.ang1X+T.invMAngN1Y*R.ang1Y+T.invMAngN1Z*R.ang1Z)+(T.invMAngN2X*R.ang2X+T.invMAngN2Y*R.ang2Y+T.invMAngN2Z*R.ang2Z),0!=T.massN&&(T.massN=1/T.massN)}for(var F=k=G=N=B=z=Z=x=A=w=y=C=M=0,O=this.info.numRows;F<O;){var P=F++,J=this.info.rows[P],E=this.massData[P],U=J.impulse,Q=J.jacobianN,q=0;q+=M*Q.lin1X+C*Q.lin1Y+y*Q.lin1Z,q-=w*Q.lin2X+A*Q.lin2Y+x*Q.lin2Z,q+=Z*Q.ang1X+z*Q.ang1Y+B*Q.ang1Z,q-=N*Q.ang2X+G*Q.ang2Y+k*Q.ang2Z;var $=(J.rhs-q)*E.massN*wn.positionNgsBaumgarte,tt=U.impulseP;U.impulseP+=$,U.impulseP<0&&(U.impulseP=0),$=U.impulseP-tt,M+=E.invMLinN1X*$,C+=E.invMLinN1Y*$,y+=E.invMLinN1Z*$,w+=E.invMLinN2X*-$,A+=E.invMLinN2Y*-$,x+=E.invMLinN2Z*-$,Z+=E.invMAngN1X*$,z+=E.invMAngN1Y*$,B+=E.invMAngN1Z*$,N+=E.invMAngN2X*-$,G+=E.invMAngN2Y*-$,k+=E.invMAngN2Z*-$}var et=this._b1;et._transform._positionX+=M,et._transform._positionY+=C,et._transform._positionZ+=y;var at=this._b2;at._transform._positionX+=w,at._transform._positionY+=A,at._transform._positionZ+=x;var it,nt,st,rt,ot,lt,_t,ht,ct,gt,ut=this._b1,ft=Math.sqrt(Z*Z+z*z+B*B),dt=.5*ft;if(dt<.5){var bt=dt*dt;it=.5*(1-.16666666666666666*bt+bt*bt*.008333333333333333),nt=1-.5*bt+bt*bt*.041666666666666664}else it=Math.sin(dt)/ft,nt=Math.cos(dt);st=Z*it,rt=z*it,ot=B*it,lt=nt;var pt,mt=ut._transform._rotation00,It=ut._transform._rotation11,vt=ut._transform._rotation22,Mt=mt+It+vt;0<Mt?(gt=.5*(pt=Math.sqrt(Mt+1)),pt=.5/pt,_t=(ut._transform._rotation21-ut._transform._rotation12)*pt,ht=(ut._transform._rotation02-ut._transform._rotation20)*pt,ct=(ut._transform._rotation10-ut._transform._rotation01)*pt):It<mt?vt<mt?(_t=.5*(pt=Math.sqrt(mt-It-vt+1)),pt=.5/pt,ht=(ut._transform._rotation01+ut._transform._rotation10)*pt,ct=(ut._transform._rotation02+ut._transform._rotation20)*pt,gt=(ut._transform._rotation21-ut._transform._rotation12)*pt):(ct=.5*(pt=Math.sqrt(vt-mt-It+1)),pt=.5/pt,_t=(ut._transform._rotation02+ut._transform._rotation20)*pt,ht=(ut._transform._rotation12+ut._transform._rotation21)*pt,gt=(ut._transform._rotation10-ut._transform._rotation01)*pt):vt<It?(ht=.5*(pt=Math.sqrt(It-vt-mt+1)),pt=.5/pt,_t=(ut._transform._rotation01+ut._transform._rotation10)*pt,ct=(ut._transform._rotation12+ut._transform._rotation21)*pt,gt=(ut._transform._rotation02-ut._transform._rotation20)*pt):(ct=.5*(pt=Math.sqrt(vt-mt-It+1)),pt=.5/pt,_t=(ut._transform._rotation02+ut._transform._rotation20)*pt,ht=(ut._transform._rotation12+ut._transform._rotation21)*pt,gt=(ut._transform._rotation10-ut._transform._rotation01)*pt);var Ct=(_t=lt*_t+st*gt+rt*ct-ot*ht)*_t+(ht=lt*ht-st*ct+rt*gt+ot*_t)*ht+(ct=lt*ct+st*ht-rt*_t+ot*gt)*ct+(gt=lt*gt-st*_t-rt*ht-ot*ct)*gt;1e-32<Ct&&(Ct=1/Math.sqrt(Ct));_t*=Ct,ht*=Ct,ct*=Ct,gt*=Ct;var yt,wt,At,xt,Zt,zt,Bt,Nt,Gt,kt,St,Wt,Xt,Yt,Dt,Kt,Lt,Vt,Ht=2*_t,jt=2*ht,Tt=2*ct,Rt=_t*Ht,Ft=ht*jt,Ot=ct*Tt,Pt=_t*jt,Jt=ht*Tt,Et=_t*Tt,Ut=gt*Ht,Qt=gt*jt,qt=gt*Tt;ut._transform._rotation00=1-Ft-Ot,ut._transform._rotation01=Pt-qt,ut._transform._rotation02=Et+Qt,ut._transform._rotation10=Pt+qt,ut._transform._rotation11=1-Rt-Ot,ut._transform._rotation12=Jt-Ut,ut._transform._rotation20=Et-Qt,ut._transform._rotation21=Jt+Ut,ut._transform._rotation22=1-Rt-Ft,yt=ut._transform._rotation00*ut._invLocalInertia00+ut._transform._rotation01*ut._invLocalInertia10+ut._transform._rotation02*ut._invLocalInertia20,wt=ut._transform._rotation00*ut._invLocalInertia01+ut._transform._rotation01*ut._invLocalInertia11+ut._transform._rotation02*ut._invLocalInertia21,At=ut._transform._rotation00*ut._invLocalInertia02+ut._transform._rotation01*ut._invLocalInertia12+ut._transform._rotation02*ut._invLocalInertia22,xt=ut._transform._rotation10*ut._invLocalInertia00+ut._transform._rotation11*ut._invLocalInertia10+ut._transform._rotation12*ut._invLocalInertia20,Zt=ut._transform._rotation10*ut._invLocalInertia01+ut._transform._rotation11*ut._invLocalInertia11+ut._transform._rotation12*ut._invLocalInertia21,zt=ut._transform._rotation10*ut._invLocalInertia02+ut._transform._rotation11*ut._invLocalInertia12+ut._transform._rotation12*ut._invLocalInertia22,Bt=ut._transform._rotation20*ut._invLocalInertia00+ut._transform._rotation21*ut._invLocalInertia10+ut._transform._rotation22*ut._invLocalInertia20,Nt=ut._transform._rotation20*ut._invLocalInertia01+ut._transform._rotation21*ut._invLocalInertia11+ut._transform._rotation22*ut._invLocalInertia21,Gt=ut._transform._rotation20*ut._invLocalInertia02+ut._transform._rotation21*ut._invLocalInertia12+ut._transform._rotation22*ut._invLocalInertia22,ut._invInertia00=yt,ut._invInertia01=wt,ut._invInertia02=At,ut._invInertia10=xt,ut._invInertia11=Zt,ut._invInertia12=zt,ut._invInertia20=Bt,ut._invInertia21=Nt,ut._invInertia22=Gt,kt=ut._invInertia00*ut._transform._rotation00+ut._invInertia01*ut._transform._rotation01+ut._invInertia02*ut._transform._rotation02,St=ut._invInertia00*ut._transform._rotation10+ut._invInertia01*ut._transform._rotation11+ut._invInertia02*ut._transform._rotation12,Wt=ut._invInertia00*ut._transform._rotation20+ut._invInertia01*ut._transform._rotation21+ut._invInertia02*ut._transform._rotation22,Xt=ut._invInertia10*ut._transform._rotation00+ut._invInertia11*ut._transform._rotation01+ut._invInertia12*ut._transform._rotation02,Yt=ut._invInertia10*ut._transform._rotation10+ut._invInertia11*ut._transform._rotation11+ut._invInertia12*ut._transform._rotation12,Dt=ut._invInertia10*ut._transform._rotation20+ut._invInertia11*ut._transform._rotation21+ut._invInertia12*ut._transform._rotation22,Kt=ut._invInertia20*ut._transform._rotation00+ut._invInertia21*ut._transform._rotation01+ut._invInertia22*ut._transform._rotation02,Lt=ut._invInertia20*ut._transform._rotation10+ut._invInertia21*ut._transform._rotation11+ut._invInertia22*ut._transform._rotation12,Vt=ut._invInertia20*ut._transform._rotation20+ut._invInertia21*ut._transform._rotation21+ut._invInertia22*ut._transform._rotation22,ut._invInertia00=kt,ut._invInertia01=St,ut._invInertia02=Wt,ut._invInertia10=Xt,ut._invInertia11=Yt,ut._invInertia12=Dt,ut._invInertia20=Kt,ut._invInertia21=Lt,ut._invInertia22=Vt,ut._invInertia00*=ut._rotFactor.x,ut._invInertia01*=ut._rotFactor.x,ut._invInertia02*=ut._rotFactor.x,ut._invInertia10*=ut._rotFactor.y,ut._invInertia11*=ut._rotFactor.y,ut._invInertia12*=ut._rotFactor.y,ut._invInertia20*=ut._rotFactor.z,ut._invInertia21*=ut._rotFactor.z,ut._invInertia22*=ut._rotFactor.z;var $t,te,ee,ae,ie,ne,se,re,oe,le,_e=this._b2,he=Math.sqrt(N*N+G*G+k*k),ce=.5*he;if(ce<.5){var ge=ce*ce;$t=.5*(1-.16666666666666666*ge+ge*ge*.008333333333333333),te=1-.5*ge+ge*ge*.041666666666666664}else $t=Math.sin(ce)/he,te=Math.cos(ce);ee=N*$t,ae=G*$t,ie=k*$t,ne=te;var ue,fe=_e._transform._rotation00,de=_e._transform._rotation11,be=_e._transform._rotation22,pe=fe+de+be;0<pe?(le=.5*(ue=Math.sqrt(pe+1)),ue=.5/ue,se=(_e._transform._rotation21-_e._transform._rotation12)*ue,re=(_e._transform._rotation02-_e._transform._rotation20)*ue,oe=(_e._transform._rotation10-_e._transform._rotation01)*ue):de<fe?be<fe?(se=.5*(ue=Math.sqrt(fe-de-be+1)),ue=.5/ue,re=(_e._transform._rotation01+_e._transform._rotation10)*ue,oe=(_e._transform._rotation02+_e._transform._rotation20)*ue,le=(_e._transform._rotation21-_e._transform._rotation12)*ue):(oe=.5*(ue=Math.sqrt(be-fe-de+1)),ue=.5/ue,se=(_e._transform._rotation02+_e._transform._rotation20)*ue,re=(_e._transform._rotation12+_e._transform._rotation21)*ue,le=(_e._transform._rotation10-_e._transform._rotation01)*ue):be<de?(re=.5*(ue=Math.sqrt(de-be-fe+1)),ue=.5/ue,se=(_e._transform._rotation01+_e._transform._rotation10)*ue,oe=(_e._transform._rotation12+_e._transform._rotation21)*ue,le=(_e._transform._rotation02-_e._transform._rotation20)*ue):(oe=.5*(ue=Math.sqrt(be-fe-de+1)),ue=.5/ue,se=(_e._transform._rotation02+_e._transform._rotation20)*ue,re=(_e._transform._rotation12+_e._transform._rotation21)*ue,le=(_e._transform._rotation10-_e._transform._rotation01)*ue);var me=(se=ne*se+ee*le+ae*oe-ie*re)*se+(re=ne*re-ee*oe+ae*le+ie*se)*re+(oe=ne*oe+ee*re-ae*se+ie*le)*oe+(le=ne*le-ee*se-ae*re-ie*oe)*le;1e-32<me&&(me=1/Math.sqrt(me));se*=me,re*=me,oe*=me,le*=me;var Ie,ve,Me,Ce,ye,we,Ae,xe,Ze,ze,Be,Ne,Ge,ke,Se,We,Xe,Ye,De=2*se,Ke=2*re,Le=2*oe,Ve=se*De,He=re*Ke,je=oe*Le,Te=se*Ke,Re=re*Le,Fe=se*Le,Oe=le*De,Pe=le*Ke,Je=le*Le;_e._transform._rotation00=1-He-je,_e._transform._rotation01=Te-Je,_e._transform._rotation02=Fe+Pe,_e._transform._rotation10=Te+Je,_e._transform._rotation11=1-Ve-je,_e._transform._rotation12=Re-Oe,_e._transform._rotation20=Fe-Pe,_e._transform._rotation21=Re+Oe,_e._transform._rotation22=1-Ve-He,Ie=_e._transform._rotation00*_e._invLocalInertia00+_e._transform._rotation01*_e._invLocalInertia10+_e._transform._rotation02*_e._invLocalInertia20,ve=_e._transform._rotation00*_e._invLocalInertia01+_e._transform._rotation01*_e._invLocalInertia11+_e._transform._rotation02*_e._invLocalInertia21,Me=_e._transform._rotation00*_e._invLocalInertia02+_e._transform._rotation01*_e._invLocalInertia12+_e._transform._rotation02*_e._invLocalInertia22,Ce=_e._transform._rotation10*_e._invLocalInertia00+_e._transform._rotation11*_e._invLocalInertia10+_e._transform._rotation12*_e._invLocalInertia20,ye=_e._transform._rotation10*_e._invLocalInertia01+_e._transform._rotation11*_e._invLocalInertia11+_e._transform._rotation12*_e._invLocalInertia21,we=_e._transform._rotation10*_e._invLocalInertia02+_e._transform._rotation11*_e._invLocalInertia12+_e._transform._rotation12*_e._invLocalInertia22,Ae=_e._transform._rotation20*_e._invLocalInertia00+_e._transform._rotation21*_e._invLocalInertia10+_e._transform._rotation22*_e._invLocalInertia20,xe=_e._transform._rotation20*_e._invLocalInertia01+_e._transform._rotation21*_e._invLocalInertia11+_e._transform._rotation22*_e._invLocalInertia21,Ze=_e._transform._rotation20*_e._invLocalInertia02+_e._transform._rotation21*_e._invLocalInertia12+_e._transform._rotation22*_e._invLocalInertia22,_e._invInertia00=Ie,_e._invInertia01=ve,_e._invInertia02=Me,_e._invInertia10=Ce,_e._invInertia11=ye,_e._invInertia12=we,_e._invInertia20=Ae,_e._invInertia21=xe,_e._invInertia22=Ze,ze=_e._invInertia00*_e._transform._rotation00+_e._invInertia01*_e._transform._rotation01+_e._invInertia02*_e._transform._rotation02,Be=_e._invInertia00*_e._transform._rotation10+_e._invInertia01*_e._transform._rotation11+_e._invInertia02*_e._transform._rotation12,Ne=_e._invInertia00*_e._transform._rotation20+_e._invInertia01*_e._transform._rotation21+_e._invInertia02*_e._transform._rotation22,Ge=_e._invInertia10*_e._transform._rotation00+_e._invInertia11*_e._transform._rotation01+_e._invInertia12*_e._transform._rotation02,ke=_e._invInertia10*_e._transform._rotation10+_e._invInertia11*_e._transform._rotation11+_e._invInertia12*_e._transform._rotation12,Se=_e._invInertia10*_e._transform._rotation20+_e._invInertia11*_e._transform._rotation21+_e._invInertia12*_e._transform._rotation22,We=_e._invInertia20*_e._transform._rotation00+_e._invInertia21*_e._transform._rotation01+_e._invInertia22*_e._transform._rotation02,Xe=_e._invInertia20*_e._transform._rotation10+_e._invInertia21*_e._transform._rotation11+_e._invInertia22*_e._transform._rotation12,Ye=_e._invInertia20*_e._transform._rotation20+_e._invInertia21*_e._transform._rotation21+_e._invInertia22*_e._transform._rotation22,_e._invInertia00=ze,_e._invInertia01=Be,_e._invInertia02=Ne,_e._invInertia10=Ge,_e._invInertia11=ke,_e._invInertia12=Se,_e._invInertia20=We,_e._invInertia21=Xe,_e._invInertia22=Ye,_e._invInertia00*=_e._rotFactor.x,_e._invInertia01*=_e._rotFactor.x,_e._invInertia02*=_e._rotFactor.x,_e._invInertia10*=_e._rotFactor.y,_e._invInertia11*=_e._rotFactor.y,_e._invInertia12*=_e._rotFactor.y,_e._invInertia20*=_e._rotFactor.z,_e._invInertia21*=_e._rotFactor.z,_e._invInertia22*=_e._rotFactor.z},postSolve:function(){for(var t=0,e=this.info.numRows;t<e;){var a,i,n,s=t++,r=this.info.rows[s],o=r.impulse,l=r.jacobianT,_=r.jacobianB;n=i=a=0,a+=l.lin1X*o.impulseT,i+=l.lin1Y*o.impulseT,n+=l.lin1Z*o.impulseT,a+=_.lin1X*o.impulseB,i+=_.lin1Y*o.impulseB,n+=_.lin1Z*o.impulseB,o.impulseLX=a,o.impulseLY=i,o.impulseLZ=n}this.constraint._syncManifold()},__class__:Fn});var On=function(t){vn.call(this),this.joint=t,this.info=new Gn;var e=new Array(wn.maxJacobianRows);this.massData=e;for(var a=0,i=this.massData.length;a<i;){var n=a++;this.massData[n]=new Kn}};(i["oimo.dynamics.constraint.solver.pgs.PgsJointConstraintSolver"]=On).__name__=!0,On.__super__=vn,On.prototype=s(vn.prototype,{joint:null,info:null,massData:null,preSolveVelocity:function(t){this.joint._syncAnchors(),this.joint._getVelocitySolverInfo(t,this.info),this._b1=this.info.b1,this._b2=this.info.b2;var e,a,i,n,s,r,o,l,_,h,c,g,u,f,d,b,p,m,I=this._b1._invMass,v=this._b2._invMass;e=this._b1._invInertia00,a=this._b1._invInertia01,i=this._b1._invInertia02,n=this._b1._invInertia10,s=this._b1._invInertia11,r=this._b1._invInertia12,o=this._b1._invInertia20,l=this._b1._invInertia21,_=this._b1._invInertia22,h=this._b2._invInertia00,c=this._b2._invInertia01,g=this._b2._invInertia02,u=this._b2._invInertia10,f=this._b2._invInertia11,d=this._b2._invInertia12,b=this._b2._invInertia20,p=this._b2._invInertia21,m=this._b2._invInertia22;for(var M=0,C=this.info.numRows;M<C;){var y,w,A,x,Z,z,B=M++,N=this.info.rows[B],G=this.massData[B],k=N.jacobian;if(k.updateSparsity(),0!=(1&k.flag)?(G.invMLin1X=k.lin1X*I,G.invMLin1Y=k.lin1Y*I,G.invMLin1Z=k.lin1Z*I,G.invMLin2X=k.lin2X*v,G.invMLin2Y=k.lin2Y*v,G.invMLin2Z=k.lin2Z*v):(G.invMLin1X=0,G.invMLin1Y=0,G.invMLin1Z=0,G.invMLin2X=0,G.invMLin2Y=0,G.invMLin2Z=0),0!=(2&k.flag))y=e*k.ang1X+a*k.ang1Y+i*k.ang1Z,w=n*k.ang1X+s*k.ang1Y+r*k.ang1Z,A=o*k.ang1X+l*k.ang1Y+_*k.ang1Z,G.invMAng1X=y,G.invMAng1Y=w,G.invMAng1Z=A,x=h*k.ang2X+c*k.ang2Y+g*k.ang2Z,Z=u*k.ang2X+f*k.ang2Y+d*k.ang2Z,z=b*k.ang2X+p*k.ang2Y+m*k.ang2Z,G.invMAng2X=x,G.invMAng2Y=Z,G.invMAng2Z=z;else G.invMAng1X=0,G.invMAng1Y=0,G.invMAng1Z=0,G.invMAng2X=0,G.invMAng2Y=0,G.invMAng2Z=0;G.massWithoutCfm=G.invMLin1X*k.lin1X+G.invMLin1Y*k.lin1Y+G.invMLin1Z*k.lin1Z+(G.invMLin2X*k.lin2X+G.invMLin2Y*k.lin2Y+G.invMLin2Z*k.lin2Z)+(G.invMAng1X*k.ang1X+G.invMAng1Y*k.ang1Y+G.invMAng1Z*k.ang1Z)+(G.invMAng2X*k.ang2X+G.invMAng2Y*k.ang2Y+G.invMAng2Z*k.ang2Z),G.mass=G.massWithoutCfm+N.cfm,0!=G.massWithoutCfm&&(G.massWithoutCfm=1/G.massWithoutCfm),0!=G.mass&&(G.mass=1/G.mass)}},warmStart:function(t){var e=this.joint._positionCorrectionAlgorithm==Mn.BAUMGARTE?wn.jointWarmStartingFactorForBaungarte:wn.jointWarmStartingFactor;if((e*=t.dtRatio)<=0)for(var a=0,i=this.info.numRows;a<i;){var n=a++,s=this.info.rows[n].impulse;s.impulse=0,s.impulseM=0,s.impulseP=0}else{var r,o,l,_,h,c,g,u,f,d,b,p;r=this._b1._velX,o=this._b1._velY,l=this._b1._velZ,_=this._b2._velX,h=this._b2._velY,c=this._b2._velZ,g=this._b1._angVelX,u=this._b1._angVelY,f=this._b1._angVelZ,d=this._b2._angVelX,b=this._b2._angVelY,p=this._b2._angVelZ;for(var m=0,I=this.info.numRows;m<I;){var v=m++,M=this.info.rows[v],C=this.massData[v],y=M.impulse;M.jacobian;y.impulse*=e,y.impulseM*=e;var w=y.impulse+y.impulseM;r+=C.invMLin1X*w,o+=C.invMLin1Y*w,l+=C.invMLin1Z*w,_+=C.invMLin2X*-w,h+=C.invMLin2Y*-w,c+=C.invMLin2Z*-w,g+=C.invMAng1X*w,u+=C.invMAng1Y*w,f+=C.invMAng1Z*w,d+=C.invMAng2X*-w,b+=C.invMAng2Y*-w,p+=C.invMAng2Z*-w}this._b1._velX=r,this._b1._velY=o,this._b1._velZ=l,this._b2._velX=_,this._b2._velY=h,this._b2._velZ=c,this._b1._angVelX=g,this._b1._angVelY=u,this._b1._angVelZ=f,this._b2._angVelX=d,this._b2._angVelY=b,this._b2._angVelZ=p}},solveVelocity:function(){var t,e,a,i,n,s,r,o,l,_,h,c;t=this._b1._velX,e=this._b1._velY,a=this._b1._velZ,i=this._b2._velX,n=this._b2._velY,s=this._b2._velZ,r=this._b1._angVelX,o=this._b1._angVelY,l=this._b1._angVelZ,_=this._b2._angVelX,h=this._b2._angVelY,c=this._b2._angVelZ;for(var g=0,u=this.info.numRows;g<u;){var f=g++,d=this.info.rows[f],b=this.massData[f],p=d.impulse,m=d.jacobian;if(0!=d.motorMaxImpulse){var I=0;I+=t*m.lin1X+e*m.lin1Y+a*m.lin1Z,I-=i*m.lin2X+n*m.lin2Y+s*m.lin2Z,I+=r*m.ang1X+o*m.ang1Y+l*m.ang1Z,I-=_*m.ang2X+h*m.ang2Y+c*m.ang2Z;var v=(-d.motorSpeed-I)*b.massWithoutCfm,M=p.impulseM;p.impulseM+=v,p.impulseM<-d.motorMaxImpulse?p.impulseM=-d.motorMaxImpulse:p.impulseM>d.motorMaxImpulse&&(p.impulseM=d.motorMaxImpulse),v=p.impulseM-M,0!=(1&m.flag)&&(t+=b.invMLin1X*v,e+=b.invMLin1Y*v,a+=b.invMLin1Z*v,i+=b.invMLin2X*-v,n+=b.invMLin2Y*-v,s+=b.invMLin2Z*-v),0!=(2&m.flag)&&(r+=b.invMAng1X*v,o+=b.invMAng1Y*v,l+=b.invMAng1Z*v,_+=b.invMAng2X*-v,h+=b.invMAng2Y*-v,c+=b.invMAng2Z*-v)}}for(var C=0,y=this.info.numRows;C<y;){var w=C++,A=this.info.rows[w],x=this.massData[w],Z=A.impulse,z=A.jacobian,B=0;B+=t*z.lin1X+e*z.lin1Y+a*z.lin1Z,B-=i*z.lin2X+n*z.lin2Y+s*z.lin2Z,B+=r*z.ang1X+o*z.ang1Y+l*z.ang1Z,B-=_*z.ang2X+h*z.ang2Y+c*z.ang2Z;var N=(A.rhs-B-Z.impulse*A.cfm)*x.mass,G=Z.impulse;Z.impulse+=N,Z.impulse<A.minImpulse?Z.impulse=A.minImpulse:Z.impulse>A.maxImpulse&&(Z.impulse=A.maxImpulse),N=Z.impulse-G,0!=(1&z.flag)&&(t+=x.invMLin1X*N,e+=x.invMLin1Y*N,a+=x.invMLin1Z*N,i+=x.invMLin2X*-N,n+=x.invMLin2Y*-N,s+=x.invMLin2Z*-N),0!=(2&z.flag)&&(r+=x.invMAng1X*N,o+=x.invMAng1Y*N,l+=x.invMAng1Z*N,_+=x.invMAng2X*-N,h+=x.invMAng2Y*-N,c+=x.invMAng2Z*-N)}this._b1._velX=t,this._b1._velY=e,this._b1._velZ=a,this._b2._velX=i,this._b2._velY=n,this._b2._velZ=s,this._b1._angVelX=r,this._b1._angVelY=o,this._b1._angVelZ=l,this._b2._angVelX=_,this._b2._angVelY=h,this._b2._angVelZ=c},postSolveVelocity:function(t){for(var e,a,i,n,s,r,o=r=s=n=i=a=e=0,l=this.info.numRows;o<l;){var _=o++,h=this.info.rows[_],c=h.impulse,g=h.jacobian;0!=(1&g.flag)?(e+=g.lin1X*c.impulse,a+=g.lin1Y*c.impulse,i+=g.lin1Z*c.impulse):0!=(2&g.flag)&&(n+=g.ang1X*c.impulse,s+=g.ang1Y*c.impulse,r+=g.ang1Z*c.impulse)}this.joint._appliedForceX=e*t.invDt,this.joint._appliedForceY=a*t.invDt,this.joint._appliedForceZ=i*t.invDt,this.joint._appliedTorqueX=n*t.invDt,this.joint._appliedTorqueY=s*t.invDt,this.joint._appliedTorqueZ=r*t.invDt},preSolvePosition:function(t){this.joint._syncAnchors(),this.joint._getPositionSolverInfo(this.info),this._b1=this.info.b1,this._b2=this.info.b2;var e,a,i,n,s,r,o,l,_,h,c,g,u,f,d,b,p,m,I=this._b1._invMass,v=this._b2._invMass;e=this._b1._invInertia00,a=this._b1._invInertia01,i=this._b1._invInertia02,n=this._b1._invInertia10,s=this._b1._invInertia11,r=this._b1._invInertia12,o=this._b1._invInertia20,l=this._b1._invInertia21,_=this._b1._invInertia22,h=this._b2._invInertia00,c=this._b2._invInertia01,g=this._b2._invInertia02,u=this._b2._invInertia10,f=this._b2._invInertia11,d=this._b2._invInertia12,b=this._b2._invInertia20,p=this._b2._invInertia21,m=this._b2._invInertia22;for(var M=0,C=this.info.numRows;M<C;){var y,w,A,x,Z,z,B=M++,N=this.info.rows[B],G=this.massData[B],k=(N.impulse,N.jacobian);G.invMLin1X=k.lin1X*I,G.invMLin1Y=k.lin1Y*I,G.invMLin1Z=k.lin1Z*I,G.invMLin2X=k.lin2X*v,G.invMLin2Y=k.lin2Y*v,G.invMLin2Z=k.lin2Z*v,y=e*k.ang1X+a*k.ang1Y+i*k.ang1Z,w=n*k.ang1X+s*k.ang1Y+r*k.ang1Z,A=o*k.ang1X+l*k.ang1Y+_*k.ang1Z,G.invMAng1X=y,G.invMAng1Y=w,G.invMAng1Z=A,x=h*k.ang2X+c*k.ang2Y+g*k.ang2Z,Z=u*k.ang2X+f*k.ang2Y+d*k.ang2Z,z=b*k.ang2X+p*k.ang2Y+m*k.ang2Z,G.invMAng2X=x,G.invMAng2Y=Z,G.invMAng2Z=z,G.mass=G.invMLin1X*k.lin1X+G.invMLin1Y*k.lin1Y+G.invMLin1Z*k.lin1Z+(G.invMLin2X*k.lin2X+G.invMLin2Y*k.lin2Y+G.invMLin2Z*k.lin2Z)+(G.invMAng1X*k.ang1X+G.invMAng1Y*k.ang1Y+G.invMAng1Z*k.ang1Z)+(G.invMAng2X*k.ang2X+G.invMAng2Y*k.ang2Y+G.invMAng2Z*k.ang2Z),0!=G.mass&&(G.mass=1/G.mass)}for(var S=0,W=this.info.numRows;S<W;){var X=S++;this.info.rows[X].impulse.impulseP=0}},solvePositionSplitImpulse:function(){var t,e,a,i,n,s,r,o,l,_,h,c;t=this._b1._pseudoVelX,e=this._b1._pseudoVelY,a=this._b1._pseudoVelZ,i=this._b2._pseudoVelX,n=this._b2._pseudoVelY,s=this._b2._pseudoVelZ,r=this._b1._angPseudoVelX,o=this._b1._angPseudoVelY,l=this._b1._angPseudoVelZ,_=this._b2._angPseudoVelX,h=this._b2._angPseudoVelY,c=this._b2._angPseudoVelZ;for(var g=0,u=this.info.numRows;g<u;){var f=g++,d=this.info.rows[f],b=this.massData[f],p=d.impulse,m=d.jacobian,I=0;I+=t*m.lin1X+e*m.lin1Y+a*m.lin1Z,I-=i*m.lin2X+n*m.lin2Y+s*m.lin2Z,I+=r*m.ang1X+o*m.ang1Y+l*m.ang1Z,I-=_*m.ang2X+h*m.ang2Y+c*m.ang2Z;var v=(d.rhs*wn.positionSplitImpulseBaumgarte-I)*b.mass,M=p.impulseP;p.impulseP+=v,p.impulseP<d.minImpulse?p.impulseP=d.minImpulse:p.impulseP>d.maxImpulse&&(p.impulseP=d.maxImpulse),v=p.impulseP-M,t+=b.invMLin1X*v,e+=b.invMLin1Y*v,a+=b.invMLin1Z*v,i+=b.invMLin2X*-v,n+=b.invMLin2Y*-v,s+=b.invMLin2Z*-v,r+=b.invMAng1X*v,o+=b.invMAng1Y*v,l+=b.invMAng1Z*v,_+=b.invMAng2X*-v,h+=b.invMAng2Y*-v,c+=b.invMAng2Z*-v}this._b1._pseudoVelX=t,this._b1._pseudoVelY=e,this._b1._pseudoVelZ=a,this._b2._pseudoVelX=i,this._b2._pseudoVelY=n,this._b2._pseudoVelZ=s,this._b1._angPseudoVelX=r,this._b1._angPseudoVelY=o,this._b1._angPseudoVelZ=l,this._b2._angPseudoVelX=_,this._b2._angPseudoVelY=h,this._b2._angPseudoVelZ=c},solvePositionNgs:function(t){this.joint._syncAnchors(),this.joint._getPositionSolverInfo(this.info),this._b1=this.info.b1,this._b2=this.info.b2;var e,a,i,n,s,r,o,l,_,h,c,g,u,f,d,b,p,m,I=this._b1._invMass,v=this._b2._invMass;e=this._b1._invInertia00,a=this._b1._invInertia01,i=this._b1._invInertia02,n=this._b1._invInertia10,s=this._b1._invInertia11,r=this._b1._invInertia12,o=this._b1._invInertia20,l=this._b1._invInertia21,_=this._b1._invInertia22,h=this._b2._invInertia00,c=this._b2._invInertia01,g=this._b2._invInertia02,u=this._b2._invInertia10,f=this._b2._invInertia11,d=this._b2._invInertia12,b=this._b2._invInertia20,p=this._b2._invInertia21,m=this._b2._invInertia22;for(var M,C,y,w,A,x,Z,z,B,N,G,k,S=0,W=this.info.numRows;S<W;){var X,Y,D,K,L,V,H=S++,j=this.info.rows[H],T=this.massData[H],R=(j.impulse,j.jacobian);T.invMLin1X=R.lin1X*I,T.invMLin1Y=R.lin1Y*I,T.invMLin1Z=R.lin1Z*I,T.invMLin2X=R.lin2X*v,T.invMLin2Y=R.lin2Y*v,T.invMLin2Z=R.lin2Z*v,X=e*R.ang1X+a*R.ang1Y+i*R.ang1Z,Y=n*R.ang1X+s*R.ang1Y+r*R.ang1Z,D=o*R.ang1X+l*R.ang1Y+_*R.ang1Z,T.invMAng1X=X,T.invMAng1Y=Y,T.invMAng1Z=D,K=h*R.ang2X+c*R.ang2Y+g*R.ang2Z,L=u*R.ang2X+f*R.ang2Y+d*R.ang2Z,V=b*R.ang2X+p*R.ang2Y+m*R.ang2Z,T.invMAng2X=K,T.invMAng2Y=L,T.invMAng2Z=V,T.mass=T.invMLin1X*R.lin1X+T.invMLin1Y*R.lin1Y+T.invMLin1Z*R.lin1Z+(T.invMLin2X*R.lin2X+T.invMLin2Y*R.lin2Y+T.invMLin2Z*R.lin2Z)+(T.invMAng1X*R.ang1X+T.invMAng1Y*R.ang1Y+T.invMAng1Z*R.ang1Z)+(T.invMAng2X*R.ang2X+T.invMAng2Y*R.ang2Y+T.invMAng2Z*R.ang2Z),0!=T.mass&&(T.mass=1/T.mass)}for(var F=k=G=N=B=z=Z=x=A=w=y=C=M=0,O=this.info.numRows;F<O;){var P=F++,J=this.info.rows[P],E=this.massData[P],U=J.impulse,Q=J.jacobian,q=0;q+=M*Q.lin1X+C*Q.lin1Y+y*Q.lin1Z,q-=w*Q.lin2X+A*Q.lin2Y+x*Q.lin2Z,q+=Z*Q.ang1X+z*Q.ang1Y+B*Q.ang1Z,q-=N*Q.ang2X+G*Q.ang2Y+k*Q.ang2Z;var $=(J.rhs*wn.positionNgsBaumgarte-q)*E.mass,tt=U.impulseP;U.impulseP+=$,U.impulseP<J.minImpulse?U.impulseP=J.minImpulse:U.impulseP>J.maxImpulse&&(U.impulseP=J.maxImpulse),$=U.impulseP-tt,M+=E.invMLin1X*$,C+=E.invMLin1Y*$,y+=E.invMLin1Z*$,w+=E.invMLin2X*-$,A+=E.invMLin2Y*-$,x+=E.invMLin2Z*-$,Z+=E.invMAng1X*$,z+=E.invMAng1Y*$,B+=E.invMAng1Z*$,N+=E.invMAng2X*-$,G+=E.invMAng2Y*-$,k+=E.invMAng2Z*-$}var et=this._b1;et._transform._positionX+=M,et._transform._positionY+=C,et._transform._positionZ+=y;var at=this._b2;at._transform._positionX+=w,at._transform._positionY+=A,at._transform._positionZ+=x;var it,nt,st,rt,ot,lt,_t,ht,ct,gt,ut=this._b1,ft=Math.sqrt(Z*Z+z*z+B*B),dt=.5*ft;if(dt<.5){var bt=dt*dt;it=.5*(1-.16666666666666666*bt+bt*bt*.008333333333333333),nt=1-.5*bt+bt*bt*.041666666666666664}else it=Math.sin(dt)/ft,nt=Math.cos(dt);st=Z*it,rt=z*it,ot=B*it,lt=nt;var pt,mt=ut._transform._rotation00,It=ut._transform._rotation11,vt=ut._transform._rotation22,Mt=mt+It+vt;0<Mt?(gt=.5*(pt=Math.sqrt(Mt+1)),pt=.5/pt,_t=(ut._transform._rotation21-ut._transform._rotation12)*pt,ht=(ut._transform._rotation02-ut._transform._rotation20)*pt,ct=(ut._transform._rotation10-ut._transform._rotation01)*pt):It<mt?vt<mt?(_t=.5*(pt=Math.sqrt(mt-It-vt+1)),pt=.5/pt,ht=(ut._transform._rotation01+ut._transform._rotation10)*pt,ct=(ut._transform._rotation02+ut._transform._rotation20)*pt,gt=(ut._transform._rotation21-ut._transform._rotation12)*pt):(ct=.5*(pt=Math.sqrt(vt-mt-It+1)),pt=.5/pt,_t=(ut._transform._rotation02+ut._transform._rotation20)*pt,ht=(ut._transform._rotation12+ut._transform._rotation21)*pt,gt=(ut._transform._rotation10-ut._transform._rotation01)*pt):vt<It?(ht=.5*(pt=Math.sqrt(It-vt-mt+1)),pt=.5/pt,_t=(ut._transform._rotation01+ut._transform._rotation10)*pt,ct=(ut._transform._rotation12+ut._transform._rotation21)*pt,gt=(ut._transform._rotation02-ut._transform._rotation20)*pt):(ct=.5*(pt=Math.sqrt(vt-mt-It+1)),pt=.5/pt,_t=(ut._transform._rotation02+ut._transform._rotation20)*pt,ht=(ut._transform._rotation12+ut._transform._rotation21)*pt,gt=(ut._transform._rotation10-ut._transform._rotation01)*pt);var Ct=(_t=lt*_t+st*gt+rt*ct-ot*ht)*_t+(ht=lt*ht-st*ct+rt*gt+ot*_t)*ht+(ct=lt*ct+st*ht-rt*_t+ot*gt)*ct+(gt=lt*gt-st*_t-rt*ht-ot*ct)*gt;1e-32<Ct&&(Ct=1/Math.sqrt(Ct));_t*=Ct,ht*=Ct,ct*=Ct,gt*=Ct;var yt,wt,At,xt,Zt,zt,Bt,Nt,Gt,kt,St,Wt,Xt,Yt,Dt,Kt,Lt,Vt,Ht=2*_t,jt=2*ht,Tt=2*ct,Rt=_t*Ht,Ft=ht*jt,Ot=ct*Tt,Pt=_t*jt,Jt=ht*Tt,Et=_t*Tt,Ut=gt*Ht,Qt=gt*jt,qt=gt*Tt;ut._transform._rotation00=1-Ft-Ot,ut._transform._rotation01=Pt-qt,ut._transform._rotation02=Et+Qt,ut._transform._rotation10=Pt+qt,ut._transform._rotation11=1-Rt-Ot,ut._transform._rotation12=Jt-Ut,ut._transform._rotation20=Et-Qt,ut._transform._rotation21=Jt+Ut,ut._transform._rotation22=1-Rt-Ft,yt=ut._transform._rotation00*ut._invLocalInertia00+ut._transform._rotation01*ut._invLocalInertia10+ut._transform._rotation02*ut._invLocalInertia20,wt=ut._transform._rotation00*ut._invLocalInertia01+ut._transform._rotation01*ut._invLocalInertia11+ut._transform._rotation02*ut._invLocalInertia21,At=ut._transform._rotation00*ut._invLocalInertia02+ut._transform._rotation01*ut._invLocalInertia12+ut._transform._rotation02*ut._invLocalInertia22,xt=ut._transform._rotation10*ut._invLocalInertia00+ut._transform._rotation11*ut._invLocalInertia10+ut._transform._rotation12*ut._invLocalInertia20,Zt=ut._transform._rotation10*ut._invLocalInertia01+ut._transform._rotation11*ut._invLocalInertia11+ut._transform._rotation12*ut._invLocalInertia21,zt=ut._transform._rotation10*ut._invLocalInertia02+ut._transform._rotation11*ut._invLocalInertia12+ut._transform._rotation12*ut._invLocalInertia22,Bt=ut._transform._rotation20*ut._invLocalInertia00+ut._transform._rotation21*ut._invLocalInertia10+ut._transform._rotation22*ut._invLocalInertia20,Nt=ut._transform._rotation20*ut._invLocalInertia01+ut._transform._rotation21*ut._invLocalInertia11+ut._transform._rotation22*ut._invLocalInertia21,Gt=ut._transform._rotation20*ut._invLocalInertia02+ut._transform._rotation21*ut._invLocalInertia12+ut._transform._rotation22*ut._invLocalInertia22,ut._invInertia00=yt,ut._invInertia01=wt,ut._invInertia02=At,ut._invInertia10=xt,ut._invInertia11=Zt,ut._invInertia12=zt,ut._invInertia20=Bt,ut._invInertia21=Nt,ut._invInertia22=Gt,kt=ut._invInertia00*ut._transform._rotation00+ut._invInertia01*ut._transform._rotation01+ut._invInertia02*ut._transform._rotation02,St=ut._invInertia00*ut._transform._rotation10+ut._invInertia01*ut._transform._rotation11+ut._invInertia02*ut._transform._rotation12,Wt=ut._invInertia00*ut._transform._rotation20+ut._invInertia01*ut._transform._rotation21+ut._invInertia02*ut._transform._rotation22,Xt=ut._invInertia10*ut._transform._rotation00+ut._invInertia11*ut._transform._rotation01+ut._invInertia12*ut._transform._rotation02,Yt=ut._invInertia10*ut._transform._rotation10+ut._invInertia11*ut._transform._rotation11+ut._invInertia12*ut._transform._rotation12,Dt=ut._invInertia10*ut._transform._rotation20+ut._invInertia11*ut._transform._rotation21+ut._invInertia12*ut._transform._rotation22,Kt=ut._invInertia20*ut._transform._rotation00+ut._invInertia21*ut._transform._rotation01+ut._invInertia22*ut._transform._rotation02,Lt=ut._invInertia20*ut._transform._rotation10+ut._invInertia21*ut._transform._rotation11+ut._invInertia22*ut._transform._rotation12,Vt=ut._invInertia20*ut._transform._rotation20+ut._invInertia21*ut._transform._rotation21+ut._invInertia22*ut._transform._rotation22,ut._invInertia00=kt,ut._invInertia01=St,ut._invInertia02=Wt,ut._invInertia10=Xt,ut._invInertia11=Yt,ut._invInertia12=Dt,ut._invInertia20=Kt,ut._invInertia21=Lt,ut._invInertia22=Vt,ut._invInertia00*=ut._rotFactor.x,ut._invInertia01*=ut._rotFactor.x,ut._invInertia02*=ut._rotFactor.x,ut._invInertia10*=ut._rotFactor.y,ut._invInertia11*=ut._rotFactor.y,ut._invInertia12*=ut._rotFactor.y,ut._invInertia20*=ut._rotFactor.z,ut._invInertia21*=ut._rotFactor.z,ut._invInertia22*=ut._rotFactor.z;var $t,te,ee,ae,ie,ne,se,re,oe,le,_e=this._b2,he=Math.sqrt(N*N+G*G+k*k),ce=.5*he;if(ce<.5){var ge=ce*ce;$t=.5*(1-.16666666666666666*ge+ge*ge*.008333333333333333),te=1-.5*ge+ge*ge*.041666666666666664}else $t=Math.sin(ce)/he,te=Math.cos(ce);ee=N*$t,ae=G*$t,ie=k*$t,ne=te;var ue,fe=_e._transform._rotation00,de=_e._transform._rotation11,be=_e._transform._rotation22,pe=fe+de+be;0<pe?(le=.5*(ue=Math.sqrt(pe+1)),ue=.5/ue,se=(_e._transform._rotation21-_e._transform._rotation12)*ue,re=(_e._transform._rotation02-_e._transform._rotation20)*ue,oe=(_e._transform._rotation10-_e._transform._rotation01)*ue):de<fe?be<fe?(se=.5*(ue=Math.sqrt(fe-de-be+1)),ue=.5/ue,re=(_e._transform._rotation01+_e._transform._rotation10)*ue,oe=(_e._transform._rotation02+_e._transform._rotation20)*ue,le=(_e._transform._rotation21-_e._transform._rotation12)*ue):(oe=.5*(ue=Math.sqrt(be-fe-de+1)),ue=.5/ue,se=(_e._transform._rotation02+_e._transform._rotation20)*ue,re=(_e._transform._rotation12+_e._transform._rotation21)*ue,le=(_e._transform._rotation10-_e._transform._rotation01)*ue):be<de?(re=.5*(ue=Math.sqrt(de-be-fe+1)),ue=.5/ue,se=(_e._transform._rotation01+_e._transform._rotation10)*ue,oe=(_e._transform._rotation12+_e._transform._rotation21)*ue,le=(_e._transform._rotation02-_e._transform._rotation20)*ue):(oe=.5*(ue=Math.sqrt(be-fe-de+1)),ue=.5/ue,se=(_e._transform._rotation02+_e._transform._rotation20)*ue,re=(_e._transform._rotation12+_e._transform._rotation21)*ue,le=(_e._transform._rotation10-_e._transform._rotation01)*ue);var me=(se=ne*se+ee*le+ae*oe-ie*re)*se+(re=ne*re-ee*oe+ae*le+ie*se)*re+(oe=ne*oe+ee*re-ae*se+ie*le)*oe+(le=ne*le-ee*se-ae*re-ie*oe)*le;1e-32<me&&(me=1/Math.sqrt(me));se*=me,re*=me,oe*=me,le*=me;var Ie,ve,Me,Ce,ye,we,Ae,xe,Ze,ze,Be,Ne,Ge,ke,Se,We,Xe,Ye,De=2*se,Ke=2*re,Le=2*oe,Ve=se*De,He=re*Ke,je=oe*Le,Te=se*Ke,Re=re*Le,Fe=se*Le,Oe=le*De,Pe=le*Ke,Je=le*Le;_e._transform._rotation00=1-He-je,_e._transform._rotation01=Te-Je,_e._transform._rotation02=Fe+Pe,_e._transform._rotation10=Te+Je,_e._transform._rotation11=1-Ve-je,_e._transform._rotation12=Re-Oe,_e._transform._rotation20=Fe-Pe,_e._transform._rotation21=Re+Oe,_e._transform._rotation22=1-Ve-He,Ie=_e._transform._rotation00*_e._invLocalInertia00+_e._transform._rotation01*_e._invLocalInertia10+_e._transform._rotation02*_e._invLocalInertia20,ve=_e._transform._rotation00*_e._invLocalInertia01+_e._transform._rotation01*_e._invLocalInertia11+_e._transform._rotation02*_e._invLocalInertia21,Me=_e._transform._rotation00*_e._invLocalInertia02+_e._transform._rotation01*_e._invLocalInertia12+_e._transform._rotation02*_e._invLocalInertia22,Ce=_e._transform._rotation10*_e._invLocalInertia00+_e._transform._rotation11*_e._invLocalInertia10+_e._transform._rotation12*_e._invLocalInertia20,ye=_e._transform._rotation10*_e._invLocalInertia01+_e._transform._rotation11*_e._invLocalInertia11+_e._transform._rotation12*_e._invLocalInertia21,we=_e._transform._rotation10*_e._invLocalInertia02+_e._transform._rotation11*_e._invLocalInertia12+_e._transform._rotation12*_e._invLocalInertia22,Ae=_e._transform._rotation20*_e._invLocalInertia00+_e._transform._rotation21*_e._invLocalInertia10+_e._transform._rotation22*_e._invLocalInertia20,xe=_e._transform._rotation20*_e._invLocalInertia01+_e._transform._rotation21*_e._invLocalInertia11+_e._transform._rotation22*_e._invLocalInertia21,Ze=_e._transform._rotation20*_e._invLocalInertia02+_e._transform._rotation21*_e._invLocalInertia12+_e._transform._rotation22*_e._invLocalInertia22,_e._invInertia00=Ie,_e._invInertia01=ve,_e._invInertia02=Me,_e._invInertia10=Ce,_e._invInertia11=ye,_e._invInertia12=we,_e._invInertia20=Ae,_e._invInertia21=xe,_e._invInertia22=Ze,ze=_e._invInertia00*_e._transform._rotation00+_e._invInertia01*_e._transform._rotation01+_e._invInertia02*_e._transform._rotation02,Be=_e._invInertia00*_e._transform._rotation10+_e._invInertia01*_e._transform._rotation11+_e._invInertia02*_e._transform._rotation12,Ne=_e._invInertia00*_e._transform._rotation20+_e._invInertia01*_e._transform._rotation21+_e._invInertia02*_e._transform._rotation22,Ge=_e._invInertia10*_e._transform._rotation00+_e._invInertia11*_e._transform._rotation01+_e._invInertia12*_e._transform._rotation02,ke=_e._invInertia10*_e._transform._rotation10+_e._invInertia11*_e._transform._rotation11+_e._invInertia12*_e._transform._rotation12,Se=_e._invInertia10*_e._transform._rotation20+_e._invInertia11*_e._transform._rotation21+_e._invInertia12*_e._transform._rotation22,We=_e._invInertia20*_e._transform._rotation00+_e._invInertia21*_e._transform._rotation01+_e._invInertia22*_e._transform._rotation02,Xe=_e._invInertia20*_e._transform._rotation10+_e._invInertia21*_e._transform._rotation11+_e._invInertia22*_e._transform._rotation12,Ye=_e._invInertia20*_e._transform._rotation20+_e._invInertia21*_e._transform._rotation21+_e._invInertia22*_e._transform._rotation22,_e._invInertia00=ze,_e._invInertia01=Be,_e._invInertia02=Ne,_e._invInertia10=Ge,_e._invInertia11=ke,_e._invInertia12=Se,_e._invInertia20=We,_e._invInertia21=Xe,_e._invInertia22=Ye,_e._invInertia00*=_e._rotFactor.x,_e._invInertia01*=_e._rotFactor.x,_e._invInertia02*=_e._rotFactor.x,_e._invInertia10*=_e._rotFactor.y,_e._invInertia11*=_e._rotFactor.y,_e._invInertia12*=_e._rotFactor.y,_e._invInertia20*=_e._rotFactor.z,_e._invInertia21*=_e._rotFactor.z,_e._invInertia22*=_e._rotFactor.z},postSolve:function(){this.joint._syncAnchors(),this.joint._checkDestruction()},__class__:On});var Pn=function(t){this._next=null,this._prev=null,this._shapeList=null,this._shapeListLast=null,this._numShapes=0,this._contactLinkList=null,this._contactLinkListLast=null,this._numContactLinks=0,this._jointLinkList=null,this._jointLinkListLast=null,this._numJointLinks=0;var e=t.linearVelocity;this._velX=e.x,this._velY=e.y,this._velZ=e.z;var a=t.angularVelocity;this._angVelX=a.x,this._angVelY=a.y,this._angVelZ=a.z,this._pseudoVelX=0,this._pseudoVelY=0,this._pseudoVelZ=0,this._angPseudoVelX=0,this._angPseudoVelY=0,this._angPseudoVelZ=0,this._ptransform=new tn,this._transform=new tn;var i=t.position;this._ptransform._positionX=i.x,this._ptransform._positionY=i.y,this._ptransform._positionZ=i.z;var n=t.rotation;this._ptransform._rotation00=n.e00,this._ptransform._rotation01=n.e01,this._ptransform._rotation02=n.e02,this._ptransform._rotation10=n.e10,this._ptransform._rotation11=n.e11,this._ptransform._rotation12=n.e12,this._ptransform._rotation20=n.e20,this._ptransform._rotation21=n.e21,this._ptransform._rotation22=n.e22;var s=this._transform,r=this._ptransform;s._positionX=r._positionX,s._positionY=r._positionY,s._positionZ=r._positionZ,s._rotation00=r._rotation00,s._rotation01=r._rotation01,s._rotation02=r._rotation02,s._rotation10=r._rotation10,s._rotation11=r._rotation11,s._rotation12=r._rotation12,s._rotation20=r._rotation20,s._rotation21=r._rotation21,s._rotation22=r._rotation22,this._type=t.type,this._sleepTime=0,this._sleeping=!1,this._autoSleep=t.autoSleep,this._mass=0,this._invMass=0,this._localInertia00=0,this._localInertia01=0,this._localInertia02=0,this._localInertia10=0,this._localInertia11=0,this._localInertia12=0,this._localInertia20=0,this._localInertia21=0,this._localInertia22=0,this._invLocalInertia00=0,this._invLocalInertia01=0,this._invLocalInertia02=0,this._invLocalInertia10=0,this._invLocalInertia11=0,this._invLocalInertia12=0,this._invLocalInertia20=0,this._invLocalInertia21=0,this._invLocalInertia22=0,this._invLocalInertiaWithoutRotFactor00=0,this._invLocalInertiaWithoutRotFactor01=0,this._invLocalInertiaWithoutRotFactor02=0,this._invLocalInertiaWithoutRotFactor10=0,this._invLocalInertiaWithoutRotFactor11=0,this._invLocalInertiaWithoutRotFactor12=0,this._invLocalInertiaWithoutRotFactor20=0,this._invLocalInertiaWithoutRotFactor21=0,this._invLocalInertiaWithoutRotFactor22=0,this._invInertia00=0,this._invInertia01=0,this._invInertia02=0,this._invInertia10=0,this._invInertia11=0,this._invInertia12=0,this._invInertia20=0,this._invInertia21=0,this._invInertia22=0,this._linearDamping=t.linearDamping,this._angularDamping=t.angularDamping,this._forceX=0,this._forceY=0,this._forceZ=0,this._torqueX=0,this._torqueY=0,this._torqueZ=0,this._rotFactor=new Jt(1,1,1),this._addedToIsland=!1,this._gravityScale=1,this._world=null};(i["oimo.dynamics.rigidbody.RigidBody"]=Pn).__name__=!0,Pn.prototype={_next:null,_prev:null,_shapeList:null,_shapeListLast:null,_numShapes:null,_velX:null,_velY:null,_velZ:null,_angVelX:null,_angVelY:null,_angVelZ:null,_pseudoVelX:null,_pseudoVelY:null,_pseudoVelZ:null,_angPseudoVelX:null,_angPseudoVelY:null,_angPseudoVelZ:null,_ptransform:null,_transform:null,_type:null,_sleepTime:null,_sleeping:null,_autoSleep:null,_mass:null,_invMass:null,_localInertia00:null,_localInertia01:null,_localInertia02:null,_localInertia10:null,_localInertia11:null,_localInertia12:null,_localInertia20:null,_localInertia21:null,_localInertia22:null,_rotFactor:null,_invLocalInertia00:null,_invLocalInertia01:null,_invLocalInertia02:null,_invLocalInertia10:null,_invLocalInertia11:null,_invLocalInertia12:null,_invLocalInertia20:null,_invLocalInertia21:null,_invLocalInertia22:null,_invLocalInertiaWithoutRotFactor00:null,_invLocalInertiaWithoutRotFactor01:null,_invLocalInertiaWithoutRotFactor02:null,_invLocalInertiaWithoutRotFactor10:null,_invLocalInertiaWithoutRotFactor11:null,_invLocalInertiaWithoutRotFactor12:null,_invLocalInertiaWithoutRotFactor20:null,_invLocalInertiaWithoutRotFactor21:null,_invLocalInertiaWithoutRotFactor22:null,_invInertia00:null,_invInertia01:null,_invInertia02:null,_invInertia10:null,_invInertia11:null,_invInertia12:null,_invInertia20:null,_invInertia21:null,_invInertia22:null,_linearDamping:null,_angularDamping:null,_forceX:null,_forceY:null,_forceZ:null,_torqueX:null,_torqueY:null,_torqueZ:null,_world:null,_contactLinkList:null,_contactLinkListLast:null,_numContactLinks:null,_jointLinkList:null,_jointLinkListLast:null,_numJointLinks:null,_addedToIsland:null,_gravityScale:null,_integrate:function(t){switch(this._type){case 1:this._velX=0,this._velY=0,this._velZ=0,this._angVelX=0,this._angVelY=0,this._angVelZ=0,this._pseudoVelX=0,this._pseudoVelY=0,this._pseudoVelZ=0,this._angPseudoVelX=0,this._angPseudoVelY=0,this._angPseudoVelZ=0;break;case 0:case 2:var e,a,i,n,s,r,o=(e=this._velX*t)*e+(a=this._velY*t)*a+(i=this._velZ*t)*i,l=(n=this._angVelX*t)*n+(s=this._angVelY*t)*s+(r=this._angVelZ*t)*r;if(0==o&&0==l)return;if(o>wn.maxTranslationPerStep*wn.maxTranslationPerStep){var _=wn.maxTranslationPerStep/Math.sqrt(o);this._velX*=_,this._velY*=_,this._velZ*=_,e*=_,a*=_,i*=_}if(l>wn.maxRotationPerStep*wn.maxRotationPerStep){var h=wn.maxRotationPerStep/Math.sqrt(l);this._angVelX*=h,this._angVelY*=h,this._angVelZ*=h,n*=h,s*=h,r*=h}this._transform._positionX+=e,this._transform._positionY+=a,this._transform._positionZ+=i;var c,g,u,f,d,b,p,m,I,v,M=Math.sqrt(n*n+s*s+r*r),C=.5*M;if(C<.5){var y=C*C;c=.5*(1-.16666666666666666*y+y*y*.008333333333333333),g=1-.5*y+y*y*.041666666666666664}else c=Math.sin(C)/M,g=Math.cos(C);u=n*c,f=s*c,d=r*c,b=g;var w,A=this._transform._rotation00,x=this._transform._rotation11,Z=this._transform._rotation22,z=A+x+Z;0<z?(v=.5*(w=Math.sqrt(z+1)),w=.5/w,p=(this._transform._rotation21-this._transform._rotation12)*w,m=(this._transform._rotation02-this._transform._rotation20)*w,I=(this._transform._rotation10-this._transform._rotation01)*w):x<A?Z<A?(p=.5*(w=Math.sqrt(A-x-Z+1)),w=.5/w,m=(this._transform._rotation01+this._transform._rotation10)*w,I=(this._transform._rotation02+this._transform._rotation20)*w,v=(this._transform._rotation21-this._transform._rotation12)*w):(I=.5*(w=Math.sqrt(Z-A-x+1)),w=.5/w,p=(this._transform._rotation02+this._transform._rotation20)*w,m=(this._transform._rotation12+this._transform._rotation21)*w,v=(this._transform._rotation10-this._transform._rotation01)*w):Z<x?(m=.5*(w=Math.sqrt(x-Z-A+1)),w=.5/w,p=(this._transform._rotation01+this._transform._rotation10)*w,I=(this._transform._rotation12+this._transform._rotation21)*w,v=(this._transform._rotation02-this._transform._rotation20)*w):(I=.5*(w=Math.sqrt(Z-A-x+1)),w=.5/w,p=(this._transform._rotation02+this._transform._rotation20)*w,m=(this._transform._rotation12+this._transform._rotation21)*w,v=(this._transform._rotation10-this._transform._rotation01)*w);var B=(p=b*p+u*v+f*I-d*m)*p+(m=b*m-u*I+f*v+d*p)*m+(I=b*I+u*m-f*p+d*v)*I+(v=b*v-u*p-f*m-d*I)*v;1e-32<B&&(B=1/Math.sqrt(B));p*=B,m*=B,I*=B,v*=B;var N,G,k,S,W,X,Y,D,K,L,V,H,j,T,R,F,O,P,J=2*p,E=2*m,U=2*I,Q=p*J,q=m*E,$=I*U,tt=p*E,et=m*U,at=p*U,it=v*J,nt=v*E,st=v*U;this._transform._rotation00=1-q-$,this._transform._rotation01=tt-st,this._transform._rotation02=at+nt,this._transform._rotation10=tt+st,this._transform._rotation11=1-Q-$,this._transform._rotation12=et-it,this._transform._rotation20=at-nt,this._transform._rotation21=et+it,this._transform._rotation22=1-Q-q,N=this._transform._rotation00*this._invLocalInertia00+this._transform._rotation01*this._invLocalInertia10+this._transform._rotation02*this._invLocalInertia20,G=this._transform._rotation00*this._invLocalInertia01+this._transform._rotation01*this._invLocalInertia11+this._transform._rotation02*this._invLocalInertia21,k=this._transform._rotation00*this._invLocalInertia02+this._transform._rotation01*this._invLocalInertia12+this._transform._rotation02*this._invLocalInertia22,S=this._transform._rotation10*this._invLocalInertia00+this._transform._rotation11*this._invLocalInertia10+this._transform._rotation12*this._invLocalInertia20,W=this._transform._rotation10*this._invLocalInertia01+this._transform._rotation11*this._invLocalInertia11+this._transform._rotation12*this._invLocalInertia21,X=this._transform._rotation10*this._invLocalInertia02+this._transform._rotation11*this._invLocalInertia12+this._transform._rotation12*this._invLocalInertia22,Y=this._transform._rotation20*this._invLocalInertia00+this._transform._rotation21*this._invLocalInertia10+this._transform._rotation22*this._invLocalInertia20,D=this._transform._rotation20*this._invLocalInertia01+this._transform._rotation21*this._invLocalInertia11+this._transform._rotation22*this._invLocalInertia21,K=this._transform._rotation20*this._invLocalInertia02+this._transform._rotation21*this._invLocalInertia12+this._transform._rotation22*this._invLocalInertia22,this._invInertia00=N,this._invInertia01=G,this._invInertia02=k,this._invInertia10=S,this._invInertia11=W,this._invInertia12=X,this._invInertia20=Y,this._invInertia21=D,this._invInertia22=K,L=this._invInertia00*this._transform._rotation00+this._invInertia01*this._transform._rotation01+this._invInertia02*this._transform._rotation02,V=this._invInertia00*this._transform._rotation10+this._invInertia01*this._transform._rotation11+this._invInertia02*this._transform._rotation12,H=this._invInertia00*this._transform._rotation20+this._invInertia01*this._transform._rotation21+this._invInertia02*this._transform._rotation22,j=this._invInertia10*this._transform._rotation00+this._invInertia11*this._transform._rotation01+this._invInertia12*this._transform._rotation02,T=this._invInertia10*this._transform._rotation10+this._invInertia11*this._transform._rotation11+this._invInertia12*this._transform._rotation12,R=this._invInertia10*this._transform._rotation20+this._invInertia11*this._transform._rotation21+this._invInertia12*this._transform._rotation22,F=this._invInertia20*this._transform._rotation00+this._invInertia21*this._transform._rotation01+this._invInertia22*this._transform._rotation02,O=this._invInertia20*this._transform._rotation10+this._invInertia21*this._transform._rotation11+this._invInertia22*this._transform._rotation12,P=this._invInertia20*this._transform._rotation20+this._invInertia21*this._transform._rotation21+this._invInertia22*this._transform._rotation22,this._invInertia00=L,this._invInertia01=V,this._invInertia02=H,this._invInertia10=j,this._invInertia11=T,this._invInertia12=R,this._invInertia20=F,this._invInertia21=O,this._invInertia22=P,this._invInertia00*=this._rotFactor.x,this._invInertia01*=this._rotFactor.x,this._invInertia02*=this._rotFactor.x,this._invInertia10*=this._rotFactor.y,this._invInertia11*=this._rotFactor.y,this._invInertia12*=this._rotFactor.y,this._invInertia20*=this._rotFactor.z,this._invInertia21*=this._rotFactor.z,this._invInertia22*=this._rotFactor.z}},_integratePseudoVelocity:function(){var t=this._pseudoVelX*this._pseudoVelX+this._pseudoVelY*this._pseudoVelY+this._pseudoVelZ*this._pseudoVelZ,e=this._angPseudoVelX*this._angPseudoVelX+this._angPseudoVelY*this._angPseudoVelY+this._angPseudoVelZ*this._angPseudoVelZ;if(0!=t||0!=e)switch(this._type){case 1:this._pseudoVelX=0,this._pseudoVelY=0,this._pseudoVelZ=0,this._angPseudoVelX=0,this._angPseudoVelY=0,this._angPseudoVelZ=0;break;case 0:case 2:var a,i,n,s,r,o;a=this._pseudoVelX,i=this._pseudoVelY,n=this._pseudoVelZ,s=this._angPseudoVelX,r=this._angPseudoVelY,o=this._angPseudoVelZ,this._pseudoVelX=0,this._pseudoVelY=0,this._pseudoVelZ=0,this._angPseudoVelX=0,this._angPseudoVelY=0,this._angPseudoVelZ=0,this._transform._positionX+=a,this._transform._positionY+=i,this._transform._positionZ+=n;var l,_,h,c,g,u,f,d,b,p,m=Math.sqrt(s*s+r*r+o*o),I=.5*m;if(I<.5){var v=I*I;l=.5*(1-.16666666666666666*v+v*v*.008333333333333333),_=1-.5*v+v*v*.041666666666666664}else l=Math.sin(I)/m,_=Math.cos(I);h=s*l,c=r*l,g=o*l,u=_;var M,C=this._transform._rotation00,y=this._transform._rotation11,w=this._transform._rotation22,A=C+y+w;0<A?(p=.5*(M=Math.sqrt(A+1)),M=.5/M,f=(this._transform._rotation21-this._transform._rotation12)*M,d=(this._transform._rotation02-this._transform._rotation20)*M,b=(this._transform._rotation10-this._transform._rotation01)*M):y<C?w<C?(f=.5*(M=Math.sqrt(C-y-w+1)),M=.5/M,d=(this._transform._rotation01+this._transform._rotation10)*M,b=(this._transform._rotation02+this._transform._rotation20)*M,p=(this._transform._rotation21-this._transform._rotation12)*M):(b=.5*(M=Math.sqrt(w-C-y+1)),M=.5/M,f=(this._transform._rotation02+this._transform._rotation20)*M,d=(this._transform._rotation12+this._transform._rotation21)*M,p=(this._transform._rotation10-this._transform._rotation01)*M):w<y?(d=.5*(M=Math.sqrt(y-w-C+1)),M=.5/M,f=(this._transform._rotation01+this._transform._rotation10)*M,b=(this._transform._rotation12+this._transform._rotation21)*M,p=(this._transform._rotation02-this._transform._rotation20)*M):(b=.5*(M=Math.sqrt(w-C-y+1)),M=.5/M,f=(this._transform._rotation02+this._transform._rotation20)*M,d=(this._transform._rotation12+this._transform._rotation21)*M,p=(this._transform._rotation10-this._transform._rotation01)*M);var x=(f=u*f+h*p+c*b-g*d)*f+(d=u*d-h*b+c*p+g*f)*d+(b=u*b+h*d-c*f+g*p)*b+(p=u*p-h*f-c*d-g*b)*p;1e-32<x&&(x=1/Math.sqrt(x));f*=x,d*=x,b*=x,p*=x;var Z,z,B,N,G,k,S,W,X,Y,D,K,L,V,H,j,T,R,F=2*f,O=2*d,P=2*b,J=f*F,E=d*O,U=b*P,Q=f*O,q=d*P,$=f*P,tt=p*F,et=p*O,at=p*P;this._transform._rotation00=1-E-U,this._transform._rotation01=Q-at,this._transform._rotation02=$+et,this._transform._rotation10=Q+at,this._transform._rotation11=1-J-U,this._transform._rotation12=q-tt,this._transform._rotation20=$-et,this._transform._rotation21=q+tt,this._transform._rotation22=1-J-E,Z=this._transform._rotation00*this._invLocalInertia00+this._transform._rotation01*this._invLocalInertia10+this._transform._rotation02*this._invLocalInertia20,z=this._transform._rotation00*this._invLocalInertia01+this._transform._rotation01*this._invLocalInertia11+this._transform._rotation02*this._invLocalInertia21,B=this._transform._rotation00*this._invLocalInertia02+this._transform._rotation01*this._invLocalInertia12+this._transform._rotation02*this._invLocalInertia22,N=this._transform._rotation10*this._invLocalInertia00+this._transform._rotation11*this._invLocalInertia10+this._transform._rotation12*this._invLocalInertia20,G=this._transform._rotation10*this._invLocalInertia01+this._transform._rotation11*this._invLocalInertia11+this._transform._rotation12*this._invLocalInertia21,k=this._transform._rotation10*this._invLocalInertia02+this._transform._rotation11*this._invLocalInertia12+this._transform._rotation12*this._invLocalInertia22,S=this._transform._rotation20*this._invLocalInertia00+this._transform._rotation21*this._invLocalInertia10+this._transform._rotation22*this._invLocalInertia20,W=this._transform._rotation20*this._invLocalInertia01+this._transform._rotation21*this._invLocalInertia11+this._transform._rotation22*this._invLocalInertia21,X=this._transform._rotation20*this._invLocalInertia02+this._transform._rotation21*this._invLocalInertia12+this._transform._rotation22*this._invLocalInertia22,this._invInertia00=Z,this._invInertia01=z,this._invInertia02=B,this._invInertia10=N,this._invInertia11=G,this._invInertia12=k,this._invInertia20=S,this._invInertia21=W,this._invInertia22=X,Y=this._invInertia00*this._transform._rotation00+this._invInertia01*this._transform._rotation01+this._invInertia02*this._transform._rotation02,D=this._invInertia00*this._transform._rotation10+this._invInertia01*this._transform._rotation11+this._invInertia02*this._transform._rotation12,K=this._invInertia00*this._transform._rotation20+this._invInertia01*this._transform._rotation21+this._invInertia02*this._transform._rotation22,L=this._invInertia10*this._transform._rotation00+this._invInertia11*this._transform._rotation01+this._invInertia12*this._transform._rotation02,V=this._invInertia10*this._transform._rotation10+this._invInertia11*this._transform._rotation11+this._invInertia12*this._transform._rotation12,H=this._invInertia10*this._transform._rotation20+this._invInertia11*this._transform._rotation21+this._invInertia12*this._transform._rotation22,j=this._invInertia20*this._transform._rotation00+this._invInertia21*this._transform._rotation01+this._invInertia22*this._transform._rotation02,T=this._invInertia20*this._transform._rotation10+this._invInertia21*this._transform._rotation11+this._invInertia22*this._transform._rotation12,R=this._invInertia20*this._transform._rotation20+this._invInertia21*this._transform._rotation21+this._invInertia22*this._transform._rotation22,this._invInertia00=Y,this._invInertia01=D,this._invInertia02=K,this._invInertia10=L,this._invInertia11=V,this._invInertia12=H,this._invInertia20=j,this._invInertia21=T,this._invInertia22=R,this._invInertia00*=this._rotFactor.x,this._invInertia01*=this._rotFactor.x,this._invInertia02*=this._rotFactor.x,this._invInertia10*=this._rotFactor.y,this._invInertia11*=this._rotFactor.y,this._invInertia12*=this._rotFactor.y,this._invInertia20*=this._rotFactor.z,this._invInertia21*=this._rotFactor.z,this._invInertia22*=this._rotFactor.z}},updateMass:function(){for(var t,e,a,i,n,s,r,o,l,_=l=o=r=s=n=i=a=e=t=0,h=this._shapeList;null!=h;){var c=h._next,g=h._geom;g._updateMass();var u,f,d,b,p,m,I,v,M,C,y,w,A,x,Z,z,B,N,G,k=h._density*g._volume;C=h._localTransform._rotation00*g._inertiaCoeff00+h._localTransform._rotation01*g._inertiaCoeff10+h._localTransform._rotation02*g._inertiaCoeff20,f=h._localTransform._rotation00*g._inertiaCoeff01+h._localTransform._rotation01*g._inertiaCoeff11+h._localTransform._rotation02*g._inertiaCoeff21,d=h._localTransform._rotation00*g._inertiaCoeff02+h._localTransform._rotation01*g._inertiaCoeff12+h._localTransform._rotation02*g._inertiaCoeff22,b=h._localTransform._rotation10*g._inertiaCoeff00+h._localTransform._rotation11*g._inertiaCoeff10+h._localTransform._rotation12*g._inertiaCoeff20,p=h._localTransform._rotation10*g._inertiaCoeff01+h._localTransform._rotation11*g._inertiaCoeff11+h._localTransform._rotation12*g._inertiaCoeff21,m=h._localTransform._rotation10*g._inertiaCoeff02+h._localTransform._rotation11*g._inertiaCoeff12+h._localTransform._rotation12*g._inertiaCoeff22,I=h._localTransform._rotation20*g._inertiaCoeff00+h._localTransform._rotation21*g._inertiaCoeff10+h._localTransform._rotation22*g._inertiaCoeff20,v=h._localTransform._rotation20*g._inertiaCoeff01+h._localTransform._rotation21*g._inertiaCoeff11+h._localTransform._rotation22*g._inertiaCoeff21,M=h._localTransform._rotation20*g._inertiaCoeff02+h._localTransform._rotation21*g._inertiaCoeff12+h._localTransform._rotation22*g._inertiaCoeff22,y=(u=C)*h._localTransform._rotation00+f*h._localTransform._rotation01+d*h._localTransform._rotation02,w=u*h._localTransform._rotation10+f*h._localTransform._rotation11+d*h._localTransform._rotation12,A=u*h._localTransform._rotation20+f*h._localTransform._rotation21+d*h._localTransform._rotation22,x=b*h._localTransform._rotation00+p*h._localTransform._rotation01+m*h._localTransform._rotation02,Z=b*h._localTransform._rotation10+p*h._localTransform._rotation11+m*h._localTransform._rotation12,z=b*h._localTransform._rotation20+p*h._localTransform._rotation21+m*h._localTransform._rotation22,B=I*h._localTransform._rotation00+v*h._localTransform._rotation01+M*h._localTransform._rotation02,N=I*h._localTransform._rotation10+v*h._localTransform._rotation11+M*h._localTransform._rotation12,G=I*h._localTransform._rotation20+v*h._localTransform._rotation21+M*h._localTransform._rotation22,u=y,f=w,d=A,b=x,p=Z,m=z,I=B,v=N,M=G,u*=k,f*=k,d*=k,b*=k,p*=k,m*=k,I*=k,v*=k,M*=k;var S=h._localTransform._positionX*h._localTransform._positionX,W=h._localTransform._positionY*h._localTransform._positionY,X=h._localTransform._positionZ*h._localTransform._positionZ,Y=-h._localTransform._positionX*h._localTransform._positionY,D=-h._localTransform._positionY*h._localTransform._positionZ,K=-h._localTransform._positionZ*h._localTransform._positionX;_+=k,t+=u+=(W+X)*k,e+=f+=Y*k,a+=d+=K*k,i+=b+=Y*k,n+=p+=(S+X)*k,s+=m+=D*k,r+=I+=K*k,o+=v+=D*k,l+=M+=(S+W)*k,h=c}this._mass=_,this._localInertia00=t,this._localInertia01=e,this._localInertia02=a,this._localInertia10=i,this._localInertia11=n,this._localInertia12=s,this._localInertia20=r,this._localInertia21=o,this._localInertia22=l;var L,V,H,j,T,R,F,O,P,J,E,U,Q,q,$,tt,et,at,it=this._localInertia11*this._localInertia22-this._localInertia12*this._localInertia21,nt=this._localInertia10*this._localInertia22-this._localInertia12*this._localInertia20,st=this._localInertia10*this._localInertia21-this._localInertia11*this._localInertia20,rt=this._localInertia00*it-this._localInertia01*nt+this._localInertia02*st;if(0<this._mass&&0<rt&&0==this._type){this._invMass=1/this._mass;var ot=this._localInertia11*this._localInertia22-this._localInertia12*this._localInertia21,lt=this._localInertia10*this._localInertia22-this._localInertia12*this._localInertia20,_t=this._localInertia10*this._localInertia21-this._localInertia11*this._localInertia20,ht=this._localInertia01*this._localInertia22-this._localInertia02*this._localInertia21,ct=this._localInertia00*this._localInertia22-this._localInertia02*this._localInertia20,gt=this._localInertia00*this._localInertia21-this._localInertia01*this._localInertia20,ut=this._localInertia01*this._localInertia12-this._localInertia02*this._localInertia11,ft=this._localInertia00*this._localInertia12-this._localInertia02*this._localInertia10,dt=this._localInertia00*this._localInertia11-this._localInertia01*this._localInertia10,bt=this._localInertia00*ot-this._localInertia01*lt+this._localInertia02*_t;(bt<-1e-32||1e-32<bt)&&(bt=1/bt),this._invLocalInertia00=ot*bt,this._invLocalInertia01=-ht*bt,this._invLocalInertia02=ut*bt,this._invLocalInertia10=-lt*bt,this._invLocalInertia11=ct*bt,this._invLocalInertia12=-ft*bt,this._invLocalInertia20=_t*bt,this._invLocalInertia21=-gt*bt,this._invLocalInertia22=dt*bt,this._invLocalInertiaWithoutRotFactor00=this._invLocalInertia00,this._invLocalInertiaWithoutRotFactor01=this._invLocalInertia01,this._invLocalInertiaWithoutRotFactor02=this._invLocalInertia02,this._invLocalInertiaWithoutRotFactor10=this._invLocalInertia10,this._invLocalInertiaWithoutRotFactor11=this._invLocalInertia11,this._invLocalInertiaWithoutRotFactor12=this._invLocalInertia12,this._invLocalInertiaWithoutRotFactor20=this._invLocalInertia20,this._invLocalInertiaWithoutRotFactor21=this._invLocalInertia21,this._invLocalInertiaWithoutRotFactor22=this._invLocalInertia22,this._invLocalInertia00=this._invLocalInertiaWithoutRotFactor00*this._rotFactor.x,this._invLocalInertia01=this._invLocalInertiaWithoutRotFactor01*this._rotFactor.x,this._invLocalInertia02=this._invLocalInertiaWithoutRotFactor02*this._rotFactor.x,this._invLocalInertia10=this._invLocalInertiaWithoutRotFactor10*this._rotFactor.y,this._invLocalInertia11=this._invLocalInertiaWithoutRotFactor11*this._rotFactor.y,this._invLocalInertia12=this._invLocalInertiaWithoutRotFactor12*this._rotFactor.y,this._invLocalInertia20=this._invLocalInertiaWithoutRotFactor20*this._rotFactor.z,this._invLocalInertia21=this._invLocalInertiaWithoutRotFactor21*this._rotFactor.z,this._invLocalInertia22=this._invLocalInertiaWithoutRotFactor22*this._rotFactor.z}else this._invMass=0,this._invLocalInertia00=0,this._invLocalInertia01=0,this._invLocalInertia02=0,this._invLocalInertia10=0,this._invLocalInertia11=0,this._invLocalInertia12=0,this._invLocalInertia20=0,this._invLocalInertia21=0,this._invLocalInertia22=0,this._invLocalInertiaWithoutRotFactor00=0,this._invLocalInertiaWithoutRotFactor01=0,this._invLocalInertiaWithoutRotFactor02=0,this._invLocalInertiaWithoutRotFactor10=0,this._invLocalInertiaWithoutRotFactor11=0,this._invLocalInertiaWithoutRotFactor12=0,this._invLocalInertiaWithoutRotFactor20=0,this._invLocalInertiaWithoutRotFactor21=0,(this._invLocalInertiaWithoutRotFactor22=0)==this._type&&(this._type=1);L=this._transform._rotation00*this._invLocalInertia00+this._transform._rotation01*this._invLocalInertia10+this._transform._rotation02*this._invLocalInertia20,V=this._transform._rotation00*this._invLocalInertia01+this._transform._rotation01*this._invLocalInertia11+this._transform._rotation02*this._invLocalInertia21,H=this._transform._rotation00*this._invLocalInertia02+this._transform._rotation01*this._invLocalInertia12+this._transform._rotation02*this._invLocalInertia22,j=this._transform._rotation10*this._invLocalInertia00+this._transform._rotation11*this._invLocalInertia10+this._transform._rotation12*this._invLocalInertia20,T=this._transform._rotation10*this._invLocalInertia01+this._transform._rotation11*this._invLocalInertia11+this._transform._rotation12*this._invLocalInertia21,R=this._transform._rotation10*this._invLocalInertia02+this._transform._rotation11*this._invLocalInertia12+this._transform._rotation12*this._invLocalInertia22,F=this._transform._rotation20*this._invLocalInertia00+this._transform._rotation21*this._invLocalInertia10+this._transform._rotation22*this._invLocalInertia20,O=this._transform._rotation20*this._invLocalInertia01+this._transform._rotation21*this._invLocalInertia11+this._transform._rotation22*this._invLocalInertia21,P=this._transform._rotation20*this._invLocalInertia02+this._transform._rotation21*this._invLocalInertia12+this._transform._rotation22*this._invLocalInertia22,this._invInertia00=L,this._invInertia01=V,this._invInertia02=H,this._invInertia10=j,this._invInertia11=T,this._invInertia12=R,this._invInertia20=F,this._invInertia21=O,this._invInertia22=P,J=this._invInertia00*this._transform._rotation00+this._invInertia01*this._transform._rotation01+this._invInertia02*this._transform._rotation02,E=this._invInertia00*this._transform._rotation10+this._invInertia01*this._transform._rotation11+this._invInertia02*this._transform._rotation12,U=this._invInertia00*this._transform._rotation20+this._invInertia01*this._transform._rotation21+this._invInertia02*this._transform._rotation22,Q=this._invInertia10*this._transform._rotation00+this._invInertia11*this._transform._rotation01+this._invInertia12*this._transform._rotation02,q=this._invInertia10*this._transform._rotation10+this._invInertia11*this._transform._rotation11+this._invInertia12*this._transform._rotation12,$=this._invInertia10*this._transform._rotation20+this._invInertia11*this._transform._rotation21+this._invInertia12*this._transform._rotation22,tt=this._invInertia20*this._transform._rotation00+this._invInertia21*this._transform._rotation01+this._invInertia22*this._transform._rotation02,et=this._invInertia20*this._transform._rotation10+this._invInertia21*this._transform._rotation11+this._invInertia22*this._transform._rotation12,at=this._invInertia20*this._transform._rotation20+this._invInertia21*this._transform._rotation21+this._invInertia22*this._transform._rotation22,this._invInertia00=J,this._invInertia01=E,this._invInertia02=U,this._invInertia10=Q,this._invInertia11=q,this._invInertia12=$,this._invInertia20=tt,this._invInertia21=et,this._invInertia22=at,this._invInertia00*=this._rotFactor.x,this._invInertia01*=this._rotFactor.x,this._invInertia02*=this._rotFactor.x,this._invInertia10*=this._rotFactor.y,this._invInertia11*=this._rotFactor.y,this._invInertia12*=this._rotFactor.y,this._invInertia20*=this._rotFactor.z,this._invInertia21*=this._rotFactor.z,this._invInertia22*=this._rotFactor.z,this._sleeping=!1,this._sleepTime=0},applyImpulse:function(t,e){var a,i,n,s,r,o,l,_,h,c=t;a=c.x,i=c.y,n=c.z,this._velX+=a*this._invMass,this._velY+=i*this._invMass,this._velZ+=n*this._invMass;var g,u,f,d=e;l=d.x,_=d.y,h=d.z,l-=this._transform._positionX,s=(_-=this._transform._positionY)*n-(h-=this._transform._positionZ)*i,r=h*a-l*n,o=l*i-_*a,g=this._invInertia00*s+this._invInertia01*r+this._invInertia02*o,u=this._invInertia10*s+this._invInertia11*r+this._invInertia12*o,f=this._invInertia20*s+this._invInertia21*r+this._invInertia22*o,s=g,r=u,o=f,this._angVelX+=s,this._angVelY+=r,this._angVelZ+=o,this._sleeping=!1,this._sleepTime=0},addShape:function(t){if(null==this._shapeList?this._shapeList=t:(this._shapeListLast._next=t)._prev=this._shapeListLast,this._shapeListLast=t,this._numShapes++,null!=(t._rigidBody=this)._world){var e=this._world;t._proxy=e._broadPhase.createProxy(t,t._aabb),t._id=e._shapeIdCount++,e._numShapes++}this.updateMass();for(var a=this._shapeList;null!=a;){var i,n,s,r,o,l,_,h,c,g,u,f,d=a._next,b=a._ptransform,p=a._localTransform,m=this._ptransform;i=m._rotation00*p._rotation00+m._rotation01*p._rotation10+m._rotation02*p._rotation20,n=m._rotation00*p._rotation01+m._rotation01*p._rotation11+m._rotation02*p._rotation21,s=m._rotation00*p._rotation02+m._rotation01*p._rotation12+m._rotation02*p._rotation22,r=m._rotation10*p._rotation00+m._rotation11*p._rotation10+m._rotation12*p._rotation20,o=m._rotation10*p._rotation01+m._rotation11*p._rotation11+m._rotation12*p._rotation21,l=m._rotation10*p._rotation02+m._rotation11*p._rotation12+m._rotation12*p._rotation22,_=m._rotation20*p._rotation00+m._rotation21*p._rotation10+m._rotation22*p._rotation20,h=m._rotation20*p._rotation01+m._rotation21*p._rotation11+m._rotation22*p._rotation21,c=m._rotation20*p._rotation02+m._rotation21*p._rotation12+m._rotation22*p._rotation22,b._rotation00=i,b._rotation01=n,b._rotation02=s,b._rotation10=r,b._rotation11=o,b._rotation12=l,b._rotation20=_,b._rotation21=h,b._rotation22=c,g=m._rotation00*p._positionX+m._rotation01*p._positionY+m._rotation02*p._positionZ,u=m._rotation10*p._positionX+m._rotation11*p._positionY+m._rotation12*p._positionZ,f=m._rotation20*p._positionX+m._rotation21*p._positionY+m._rotation22*p._positionZ,b._positionX=g,b._positionY=u,b._positionZ=f,b._positionX+=m._positionX,b._positionY+=m._positionY,b._positionZ+=m._positionZ;var I,v,M,C,y,w,A,x,Z,z,B,N,G,k,S,W,X,Y,D=a._transform,K=a._localTransform,L=this._transform;if(I=L._rotation00*K._rotation00+L._rotation01*K._rotation10+L._rotation02*K._rotation20,v=L._rotation00*K._rotation01+L._rotation01*K._rotation11+L._rotation02*K._rotation21,M=L._rotation00*K._rotation02+L._rotation01*K._rotation12+L._rotation02*K._rotation22,C=L._rotation10*K._rotation00+L._rotation11*K._rotation10+L._rotation12*K._rotation20,y=L._rotation10*K._rotation01+L._rotation11*K._rotation11+L._rotation12*K._rotation21,w=L._rotation10*K._rotation02+L._rotation11*K._rotation12+L._rotation12*K._rotation22,A=L._rotation20*K._rotation00+L._rotation21*K._rotation10+L._rotation22*K._rotation20,x=L._rotation20*K._rotation01+L._rotation21*K._rotation11+L._rotation22*K._rotation21,Z=L._rotation20*K._rotation02+L._rotation21*K._rotation12+L._rotation22*K._rotation22,D._rotation00=I,D._rotation01=v,D._rotation02=M,D._rotation10=C,D._rotation11=y,D._rotation12=w,D._rotation20=A,D._rotation21=x,D._rotation22=Z,z=L._rotation00*K._positionX+L._rotation01*K._positionY+L._rotation02*K._positionZ,B=L._rotation10*K._positionX+L._rotation11*K._positionY+L._rotation12*K._positionZ,N=L._rotation20*K._positionX+L._rotation21*K._positionY+L._rotation22*K._positionZ,D._positionX=z,D._positionY=B,D._positionZ=N,D._positionX+=L._positionX,D._positionY+=L._positionY,D._positionZ+=L._positionZ,a._geom._computeAabb(a._aabb,a._ptransform),G=a._aabb._minX,k=a._aabb._minY,S=a._aabb._minZ,W=a._aabb._maxX,X=a._aabb._maxY,Y=a._aabb._maxZ,a._geom._computeAabb(a._aabb,a._transform),a._aabb._minX=G<a._aabb._minX?G:a._aabb._minX,a._aabb._minY=k<a._aabb._minY?k:a._aabb._minY,a._aabb._minZ=S<a._aabb._minZ?S:a._aabb._minZ,a._aabb._maxX=W>a._aabb._maxX?W:a._aabb._maxX,a._aabb._maxY=X>a._aabb._maxY?X:a._aabb._maxY,a._aabb._maxZ=Y>a._aabb._maxZ?Y:a._aabb._maxZ,null!=a._proxy){var V,H,j;V=a._transform._positionX-a._ptransform._positionX,H=a._transform._positionY-a._ptransform._positionY,j=a._transform._positionZ-a._ptransform._positionZ;var T=a.displacement;T.x=V,T.y=H,T.z=j,a._rigidBody._world._broadPhase.moveProxy(a._proxy,a._aabb,a.displacement)}a=d}},__class__:Pn};var Jn=function(){this.position=new Jt,this.rotation=new nn,this.linearVelocity=new Jt,this.angularVelocity=new Jt,this.type=0,this.autoSleep=!0,this.linearDamping=0,this.angularDamping=0};(i["oimo.dynamics.rigidbody.RigidBodyConfig"]=Jn).__name__=!0,Jn.prototype={position:null,rotation:null,linearVelocity:null,angularVelocity:null,type:null,autoSleep:null,linearDamping:null,angularDamping:null,__class__:Jn};var En=function(){};(i["oimo.dynamics.rigidbody.RigidBodyType"]=En).__name__=!0;var Un=function(t){this._id=-1,this._localTransform=new tn,this._ptransform=new tn,this._transform=new tn;var e=t.position;this._localTransform._positionX=e.x,this._localTransform._positionY=e.y,this._localTransform._positionZ=e.z;var a=t.rotation;this._localTransform._rotation00=a.e00,this._localTransform._rotation01=a.e01,this._localTransform._rotation02=a.e02,this._localTransform._rotation10=a.e10,this._localTransform._rotation11=a.e11,this._localTransform._rotation12=a.e12,this._localTransform._rotation20=a.e20,this._localTransform._rotation21=a.e21,this._localTransform._rotation22=a.e22;var i=this._ptransform,n=this._localTransform;i._positionX=n._positionX,i._positionY=n._positionY,i._positionZ=n._positionZ,i._rotation00=n._rotation00,i._rotation01=n._rotation01,i._rotation02=n._rotation02,i._rotation10=n._rotation10,i._rotation11=n._rotation11,i._rotation12=n._rotation12,i._rotation20=n._rotation20,i._rotation21=n._rotation21,i._rotation22=n._rotation22;var s=this._transform,r=this._localTransform;s._positionX=r._positionX,s._positionY=r._positionY,s._positionZ=r._positionZ,s._rotation00=r._rotation00,s._rotation01=r._rotation01,s._rotation02=r._rotation02,s._rotation10=r._rotation10,s._rotation11=r._rotation11,s._rotation12=r._rotation12,s._rotation20=r._rotation20,s._rotation21=r._rotation21,s._rotation22=r._rotation22,this._restitution=t.restitution,this._friction=t.friction,this._density=t.density,this._geom=t.geometry,this._collisionGroup=t.collisionGroup,this._collisionMask=t.collisionMask,this._contactCallback=t.contactCallback,this._aabb=new Ni,this._proxy=null,this.displacement=new Jt};(i["oimo.dynamics.rigidbody.Shape"]=Un).__name__=!0,Un.prototype={_id:null,_prev:null,_next:null,_rigidBody:null,_geom:null,_localTransform:null,_ptransform:null,_transform:null,_restitution:null,_friction:null,_density:null,_aabb:null,_proxy:null,_collisionGroup:null,_collisionMask:null,_contactCallback:null,displacement:null,__class__:Un};var Qn=function(){this.position=new Jt,this.rotation=new nn,this.friction=wn.defaultFriction,this.restitution=wn.defaultRestitution,this.density=wn.defaultDensity,this.collisionGroup=wn.defaultCollisionGroup,this.collisionMask=wn.defaultCollisionMask,this.geometry=null,this.contactCallback=null};(i["oimo.dynamics.rigidbody.ShapeConfig"]=Qn).__name__=!0,Qn.prototype={position:null,rotation:null,friction:null,restitution:null,density:null,geometry:null,collisionGroup:null,collisionMask:null,contactCallback:null,__class__:Qn};var qn=0;function $n(t,e){return null==e?null:(null==e.__id__&&(e.__id__=qn++),null==t.hx__closures__?t.hx__closures__={}:a=t.hx__closures__[e.__id__],null==a&&(a=e.bind(t),t.hx__closures__[e.__id__]=a),a);var a}i.Math=Math,String.prototype.__class__=i.String=String,String.__name__=!0,i.Array=Array,Array.__name__=!0,Date.prototype.__class__=i.Date=Date,Date.__name__=["Date"];var ts={},es={},as=Number,is=Boolean,ns={},ss={};Be.count=0;var rs={};Object.defineProperty(Ot.prototype,"message",{get:function(){return String(this.val)}});var os=e.ArrayBuffer||kt;null==os.prototype.slice&&(os.prototype.slice=kt.sliceImpl);var ls=e.DataView||St,_s=e.Float32Array||Wt._new,hs=e.Uint8Array||Yt._new;l.__meta__={fields:{fireFreq:{prop:null}}},g.datasetRGB1=[-1.099459,-.1335146,-4.083223,5.919603,-.1104166,1.600158,-1326538e-12,4.917807,.5127716,-1.169858,-.1832793,.9694744,.09495762,-.04738918,.2194171,.1095749,3.603604,.3815119,-.9665225,-.1403888,5.194457,-1.107607,-.8135181,4.969661,-.2300508,-2.48935,1.279158,-1.292508,-.1299552,-2.071404,-.04752482,1.215598,-1.904179,.3027985,8.707768,.06332446,-.9264666,-.169678,4.57407,-.4232936,-7.575833,5.079755,-.2576343,-4.506805,.6908129,-1.139072,-.1796056,1.923311,6.788529,-2.364389,-1.064041,.171701,1.534681,.501581,-1.107257,-.1384411,-4.285744,5.713157,-.1015992,1.372638,.06555893,5.127514,.6550471,-1.187337,-.1969013,.8551048,.05289708,-.07626406,.01733153,.1779454,3.801038,.4742709,-.9685321,-.1553308,4.732492,-1.178935,-.7852791,4.604492,-.2666518,-2.367663,1.177527,-1.252817,-.05129949,-2.800433,-.01295992,1.308964,-2.204331,.7276011,8.699265,.1188388,-.9459509,-.2322133,4.375041,-.1712018,-7.451681,5.078019,-.4223538,-4.595561,1.074719,-1.125092,-.179675,1.626399,6.989743,-2.406382,-.9060383,.2961611,1.337715,.543814,-1.135338,-.171616,-1.499253,2.373491,-.1654023,.9566404,.1113453,4.528473,.6579439,-1.13278,-.1456214,-1.736672,1.756589,-.1087003,.3757927,.252507,7.178513,.5003814,-1.167176,-.2927225,5.727667,-3.139244,-.6425204,2.822634,-.1457812,-6.78708,1.017072,-1.042529,.04110823,-4.000629,4.362364,1.09054,-1.338674,.8246964,10.95249,.2912211,-1.061598,-.2096143,3.803155,-7.977069,-3.63788,3.707671,-.1903128,-3.397953,.99715,-1.07356,-.2077964,1.492052,16.26322,-5.015304,-.4059889,.2659782,.639538,.5634436,-1.172794,-.2111186,-1.360013,1.60408,-.08473723,.7217312,.154803,4.25701,.6328974,-1.238374,-.2670827,.3247678,.5466311,-.7425952,.527644,.02678026,5.484169,.6814734,-1.176923,-.2574586,2.304045,-2.797678,1.464405,1.998552,.2550559,-4.199772,.7544892,-1.003284,.01943984,-2.145066,10.30924,-15.25413,-2.02301,.5448699,8.159497,.5539148,-1.060017,-.2037206,2.483018,-4.595459,6.526991,4.031804,.1206513,-2.586527,.7875752,-1.081141,-.2123302,1.092275,2.683841,-4.166938,-1.396582,.4371205,1.030233,.6664862,-1.222392,-.2651924,-.4625037,.3521964,.02148855,.5078494,.179159,3.852516,.5998216,-1.42461,-.4710155,-.1826815,1.786277,-1.952442,.5277612,-.01773629,2.415874,.6701272,-1.130655,-.1358609,.9171203,-4.660394,6.251162,1.904529,.2639668,1.85613,.822844,-.9739015,-.06674749,-.4768897,12.48589,-19.94688,-2.353043,.5885575,1.287251,.4830135,-1.082178,-.1974495,1.050245,-4.792855,8.663406,3.246969,.1556731,.8117442,.8050376,-1.063354,-.1727108,.9681592,2.736077,-4.969269,-.836057,.5994612,1.024039,.6786935,-1.261936,-.3053676,-.4262222,.4000196,-.02059388,.4721802,.1480028,3.505343,.6121337,-1.681088,-.6971919,-.1105652,.7437426,-.6594399,.2254221,.08710195,1.263913,.5681865,-.9453001,.03460388,.6067038,-1.985128,3.457236,2.655483,-.01162354,3.304716,1.00195,-1.086609,-.2029011,-.639917,6.926885,-15.12189,-3.793051,.945612,.2222222,.2893725,-1.041259,-.138879,1.147331,6.282086,3.679836,4.398314,-.1355232,1.031134,.9273509,-1.063473,-.1916051,.6556979,-.003371891,-3.699664,-1.926783,.7371154,1.179975,.6367068,-1.33639,-.3778927,-.7259477,.2270247,.4627513,.1366459,.2637347,3.292059,.4998211,-2.119878,-1.055472,.5422052,.7826648,-1.286065,.9517905,-.1432358,-.2379816,.5910513,-.7761432,.2124336,-.6845184,-.9812342,4.347257,.967198,.377315,5.789529,.9646598,-1.118734,-.3513815,.5500918,.9449627,-12.6207,-1.82528,.473126,-3.326892,.3568768,-1.026437,-.08257946,.3221701,11.98372,1.55513,2.560304,.1406465,2.912858,.8643181,-1.069949,-.2029607,.5825042,-.002398595,-3.278335,-1.349882,.7208433,.8505164,.6625391,-1.392309,-.4454945,-.5664,.6283393,-.3761727,.6949802,.07748178,3.192797,.5968661,-2.713405,-1.395112,.202923,.1877272,-.3715859,-.1652929,.2385861,-.4150768,.1375467,-.9588644,.024339,-1.527493,-.9632874,5.496269,1.094931,.2004044,6.084554,1.369604,-.8028546,-.2473563,1.617898,2.073591,-11.49446,-.8394131,.2726847,-4.634538,.1367293,-1.198326,-.1804865,-.3565414,4.0732,1.662086,1.23977,.3367978,2.997402,.9360383,-1.013531,-.185906,.5799857,13.31883,-4.346873,-1.11382,.5275714,.8045177,.6496373,-1.530103,-.6107468,-.3841771,1.881508,-1.464807,.665469,-5950797e-12,2.738912,.8101012,-2.415469,-1.057499,-.4161968,-2.357548,.6300296,.6224915,.01545048,2.038561,-.1339415,-3.096796,-1.465688,-1.199232,4.567061,3.26098,-.9794907,.8950491,2.049235,1.331015,.2713904,.2852852,1.20209,-8.206784,-5.805762,1.804431,-.6090648,-1.990902,.3288858,-1.45658,-.345596,-.06409257,16.67697,-2.311094,-.9771104,.6759863,1.245136,.7911932,-.9860389,-.2099564,.294665,-.0035478,-2.268313,-.06205647,.4705185,.8657995,.6856284,-1.971736,-.9414047,-.3400557,1.468763,-1.474284,.5501062,-110975e-10,2.35637,.9001702,-1.589845,-.7797079,-.558224,-.8137376,.5846617,.1129459,-.02658005,2.707248,-.2112486,-6.940173,-2.823963,-1.620848,1.090696,2.39173,1.370047,.5890462,1.7284,1.331253,1.293144,-.001919778,1.644206,-.8666967,-7.161953,-1.385018,-.1505374,-1.388643,.2530122,-1.48888,-.2495496,-.2377137,11.67714,-.8617124,1.053828,.1992744,.3633564,.8553304,-1.060891,-.4035829,.2823207,-.002369798,-1.876577,-.5950265,.4241017,.3140802,.6631669,-1.101204,-.1351353,-4.030882,6.096353,-.1148599,1.606507,-1555474e-12,4.436084,.5973715,-1.154597,-.1923378,.8512132,.2934895,-.06522777,.1389077,.09091469,3.133307,.2108541,-1.031588,-.1546804,5.266214,-.949139,-.7184867,4.875626,-.1911907,-2.865642,1.087895,-1.159454,-.09546699,-1.508146,-.02031411,1.040653,-2.333508,.2540592,8.594981,.0931677,-1.03594,-.2021151,4.719343,-.9019318,-7.858046,3.901234,-.2233137,-4.344739,.6550733,-1.096669,-.1558196,2.057553,6.274495,-2.678352,-1.814927,.1550676,1.903276,.4998989,-1.114209,-.1473531,-7.602914,8.973685,-.04980074,1.289198,.08366906,4.557987,.6118757,-1.149397,-.1981628,4.914096,-3.498986,-.0625709,.1667401,.104898,2.284689,.5935965,-1.056121,-.1456172,.4272656,2.912649,-.5501745,4.406542,-.138768,1.245555,.9733011,-1.125047,-.04003662,1.058457,-3.462236,.4395278,-2.395805,.5177589,4.866247,.4253189,-1.051444,-.2804541,3.364668,3.293787,-10.15741,3.807407,-.3592377,-3.367415,.7900825,-1.093847,-.1436965,2.38478,5.78707,-2.445987,-1.311171,.2326563,1.158439,.5555416,-1.134824,-.1680468,-3.32562,4.458596,-.1135063,1.1045,.07794544,4.609952,.6854854,-1.143017,-.1565926,.3014687,-.1763027,-.03557925,-.2342406,.2528705,5.884085,.4750602,-1.136801,-.2907502,3.682423,-.4061202,-.8728159,4.00151,-.1522202,-5.528713,1.044847,-1.063652,.07808107,-1.983678,.3648078,2.102276,-3.06505,.8431951,10.3883,.2662834,-1.061015,-.2859814,4.223615,-2.290138,-8.31401,4.405718,-.4613627,-4.50291,1.008383,-1.106302,-.1697123,2.087196,8.238929,-2.992416,-1.821776,.3434859,.7755179,.534119,-1.17111,-.2106304,-1.614361,2.378103,-.1625969,.8504483,.1059312,4.046256,.6618227,-1.20048,-.2235733,1.01439,-1.174074,-.444018,.2262406,.1665868,5.461829,.567631,-1.223587,-.3502622,1.699106,.6724266,1.268567,2.135102,.0008039374,-5.221111,.944569,-.9452673,.1468459,-1.335034,4.346628,-12.85652,-1.807046,.8175243,9.301065,.3656798,-1.134681,-.3310951,3.571244,-2.208948,6.04158,3.107577,-.3112127,-4.186351,.9188333,-1.083237,-.1831394,2.062654,1.385424,-5.00495,-1.332669,.3627352,.332315,.6191181,-1.211527,-.2590617,-.1660874,.3627905,-.1039258,.4697924,.1671653,3.507497,.6022506,-1.433017,-.4733592,.1724445,.9953236,-1.874457,.4432099,.0171581,2.339272,.644147,-1.08492,-.1587903,.8999585,-2.537516,5.877859,2.014554,.09689141,.3177242,.9030399,-1.008242,.00279303,-.3507469,10.283,-20.80454,-2.781026,.899509,3.366951,.3473867,-1.103151,-.2799598,2.525791,-4.255704,9.903388,3.722668,-.3603941,-1.303292,.9369454,-1.102235,-.2025061,2.08566,1.686787,-5.010957,-1.656458,.4584029,-.2751759,.6184162,-1.25613,-.3104904,.163935,.1315502,-.7297583,.477848,.1259265,3.012108,.6202728,-1.620114,-.655267,-.2877157,1.094371,.2818914,.369683,.09428521,1.450951,.5681308,-.9686204,-.03755647,1.46998,-3.103414,2.856583,1.883209,-.05746099,1.286383,1.001751,-1.089377,-.1023062,-1.498891,10.66455,-17.20184,-2.759314,1.061258,2.910211,.2624701,-1.044681,-.2156857,3.230136,-.5863862,6.09664,3.550019,-.4255773,-1.500033,.9687696,-1.133658,-.2505101,1.71784,.008480428,-5.011789,-1.740989,.498343,-.2081829,.6088641,-1.335366,-.3863319,-.5279971,.3638324,.3230699,.08339707,.2483293,2.678646,.4998346,-2.004511,-.9957121,1.250807,.01625025,-.3410754,.7858244,-.09506757,.02651876,.5788643,-.8714157,.1192051,-.8486879,-.3702497,1.818277,1.103427,.2454866,3.841575,.984735,-1.042618,-.2285793,.3620175,2.983368,-9.776844,-1.971587,.6691674,-.7901947,.32132,-1.099112,-.1869868,2.044065,2.062964,1.265668,2.71013,-.1099443,.2179353,.9024108,-1.106985,-.2396881,1.809807,8.523319,-5.011788,-1.590086,.3248449,-.1003187,.6550606,-1.421285,-.4767024,-.3885004,.827459,-.3644229,.6999513,.0519671,2.578431,.624631,-2.611217,-1.398846,.4527425,-.5932142,.2224617,-.5593581,.3389633,-.7767112,.06536004,-.9881543,.04684782,-.8616613,.8799807,4.00313,1.739543,-.08098378,5.524802,1.499673,-.7544759,-.2314808,.812577,-.7724135,-9.577645,-1.629433,.6790832,-4.193895,-.02526624,-1.273719,-.218703,1.401798,5.231832,.7405093,1.775166,-.07269476,1.996087,1.05745,-1.046864,-.2247559,1.679449,11.40057,-4.948829,-1.182664,.3241038,-.2470012,.61159,-1.514607,-.598543,-.187761,1.75693,-1.314206,.611581,-597046e-11,2.412975,.8124304,-2.308414,-1.083797,-.1179959,-1.728246,.7784742,.5494505,.006203168,.9326251,-.1419518,-3.230837,-1.43867,-.9868286,2.974393,1.949339,-.6337857,.8160271,3.278606,1.354373,.5149378,.2754789,1.040965,-4.501186,-3.399057,.9661861,-.4736173,-4.037574,.2794847,-1.62187,-.3192763,.8786242,9.785565,-2.727652,.01903691,.5521261,2.138764,.8419871,-.9951701,-.2550607,1.498952,-.002737197,-3.101832,-.5921329,.2864422,-.4405218,.663141,-1.902954,-.9056918,-.206957,1.191499,-1.092577,.5849556,-9649602e-12,2.048407,.9001527,-1.271627,-.7193923,-.01136606,-.1167951,.003286175,-.05262827,-.02473874,1.716125,-.2187133,-7.647175,-3.114129,-1.490128,-.5266488,3.06309,1.474262,.5481458,2.052174,1.353089,2.191403,.342112,1.44651,2.170943,-7.768187,-1.471207,-.1456708,-1.753574,.2310576,-1.932296,-.3814739,.6245422,6.748294,-.3060171,1.067747,.2500671,-.1252596,.8614611,-.9471101,-.405264,1.300174,-.003951536,-1.908284,-.5385721,.2133578,-.6250292,.6658012],g.datasetRGBRad1=[1.962684,1.159831,4.450588,5.079633,4.437388,4.324573,1.946487,1.287515,3.703696,8.782833,3.440437,5.160333,1.88217,1.335878,2.648641,13.58368,3.105473,5.907387,1.738159,1.624289,-.008786695,21.18253,2.770255,7.055672,1.571896,2.301786,-4.028545,29.66806,1.630876,8.711031,1.475048,2.679086,-6.311315,33.77896,2.140975,9.385283,1.326174,3.378759,-9.831444,39.42061,2.852702,10.82542,1.153344,3.967771,-12.65181,41.95016,7.468239,12.2135,.9746081,4.051626,-12.98454,37.54964,17.49232,14.20619,.8448016,3.181809,-8.757338,21.97962,35.24033,16.39549,2.029623,1.364434,4.201529,5.415099,9.825839,10.63328,2.023126,1.494728,3.420413,9.072178,9.205157,11.86639,1.956307,1.648665,2.039712,14.30239,9.039526,13.30453,1.825053,1.985022,-.8036307,22.02493,9.415361,15.17659,1.650367,2.593201,-4.469328,29.69817,9.410977,17.4485,1.555202,2.962925,-6.60817,33.29887,10.64559,18.50816,1.412478,3.439403,-9.196616,36.85077,13.45341,20.03128,1.25299,3.820805,-11.15338,37.21593,20.14916,21.8232,1.091952,3.663027,-10.3133,29.78985,32.96835,23.7545,.9501691,2.664579,-5.545167,12.81159,51.54768,25.74284],g.datasetRGB2=[-1.14053,-.1982747,-7.51273,8.403899,-.05699038,.9015907,.03392161,4.772522,.5111184,-1.165117,-.1852955,2.963684,-2.262274,-.1571683,.6339974,.04977879,7.243307,.4220053,-1.169936,-.3357429,1.911291,-.2391074,-.4791643,1.446113,-.09178108,-4.700239,.8096219,-1.060246,-.1051633,.5013829,2.832309,-.3707855,1.523131,.09163749,5.604183,.7208566,-1.089753,-.2382167,2.360312,-5.902562,-8.799894,1.377692,-.06131633,-1.415472,.6124057,-1.075481,-.1242391,1.425781,8.810319,-2.922646,1.48652,.0327058,3.889783,.4999482,-1.149342,-.2076337,-7.446587,8.014559,-.04866227,.8203043,.06386483,4.894198,.5452051,-1.120531,-.1513311,2.735504,-2.417591,-.1361114,.4296342,.09427488,8.171403,.4102448,-1.226964,-.3516378,1.308298,-.05097487,-.4846783,1.654619,-.113494,-3.347854,1.131147,-.9664377,.02767589,.1658235,2.407439,-.1300304,.9170958,.2742895,6.642633,.2550064,-1.153358,-.3126223,2.078934,-5.857733,-8.659848,1.758505,-.09616094,-1.230863,.9663832,-1.05385,-.1330743,1.481738,10.49485,-3.528854,.9142363,.124488,2.644615,.5001048,-1.173687,-.2360362,-3.741454,4.088507,-.07528205,.6645237,.07718265,4.65122,.5586318,-1.213757,-.2589561,.7132551,-.4259327,-.1980821,.3627815,.0466656,5.807984,.5847377,-1.108794,-.225987,1.574179,-.3753731,-.5984743,1.659414,-.01681021,.6785219,.8647325,-1.060896,-.0134669,-.7529656,1.711319,-.9792435,.2022433,.3826487,5.725157,.5290714,-1.085145,-.2840715,2.088029,-4.935097,-9.056542,1.976149,-.03912485,-.8636064,.7452125,-1.077983,-.1416633,1.100848,10.15875,-2.943712,.5255135,.2164224,2.941143,.6699937,-1.223293,-.2867444,-1.624136,1.668299,-.09537589,.5015947,.1130741,4.244812,.5082152,-1.325342,-.4280991,.470549,.06926592,-.4572587,.5344144,-.02554192,3.093939,.6639401,-1.113581,-.1192133,.4011536,.7011889,.2052842,.9880724,.01807533,4.69016,.857624,-1.016063,-.1038138,-.2280391,.7898918,-11.27333,.2074545,.5388182,1.364263,.4660455,-1.099582,-.2228607,1.332648,5.135188,1.653152,1.41702,-.1087532,1.809275,.8080874,-1.064357,-.1520775,.8207368,-.001323565,-5.009523,.3946298,.4337902,2.593198,.6719172,-1.278702,-.3512866,-.4511055,.389576,-.2429672,.4270577,.1135348,3.71913,.4998867,-1.580069,-.7095475,-.3198904,1.715748,-1.185915,.4523161,-.01026159,.7927188,.553835,-.9474023,.1173703,.4881381,-2.618684,3.251661,1.213931,-.01736274,8.000768,1.025998,-1.129091,-.3287694,-.3524077,3.352892,-14.16073,-.8485617,.6560766,-2.820937,.3111303,-1.030884,-.1137581,1.109855,8.082276,1.519214,2.112433,-.1592299,3.675905,.8703367,-1.075192,-.1627166,.351491,1.168164,-4.255822,-.6015348,.6265776,2.884818,.6548384,-1.316017,-.3889652,-.5030854,.4488704,-.31868,.4570763,.08909201,3.659274,.5011746,-1.731876,-.8493806,.1194871,2.002781,-2.006547,.4872233,-.02854606,.2662137,.4611629,-.927368,.1380954,-.3302179,-3.553265,4.633345,.9696729,.08799775,8.291129,1.094451,-1.099377,-.3325392,.2501063,2.613712,-13.28142,-.5579527,.4992081,-3.504402,.3022924,-1.04842,-.1227773,.5845373,11.05869,.03813151,1.330409,.01978131,3.95943,.8396439,-1.063233,-.1560639,.2840033,.8751565,-3.41182,-.1436564,.584658,2.899292,.6799095,-1.376715,-.4541567,-1.445491,1.569898,-.1390627,.555827,.04109877,3.349451,.5516123,-1.953391,-1.035869,1.690563,-.196469,-.7787096,.5799605,.02945626,.04217906,.2451373,-1.012422,.07136451,-1.862534,-.7228653,.1947997,.2091805,.06399233,7.928994,1.290733,-.9706708,-.288095,1.107797,-2.731734,-8.445995,.4296774,.5117648,-3.824277,.1761207,-1.110611,-.1789409,.2108488,20.7143,-1.763174,.09554695,-.02943103,3.422079,.8815496,-1.048334,-.1614087,.2475184,.02146938,-2.983901,.2538224,.560137,2.461925,.6777394,-1.393719,-.5002724,-2.40894,2.680983,-.1362825,.7395067,-3300343e-12,3.260889,.8132057,-2.128663,-1.151182,2.923026,-1.931838,-.442617,.2309983,-.00548589,.3279529,-.2229467,-1.618022,-.376649,-3.163544,1.611608,-.3967476,.393368,.3006742,6.835177,1.613765,-.5669064,-.1481749,2.071817,-8.157422,-5.988088,.2387202,.1447191,-4.296385,.05011258,-1.241724,-.2519348,-.1908609,29.52235,-3.33366,-.01837651,.1022249,2.92932,.8867262,-1.02167,-.1667327,.1789771,-.002178108,-2.641572,-.05641484,.5303758,2.138196,.678035,-1.669332,-.7588708,-2.993557,3.17876,-.08066442,.6544672,-808988e-11,2.628924,.9001272,-1.755806,-.8735348,3.258881,-2.504785,-.3300791,.1180565,-.009315982,1.785154,-.3205824,-3.720277,-1.73335,-3.332272,1.515869,.1734218,.8011956,.199544,3.817666,1.638502,.4724641,.3209828,2.051443,-5.105574,-6.509139,-.4232041,.2598931,-2.151756,-.00349391,-1.5256,-.4897606,-.09891121,23.46818,-2.278152,.1681219,-.04469389,1.051,.9294666,-.9908649,-.2008182,.1605143,-.002463113,-2.477349,-.1218647,.4750121,1.460813,.6661364,-2.122119,-1.125475,-3.066599,3.145078,-.05411593,.5133628,-7823408e-12,2.268448,.9001416,-1.528158,-.9370249,2.567559,-1.591439,-.363446,.1763256,.001119624,1.811848,-.2637929,-6.524387,-2.673507,-2.940472,-.6025609,.7852067,1.073499,-.03540435,3.517416,1.490466,.8886026,-.09681828,1.430554,4.993717,-6.071355,-.6053986,.5092997,-1.27301,.07491329,-1.481997,-.5897282,.2659264,1.267239,-.5741291,.05983011,-.2217312,-.3016452,.926083,-1.010943,-.2075134,.05066749,14.70708,-3.780501,.07253223,.4045458,1.320164,.6559925,-1.129907,-.1884011,-8.04767,9.035776,-.05539419,.8823349,.03197135,4.839388,.5042822,-1.133821,-.1510781,3.362822,-2.453381,-.1463925,.4728708,.0595814,7.6363,.4805162,-1.176518,-.3549902,1.729044,-.2160966,-.5075865,1.675584,-.08906902,-5.386842,.5452218,-1.043563,-.07520975,.8750644,2.510518,.007584882,.936125,.07889083,6.066644,.5813108,-1.081304,-.2222253,2.517638,-4.45382,-8.663691,.8662558,-.04802657,-.8965449,.4886656,-1.083774,-.1375469,1.685818,5.63112,-3.100752,.4045941,.02346895,3.390321,.5008309,-1.143158,-.2058334,-9.660198,10.62394,-.04434119,.8607615,.03177325,4.416481,.5918162,-1.146773,-.1727385,4.626048,-4.684602,-.08307137,.1619616,.1484866,7.572868,.2681126,-1.151324,-.3099303,.4125596,2.340752,-.4214444,1.987375,-.191341,-3.845978,1.337311,-1.034258,-.007778759,.7050094,-.8036369,.313857,.2469452,.355997,7.485917,.04790329,-1.096568,-.2673169,2.575654,-.8057121,-8.884928,1.41617,-.2091315,-1.543494,1.065445,-1.083304,-.1528265,1.697727,2.503702,-2.885296,-.12985,.154887,2.479652,.5066496,-1.165736,-.2329945,-5.967964,6.705959,-.05931355,.7485638,.03913878,4.221591,.6183926,-1.212422,-.254591,2.418626,-2.266104,-.1102014,.01363887,.1055411,5.648062,.4557412,-1.070436,-.2163341,.7098718,.7843075,-.432393,2.109823,-.095897,-.1985193,1.060428,-1.104879,-.03013622,.02976276,1.069707,.141,-.488002,.4452288,6.41859,.3195986,-1.048969,-.2655317,2.689426,-3.941038,-9.506461,1.837119,-.1892124,-1.562146,.9043414,-1.106145,-.1601642,1.544544,7.388492,-2.9246,-.4328453,.1763161,2.523111,.5851902,-1.203666,-.2776587,-2.084286,2.45084,-.08746613,.5258507,.07983316,3.860055,.5486167,-1.340448,-.423059,.3462849,.4707607,-.2512626,.1530746,.02724218,3.035216,.5876133,-1.014554,-.116879,.9477794,-1.061218,-.419673,2.058832,-.05989624,3.058168,.9763861,-1.137388,-.0985403,-.2984893,3.64782,-.6585571,-1.47918,.6102932,3.265914,.3480333,-1.021816,-.2344957,2.463671,-7.240685,-8.862697,2.514058,-.2122768,-.03313968,.9028136,-1.126581,-.1874347,1.454154,10.34398,-3.237393,-.8654927,.2457248,1.845769,.6002482,-1.263727,-.3439354,-.1786388,.3980166,-.3349517,.3825166,.1029225,3.331096,.4998955,-1.53001,-.6879698,.2380415,1.608216,-1.682679,.354636,-.00391522,.4517655,.5128605,-.9685659,.09480403,.06076844,-3.217561,4.568074,1.069299,.02083638,7.301088,1.072165,-1.113925,-.3112382,.3954133,5.105907,-14.56866,-.4917378,.5289909,-2.678374,.3014709,-1.046864,-.1215754,1.778308,4.661489,.2565583,1.35368,-.1175767,3.415972,.8457746,-1.10448,-.1940913,1.343668,-.001759206,-5.009204,-.4186951,.312571,1.628183,.6720408,-1.286902,-.3781238,-.08977253,.3545393,-.4866515,.3843664,.08281675,3.122231,.5046991,-1.712597,-.8549112,.4809286,1.515398,-2.212211,.2539029,.02335997,-.06089466,.4268444,-.8807283,.1646097,-.4437898,-3.188247,5.984417,1.334779,-.04026975,7.546431,1.175751,-1.147253,-.3538199,.6101836,4.43778,-15.59813,-1.103222,.6242039,-3.091472,.217429,-1.03823,-.1213475,1.547505,5.893176,1.368738,1.663127,-.137713,3.185279,.8736453,-1.101026,-.1874907,1.272667,3.596524,-5.007243,-.6352483,.3048985,1.931613,.6788844,-1.342753,-.4384971,-1.213491,1.621399,-.1551441,.5614218,.02591739,2.958967,.5782132,-1.937684,-1.066019,1.913336,-.7347719,-.5916167,.158759,.1092568,-.6275002,.1599071,-.9302391,.1486187,-1.603835,.1783713,1.100461,1.174181,-.1602361,7.868331,1.468971,-1.053631,-.372705,1.114117,-.9603286,-10.62469,-1.16214,.7952797,-4.478765,-.04440862,-1.083629,-.1261405,1.229344,11.27825,.131901,1.624729,-.2825898,3.661082,1.036911,-1.09395,-.2067455,1.258035,7.548645,-4.598387,-.8944932,.3292634,1.311304,.6291871,-1.385867,-.5068139,-1.48649,1.969049,-.1698025,.6629167,-5289365e-12,2.760315,.8644368,-2.107367,-1.175639,2.313241,-1.001653,-.4843139,.1124485,3901494e-11,-.3502469,-.320478,-1.475244,-.2833055,-2.085824,1.192563,-.76452,.8380081,.220358,7.157885,1.753702,-.6644372,-.2549735,1.600273,-8.589034,-6.144718,-.7599731,.289837,-5.770923,-.09656242,-1.211687,-.1653494,.83934,27.92988,-3.395461,.9933752,-.03976877,3.776659,.9546526,-1.063757,-.2037563,1.117207,-.001252806,-3.33233,-.6971409,.3388719,1.311398,.6635171,-1.678889,-.7992295,-2.421687,2.871029,-.07662842,.6046208,-7598099e-12,2.002314,.9001307,-1.692144,-.880425,3.060895,-2.000009,-.3183563,.08385862,-.006326713,1.206639,-.3369967,-3.676795,-1.719207,-2.534697,1.005285,.1550407,1.07291,.1318094,3.717018,1.689191,.5424542,.3263528,1.551055,-3.841058,-6.598996,-1.201779,.3530669,-2.542945,-.06482523,-1.553849,-.457686,.9324676,19.50982,-2.344516,1.12102,-.1221537,.7285496,.9582816,-1.02065,-.2215797,1.009774,-.002056855,-2.740338,-.8122355,.3328967,.8982766,.6594676,-2.24736,-1.221267,-3.072346,3.385139,-.04387559,.5084887,-7418833e-12,1.750107,.9001401,-1.248499,-.8442718,3.062611,-2.020314,-.2815341,.05254745,.003345008,1.433225,-.2835911,-7.004119,-2.927978,-2.649852,.7971894,.5466893,1.442667,-.06063912,2.806194,1.547429,1.434882,.09114639,1.170089,.03512808,-5.861915,-1.411843,.5400486,-.7746522,.02386984,-1.559053,-.5502302,1.200396,13.47741,-2.344397,.8868907,-.3292661,-1.362105,.9217826,-1.044436,-.2360719,.7054471,-.002904518,-2.092829,-.5119668,.4174861,.9687435,.6588427],g.datasetRGBRad2=[1.59033,1.355401,1.151412,13.59116,5.857714,8.090833,1.55254,1.51004,.1276413,16.04643,5.912162,8.350009,1.470871,1.880464,-1.865398,20.30808,5.471461,9.109834,1.356563,2.373866,-4.653245,25.70922,5.686009,10.0948,1.244232,2.851519,-7.130942,29.93449,6.38212,11.14578,1.173693,3.120604,-8.491886,31.87393,7.290615,11.80066,1.091845,3.368888,-9.722083,32.68508,10.32424,12.36508,.9858985,3.500541,-10.26328,30.92956,16.10881,13.31222,.8864993,3.172888,-8.68755,23.62161,26.21851,14.74967,.7946973,2.189355,-4.207953,9.399091,40.62849,16.81753,1.711696,1.657311,.9328021,13.1788,15.06751,18.63556,1.666968,1.849993,-.2088601,15.86653,14.8688,19.40719,1.584846,2.170022,-2.019597,19.70826,14.90684,20.45055,1.469412,2.524017,-4.197267,23.65249,16.64588,21.34477,1.369714,2.843548,-6.059031,26.34993,18.81361,22.32186,1.310477,2.984444,-6.831686,26.8234,21.23267,22.59755,1.222552,3.176523,-7.731496,26.7176,24.84358,23.36863,1.115781,3.130635,-7.581744,23.36531,31.71048,24.13859,1.013181,2.699342,-5.602709,15.00158,42.17613,25.15957,.8976323,1.726948,-1.29612,1.183675,55.03215,26.43066],g.datasetRGB3=[-1.372629,-.4905585,-41.00789,41.22169,-.00738936,.4839359,.006474757,3.471755,.5092936,-1.523025,-.6497084,6.249857,-5.662543,-.01908402,.551281,-2181049e-11,2.507663,.4339598,-1.035567,-.0747874,.922103,-2.140047,-.02374146,.3795517,-.01769134,7.479831,.7729303,-1.271086,-.558819,.6908023,2.096832,-.2453967,1.410648,.04475036,-4.719115,.5741186,-.9712598,-.07033926,.9167274,-.9502097,.3004684,.4547054,-.05929017,5.266196,.7204135,-1.087457,-.1888896,.8156686,.3101712,-2.155419,1.422205,.09692261,3.122404,.499943,-1.42528,-.5413508,-34.54883,34.81142,-.008686975,.4914268,-2479243e-12,3.239879,.6094201,-1.688557,-.8070865,7.018459,-6.244574,-.02149341,.3993971,.01252502,1.630662,.109786,-.8664152,.07869125,-.5236535,-1.21896,-.02059093,.6684898,-.05584112,8.602299,1.410496,-1.319763,-.5985323,1.253918,1.914706,-.3216739,.9011213,.1324845,-5.252749,.06231252,-.9706008,-.05914059,.569315,-1.175362,.5221644,.7518213,-.08247655,5.875635,.9850863,-1.08533,-.1956105,.8019605,.5338101,-3.423464,1.110444,.1507923,2.864942,.4999481,-1.431967,-.5478935,-32.86288,33.05288,-.008380797,.477205,-3044274e-12,3.289973,.5976303,-1.801361,-.9315889,5.391756,-4.588592,-.02040076,.4144684,.01814534,1.051795,.1145651,-.7905357,.1451332,-.1605661,-1.592174,.0004561348,.3380323,-.07770275,8.775384,1.489512,-1.308575,-.5539232,.9184133,2.011479,-.3842472,1.432274,.1637153,-4.408856,.05272957,-.9829872,-.08183048,.4464556,-1.442716,1.029641,-.06991617,.008702356,5.706417,.9116452,-1.08713,-.2038013,.7260801,.9164376,-5.006183,1.511271,.1257134,2.715439,.6201652,-1.448662,-.5799075,-28.33268,28.58023,-.009134061,.4404783,-2709026e-12,3.029357,.5540071,-2.061772,-1.14519,7.918478,-7.212525,-.0202076,.2962715,.0468967,.8517209,.2334587,-.6413755,.1780425,-2.412919,1.064484,-.01949986,.6769741,-.175276,7.262714,1.325869,-1.304871,-.3975581,1.219002,.7285178,-.2710105,.7779727,.3247139,-.8818168,.1839517,-1.001104,-.1994801,.3676742,-1.409737,.2901555,.250694,.002468899,3.398923,.8584645,-1.111552,-.2487204,.7410842,1.703749,-5.007855,1.057763,.1354511,2.088715,.6600013,-1.547227,-.6679466,-18.61465,18.84045,-.0124221,.4157339,-2432805e-12,2.812423,.5446957,-2.04389,-1.149081,2.304118,-1.715757,-.02433628,.2816836,.07185458,1.06486,.2706789,-.904072,-.08274472,-.2555676,-.6326215,-.0277088,.6676024,-.2513532,5.903839,1.241452,-1.000013,-.1010774,.3699166,.8774526,-.3042007,.6951053,.4361813,.6793421,.2573892,-1.171332,-.3768188,.3701377,-1.470757,.5525942,.02991456,.01581823,2.365233,.8214514,-1.068667,-.232633,.6725059,2.243733,-4.61437,1.033677,.1376291,2.013334,.6865304,-1.592991,-.7246948,-25.98204,26.2196,-.008365176,.4207571,-2742772e-12,2.623735,.587319,-2.271349,-1.280884,6.308739,-5.75835,-.01977049,.3671835,.06698038,1.150597,.1759218,-.636862,-.007436052,-2.230026,1.640997,-.01548497,.3145331,-.2492644,5.083843,1.260215,-1.177925,-.09628114,.3051152,-.03749544,-.2713209,1.164226,.4559969,2.175429,.2874284,-1.0785,-.3801779,.4788906,-.4795969,.5977621,-.4488535,.03386874,1.538143,.8062054,-1.108028,-.2596892,.5162202,1.557081,-4.265039,1.182535,.1563762,2.095084,.6883383,-1.668427,-.7908511,-27.7969,27.99746,-.007186935,.3757766,-3326858e-12,2.563421,.5439687,-2.156175,-1.220004,3.585732,-3.235988,-.01086239,.1846143,.1046017,1.234427,.2842191,-1.117051,-.4101627,-.846373,.7671472,-.02226609,.8574943,-.3434124,4.475715,1.154824,-.744484,.2312078,-.5393724,.1574213,-.1763914,.2751692,.55642,2.217672,.3483932,-1.273036,-.5275562,.4902512,-.04498436,.4339366,.2386682,.02380879,1.413444,.7855923,-1.084192,-.2936753,.4719432,1.384436,-3.257789,.6119543,.1681884,1.650441,.6936631,-1.84849,-.951267,-30.05251,30.24315,-.005635304,.344778,-2782999e-12,2.309422,.5643559,-2.300008,-1.252335,-1.218876,1.49373,-.0061071,.0797486,.1023449,1.505934,.2360948,-1.483705,-.8547575,-.7797146,.6447971,-.02678052,1.091263,-.3344889,3.830416,1.189425,-.5348005,.3982733,-.4071573,.3265569,-.08658789,-.2370892,.5369097,1.478279,.3143303,-1.320401,-.6043247,.3019196,-.07732911,.4768381,.6745764,.03694098,1.158234,.8169056,-1.10104,-.3420019,.3775661,1.769338,-2.990515,.1649529,.1970125,1.453355,.6759757,-2.251946,-1.229349,-32.71808,32.83114,-.004252027,.3372289,-3001937e-12,2.154046,.5842674,-1.867834,-.9531252,-12.29365,12.69149,-.006844772,.1185107,.07539587,1.846381,.1899412,-3.398629,-2.180862,2.335213,-3.382823,-.008613985,.8431602,-.2393567,3.11246,1.218556,.5708381,.940603,-.6890113,2.746233,-.05772068,.1096005,.3491978,.7281453,.3212049,-1.705909,-.8517224,.113116,-2.141434,.4274043,.33976,.178649,.9026101,.78828,-1.012865,-.3495551,.3369038,3.724205,-3.089586,.1266964,.146179,1.170199,.6931052,-2.890318,-1.665573,-34.93756,35.00369,-.002984251,.2622419,-425936e-11,1.947681,.6905752,-1.956022,-1.0629,-19.19714,19.75164,-.008865396,.216554,.05475637,1.761134,.003164249,-5.612198,-3.101371,4.098034,-6.144001,.009944958,.2905472,-.170711,3.199107,1.33766,.8353756,.4855943,-1.243589,5.147385,-.07013963,.938041,.2335714,.1727744,.2802696,-1.524329,-.7388547,.3259025,-4.050634,.4058549,-.2591384,.1898299,.3556071,.7884126,-1.070371,-.4207858,.1739862,5.29341,-3.136757,.2323856,.1673706,1.007227,.6844287,-1.34172,-.4834889,-46.33447,46.82148,-.006137296,.4599216,.007047323,2.895798,.4999398,-1.529104,-.6498631,15.34103,-14.50675,-.01531439,.3280082,.01682926,1.901587,.5013227,-1.014776,-.1454495,-4.071085,2.954982,-.02630348,.5681531,-.03016505,6.773854,.5003504,-1.172413,-.402632,2.960428,.202071,-.2004947,.9375572,.05998168,-4.945934,.4502898,-.9898161,-.05772814,.4470024,-.5786656,.1158168,.346804,-.0504336,6.867947,.8012363,-1.085111,-.1882675,1.223748,.3565495,-3.688357,.5653723,.06727646,2.69013,.49994,-1.389119,-.529025,-40.55774,41.05972,-.007062577,.456006,-1736334e-12,2.775512,.6671455,-1.584641,-.7200619,12.48067,-11.56028,-.01659568,.3050029,.01099895,1.438927,-.02138015,-.9826068,-.08887254,-2.960031,1.808816,-.02478159,.6035733,-.04868441,7.347705,1.584739,-1.150423,-.4073793,2.412991,.487084,-.2337902,.8295114,.1129914,-5.150045,-.09016643,-1.016933,-.06311501,.5218937,-.571643,.1250993,.3601524,-.05497586,7.060139,1.018333,-1.073151,-.1845444,1.155394,.3004486,-3.431711,.4657031,.09401223,2.68862,.4999544,-1.391257,-.5365815,-42.55881,42.99132,-.005838466,.4229134,-2760038e-12,2.775531,.6234597,-1.780062,-.922888,13.76172,-12.60946,-.01507526,.3117435,.02205045,.6093731,.03463446,-.7388169,.127567,-3.999528,2.223993,-.01856853,.543931,-.08834054,8.037139,1.645951,-1.322387,-.5320143,2.659359,1.086712,-.2129712,.8704649,.1800315,-4.967241,-.138372,-.9378288,-.01599895,.3607555,-1.980561,.3791456,.1212268,-.02845992,6.825542,1.059139,-1.100832,-.2172313,1.211561,2.002721,-5.010011,.5717583,.06777702,2.160006,.5676392,-1.409373,-.5708751,-30.34974,30.79809,-.007280715,.3723304,-2436279e-12,2.577348,.5913377,-1.954312,-1.11651,5.399148,-4.299553,-.01724739,.3742824,.04187077,.1044883,.1232727,-.6772215,.2001396,-.3670523,-1.014628,-.003497152,.4099858,-.1584633,7.7504,1.514559,-1.2916,-.4977437,.9641914,1.56242,-.3227782,.9055427,.3046444,-3.385619,.009546291,-.9750857,-.0877056,.9054256,-1.429236,.8974777,-.1217961,-.05194608,4.909409,.9589153,-1.088007,-.1959301,.9745799,1.260761,-5.008864,.7271248,.1096661,2.717295,.6340731,-1.45605,-.6223072,-22.28088,22.69604,-.009340812,.4118308,-2418083e-12,2.442117,.5589638,-2.176449,-1.302416,2.222836,-1.22273,-.01728051,.1323513,.07027731,.04835745,.2093351,-.5789641,.2215407,.2142291,-1.201725,-.01185728,.8122982,-.238042,6.706841,1.404146,-1.307463,-.4515174,.6447827,1.223841,-.2902391,.4986588,.4073652,-1.706696,.1060885,-.9698678,-.1307094,.9389347,-1.522852,.7768797,-.1368595,-.03857426,3.676935,.8980966,-1.104349,-.2380323,1.047043,1.865421,-5.011664,.7014954,.09622701,1.89136,.6687354,-1.502249,-.6724523,-28.88092,29.3036,-.006685766,.3685464,-2469442e-12,2.310797,.5566754,-2.217125,-1.364924,4.048243,-3.111333,-.01317747,.1921948,.08627702,.001981769,.2213689,-.6215757,.1687995,-.5949131,-.1551293,.0003356129,.6897657,-.2855053,6.271042,1.363084,-1.216317,-.3489429,.7566226,.5409809,-.2830843,.6191825,.4755163,-.9131387,.1383909,-1.030437,-.2034064,.8335995,-1.050947,.8689093,-.367231,-.04056183,3.111269,.8856842,-1.078984,-.2070549,.9683145,1.497022,-5.007653,.7702541,.1285822,2.225188,.6587911,-1.559291,-.7374039,-35.96311,36.3447,-.004667132,.3277964,-2487945e-12,2.215652,.5764681,-2.356929,-1.444755,6.244526,-5.540162,-.00879451,.17921,.09578517,.3737676,.1922194,-.6589752,-.0292691,-1.831779,1.869962,-.002030095,.7552089,-.3168157,4.632196,1.294054,-1.161046,-.1472506,.6494138,-.8327174,-.2320724,.3391212,.5269637,.9376341,.2458573,-1.034427,-.3062504,.8975634,.3203531,.8565142,-.1250162,-.04094017,1.861304,.8223468,-1.109954,-.2740277,1.063811,.7077398,-4.695734,.5621696,.1248956,1.297723,.678972,-1.788293,-.9368751,-43.8298,44.24963,-.00365253,.3094331,-2810503e-12,1.904402,.5861599,-2.268206,-1.312676,2.863082,-2.373727,-.00514498,.1711072,.09316041,.9309598,.1791683,-1.376966,-.7418582,-1.349589,1.563419,-.003124219,.6967139,-.3061887,3.602731,1.255669,-.601754,.2815928,.5424052,-.688545,-.1620001,.2980046,.4995571,.7371203,.2812466,-1.278853,-.5245326,.787052,.3125067,.7748105,-.07788581,.003490956,1.283748,.813019,-1.05093,-.2786331,1.056344,1.053002,-4.047789,.4432174,.1169077,.9532621,.6806764,-2.084927,-1.203954,-48.81638,49.2016,-.002896045,.2882977,-3073517e-12,1.702211,.637418,-2.328567,-1.238023,-1.891019,2.45152,-.005847581,.2084702,.0784813,1.211048,.08095008,-2.634632,-1.78946,-.1370558,-.3326435,.002783737,.5239451,-.2548881,2.896327,1.324116,.06882616,.5997821,.1535398,1.375209,-.1267285,.4239743,.4013122,.1794675,.2395382,-1.430918,-.6439041,.832598,-1.705612,.7236426,-.05567593,.06408718,.6836524,.8388887,-1.037956,-.3215402,.9457349,3.178114,-4.152156,.2230992,.1156198,.7606223,.6656923,-2.967314,-1.728778,-37.30988,37.55578,-.002588835,.2927966,-3935038e-12,1.592161,.6868694,-2.123311,-1.175148,-13.14988,13.86882,-.007828537,.1852026,.05481038,1.294309,.02428177,-5.443597,-3.156344,2.110838,-3.421556,.0118189,.1196951,-.1742902,2.404353,1.272805,1.029898,.5912521,-.3983531,3.286069,-.09252065,1.331381,.2560642,.8001754,.3624178,-1.547574,-.7881604,1.020902,-2.897069,.521347,-.9242315,.1185594,-1.150721,.7317211,-.9621043,-.1991406,.6531287,3.925839,-3.596904,.6317332,.1531334,1.457846,.6966285],g.datasetRGBRad3=[.9926518,1.999494,-4.136109,18.5627,13.51028,13.90238,.9634366,2.119694,-4.614523,19.19701,13.76644,14.18731,.9446537,2.17161,-4.915556,19.1824,15.37135,14.0053,.9073074,2.330536,-5.577596,19.61615,16.88365,14.46955,.8739124,2.388682,-5.842995,19.23265,18.87735,14.85698,.8563688,2.391534,-5.769133,18.28709,20.97209,14.69587,.8270533,2.34279,-5.558071,16.84993,23.56498,15.05975,.7908339,2.190341,-4.852571,13.74862,28.06846,15.48444,.7403619,1.783998,-2.983854,7.622563,35.0761,16.15805,.6840111,1.154457,-.239383,-.7896893,42.82765,17.79469,1.1683,1.860993,-2.129074,12.51952,30.32499,29.38716,1.150338,1.918813,-2.413527,12.74862,30.87134,29.51432,1.114719,1.964689,-2.625423,12.47837,32.37949,29.43596,1.077948,2.006292,-2.846934,11.90195,34.59293,29.37492,1.035143,1.986681,-2.752584,10.60972,37.22185,29.18594,1.015992,1.992054,-2.812626,10.01416,38.473,29.24624,.9756887,1.939897,-2.533281,8.319176,40.83907,29.25586,.9264164,1.716454,-1.597044,4.739725,45.07683,28.78915,.8595191,1.346034,-.02801895,-.6582906,50.17523,28.52953,.7754116,.7709245,2.200201,-7.487661,54.36622,28.93432],g.datasetsRGB=[g.datasetRGB1,g.datasetRGB2,g.datasetRGB3],g.datasetsRGBRad=[g.datasetRGBRad1,g.datasetRGBRad2,g.datasetRGBRad3],m.drawMeshes=d.drawMeshes,M.__meta__={fields:{speed:{prop:null}}},Pt.timeStep=.016666666666666666,Pt.fixedStep=.016666666666666666,w.numCreations=0,Jt.numCreations=0,Ie.nextId=0,Ie.v1=new Jt,Ie.v2=new Jt,Ie.q1=new w,ze.DEFAULT_RESOLVER=new Z,ze.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:",D.i64tmp=new x(0,0),D.helper=new ls(new os(8)),L.traitInits=[],L.traitUpdates=[],L.traitLateUpdates=[],L.traitRenders=[],L.traitRenders2D=[],L.pauseUpdates=!1,L.lastw=-1,L.lasth=-1,h_.uidCounter=0,h_.framePassed=!0,R.cachedSceneRaws=new et,R.cachedMeshes=new et,R.cachedLights=new et,R.cachedCameras=new et,R.cachedMaterials=new et,R.cachedWorlds=new et,R.cachedShaders=new et,R.cachedBlobs=new et,R.cachedImages=new et,R.cachedSounds=new et,R.dataPath="",R.loadingMeshes=new et,R.loadingLights=new et,R.loadingCameras=new et,R.loadingMaterials=new et,R.loadingWorlds=new et,R.loadingShaders=new et,R.loadingSceneRaws=new et,R.assetsLoaded=0,R.loadingBlobs=new et,R.loadingImages=new et,R.loadingSounds=new et,Q.uidCounter=0,at.num=0,fa.helpVec=new ho,fa.helpMat=new fa(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),gt.helpVec0=new ho,gt.xAxis=new ho(1,0,0),gt.yAxis=new ho(0,1,0),Fe.m1=new fa(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),Fe.m2=new fa(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),Fe.vpos=new ho,Fe.vpos2=new ho,Fe.vscl=new ho,Fe.vscl2=new ho,Fe.q1=new gt,Fe.q2=new gt,Fe.q3=new gt,Fe.vp=new ho,Fe.vs=new ho,c_.skinMaxBones=50,c_.m=new fa(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),c_.m1=new fa(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),c_.m2=new fa(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),c_.vpos=new ho,c_.vscl=new ho,c_.q1=new gt,c_.q2=new gt,c_.q3=new gt,c_.vpos2=new ho,c_.vscl2=new ho,c_.v1=new ho,c_.v2=new ho,ut.uidCounter=0,ut.seed=1,ft.temp=new ho,ft.sphereCenter=new ho,sa.cascadeBounds=1,sa.m=new fa(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),sa.p1=new ho,sa.p2=new ho,sa.p3=new ho,je.temp=new fa(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),je.q=new gt,u_.biasMat=new fa(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),u_.helpMat=new fa(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),u_.helpMat2=new fa(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),u_.helpMat3=new ht(1,0,0,0,1,0,0,0,1),u_.helpVec=new ho,u_.helpVec2=new ho,u_.helpQuat=new gt,wt.occupied=!1,wt.gamepads=[],wt.registered=!1,Zt.buttons=["left","right","middle"],Bt.keys=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9",".",",","space","backspace","tab","enter","shift","control","alt","escape","delete","back","up","right","left","down"],Gt.buttonsPS=["cross","circle","square","triangle","l1","r1","l2","r2","share","options","l3","r3","up","down","left","right","home","touchpad"],Gt.buttons=Gt.buttonsPS,co.scale=1,co.last=0,co.realDelta=0,f_.__toStr={}.toString,Wt.BYTES_PER_ELEMENT=4,Yt.BYTES_PER_ELEMENT=1,jt.images=new Dt,jt.sounds=new Kt,jt.blobs=new Lt,jt.fonts=new Vt,jt.videos=new Ht,Qt.canvas_id="khanvas",qt.instance=new qt,go.DIF_COUNT=3,go.maxframetime=.5,go.startTime=0,Ne.Blue_shadowmap_vertData0="s180:I3ZlcnNpb24gMTAwCgp1bmlmb3JtIG1hdDQgTFdWUDsKCmF0dHJpYnV0ZSB2ZWMzIHBvczsKCnZvaWQgbWFpbigpCnsKICAgIHZlYzQgc3BvcyA9IHZlYzQocG9zLCAxLjApOwogICAgZ2xfUG9zaXRpb24gPSBMV1ZQICogc3BvczsKfQoK",Ne.Blue_shadowmap_vertData1="s212:I3ZlcnNpb24gMTAwCgp1bmlmb3JtIG1lZGl1bXAgbWF0NCBMV1ZQOwoKYXR0cmlidXRlIG1lZGl1bXAgdmVjMyBwb3M7Cgp2b2lkIG1haW4oKQp7CiAgICBtZWRpdW1wIHZlYzQgc3BvcyA9IHZlYzQocG9zLCAxLjApOwogICAgZ2xfUG9zaXRpb24gPSBMV1ZQICogc3BvczsKfQoK",Ne.Blue_shadowmap_vertData2="s175:I3ZlcnNpb24gMzAwIGVzCgp1bmlmb3JtIG1hdDQgTFdWUDsKCmluIHZlYzMgcG9zOwoKdm9pZCBtYWluKCkKewogICAgdmVjNCBzcG9zID0gdmVjNChwb3MsIDEuMCk7CiAgICBnbF9Qb3NpdGlvbiA9IExXVlAgKiBzcG9zOwp9Cgo",Ne.Blue_mesh_fragData0="s4380:I3ZlcnNpb24gMTAwCnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OwpwcmVjaXNpb24gaGlnaHAgaW50OwoKdW5pZm9ybSBoaWdocCB2ZWM0IHNoaXJyWzddOwp1bmlmb3JtIGhpZ2hwIHNhbXBsZXIyRCBJbWFnZVRleHR1cmU7CnVuaWZvcm0gaGlnaHAgdmVjMyBsaWdodERpcjsKdW5pZm9ybSBoaWdocCBzYW1wbGVyMkQgc2hhZG93TWFwOwp1bmlmb3JtIGhpZ2hwIGZsb2F0IHNoYWRvd3NCaWFzOwp1bmlmb3JtIGhpZ2hwIHZlYzMgbGlnaHRDb2xvcjsKdW5pZm9ybSBoaWdocCB2ZWMzIGxpZ2h0UG9zOwp1bmlmb3JtIGhpZ2hwIGZsb2F0IGVudm1hcFN0cmVuZ3RoOwoKdmFyeWluZyBoaWdocCB2ZWMzIHdub3JtYWw7CnZhcnlpbmcgaGlnaHAgdmVjMiB0ZXhDb29yZDsKdmFyeWluZyBoaWdocCB2ZWM0IGxpZ2h0UG9zaXRpb247CnZhcnlpbmcgaGlnaHAgdmVjMyB3cG9zaXRpb247CgpoaWdocCBmbG9hdCBhdHRlbnVhdGUoaGlnaHAgZmxvYXQgZGlzdCkKewogICAgcmV0dXJuIDEuMCAvIChkaXN0ICogZGlzdCk7Cn0KCmhpZ2hwIHZlYzMgc2hJcnJhZGlhbmNlKGhpZ2hwIHZlYzMgbm9yKQp7CiAgICBoaWdocCB2ZWMzIGNsMDAgPSB2ZWMzKHNoaXJyWzBdLngsIHNoaXJyWzBdLnksIHNoaXJyWzBdLnopOwogICAgaGlnaHAgdmVjMyBjbDFtMSA9IHZlYzMoc2hpcnJbMF0udywgc2hpcnJbMV0ueCwgc2hpcnJbMV0ueSk7CiAgICBoaWdocCB2ZWMzIGNsMTAgPSB2ZWMzKHNoaXJyWzFdLnosIHNoaXJyWzFdLncsIHNoaXJyWzJdLngpOwogICAgaGlnaHAgdmVjMyBjbDExID0gdmVjMyhzaGlyclsyXS55LCBzaGlyclsyXS56LCBzaGlyclsyXS53KTsKICAgIGhpZ2hwIHZlYzMgY2wybTIgPSB2ZWMzKHNoaXJyWzNdLngsIHNoaXJyWzNdLnksIHNoaXJyWzNdLnopOwogICAgaGlnaHAgdmVjMyBjbDJtMSA9IHZlYzMoc2hpcnJbM10udywgc2hpcnJbNF0ueCwgc2hpcnJbNF0ueSk7CiAgICBoaWdocCB2ZWMzIGNsMjAgPSB2ZWMzKHNoaXJyWzRdLnosIHNoaXJyWzRdLncsIHNoaXJyWzVdLngpOwogICAgaGlnaHAgdmVjMyBjbDIxID0gdmVjMyhzaGlycls1XS55LCBzaGlycls1XS56LCBzaGlycls1XS53KTsKICAgIGhpZ2hwIHZlYzMgY2wyMiA9IHZlYzMoc2hpcnJbNl0ueCwgc2hpcnJbNl0ueSwgc2hpcnJbNl0ueik7CiAgICByZXR1cm4gKCgoKCgoKCgoKGNsMjIgKiAwLjQyOTA0Mjk5NDk3NjA0MzcwMTE3MTg3NSkgKiAoKG5vci55ICogbm9yLnkpIC0gKCgtbm9yLnopICogKC1ub3IueikpKSkgKyAoKChjbDIwICogMC43NDMxMjUwMjE0NTc2NzIxMTkxNDA2MjUpICogbm9yLngpICogbm9yLngpKSArIChjbDAwICogMC44ODYyMjcwMTE2ODA2MDMwMjczNDM3NSkpIC0gKGNsMjAgKiAwLjI0NzcwNzk5Mjc5MjEyOTUxNjYwMTU2MjUpKSArICgoKGNsMm0yICogMC44NTgwODU5ODk5NTIwODc0MDIzNDM3NSkgKiBub3IueSkgKiAoLW5vci56KSkpICsgKCgoY2wyMSAqIDAuODU4MDg1OTg5OTUyMDg3NDAyMzQzNzUpICogbm9yLnkpICogbm9yLngpKSArICgoKGNsMm0xICogMC44NTgwODU5ODk5NTIwODc0MDIzNDM3NSkgKiAoLW5vci56KSkgKiBub3IueCkpICsgKChjbDExICogMS4wMjMzMjc5NDY2NjI5MDI4MzIwMzEyNSkgKiBub3IueSkpICsgKChjbDFtMSAqIDEuMDIzMzI3OTQ2NjYyOTAyODMyMDMxMjUpICogKC1ub3IueikpKSArICgoY2wxMCAqIDEuMDIzMzI3OTQ2NjYyOTAyODMyMDMxMjUpICogbm9yLngpOwp9Cgp2b2lkIG1haW4oKQp7CiAgICBoaWdocCB2ZWMzIG4gPSBub3JtYWxpemUod25vcm1hbCk7CiAgICBoaWdocCB2ZWM0IEltYWdlVGV4dHVyZV9zdG9yZSA9IHRleHR1cmUyRChJbWFnZVRleHR1cmUsIHRleENvb3JkKTsKICAgIGhpZ2hwIHZlYzMgSW1hZ2VUZXh0dXJlX0NvbG9yX3JlcyA9IEltYWdlVGV4dHVyZV9zdG9yZS54eXo7CiAgICBoaWdocCB2ZWMzIGJhc2Vjb2wgPSB2ZWMzKDAuMDE5NjkzMDA1ODMwMDQ5NTE0NzcwNTA3ODEyNSwgMC4yODkzMzcyMTc4MDc3Njk3NzUzOTA2MjUsIDAuNzc0MjM3ODcxMTcwMDQzOTQ1MzEyNSk7CiAgICBoaWdocCBmbG9hdCByb3VnaG5lc3MgPSBJbWFnZVRleHR1cmVfQ29sb3JfcmVzLng7CiAgICBoaWdocCBmbG9hdCBtZXRhbGxpYyA9IDAuMDsKICAgIGhpZ2hwIGZsb2F0IG9jY2x1c2lvbiA9IDEuMDsKICAgIGhpZ2hwIGZsb2F0IHNwZWN1bGFyID0gMS4wOwogICAgaGlnaHAgZmxvYXQgdmlzaWJpbGl0eSA9IDEuMDsKICAgIGhpZ2hwIGZsb2F0IGRvdE5MID0gbWF4KGRvdChuLCBsaWdodERpciksIDAuMCk7CiAgICBpZiAobGlnaHRQb3NpdGlvbi53ID4gMC4wKQogICAgewogICAgICAgIGhpZ2hwIHZlYzMgbFBvcyA9IGxpZ2h0UG9zaXRpb24ueHl6IC8gdmVjMyhsaWdodFBvc2l0aW9uLncpOwogICAgICAgIHZpc2liaWxpdHkgPSAwLjA7CiAgICAgICAgdmlzaWJpbGl0eSArPSBmbG9hdCgodGV4dHVyZTJEKHNoYWRvd01hcCwgbFBvcy54eSkueCArIHNoYWRvd3NCaWFzKSA%IGxQb3Mueik7CiAgICAgICAgdmlzaWJpbGl0eSArPSAoZmxvYXQoKHRleHR1cmUyRChzaGFkb3dNYXAsIGxQb3MueHkgKyB2ZWMyKDAuMDAwNDg4MjgxMjUsIDAuMCkpLnggKyBzaGFkb3dzQmlhcykgPiBsUG9zLnopICogMC41KTsKICAgICAgICB2aXNpYmlsaXR5ICs9IChmbG9hdCgodGV4dHVyZTJEKHNoYWRvd01hcCwgbFBvcy54eSArIHZlYzIoLTAuMDAwNDg4MjgxMjUsIDAuMCkpLnggKyBzaGFkb3dzQmlhcykgPiBsUG9zLnopICogMC4yNSk7CiAgICAgICAgdmlzaWJpbGl0eSArPSAoZmxvYXQoKHRleHR1cmUyRChzaGFkb3dNYXAsIGxQb3MueHkgKyB2ZWMyKDAuMCwgMC4wMDA0ODgyODEyNSkpLnggKyBzaGFkb3dzQmlhcykgPiBsUG9zLnopICogMC41KTsKICAgICAgICB2aXNpYmlsaXR5ICs9IChmbG9hdCgodGV4dHVyZTJEKHNoYWRvd01hcCwgbFBvcy54eSArIHZlYzIoMC4wLCAtMC4wMDA0ODgyODEyNSkpLnggKyBzaGFkb3dzQmlhcykgPiBsUG9zLnopICogMC4yNSk7CiAgICAgICAgdmlzaWJpbGl0eSAvPSAyLjU7CiAgICAgICAgdmlzaWJpbGl0eSA9IG1heCh2aXNpYmlsaXR5LCAwLjIwMDAwMDAwMjk4MDIzMjIzODc2OTUzMTI1KTsKICAgIH0KICAgIGhpZ2hwIHZlYzMgZGlyZWN0ID0gKGJhc2Vjb2wgKiBkb3ROTCkgKiBsaWdodENvbG9yOwogICAgZGlyZWN0ICo9IGF0dGVudWF0ZShkaXN0YW5jZSh3cG9zaXRpb24sIGxpZ2h0UG9zKSk7CiAgICBnbF9GcmFnRGF0YVswXSA9IHZlYzQoKGRpcmVjdCAqIHZpc2liaWxpdHkpICsgKChiYXNlY29sICogc2hJcnJhZGlhbmNlKG4pKSAqIGVudm1hcFN0cmVuZ3RoKSwgMS4wKTsKfQoK",Ne.Blue_mesh_fragData1="s4108:I3ZlcnNpb24gMTAwCnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OwpwcmVjaXNpb24gbWVkaXVtcCBpbnQ7Cgp1bmlmb3JtIHZlYzQgc2hpcnJbN107CnVuaWZvcm0gbWVkaXVtcCBzYW1wbGVyMkQgSW1hZ2VUZXh0dXJlOwp1bmlmb3JtIHZlYzMgbGlnaHREaXI7CnVuaWZvcm0gbWVkaXVtcCBzYW1wbGVyMkQgc2hhZG93TWFwOwp1bmlmb3JtIGZsb2F0IHNoYWRvd3NCaWFzOwp1bmlmb3JtIHZlYzMgbGlnaHRDb2xvcjsKdW5pZm9ybSB2ZWMzIGxpZ2h0UG9zOwp1bmlmb3JtIGZsb2F0IGVudm1hcFN0cmVuZ3RoOwoKdmFyeWluZyB2ZWMzIHdub3JtYWw7CnZhcnlpbmcgdmVjMiB0ZXhDb29yZDsKdmFyeWluZyB2ZWM0IGxpZ2h0UG9zaXRpb247CnZhcnlpbmcgdmVjMyB3cG9zaXRpb247CgpmbG9hdCBhdHRlbnVhdGUoZmxvYXQgZGlzdCkKewogICAgcmV0dXJuIDEuMCAvIChkaXN0ICogZGlzdCk7Cn0KCnZlYzMgc2hJcnJhZGlhbmNlKHZlYzMgbm9yKQp7CiAgICB2ZWMzIGNsMDAgPSB2ZWMzKHNoaXJyWzBdLngsIHNoaXJyWzBdLnksIHNoaXJyWzBdLnopOwogICAgdmVjMyBjbDFtMSA9IHZlYzMoc2hpcnJbMF0udywgc2hpcnJbMV0ueCwgc2hpcnJbMV0ueSk7CiAgICB2ZWMzIGNsMTAgPSB2ZWMzKHNoaXJyWzFdLnosIHNoaXJyWzFdLncsIHNoaXJyWzJdLngpOwogICAgdmVjMyBjbDExID0gdmVjMyhzaGlyclsyXS55LCBzaGlyclsyXS56LCBzaGlyclsyXS53KTsKICAgIHZlYzMgY2wybTIgPSB2ZWMzKHNoaXJyWzNdLngsIHNoaXJyWzNdLnksIHNoaXJyWzNdLnopOwogICAgdmVjMyBjbDJtMSA9IHZlYzMoc2hpcnJbM10udywgc2hpcnJbNF0ueCwgc2hpcnJbNF0ueSk7CiAgICB2ZWMzIGNsMjAgPSB2ZWMzKHNoaXJyWzRdLnosIHNoaXJyWzRdLncsIHNoaXJyWzVdLngpOwogICAgdmVjMyBjbDIxID0gdmVjMyhzaGlycls1XS55LCBzaGlycls1XS56LCBzaGlycls1XS53KTsKICAgIHZlYzMgY2wyMiA9IHZlYzMoc2hpcnJbNl0ueCwgc2hpcnJbNl0ueSwgc2hpcnJbNl0ueik7CiAgICByZXR1cm4gKCgoKCgoKCgoKGNsMjIgKiAwLjQyOTA0Mjk5NDk3NjA0MzcwMTE3MTg3NSkgKiAoKG5vci55ICogbm9yLnkpIC0gKCgtbm9yLnopICogKC1ub3IueikpKSkgKyAoKChjbDIwICogMC43NDMxMjUwMjE0NTc2NzIxMTkxNDA2MjUpICogbm9yLngpICogbm9yLngpKSArIChjbDAwICogMC44ODYyMjcwMTE2ODA2MDMwMjczNDM3NSkpIC0gKGNsMjAgKiAwLjI0NzcwNzk5Mjc5MjEyOTUxNjYwMTU2MjUpKSArICgoKGNsMm0yICogMC44NTgwODU5ODk5NTIwODc0MDIzNDM3NSkgKiBub3IueSkgKiAoLW5vci56KSkpICsgKCgoY2wyMSAqIDAuODU4MDg1OTg5OTUyMDg3NDAyMzQzNzUpICogbm9yLnkpICogbm9yLngpKSArICgoKGNsMm0xICogMC44NTgwODU5ODk5NTIwODc0MDIzNDM3NSkgKiAoLW5vci56KSkgKiBub3IueCkpICsgKChjbDExICogMS4wMjMzMjc5NDY2NjI5MDI4MzIwMzEyNSkgKiBub3IueSkpICsgKChjbDFtMSAqIDEuMDIzMzI3OTQ2NjYyOTAyODMyMDMxMjUpICogKC1ub3IueikpKSArICgoY2wxMCAqIDEuMDIzMzI3OTQ2NjYyOTAyODMyMDMxMjUpICogbm9yLngpOwp9Cgp2b2lkIG1haW4oKQp7CiAgICB2ZWMzIG4gPSBub3JtYWxpemUod25vcm1hbCk7CiAgICB2ZWM0IEltYWdlVGV4dHVyZV9zdG9yZSA9IHRleHR1cmUyRChJbWFnZVRleHR1cmUsIHRleENvb3JkKTsKICAgIHZlYzMgSW1hZ2VUZXh0dXJlX0NvbG9yX3JlcyA9IEltYWdlVGV4dHVyZV9zdG9yZS54eXo7CiAgICB2ZWMzIGJhc2Vjb2wgPSB2ZWMzKDAuMDE5NjkzMDA1ODMwMDQ5NTE0NzcwNTA3ODEyNSwgMC4yODkzMzcyMTc4MDc3Njk3NzUzOTA2MjUsIDAuNzc0MjM3ODcxMTcwMDQzOTQ1MzEyNSk7CiAgICBmbG9hdCByb3VnaG5lc3MgPSBJbWFnZVRleHR1cmVfQ29sb3JfcmVzLng7CiAgICBmbG9hdCBtZXRhbGxpYyA9IDAuMDsKICAgIGZsb2F0IG9jY2x1c2lvbiA9IDEuMDsKICAgIGZsb2F0IHNwZWN1bGFyID0gMS4wOwogICAgZmxvYXQgdmlzaWJpbGl0eSA9IDEuMDsKICAgIGZsb2F0IGRvdE5MID0gbWF4KGRvdChuLCBsaWdodERpciksIDAuMCk7CiAgICBpZiAobGlnaHRQb3NpdGlvbi53ID4gMC4wKQogICAgewogICAgICAgIHZlYzMgbFBvcyA9IGxpZ2h0UG9zaXRpb24ueHl6IC8gdmVjMyhsaWdodFBvc2l0aW9uLncpOwogICAgICAgIHZpc2liaWxpdHkgPSAwLjA7CiAgICAgICAgdmlzaWJpbGl0eSArPSBmbG9hdCgodGV4dHVyZTJEKHNoYWRvd01hcCwgbFBvcy54eSkueCArIHNoYWRvd3NCaWFzKSA%IGxQb3Mueik7CiAgICAgICAgdmlzaWJpbGl0eSArPSAoZmxvYXQoKHRleHR1cmUyRChzaGFkb3dNYXAsIGxQb3MueHkgKyB2ZWMyKDAuMDAwNDg4MjgxMjUsIDAuMCkpLnggKyBzaGFkb3dzQmlhcykgPiBsUG9zLnopICogMC41KTsKICAgICAgICB2aXNpYmlsaXR5ICs9IChmbG9hdCgodGV4dHVyZTJEKHNoYWRvd01hcCwgbFBvcy54eSArIHZlYzIoLTAuMDAwNDg4MjgxMjUsIDAuMCkpLnggKyBzaGFkb3dzQmlhcykgPiBsUG9zLnopICogMC4yNSk7CiAgICAgICAgdmlzaWJpbGl0eSArPSAoZmxvYXQoKHRleHR1cmUyRChzaGFkb3dNYXAsIGxQb3MueHkgKyB2ZWMyKDAuMCwgMC4wMDA0ODgyODEyNSkpLnggKyBzaGFkb3dzQmlhcykgPiBsUG9zLnopICogMC41KTsKICAgICAgICB2aXNpYmlsaXR5ICs9IChmbG9hdCgodGV4dHVyZTJEKHNoYWRvd01hcCwgbFBvcy54eSArIHZlYzIoMC4wLCAtMC4wMDA0ODgyODEyNSkpLnggKyBzaGFkb3dzQmlhcykgPiBsUG9zLnopICogMC4yNSk7CiAgICAgICAgdmlzaWJpbGl0eSAvPSAyLjU7CiAgICAgICAgdmlzaWJpbGl0eSA9IG1heCh2aXNpYmlsaXR5LCAwLjIwMDAwMDAwMjk4MDIzMjIzODc2OTUzMTI1KTsKICAgIH0KICAgIHZlYzMgZGlyZWN0ID0gKGJhc2Vjb2wgKiBkb3ROTCkgKiBsaWdodENvbG9yOwogICAgZGlyZWN0ICo9IGF0dGVudWF0ZShkaXN0YW5jZSh3cG9zaXRpb24sIGxpZ2h0UG9zKSk7CiAgICBnbF9GcmFnRGF0YVswXSA9IHZlYzQoKGRpcmVjdCAqIHZpc2liaWxpdHkpICsgKChiYXNlY29sICogc2hJcnJhZGlhbmNlKG4pKSAqIGVudm1hcFN0cmVuZ3RoKSwgMS4wKTsKfQoK",Ne.Blue_mesh_fragData2="s4370:I3ZlcnNpb24gMzAwIGVzCnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OwpwcmVjaXNpb24gaGlnaHAgaW50OwoKdW5pZm9ybSBoaWdocCB2ZWM0IHNoaXJyWzddOwp1bmlmb3JtIGhpZ2hwIHNhbXBsZXIyRCBJbWFnZVRleHR1cmU7CnVuaWZvcm0gaGlnaHAgdmVjMyBsaWdodERpcjsKdW5pZm9ybSBoaWdocCBzYW1wbGVyMkQgc2hhZG93TWFwOwp1bmlmb3JtIGhpZ2hwIGZsb2F0IHNoYWRvd3NCaWFzOwp1bmlmb3JtIGhpZ2hwIHZlYzMgbGlnaHRDb2xvcjsKdW5pZm9ybSBoaWdocCB2ZWMzIGxpZ2h0UG9zOwp1bmlmb3JtIGhpZ2hwIGZsb2F0IGVudm1hcFN0cmVuZ3RoOwoKaW4gaGlnaHAgdmVjMyB3bm9ybWFsOwppbiBoaWdocCB2ZWMyIHRleENvb3JkOwppbiBoaWdocCB2ZWM0IGxpZ2h0UG9zaXRpb247CmluIGhpZ2hwIHZlYzMgd3Bvc2l0aW9uOwpvdXQgaGlnaHAgdmVjNCBmcmFnQ29sb3I7CgpoaWdocCBmbG9hdCBhdHRlbnVhdGUoaGlnaHAgZmxvYXQgZGlzdCkKewogICAgcmV0dXJuIDEuMCAvIChkaXN0ICogZGlzdCk7Cn0KCmhpZ2hwIHZlYzMgc2hJcnJhZGlhbmNlKGhpZ2hwIHZlYzMgbm9yKQp7CiAgICBoaWdocCB2ZWMzIGNsMDAgPSB2ZWMzKHNoaXJyWzBdLngsIHNoaXJyWzBdLnksIHNoaXJyWzBdLnopOwogICAgaGlnaHAgdmVjMyBjbDFtMSA9IHZlYzMoc2hpcnJbMF0udywgc2hpcnJbMV0ueCwgc2hpcnJbMV0ueSk7CiAgICBoaWdocCB2ZWMzIGNsMTAgPSB2ZWMzKHNoaXJyWzFdLnosIHNoaXJyWzFdLncsIHNoaXJyWzJdLngpOwogICAgaGlnaHAgdmVjMyBjbDExID0gdmVjMyhzaGlyclsyXS55LCBzaGlyclsyXS56LCBzaGlyclsyXS53KTsKICAgIGhpZ2hwIHZlYzMgY2wybTIgPSB2ZWMzKHNoaXJyWzNdLngsIHNoaXJyWzNdLnksIHNoaXJyWzNdLnopOwogICAgaGlnaHAgdmVjMyBjbDJtMSA9IHZlYzMoc2hpcnJbM10udywgc2hpcnJbNF0ueCwgc2hpcnJbNF0ueSk7CiAgICBoaWdocCB2ZWMzIGNsMjAgPSB2ZWMzKHNoaXJyWzRdLnosIHNoaXJyWzRdLncsIHNoaXJyWzVdLngpOwogICAgaGlnaHAgdmVjMyBjbDIxID0gdmVjMyhzaGlycls1XS55LCBzaGlycls1XS56LCBzaGlycls1XS53KTsKICAgIGhpZ2hwIHZlYzMgY2wyMiA9IHZlYzMoc2hpcnJbNl0ueCwgc2hpcnJbNl0ueSwgc2hpcnJbNl0ueik7CiAgICByZXR1cm4gKCgoKCgoKCgoKGNsMjIgKiAwLjQyOTA0Mjk5NDk3NjA0MzcwMTE3MTg3NSkgKiAoKG5vci55ICogbm9yLnkpIC0gKCgtbm9yLnopICogKC1ub3IueikpKSkgKyAoKChjbDIwICogMC43NDMxMjUwMjE0NTc2NzIxMTkxNDA2MjUpICogbm9yLngpICogbm9yLngpKSArIChjbDAwICogMC44ODYyMjcwMTE2ODA2MDMwMjczNDM3NSkpIC0gKGNsMjAgKiAwLjI0NzcwNzk5Mjc5MjEyOTUxNjYwMTU2MjUpKSArICgoKGNsMm0yICogMC44NTgwODU5ODk5NTIwODc0MDIzNDM3NSkgKiBub3IueSkgKiAoLW5vci56KSkpICsgKCgoY2wyMSAqIDAuODU4MDg1OTg5OTUyMDg3NDAyMzQzNzUpICogbm9yLnkpICogbm9yLngpKSArICgoKGNsMm0xICogMC44NTgwODU5ODk5NTIwODc0MDIzNDM3NSkgKiAoLW5vci56KSkgKiBub3IueCkpICsgKChjbDExICogMS4wMjMzMjc5NDY2NjI5MDI4MzIwMzEyNSkgKiBub3IueSkpICsgKChjbDFtMSAqIDEuMDIzMzI3OTQ2NjYyOTAyODMyMDMxMjUpICogKC1ub3IueikpKSArICgoY2wxMCAqIDEuMDIzMzI3OTQ2NjYyOTAyODMyMDMxMjUpICogbm9yLngpOwp9Cgp2b2lkIG1haW4oKQp7CiAgICBoaWdocCB2ZWMzIG4gPSBub3JtYWxpemUod25vcm1hbCk7CiAgICBoaWdocCB2ZWM0IEltYWdlVGV4dHVyZV9zdG9yZSA9IHRleHR1cmUoSW1hZ2VUZXh0dXJlLCB0ZXhDb29yZCk7CiAgICBoaWdocCB2ZWMzIEltYWdlVGV4dHVyZV9Db2xvcl9yZXMgPSBJbWFnZVRleHR1cmVfc3RvcmUueHl6OwogICAgaGlnaHAgdmVjMyBiYXNlY29sID0gdmVjMygwLjAxOTY5MzAwNTgzMDA0OTUxNDc3MDUwNzgxMjUsIDAuMjg5MzM3MjE3ODA3NzY5Nzc1MzkwNjI1LCAwLjc3NDIzNzg3MTE3MDA0Mzk0NTMxMjUpOwogICAgaGlnaHAgZmxvYXQgcm91Z2huZXNzID0gSW1hZ2VUZXh0dXJlX0NvbG9yX3Jlcy54OwogICAgaGlnaHAgZmxvYXQgbWV0YWxsaWMgPSAwLjA7CiAgICBoaWdocCBmbG9hdCBvY2NsdXNpb24gPSAxLjA7CiAgICBoaWdocCBmbG9hdCBzcGVjdWxhciA9IDEuMDsKICAgIGhpZ2hwIGZsb2F0IHZpc2liaWxpdHkgPSAxLjA7CiAgICBoaWdocCBmbG9hdCBkb3ROTCA9IG1heChkb3QobiwgbGlnaHREaXIpLCAwLjApOwogICAgaWYgKGxpZ2h0UG9zaXRpb24udyA%IDAuMCkKICAgIHsKICAgICAgICBoaWdocCB2ZWMzIGxQb3MgPSBsaWdodFBvc2l0aW9uLnh5eiAvIHZlYzMobGlnaHRQb3NpdGlvbi53KTsKICAgICAgICB2aXNpYmlsaXR5ID0gMC4wOwogICAgICAgIHZpc2liaWxpdHkgKz0gZmxvYXQoKHRleHR1cmUoc2hhZG93TWFwLCBsUG9zLnh5KS54ICsgc2hhZG93c0JpYXMpID4gbFBvcy56KTsKICAgICAgICB2aXNpYmlsaXR5ICs9IChmbG9hdCgodGV4dHVyZShzaGFkb3dNYXAsIGxQb3MueHkgKyB2ZWMyKDAuMDAwNDg4MjgxMjUsIDAuMCkpLnggKyBzaGFkb3dzQmlhcykgPiBsUG9zLnopICogMC41KTsKICAgICAgICB2aXNpYmlsaXR5ICs9IChmbG9hdCgodGV4dHVyZShzaGFkb3dNYXAsIGxQb3MueHkgKyB2ZWMyKC0wLjAwMDQ4ODI4MTI1LCAwLjApKS54ICsgc2hhZG93c0JpYXMpID4gbFBvcy56KSAqIDAuMjUpOwogICAgICAgIHZpc2liaWxpdHkgKz0gKGZsb2F0KCh0ZXh0dXJlKHNoYWRvd01hcCwgbFBvcy54eSArIHZlYzIoMC4wLCAwLjAwMDQ4ODI4MTI1KSkueCArIHNoYWRvd3NCaWFzKSA%IGxQb3MueikgKiAwLjUpOwogICAgICAgIHZpc2liaWxpdHkgKz0gKGZsb2F0KCh0ZXh0dXJlKHNoYWRvd01hcCwgbFBvcy54eSArIHZlYzIoMC4wLCAtMC4wMDA0ODgyODEyNSkpLnggKyBzaGFkb3dzQmlhcykgPiBsUG9zLnopICogMC4yNSk7CiAgICAgICAgdmlzaWJpbGl0eSAvPSAyLjU7CiAgICAgICAgdmlzaWJpbGl0eSA9IG1heCh2aXNpYmlsaXR5LCAwLjIwMDAwMDAwMjk4MDIzMjIzODc2OTUzMTI1KTsKICAgIH0KICAgIGhpZ2hwIHZlYzMgZGlyZWN0ID0gKGJhc2Vjb2wgKiBkb3ROTCkgKiBsaWdodENvbG9yOwogICAgZGlyZWN0ICo9IGF0dGVudWF0ZShkaXN0YW5jZSh3cG9zaXRpb24sIGxpZ2h0UG9zKSk7CiAgICBmcmFnQ29sb3IgPSB2ZWM0KChkaXJlY3QgKiB2aXNpYmlsaXR5KSArICgoYmFzZWNvbCAqIHNoSXJyYWRpYW5jZShuKSkgKiBlbnZtYXBTdHJlbmd0aCksIDEuMCk7Cn0KCg",Ne.Blue_shadowmap_fragData0="s103:I3ZlcnNpb24gMTAwCnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OwpwcmVjaXNpb24gaGlnaHAgaW50OwoKdm9pZCBtYWluKCkKewp9Cgo",Ne.Blue_shadowmap_fragData1="s106:I3ZlcnNpb24gMTAwCnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OwpwcmVjaXNpb24gbWVkaXVtcCBpbnQ7Cgp2b2lkIG1haW4oKQp7Cn0KCg",Ne.Blue_shadowmap_fragData2="s107:I3ZlcnNpb24gMzAwIGVzCnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OwpwcmVjaXNpb24gaGlnaHAgaW50OwoKdm9pZCBtYWluKCkKewp9Cgo",Ne.Blue_mesh_vertData0="s592:I3ZlcnNpb24gMTAwCgp1bmlmb3JtIG1hdDQgVzsKdW5pZm9ybSBtYXQzIE47CnVuaWZvcm0gbWF0NCBXVlA7CnVuaWZvcm0gbWF0NCBMV1ZQOwoKYXR0cmlidXRlIHZlYzMgcG9zOwp2YXJ5aW5nIHZlYzIgdGV4Q29vcmQ7CmF0dHJpYnV0ZSB2ZWMyIHRleDsKdmFyeWluZyB2ZWMzIHdwb3NpdGlvbjsKdmFyeWluZyB2ZWMzIHdub3JtYWw7CmF0dHJpYnV0ZSB2ZWMzIG5vcjsKdmFyeWluZyB2ZWM0IGxpZ2h0UG9zaXRpb247Cgp2b2lkIG1haW4oKQp7CiAgICB2ZWM0IHNwb3MgPSB2ZWM0KHBvcywgMS4wKTsKICAgIHRleENvb3JkID0gdGV4OwogICAgd3Bvc2l0aW9uID0gdmVjNChXICogc3BvcykueHl6OwogICAgd25vcm1hbCA9IG5vcm1hbGl6ZShOICogbm9yKTsKICAgIGdsX1Bvc2l0aW9uID0gV1ZQICogc3BvczsKICAgIGxpZ2h0UG9zaXRpb24gPSBMV1ZQICogc3BvczsKfQoK",Ne.Blue_mesh_vertData1="s720:I3ZlcnNpb24gMTAwCgp1bmlmb3JtIG1lZGl1bXAgbWF0NCBXOwp1bmlmb3JtIG1lZGl1bXAgbWF0MyBOOwp1bmlmb3JtIG1lZGl1bXAgbWF0NCBXVlA7CnVuaWZvcm0gbWVkaXVtcCBtYXQ0IExXVlA7CgphdHRyaWJ1dGUgbWVkaXVtcCB2ZWMzIHBvczsKdmFyeWluZyBtZWRpdW1wIHZlYzIgdGV4Q29vcmQ7CmF0dHJpYnV0ZSBtZWRpdW1wIHZlYzIgdGV4Owp2YXJ5aW5nIG1lZGl1bXAgdmVjMyB3cG9zaXRpb247CnZhcnlpbmcgbWVkaXVtcCB2ZWMzIHdub3JtYWw7CmF0dHJpYnV0ZSBtZWRpdW1wIHZlYzMgbm9yOwp2YXJ5aW5nIG1lZGl1bXAgdmVjNCBsaWdodFBvc2l0aW9uOwoKdm9pZCBtYWluKCkKewogICAgbWVkaXVtcCB2ZWM0IHNwb3MgPSB2ZWM0KHBvcywgMS4wKTsKICAgIHRleENvb3JkID0gdGV4OwogICAgd3Bvc2l0aW9uID0gdmVjNChXICogc3BvcykueHl6OwogICAgd25vcm1hbCA9IG5vcm1hbGl6ZShOICogbm9yKTsKICAgIGdsX1Bvc2l0aW9uID0gV1ZQICogc3BvczsKICAgIGxpZ2h0UG9zaXRpb24gPSBMV1ZQICogc3BvczsKfQoK",Ne.Blue_mesh_vertData2="s547:I3ZlcnNpb24gMzAwIGVzCgp1bmlmb3JtIG1hdDQgVzsKdW5pZm9ybSBtYXQzIE47CnVuaWZvcm0gbWF0NCBXVlA7CnVuaWZvcm0gbWF0NCBMV1ZQOwoKaW4gdmVjMyBwb3M7Cm91dCB2ZWMyIHRleENvb3JkOwppbiB2ZWMyIHRleDsKb3V0IHZlYzMgd3Bvc2l0aW9uOwpvdXQgdmVjMyB3bm9ybWFsOwppbiB2ZWMzIG5vcjsKb3V0IHZlYzQgbGlnaHRQb3NpdGlvbjsKCnZvaWQgbWFpbigpCnsKICAgIHZlYzQgc3BvcyA9IHZlYzQocG9zLCAxLjApOwogICAgdGV4Q29vcmQgPSB0ZXg7CiAgICB3cG9zaXRpb24gPSB2ZWM0KFcgKiBzcG9zKS54eXo7CiAgICB3bm9ybWFsID0gbm9ybWFsaXplKE4gKiBub3IpOwogICAgZ2xfUG9zaXRpb24gPSBXVlAgKiBzcG9zOwogICAgbGlnaHRQb3NpdGlvbiA9IExXVlAgKiBzcG9zOwp9Cgo",Ne.Body_armskin_shadowmap_vertData0="s1812:I3ZlcnNpb24gMTAwCgp1bmlmb3JtIHZlYzQgc2tpbkJvbmVzWzEzNF07CnVuaWZvcm0gbWF0NCBMV1ZQOwoKYXR0cmlidXRlIHZlYzMgcG9zOwphdHRyaWJ1dGUgdmVjNCBib25lOwphdHRyaWJ1dGUgdmVjNCB3ZWlnaHQ7Cgp2b2lkIGdldFNraW5uaW5nRHVhbFF1YXQoaXZlYzQgYm9uZV8xLCBpbm91dCB2ZWM0IHdlaWdodF8xLCBpbm91dCB2ZWM0IEEsIGlub3V0IHZlYzQgQikKewogICAgaXZlYzQgYm9uZWkgPSBib25lXzEgKiBpdmVjNCgyKTsKICAgIG1hdDQgbWF0QSA9IG1hdDQodmVjNChza2luQm9uZXNbYm9uZWkueF0pLCB2ZWM0KHNraW5Cb25lc1tib25laS55XSksIHZlYzQoc2tpbkJvbmVzW2JvbmVpLnpdKSwgdmVjNChza2luQm9uZXNbYm9uZWkud10pKTsKICAgIG1hdDQgbWF0QiA9IG1hdDQodmVjNChza2luQm9uZXNbYm9uZWkueCArIDFdKSwgdmVjNChza2luQm9uZXNbYm9uZWkueSArIDFdKSwgdmVjNChza2luQm9uZXNbYm9uZWkueiArIDFdKSwgdmVjNChza2luQm9uZXNbYm9uZWkudyArIDFdKSk7CiAgICB2ZWMzIF8xMjkgPSB3ZWlnaHRfMS54eXogKiBzaWduKG1hdEFbM10gKiBtYXRBKS54eXo7CiAgICB3ZWlnaHRfMSA9IHZlYzQoXzEyOS54LCBfMTI5LnksIF8xMjkueiwgd2VpZ2h0XzEudyk7CiAgICBBID0gbWF0QSAqIHdlaWdodF8xOwogICAgQiA9IG1hdEIgKiB3ZWlnaHRfMTsKICAgIGZsb2F0IGludk5vcm1BID0gMS4wIC8gbGVuZ3RoKEEpOwogICAgQSAqPSBpbnZOb3JtQTsKICAgIEIgKj0gaW52Tm9ybUE7Cn0KCnZvaWQgbWFpbigpCnsKICAgIHZlYzQgc3BvcyA9IHZlYzQocG9zLCAxLjApOwogICAgdmVjNCBwYXJhbSA9IHdlaWdodDsKICAgIHZlYzQgc2tpbkI7CiAgICB2ZWM0IHBhcmFtXzIgPSBza2luQjsKICAgIHZlYzQgcGFyYW1fMTsKICAgIGdldFNraW5uaW5nRHVhbFF1YXQoaXZlYzQoYm9uZSksIHBhcmFtLCBwYXJhbV8xLCBwYXJhbV8yKTsKICAgIHZlYzQgc2tpbkEgPSBwYXJhbV8xOwogICAgc2tpbkIgPSBwYXJhbV8yOwogICAgdmVjMyBfMTkwID0gc3Bvcy54eXogKyAoY3Jvc3Moc2tpbkEueHl6LCBjcm9zcyhza2luQS54eXosIHNwb3MueHl6KSArIChzcG9zLnh5eiAqIHNraW5BLncpKSAqIDIuMCk7CiAgICBzcG9zID0gdmVjNChfMTkwLngsIF8xOTAueSwgXzE5MC56LCBzcG9zLncpOwogICAgdmVjMyBfMjEzID0gc3Bvcy54eXogKyAoKCgoc2tpbkIueHl6ICogc2tpbkEudykgLSAoc2tpbkEueHl6ICogc2tpbkIudykpICsgY3Jvc3Moc2tpbkEueHl6LCBza2luQi54eXopKSAqIDIuMCk7CiAgICBzcG9zID0gdmVjNChfMjEzLngsIF8yMTMueSwgXzIxMy56LCBzcG9zLncpOwogICAgZ2xfUG9zaXRpb24gPSBMV1ZQICogc3BvczsKfQoK",Ne.Body_armskin_shadowmap_vertData1="s2047:I3ZlcnNpb24gMTAwCgp1bmlmb3JtIG1lZGl1bXAgdmVjNCBza2luQm9uZXNbMTM0XTsKdW5pZm9ybSBtZWRpdW1wIG1hdDQgTFdWUDsKCmF0dHJpYnV0ZSBtZWRpdW1wIHZlYzMgcG9zOwphdHRyaWJ1dGUgbWVkaXVtcCB2ZWM0IGJvbmU7CmF0dHJpYnV0ZSBtZWRpdW1wIHZlYzQgd2VpZ2h0OwoKdm9pZCBnZXRTa2lubmluZ0R1YWxRdWF0KG1lZGl1bXAgaXZlYzQgYm9uZV8xLCBpbm91dCBtZWRpdW1wIHZlYzQgd2VpZ2h0XzEsIGlub3V0IG1lZGl1bXAgdmVjNCBBLCBpbm91dCBtZWRpdW1wIHZlYzQgQikKewogICAgbWVkaXVtcCBpdmVjNCBib25laSA9IGJvbmVfMSAqIGl2ZWM0KDIpOwogICAgbWVkaXVtcCBtYXQ0IG1hdEEgPSBtYXQ0KHZlYzQoc2tpbkJvbmVzW2JvbmVpLnhdKSwgdmVjNChza2luQm9uZXNbYm9uZWkueV0pLCB2ZWM0KHNraW5Cb25lc1tib25laS56XSksIHZlYzQoc2tpbkJvbmVzW2JvbmVpLnddKSk7CiAgICBtZWRpdW1wIG1hdDQgbWF0QiA9IG1hdDQodmVjNChza2luQm9uZXNbYm9uZWkueCArIDFdKSwgdmVjNChza2luQm9uZXNbYm9uZWkueSArIDFdKSwgdmVjNChza2luQm9uZXNbYm9uZWkueiArIDFdKSwgdmVjNChza2luQm9uZXNbYm9uZWkudyArIDFdKSk7CiAgICBtZWRpdW1wIHZlYzMgXzEyOSA9IHdlaWdodF8xLnh5eiAqIHNpZ24obWF0QVszXSAqIG1hdEEpLnh5ejsKICAgIHdlaWdodF8xID0gdmVjNChfMTI5LngsIF8xMjkueSwgXzEyOS56LCB3ZWlnaHRfMS53KTsKICAgIEEgPSBtYXRBICogd2VpZ2h0XzE7CiAgICBCID0gbWF0QiAqIHdlaWdodF8xOwogICAgbWVkaXVtcCBmbG9hdCBpbnZOb3JtQSA9IDEuMCAvIGxlbmd0aChBKTsKICAgIEEgKj0gaW52Tm9ybUE7CiAgICBCICo9IGludk5vcm1BOwp9Cgp2b2lkIG1haW4oKQp7CiAgICBtZWRpdW1wIHZlYzQgc3BvcyA9IHZlYzQocG9zLCAxLjApOwogICAgbWVkaXVtcCB2ZWM0IHBhcmFtID0gd2VpZ2h0OwogICAgbWVkaXVtcCB2ZWM0IHNraW5COwogICAgbWVkaXVtcCB2ZWM0IHBhcmFtXzIgPSBza2luQjsKICAgIG1lZGl1bXAgdmVjNCBwYXJhbV8xOwogICAgZ2V0U2tpbm5pbmdEdWFsUXVhdChpdmVjNChib25lKSwgcGFyYW0sIHBhcmFtXzEsIHBhcmFtXzIpOwogICAgbWVkaXVtcCB2ZWM0IHNraW5BID0gcGFyYW1fMTsKICAgIHNraW5CID0gcGFyYW1fMjsKICAgIG1lZGl1bXAgdmVjMyBfMTkwID0gc3Bvcy54eXogKyAoY3Jvc3Moc2tpbkEueHl6LCBjcm9zcyhza2luQS54eXosIHNwb3MueHl6KSArIChzcG9zLnh5eiAqIHNraW5BLncpKSAqIDIuMCk7CiAgICBzcG9zID0gdmVjNChfMTkwLngsIF8xOTAueSwgXzE5MC56LCBzcG9zLncpOwogICAgbWVkaXVtcCB2ZWMzIF8yMTMgPSBzcG9zLnh5eiArICgoKChza2luQi54eXogKiBza2luQS53KSAtIChza2luQS54eXogKiBza2luQi53KSkgKyBjcm9zcyhza2luQS54eXosIHNraW5CLnh5eikpICogMi4wKTsKICAgIHNwb3MgPSB2ZWM0KF8yMTMueCwgXzIxMy55LCBfMjEzLnosIHNwb3Mudyk7CiAgICBnbF9Qb3NpdGlvbiA9IExXVlAgKiBzcG9zOwp9Cgo",Ne.Body_armskin_shadowmap_vertData2="s1788:I3ZlcnNpb24gMzAwIGVzCgp1bmlmb3JtIHZlYzQgc2tpbkJvbmVzWzEzNF07CnVuaWZvcm0gbWF0NCBMV1ZQOwoKaW4gdmVjMyBwb3M7CmluIHZlYzQgYm9uZTsKaW4gdmVjNCB3ZWlnaHQ7Cgp2b2lkIGdldFNraW5uaW5nRHVhbFF1YXQoaXZlYzQgYm9uZV8xLCBpbm91dCB2ZWM0IHdlaWdodF8xLCBpbm91dCB2ZWM0IEEsIGlub3V0IHZlYzQgQikKewogICAgaXZlYzQgYm9uZWkgPSBib25lXzEgKiBpdmVjNCgyKTsKICAgIG1hdDQgbWF0QSA9IG1hdDQodmVjNChza2luQm9uZXNbYm9uZWkueF0pLCB2ZWM0KHNraW5Cb25lc1tib25laS55XSksIHZlYzQoc2tpbkJvbmVzW2JvbmVpLnpdKSwgdmVjNChza2luQm9uZXNbYm9uZWkud10pKTsKICAgIG1hdDQgbWF0QiA9IG1hdDQodmVjNChza2luQm9uZXNbYm9uZWkueCArIDFdKSwgdmVjNChza2luQm9uZXNbYm9uZWkueSArIDFdKSwgdmVjNChza2luQm9uZXNbYm9uZWkueiArIDFdKSwgdmVjNChza2luQm9uZXNbYm9uZWkudyArIDFdKSk7CiAgICB2ZWMzIF8xMjkgPSB3ZWlnaHRfMS54eXogKiBzaWduKG1hdEFbM10gKiBtYXRBKS54eXo7CiAgICB3ZWlnaHRfMSA9IHZlYzQoXzEyOS54LCBfMTI5LnksIF8xMjkueiwgd2VpZ2h0XzEudyk7CiAgICBBID0gbWF0QSAqIHdlaWdodF8xOwogICAgQiA9IG1hdEIgKiB3ZWlnaHRfMTsKICAgIGZsb2F0IGludk5vcm1BID0gMS4wIC8gbGVuZ3RoKEEpOwogICAgQSAqPSBpbnZOb3JtQTsKICAgIEIgKj0gaW52Tm9ybUE7Cn0KCnZvaWQgbWFpbigpCnsKICAgIHZlYzQgc3BvcyA9IHZlYzQocG9zLCAxLjApOwogICAgdmVjNCBwYXJhbSA9IHdlaWdodDsKICAgIHZlYzQgc2tpbkI7CiAgICB2ZWM0IHBhcmFtXzIgPSBza2luQjsKICAgIHZlYzQgcGFyYW1fMTsKICAgIGdldFNraW5uaW5nRHVhbFF1YXQoaXZlYzQoYm9uZSksIHBhcmFtLCBwYXJhbV8xLCBwYXJhbV8yKTsKICAgIHZlYzQgc2tpbkEgPSBwYXJhbV8xOwogICAgc2tpbkIgPSBwYXJhbV8yOwogICAgdmVjMyBfMTkwID0gc3Bvcy54eXogKyAoY3Jvc3Moc2tpbkEueHl6LCBjcm9zcyhza2luQS54eXosIHNwb3MueHl6KSArIChzcG9zLnh5eiAqIHNraW5BLncpKSAqIDIuMCk7CiAgICBzcG9zID0gdmVjNChfMTkwLngsIF8xOTAueSwgXzE5MC56LCBzcG9zLncpOwogICAgdmVjMyBfMjEzID0gc3Bvcy54eXogKyAoKCgoc2tpbkIueHl6ICogc2tpbkEudykgLSAoc2tpbkEueHl6ICogc2tpbkIudykpICsgY3Jvc3Moc2tpbkEueHl6LCBza2luQi54eXopKSAqIDIuMCk7CiAgICBzcG9zID0gdmVjNChfMjEzLngsIF8yMTMueSwgXzIxMy56LCBzcG9zLncpOwogICAgZ2xfUG9zaXRpb24gPSBMV1ZQICogc3BvczsKfQoK",Ne.Body_armskin_mesh_fragData0="s4379:I3ZlcnNpb24gMTAwCnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OwpwcmVjaXNpb24gaGlnaHAgaW50OwoKdW5pZm9ybSBoaWdocCB2ZWM0IHNoaXJyWzddOwp1bmlmb3JtIGhpZ2hwIHNhbXBsZXIyRCBJbWFnZVRleHR1cmU7CnVuaWZvcm0gaGlnaHAgdmVjMyBsaWdodERpcjsKdW5pZm9ybSBoaWdocCBzYW1wbGVyMkQgc2hhZG93TWFwOwp1bmlmb3JtIGhpZ2hwIGZsb2F0IHNoYWRvd3NCaWFzOwp1bmlmb3JtIGhpZ2hwIHZlYzMgbGlnaHRDb2xvcjsKdW5pZm9ybSBoaWdocCB2ZWMzIGxpZ2h0UG9zOwp1bmlmb3JtIGhpZ2hwIGZsb2F0IGVudm1hcFN0cmVuZ3RoOwoKdmFyeWluZyBoaWdocCB2ZWMzIHdub3JtYWw7CnZhcnlpbmcgaGlnaHAgdmVjMiB0ZXhDb29yZDsKdmFyeWluZyBoaWdocCB2ZWM0IGxpZ2h0UG9zaXRpb247CnZhcnlpbmcgaGlnaHAgdmVjMyB3cG9zaXRpb247CgpoaWdocCBmbG9hdCBhdHRlbnVhdGUoaGlnaHAgZmxvYXQgZGlzdCkKewogICAgcmV0dXJuIDEuMCAvIChkaXN0ICogZGlzdCk7Cn0KCmhpZ2hwIHZlYzMgc2hJcnJhZGlhbmNlKGhpZ2hwIHZlYzMgbm9yKQp7CiAgICBoaWdocCB2ZWMzIGNsMDAgPSB2ZWMzKHNoaXJyWzBdLngsIHNoaXJyWzBdLnksIHNoaXJyWzBdLnopOwogICAgaGlnaHAgdmVjMyBjbDFtMSA9IHZlYzMoc2hpcnJbMF0udywgc2hpcnJbMV0ueCwgc2hpcnJbMV0ueSk7CiAgICBoaWdocCB2ZWMzIGNsMTAgPSB2ZWMzKHNoaXJyWzFdLnosIHNoaXJyWzFdLncsIHNoaXJyWzJdLngpOwogICAgaGlnaHAgdmVjMyBjbDExID0gdmVjMyhzaGlyclsyXS55LCBzaGlyclsyXS56LCBzaGlyclsyXS53KTsKICAgIGhpZ2hwIHZlYzMgY2wybTIgPSB2ZWMzKHNoaXJyWzNdLngsIHNoaXJyWzNdLnksIHNoaXJyWzNdLnopOwogICAgaGlnaHAgdmVjMyBjbDJtMSA9IHZlYzMoc2hpcnJbM10udywgc2hpcnJbNF0ueCwgc2hpcnJbNF0ueSk7CiAgICBoaWdocCB2ZWMzIGNsMjAgPSB2ZWMzKHNoaXJyWzRdLnosIHNoaXJyWzRdLncsIHNoaXJyWzVdLngpOwogICAgaGlnaHAgdmVjMyBjbDIxID0gdmVjMyhzaGlycls1XS55LCBzaGlycls1XS56LCBzaGlycls1XS53KTsKICAgIGhpZ2hwIHZlYzMgY2wyMiA9IHZlYzMoc2hpcnJbNl0ueCwgc2hpcnJbNl0ueSwgc2hpcnJbNl0ueik7CiAgICByZXR1cm4gKCgoKCgoKCgoKGNsMjIgKiAwLjQyOTA0Mjk5NDk3NjA0MzcwMTE3MTg3NSkgKiAoKG5vci55ICogbm9yLnkpIC0gKCgtbm9yLnopICogKC1ub3IueikpKSkgKyAoKChjbDIwICogMC43NDMxMjUwMjE0NTc2NzIxMTkxNDA2MjUpICogbm9yLngpICogbm9yLngpKSArIChjbDAwICogMC44ODYyMjcwMTE2ODA2MDMwMjczNDM3NSkpIC0gKGNsMjAgKiAwLjI0NzcwNzk5Mjc5MjEyOTUxNjYwMTU2MjUpKSArICgoKGNsMm0yICogMC44NTgwODU5ODk5NTIwODc0MDIzNDM3NSkgKiBub3IueSkgKiAoLW5vci56KSkpICsgKCgoY2wyMSAqIDAuODU4MDg1OTg5OTUyMDg3NDAyMzQzNzUpICogbm9yLnkpICogbm9yLngpKSArICgoKGNsMm0xICogMC44NTgwODU5ODk5NTIwODc0MDIzNDM3NSkgKiAoLW5vci56KSkgKiBub3IueCkpICsgKChjbDExICogMS4wMjMzMjc5NDY2NjI5MDI4MzIwMzEyNSkgKiBub3IueSkpICsgKChjbDFtMSAqIDEuMDIzMzI3OTQ2NjYyOTAyODMyMDMxMjUpICogKC1ub3IueikpKSArICgoY2wxMCAqIDEuMDIzMzI3OTQ2NjYyOTAyODMyMDMxMjUpICogbm9yLngpOwp9Cgp2b2lkIG1haW4oKQp7CiAgICBoaWdocCB2ZWMzIG4gPSBub3JtYWxpemUod25vcm1hbCk7CiAgICBoaWdocCB2ZWM0IEltYWdlVGV4dHVyZV9zdG9yZSA9IHRleHR1cmUyRChJbWFnZVRleHR1cmUsIHRleENvb3JkKTsKICAgIGhpZ2hwIHZlYzMgSW1hZ2VUZXh0dXJlX0NvbG9yX3JlcyA9IEltYWdlVGV4dHVyZV9zdG9yZS54eXo7CiAgICBoaWdocCB2ZWMzIGJhc2Vjb2wgPSB2ZWMzKDAuMzM5NTc0Mzk2NjEwMjYwMDA5NzY1NjI1LCAwLjM3Nzc2MTY2MjAwNjM3ODE3MzgyODEyNSwgMC4zODk4OTg2Mjc5OTY0NDQ3MDIxNDg0Mzc1KTsKICAgIGhpZ2hwIGZsb2F0IHJvdWdobmVzcyA9IEltYWdlVGV4dHVyZV9Db2xvcl9yZXMueDsKICAgIGhpZ2hwIGZsb2F0IG1ldGFsbGljID0gMC4wOwogICAgaGlnaHAgZmxvYXQgb2NjbHVzaW9uID0gMS4wOwogICAgaGlnaHAgZmxvYXQgc3BlY3VsYXIgPSAxLjA7CiAgICBoaWdocCBmbG9hdCB2aXNpYmlsaXR5ID0gMS4wOwogICAgaGlnaHAgZmxvYXQgZG90TkwgPSBtYXgoZG90KG4sIGxpZ2h0RGlyKSwgMC4wKTsKICAgIGlmIChsaWdodFBvc2l0aW9uLncgPiAwLjApCiAgICB7CiAgICAgICAgaGlnaHAgdmVjMyBsUG9zID0gbGlnaHRQb3NpdGlvbi54eXogLyB2ZWMzKGxpZ2h0UG9zaXRpb24udyk7CiAgICAgICAgdmlzaWJpbGl0eSA9IDAuMDsKICAgICAgICB2aXNpYmlsaXR5ICs9IGZsb2F0KCh0ZXh0dXJlMkQoc2hhZG93TWFwLCBsUG9zLnh5KS54ICsgc2hhZG93c0JpYXMpID4gbFBvcy56KTsKICAgICAgICB2aXNpYmlsaXR5ICs9IChmbG9hdCgodGV4dHVyZTJEKHNoYWRvd01hcCwgbFBvcy54eSArIHZlYzIoMC4wMDA0ODgyODEyNSwgMC4wKSkueCArIHNoYWRvd3NCaWFzKSA%IGxQb3MueikgKiAwLjUpOwogICAgICAgIHZpc2liaWxpdHkgKz0gKGZsb2F0KCh0ZXh0dXJlMkQoc2hhZG93TWFwLCBsUG9zLnh5ICsgdmVjMigtMC4wMDA0ODgyODEyNSwgMC4wKSkueCArIHNoYWRvd3NCaWFzKSA%IGxQb3MueikgKiAwLjI1KTsKICAgICAgICB2aXNpYmlsaXR5ICs9IChmbG9hdCgodGV4dHVyZTJEKHNoYWRvd01hcCwgbFBvcy54eSArIHZlYzIoMC4wLCAwLjAwMDQ4ODI4MTI1KSkueCArIHNoYWRvd3NCaWFzKSA%IGxQb3MueikgKiAwLjUpOwogICAgICAgIHZpc2liaWxpdHkgKz0gKGZsb2F0KCh0ZXh0dXJlMkQoc2hhZG93TWFwLCBsUG9zLnh5ICsgdmVjMigwLjAsIC0wLjAwMDQ4ODI4MTI1KSkueCArIHNoYWRvd3NCaWFzKSA%IGxQb3MueikgKiAwLjI1KTsKICAgICAgICB2aXNpYmlsaXR5IC89IDIuNTsKICAgICAgICB2aXNpYmlsaXR5ID0gbWF4KHZpc2liaWxpdHksIDAuMjAwMDAwMDAyOTgwMjMyMjM4NzY5NTMxMjUpOwogICAgfQogICAgaGlnaHAgdmVjMyBkaXJlY3QgPSAoYmFzZWNvbCAqIGRvdE5MKSAqIGxpZ2h0Q29sb3I7CiAgICBkaXJlY3QgKj0gYXR0ZW51YXRlKGRpc3RhbmNlKHdwb3NpdGlvbiwgbGlnaHRQb3MpKTsKICAgIGdsX0ZyYWdEYXRhWzBdID0gdmVjNCgoZGlyZWN0ICogdmlzaWJpbGl0eSkgKyAoKGJhc2Vjb2wgKiBzaElycmFkaWFuY2UobikpICogZW52bWFwU3RyZW5ndGgpLCAxLjApOwp9Cgo",Ne.Body_armskin_mesh_fragData1="s4107:I3ZlcnNpb24gMTAwCnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OwpwcmVjaXNpb24gbWVkaXVtcCBpbnQ7Cgp1bmlmb3JtIHZlYzQgc2hpcnJbN107CnVuaWZvcm0gbWVkaXVtcCBzYW1wbGVyMkQgSW1hZ2VUZXh0dXJlOwp1bmlmb3JtIHZlYzMgbGlnaHREaXI7CnVuaWZvcm0gbWVkaXVtcCBzYW1wbGVyMkQgc2hhZG93TWFwOwp1bmlmb3JtIGZsb2F0IHNoYWRvd3NCaWFzOwp1bmlmb3JtIHZlYzMgbGlnaHRDb2xvcjsKdW5pZm9ybSB2ZWMzIGxpZ2h0UG9zOwp1bmlmb3JtIGZsb2F0IGVudm1hcFN0cmVuZ3RoOwoKdmFyeWluZyB2ZWMzIHdub3JtYWw7CnZhcnlpbmcgdmVjMiB0ZXhDb29yZDsKdmFyeWluZyB2ZWM0IGxpZ2h0UG9zaXRpb247CnZhcnlpbmcgdmVjMyB3cG9zaXRpb247CgpmbG9hdCBhdHRlbnVhdGUoZmxvYXQgZGlzdCkKewogICAgcmV0dXJuIDEuMCAvIChkaXN0ICogZGlzdCk7Cn0KCnZlYzMgc2hJcnJhZGlhbmNlKHZlYzMgbm9yKQp7CiAgICB2ZWMzIGNsMDAgPSB2ZWMzKHNoaXJyWzBdLngsIHNoaXJyWzBdLnksIHNoaXJyWzBdLnopOwogICAgdmVjMyBjbDFtMSA9IHZlYzMoc2hpcnJbMF0udywgc2hpcnJbMV0ueCwgc2hpcnJbMV0ueSk7CiAgICB2ZWMzIGNsMTAgPSB2ZWMzKHNoaXJyWzFdLnosIHNoaXJyWzFdLncsIHNoaXJyWzJdLngpOwogICAgdmVjMyBjbDExID0gdmVjMyhzaGlyclsyXS55LCBzaGlyclsyXS56LCBzaGlyclsyXS53KTsKICAgIHZlYzMgY2wybTIgPSB2ZWMzKHNoaXJyWzNdLngsIHNoaXJyWzNdLnksIHNoaXJyWzNdLnopOwogICAgdmVjMyBjbDJtMSA9IHZlYzMoc2hpcnJbM10udywgc2hpcnJbNF0ueCwgc2hpcnJbNF0ueSk7CiAgICB2ZWMzIGNsMjAgPSB2ZWMzKHNoaXJyWzRdLnosIHNoaXJyWzRdLncsIHNoaXJyWzVdLngpOwogICAgdmVjMyBjbDIxID0gdmVjMyhzaGlycls1XS55LCBzaGlycls1XS56LCBzaGlycls1XS53KTsKICAgIHZlYzMgY2wyMiA9IHZlYzMoc2hpcnJbNl0ueCwgc2hpcnJbNl0ueSwgc2hpcnJbNl0ueik7CiAgICByZXR1cm4gKCgoKCgoKCgoKGNsMjIgKiAwLjQyOTA0Mjk5NDk3NjA0MzcwMTE3MTg3NSkgKiAoKG5vci55ICogbm9yLnkpIC0gKCgtbm9yLnopICogKC1ub3IueikpKSkgKyAoKChjbDIwICogMC43NDMxMjUwMjE0NTc2NzIxMTkxNDA2MjUpICogbm9yLngpICogbm9yLngpKSArIChjbDAwICogMC44ODYyMjcwMTE2ODA2MDMwMjczNDM3NSkpIC0gKGNsMjAgKiAwLjI0NzcwNzk5Mjc5MjEyOTUxNjYwMTU2MjUpKSArICgoKGNsMm0yICogMC44NTgwODU5ODk5NTIwODc0MDIzNDM3NSkgKiBub3IueSkgKiAoLW5vci56KSkpICsgKCgoY2wyMSAqIDAuODU4MDg1OTg5OTUyMDg3NDAyMzQzNzUpICogbm9yLnkpICogbm9yLngpKSArICgoKGNsMm0xICogMC44NTgwODU5ODk5NTIwODc0MDIzNDM3NSkgKiAoLW5vci56KSkgKiBub3IueCkpICsgKChjbDExICogMS4wMjMzMjc5NDY2NjI5MDI4MzIwMzEyNSkgKiBub3IueSkpICsgKChjbDFtMSAqIDEuMDIzMzI3OTQ2NjYyOTAyODMyMDMxMjUpICogKC1ub3IueikpKSArICgoY2wxMCAqIDEuMDIzMzI3OTQ2NjYyOTAyODMyMDMxMjUpICogbm9yLngpOwp9Cgp2b2lkIG1haW4oKQp7CiAgICB2ZWMzIG4gPSBub3JtYWxpemUod25vcm1hbCk7CiAgICB2ZWM0IEltYWdlVGV4dHVyZV9zdG9yZSA9IHRleHR1cmUyRChJbWFnZVRleHR1cmUsIHRleENvb3JkKTsKICAgIHZlYzMgSW1hZ2VUZXh0dXJlX0NvbG9yX3JlcyA9IEltYWdlVGV4dHVyZV9zdG9yZS54eXo7CiAgICB2ZWMzIGJhc2Vjb2wgPSB2ZWMzKDAuMzM5NTc0Mzk2NjEwMjYwMDA5NzY1NjI1LCAwLjM3Nzc2MTY2MjAwNjM3ODE3MzgyODEyNSwgMC4zODk4OTg2Mjc5OTY0NDQ3MDIxNDg0Mzc1KTsKICAgIGZsb2F0IHJvdWdobmVzcyA9IEltYWdlVGV4dHVyZV9Db2xvcl9yZXMueDsKICAgIGZsb2F0IG1ldGFsbGljID0gMC4wOwogICAgZmxvYXQgb2NjbHVzaW9uID0gMS4wOwogICAgZmxvYXQgc3BlY3VsYXIgPSAxLjA7CiAgICBmbG9hdCB2aXNpYmlsaXR5ID0gMS4wOwogICAgZmxvYXQgZG90TkwgPSBtYXgoZG90KG4sIGxpZ2h0RGlyKSwgMC4wKTsKICAgIGlmIChsaWdodFBvc2l0aW9uLncgPiAwLjApCiAgICB7CiAgICAgICAgdmVjMyBsUG9zID0gbGlnaHRQb3NpdGlvbi54eXogLyB2ZWMzKGxpZ2h0UG9zaXRpb24udyk7CiAgICAgICAgdmlzaWJpbGl0eSA9IDAuMDsKICAgICAgICB2aXNpYmlsaXR5ICs9IGZsb2F0KCh0ZXh0dXJlMkQoc2hhZG93TWFwLCBsUG9zLnh5KS54ICsgc2hhZG93c0JpYXMpID4gbFBvcy56KTsKICAgICAgICB2aXNpYmlsaXR5ICs9IChmbG9hdCgodGV4dHVyZTJEKHNoYWRvd01hcCwgbFBvcy54eSArIHZlYzIoMC4wMDA0ODgyODEyNSwgMC4wKSkueCArIHNoYWRvd3NCaWFzKSA%IGxQb3MueikgKiAwLjUpOwogICAgICAgIHZpc2liaWxpdHkgKz0gKGZsb2F0KCh0ZXh0dXJlMkQoc2hhZG93TWFwLCBsUG9zLnh5ICsgdmVjMigtMC4wMDA0ODgyODEyNSwgMC4wKSkueCArIHNoYWRvd3NCaWFzKSA%IGxQb3MueikgKiAwLjI1KTsKICAgICAgICB2aXNpYmlsaXR5ICs9IChmbG9hdCgodGV4dHVyZTJEKHNoYWRvd01hcCwgbFBvcy54eSArIHZlYzIoMC4wLCAwLjAwMDQ4ODI4MTI1KSkueCArIHNoYWRvd3NCaWFzKSA%IGxQb3MueikgKiAwLjUpOwogICAgICAgIHZpc2liaWxpdHkgKz0gKGZsb2F0KCh0ZXh0dXJlMkQoc2hhZG93TWFwLCBsUG9zLnh5ICsgdmVjMigwLjAsIC0wLjAwMDQ4ODI4MTI1KSkueCArIHNoYWRvd3NCaWFzKSA%IGxQb3MueikgKiAwLjI1KTsKICAgICAgICB2aXNpYmlsaXR5IC89IDIuNTsKICAgICAgICB2aXNpYmlsaXR5ID0gbWF4KHZpc2liaWxpdHksIDAuMjAwMDAwMDAyOTgwMjMyMjM4NzY5NTMxMjUpOwogICAgfQogICAgdmVjMyBkaXJlY3QgPSAoYmFzZWNvbCAqIGRvdE5MKSAqIGxpZ2h0Q29sb3I7CiAgICBkaXJlY3QgKj0gYXR0ZW51YXRlKGRpc3RhbmNlKHdwb3NpdGlvbiwgbGlnaHRQb3MpKTsKICAgIGdsX0ZyYWdEYXRhWzBdID0gdmVjNCgoZGlyZWN0ICogdmlzaWJpbGl0eSkgKyAoKGJhc2Vjb2wgKiBzaElycmFkaWFuY2UobikpICogZW52bWFwU3RyZW5ndGgpLCAxLjApOwp9Cgo",Ne.Body_armskin_mesh_fragData2="s4368:I3ZlcnNpb24gMzAwIGVzCnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OwpwcmVjaXNpb24gaGlnaHAgaW50OwoKdW5pZm9ybSBoaWdocCB2ZWM0IHNoaXJyWzddOwp1bmlmb3JtIGhpZ2hwIHNhbXBsZXIyRCBJbWFnZVRleHR1cmU7CnVuaWZvcm0gaGlnaHAgdmVjMyBsaWdodERpcjsKdW5pZm9ybSBoaWdocCBzYW1wbGVyMkQgc2hhZG93TWFwOwp1bmlmb3JtIGhpZ2hwIGZsb2F0IHNoYWRvd3NCaWFzOwp1bmlmb3JtIGhpZ2hwIHZlYzMgbGlnaHRDb2xvcjsKdW5pZm9ybSBoaWdocCB2ZWMzIGxpZ2h0UG9zOwp1bmlmb3JtIGhpZ2hwIGZsb2F0IGVudm1hcFN0cmVuZ3RoOwoKaW4gaGlnaHAgdmVjMyB3bm9ybWFsOwppbiBoaWdocCB2ZWMyIHRleENvb3JkOwppbiBoaWdocCB2ZWM0IGxpZ2h0UG9zaXRpb247CmluIGhpZ2hwIHZlYzMgd3Bvc2l0aW9uOwpvdXQgaGlnaHAgdmVjNCBmcmFnQ29sb3I7CgpoaWdocCBmbG9hdCBhdHRlbnVhdGUoaGlnaHAgZmxvYXQgZGlzdCkKewogICAgcmV0dXJuIDEuMCAvIChkaXN0ICogZGlzdCk7Cn0KCmhpZ2hwIHZlYzMgc2hJcnJhZGlhbmNlKGhpZ2hwIHZlYzMgbm9yKQp7CiAgICBoaWdocCB2ZWMzIGNsMDAgPSB2ZWMzKHNoaXJyWzBdLngsIHNoaXJyWzBdLnksIHNoaXJyWzBdLnopOwogICAgaGlnaHAgdmVjMyBjbDFtMSA9IHZlYzMoc2hpcnJbMF0udywgc2hpcnJbMV0ueCwgc2hpcnJbMV0ueSk7CiAgICBoaWdocCB2ZWMzIGNsMTAgPSB2ZWMzKHNoaXJyWzFdLnosIHNoaXJyWzFdLncsIHNoaXJyWzJdLngpOwogICAgaGlnaHAgdmVjMyBjbDExID0gdmVjMyhzaGlyclsyXS55LCBzaGlyclsyXS56LCBzaGlyclsyXS53KTsKICAgIGhpZ2hwIHZlYzMgY2wybTIgPSB2ZWMzKHNoaXJyWzNdLngsIHNoaXJyWzNdLnksIHNoaXJyWzNdLnopOwogICAgaGlnaHAgdmVjMyBjbDJtMSA9IHZlYzMoc2hpcnJbM10udywgc2hpcnJbNF0ueCwgc2hpcnJbNF0ueSk7CiAgICBoaWdocCB2ZWMzIGNsMjAgPSB2ZWMzKHNoaXJyWzRdLnosIHNoaXJyWzRdLncsIHNoaXJyWzVdLngpOwogICAgaGlnaHAgdmVjMyBjbDIxID0gdmVjMyhzaGlycls1XS55LCBzaGlycls1XS56LCBzaGlycls1XS53KTsKICAgIGhpZ2hwIHZlYzMgY2wyMiA9IHZlYzMoc2hpcnJbNl0ueCwgc2hpcnJbNl0ueSwgc2hpcnJbNl0ueik7CiAgICByZXR1cm4gKCgoKCgoKCgoKGNsMjIgKiAwLjQyOTA0Mjk5NDk3NjA0MzcwMTE3MTg3NSkgKiAoKG5vci55ICogbm9yLnkpIC0gKCgtbm9yLnopICogKC1ub3IueikpKSkgKyAoKChjbDIwICogMC43NDMxMjUwMjE0NTc2NzIxMTkxNDA2MjUpICogbm9yLngpICogbm9yLngpKSArIChjbDAwICogMC44ODYyMjcwMTE2ODA2MDMwMjczNDM3NSkpIC0gKGNsMjAgKiAwLjI0NzcwNzk5Mjc5MjEyOTUxNjYwMTU2MjUpKSArICgoKGNsMm0yICogMC44NTgwODU5ODk5NTIwODc0MDIzNDM3NSkgKiBub3IueSkgKiAoLW5vci56KSkpICsgKCgoY2wyMSAqIDAuODU4MDg1OTg5OTUyMDg3NDAyMzQzNzUpICogbm9yLnkpICogbm9yLngpKSArICgoKGNsMm0xICogMC44NTgwODU5ODk5NTIwODc0MDIzNDM3NSkgKiAoLW5vci56KSkgKiBub3IueCkpICsgKChjbDExICogMS4wMjMzMjc5NDY2NjI5MDI4MzIwMzEyNSkgKiBub3IueSkpICsgKChjbDFtMSAqIDEuMDIzMzI3OTQ2NjYyOTAyODMyMDMxMjUpICogKC1ub3IueikpKSArICgoY2wxMCAqIDEuMDIzMzI3OTQ2NjYyOTAyODMyMDMxMjUpICogbm9yLngpOwp9Cgp2b2lkIG1haW4oKQp7CiAgICBoaWdocCB2ZWMzIG4gPSBub3JtYWxpemUod25vcm1hbCk7CiAgICBoaWdocCB2ZWM0IEltYWdlVGV4dHVyZV9zdG9yZSA9IHRleHR1cmUoSW1hZ2VUZXh0dXJlLCB0ZXhDb29yZCk7CiAgICBoaWdocCB2ZWMzIEltYWdlVGV4dHVyZV9Db2xvcl9yZXMgPSBJbWFnZVRleHR1cmVfc3RvcmUueHl6OwogICAgaGlnaHAgdmVjMyBiYXNlY29sID0gdmVjMygwLjMzOTU3NDM5NjYxMDI2MDAwOTc2NTYyNSwgMC4zNzc3NjE2NjIwMDYzNzgxNzM4MjgxMjUsIDAuMzg5ODk4NjI3OTk2NDQ0NzAyMTQ4NDM3NSk7CiAgICBoaWdocCBmbG9hdCByb3VnaG5lc3MgPSBJbWFnZVRleHR1cmVfQ29sb3JfcmVzLng7CiAgICBoaWdocCBmbG9hdCBtZXRhbGxpYyA9IDAuMDsKICAgIGhpZ2hwIGZsb2F0IG9jY2x1c2lvbiA9IDEuMDsKICAgIGhpZ2hwIGZsb2F0IHNwZWN1bGFyID0gMS4wOwogICAgaGlnaHAgZmxvYXQgdmlzaWJpbGl0eSA9IDEuMDsKICAgIGhpZ2hwIGZsb2F0IGRvdE5MID0gbWF4KGRvdChuLCBsaWdodERpciksIDAuMCk7CiAgICBpZiAobGlnaHRQb3NpdGlvbi53ID4gMC4wKQogICAgewogICAgICAgIGhpZ2hwIHZlYzMgbFBvcyA9IGxpZ2h0UG9zaXRpb24ueHl6IC8gdmVjMyhsaWdodFBvc2l0aW9uLncpOwogICAgICAgIHZpc2liaWxpdHkgPSAwLjA7CiAgICAgICAgdmlzaWJpbGl0eSArPSBmbG9hdCgodGV4dHVyZShzaGFkb3dNYXAsIGxQb3MueHkpLnggKyBzaGFkb3dzQmlhcykgPiBsUG9zLnopOwogICAgICAgIHZpc2liaWxpdHkgKz0gKGZsb2F0KCh0ZXh0dXJlKHNoYWRvd01hcCwgbFBvcy54eSArIHZlYzIoMC4wMDA0ODgyODEyNSwgMC4wKSkueCArIHNoYWRvd3NCaWFzKSA%IGxQb3MueikgKiAwLjUpOwogICAgICAgIHZpc2liaWxpdHkgKz0gKGZsb2F0KCh0ZXh0dXJlKHNoYWRvd01hcCwgbFBvcy54eSArIHZlYzIoLTAuMDAwNDg4MjgxMjUsIDAuMCkpLnggKyBzaGFkb3dzQmlhcykgPiBsUG9zLnopICogMC4yNSk7CiAgICAgICAgdmlzaWJpbGl0eSArPSAoZmxvYXQoKHRleHR1cmUoc2hhZG93TWFwLCBsUG9zLnh5ICsgdmVjMigwLjAsIDAuMDAwNDg4MjgxMjUpKS54ICsgc2hhZG93c0JpYXMpID4gbFBvcy56KSAqIDAuNSk7CiAgICAgICAgdmlzaWJpbGl0eSArPSAoZmxvYXQoKHRleHR1cmUoc2hhZG93TWFwLCBsUG9zLnh5ICsgdmVjMigwLjAsIC0wLjAwMDQ4ODI4MTI1KSkueCArIHNoYWRvd3NCaWFzKSA%IGxQb3MueikgKiAwLjI1KTsKICAgICAgICB2aXNpYmlsaXR5IC89IDIuNTsKICAgICAgICB2aXNpYmlsaXR5ID0gbWF4KHZpc2liaWxpdHksIDAuMjAwMDAwMDAyOTgwMjMyMjM4NzY5NTMxMjUpOwogICAgfQogICAgaGlnaHAgdmVjMyBkaXJlY3QgPSAoYmFzZWNvbCAqIGRvdE5MKSAqIGxpZ2h0Q29sb3I7CiAgICBkaXJlY3QgKj0gYXR0ZW51YXRlKGRpc3RhbmNlKHdwb3NpdGlvbiwgbGlnaHRQb3MpKTsKICAgIGZyYWdDb2xvciA9IHZlYzQoKGRpcmVjdCAqIHZpc2liaWxpdHkpICsgKChiYXNlY29sICogc2hJcnJhZGlhbmNlKG4pKSAqIGVudm1hcFN0cmVuZ3RoKSwgMS4wKTsKfQoK",Ne.Body_armskin_mesh_vertData0="s2318:I3ZlcnNpb24gMTAwCgp1bmlmb3JtIHZlYzQgc2tpbkJvbmVzWzEzNF07CnVuaWZvcm0gbWF0NCBXOwp1bmlmb3JtIG1hdDMgTjsKdW5pZm9ybSBtYXQ0IFdWUDsKdW5pZm9ybSBtYXQ0IExXVlA7CgphdHRyaWJ1dGUgdmVjMyBwb3M7CnZhcnlpbmcgdmVjMiB0ZXhDb29yZDsKYXR0cmlidXRlIHZlYzIgdGV4OwphdHRyaWJ1dGUgdmVjNCBib25lOwphdHRyaWJ1dGUgdmVjNCB3ZWlnaHQ7CnZhcnlpbmcgdmVjMyB3cG9zaXRpb247CnZhcnlpbmcgdmVjMyB3bm9ybWFsOwphdHRyaWJ1dGUgdmVjMyBub3I7CnZhcnlpbmcgdmVjNCBsaWdodFBvc2l0aW9uOwoKdm9pZCBnZXRTa2lubmluZ0R1YWxRdWF0KGl2ZWM0IGJvbmVfMSwgaW5vdXQgdmVjNCB3ZWlnaHRfMSwgaW5vdXQgdmVjNCBBLCBpbm91dCB2ZWM0IEIpCnsKICAgIGl2ZWM0IGJvbmVpID0gYm9uZV8xICogaXZlYzQoMik7CiAgICBtYXQ0IG1hdEEgPSBtYXQ0KHZlYzQoc2tpbkJvbmVzW2JvbmVpLnhdKSwgdmVjNChza2luQm9uZXNbYm9uZWkueV0pLCB2ZWM0KHNraW5Cb25lc1tib25laS56XSksIHZlYzQoc2tpbkJvbmVzW2JvbmVpLnddKSk7CiAgICBtYXQ0IG1hdEIgPSBtYXQ0KHZlYzQoc2tpbkJvbmVzW2JvbmVpLnggKyAxXSksIHZlYzQoc2tpbkJvbmVzW2JvbmVpLnkgKyAxXSksIHZlYzQoc2tpbkJvbmVzW2JvbmVpLnogKyAxXSksIHZlYzQoc2tpbkJvbmVzW2JvbmVpLncgKyAxXSkpOwogICAgdmVjMyBfMTI5ID0gd2VpZ2h0XzEueHl6ICogc2lnbihtYXRBWzNdICogbWF0QSkueHl6OwogICAgd2VpZ2h0XzEgPSB2ZWM0KF8xMjkueCwgXzEyOS55LCBfMTI5LnosIHdlaWdodF8xLncpOwogICAgQSA9IG1hdEEgKiB3ZWlnaHRfMTsKICAgIEIgPSBtYXRCICogd2VpZ2h0XzE7CiAgICBmbG9hdCBpbnZOb3JtQSA9IDEuMCAvIGxlbmd0aChBKTsKICAgIEEgKj0gaW52Tm9ybUE7CiAgICBCICo9IGludk5vcm1BOwp9Cgp2b2lkIG1haW4oKQp7CiAgICB2ZWM0IHNwb3MgPSB2ZWM0KHBvcywgMS4wKTsKICAgIHRleENvb3JkID0gdGV4OwogICAgdmVjNCBwYXJhbSA9IHdlaWdodDsKICAgIHZlYzQgc2tpbkI7CiAgICB2ZWM0IHBhcmFtXzIgPSBza2luQjsKICAgIHZlYzQgcGFyYW1fMTsKICAgIGdldFNraW5uaW5nRHVhbFF1YXQoaXZlYzQoYm9uZSksIHBhcmFtLCBwYXJhbV8xLCBwYXJhbV8yKTsKICAgIHZlYzQgc2tpbkEgPSBwYXJhbV8xOwogICAgc2tpbkIgPSBwYXJhbV8yOwogICAgdmVjMyBfMTk2ID0gc3Bvcy54eXogKyAoY3Jvc3Moc2tpbkEueHl6LCBjcm9zcyhza2luQS54eXosIHNwb3MueHl6KSArIChzcG9zLnh5eiAqIHNraW5BLncpKSAqIDIuMCk7CiAgICBzcG9zID0gdmVjNChfMTk2LngsIF8xOTYueSwgXzE5Ni56LCBzcG9zLncpOwogICAgdmVjMyBfMjE5ID0gc3Bvcy54eXogKyAoKCgoc2tpbkIueHl6ICogc2tpbkEudykgLSAoc2tpbkEueHl6ICogc2tpbkIudykpICsgY3Jvc3Moc2tpbkEueHl6LCBza2luQi54eXopKSAqIDIuMCk7CiAgICBzcG9zID0gdmVjNChfMjE5LngsIF8yMTkueSwgXzIxOS56LCBzcG9zLncpOwogICAgd3Bvc2l0aW9uID0gdmVjNChXICogc3BvcykueHl6OwogICAgd25vcm1hbCA9IG5vcm1hbGl6ZShOICogKG5vciArIChjcm9zcyhza2luQS54eXosIGNyb3NzKHNraW5BLnh5eiwgbm9yKSArIChub3IgKiBza2luQS53KSkgKiAyLjApKSk7CiAgICBnbF9Qb3NpdGlvbiA9IFdWUCAqIHNwb3M7CiAgICBsaWdodFBvc2l0aW9uID0gTFdWUCAqIHNwb3M7Cn0KCg",Ne.Body_armskin_mesh_vertData1="s2648:I3ZlcnNpb24gMTAwCgp1bmlmb3JtIG1lZGl1bXAgdmVjNCBza2luQm9uZXNbMTM0XTsKdW5pZm9ybSBtZWRpdW1wIG1hdDQgVzsKdW5pZm9ybSBtZWRpdW1wIG1hdDMgTjsKdW5pZm9ybSBtZWRpdW1wIG1hdDQgV1ZQOwp1bmlmb3JtIG1lZGl1bXAgbWF0NCBMV1ZQOwoKYXR0cmlidXRlIG1lZGl1bXAgdmVjMyBwb3M7CnZhcnlpbmcgbWVkaXVtcCB2ZWMyIHRleENvb3JkOwphdHRyaWJ1dGUgbWVkaXVtcCB2ZWMyIHRleDsKYXR0cmlidXRlIG1lZGl1bXAgdmVjNCBib25lOwphdHRyaWJ1dGUgbWVkaXVtcCB2ZWM0IHdlaWdodDsKdmFyeWluZyBtZWRpdW1wIHZlYzMgd3Bvc2l0aW9uOwp2YXJ5aW5nIG1lZGl1bXAgdmVjMyB3bm9ybWFsOwphdHRyaWJ1dGUgbWVkaXVtcCB2ZWMzIG5vcjsKdmFyeWluZyBtZWRpdW1wIHZlYzQgbGlnaHRQb3NpdGlvbjsKCnZvaWQgZ2V0U2tpbm5pbmdEdWFsUXVhdChtZWRpdW1wIGl2ZWM0IGJvbmVfMSwgaW5vdXQgbWVkaXVtcCB2ZWM0IHdlaWdodF8xLCBpbm91dCBtZWRpdW1wIHZlYzQgQSwgaW5vdXQgbWVkaXVtcCB2ZWM0IEIpCnsKICAgIG1lZGl1bXAgaXZlYzQgYm9uZWkgPSBib25lXzEgKiBpdmVjNCgyKTsKICAgIG1lZGl1bXAgbWF0NCBtYXRBID0gbWF0NCh2ZWM0KHNraW5Cb25lc1tib25laS54XSksIHZlYzQoc2tpbkJvbmVzW2JvbmVpLnldKSwgdmVjNChza2luQm9uZXNbYm9uZWkuel0pLCB2ZWM0KHNraW5Cb25lc1tib25laS53XSkpOwogICAgbWVkaXVtcCBtYXQ0IG1hdEIgPSBtYXQ0KHZlYzQoc2tpbkJvbmVzW2JvbmVpLnggKyAxXSksIHZlYzQoc2tpbkJvbmVzW2JvbmVpLnkgKyAxXSksIHZlYzQoc2tpbkJvbmVzW2JvbmVpLnogKyAxXSksIHZlYzQoc2tpbkJvbmVzW2JvbmVpLncgKyAxXSkpOwogICAgbWVkaXVtcCB2ZWMzIF8xMjkgPSB3ZWlnaHRfMS54eXogKiBzaWduKG1hdEFbM10gKiBtYXRBKS54eXo7CiAgICB3ZWlnaHRfMSA9IHZlYzQoXzEyOS54LCBfMTI5LnksIF8xMjkueiwgd2VpZ2h0XzEudyk7CiAgICBBID0gbWF0QSAqIHdlaWdodF8xOwogICAgQiA9IG1hdEIgKiB3ZWlnaHRfMTsKICAgIG1lZGl1bXAgZmxvYXQgaW52Tm9ybUEgPSAxLjAgLyBsZW5ndGgoQSk7CiAgICBBICo9IGludk5vcm1BOwogICAgQiAqPSBpbnZOb3JtQTsKfQoKdm9pZCBtYWluKCkKewogICAgbWVkaXVtcCB2ZWM0IHNwb3MgPSB2ZWM0KHBvcywgMS4wKTsKICAgIHRleENvb3JkID0gdGV4OwogICAgbWVkaXVtcCB2ZWM0IHBhcmFtID0gd2VpZ2h0OwogICAgbWVkaXVtcCB2ZWM0IHNraW5COwogICAgbWVkaXVtcCB2ZWM0IHBhcmFtXzIgPSBza2luQjsKICAgIG1lZGl1bXAgdmVjNCBwYXJhbV8xOwogICAgZ2V0U2tpbm5pbmdEdWFsUXVhdChpdmVjNChib25lKSwgcGFyYW0sIHBhcmFtXzEsIHBhcmFtXzIpOwogICAgbWVkaXVtcCB2ZWM0IHNraW5BID0gcGFyYW1fMTsKICAgIHNraW5CID0gcGFyYW1fMjsKICAgIG1lZGl1bXAgdmVjMyBfMTk2ID0gc3Bvcy54eXogKyAoY3Jvc3Moc2tpbkEueHl6LCBjcm9zcyhza2luQS54eXosIHNwb3MueHl6KSArIChzcG9zLnh5eiAqIHNraW5BLncpKSAqIDIuMCk7CiAgICBzcG9zID0gdmVjNChfMTk2LngsIF8xOTYueSwgXzE5Ni56LCBzcG9zLncpOwogICAgbWVkaXVtcCB2ZWMzIF8yMTkgPSBzcG9zLnh5eiArICgoKChza2luQi54eXogKiBza2luQS53KSAtIChza2luQS54eXogKiBza2luQi53KSkgKyBjcm9zcyhza2luQS54eXosIHNraW5CLnh5eikpICogMi4wKTsKICAgIHNwb3MgPSB2ZWM0KF8yMTkueCwgXzIxOS55LCBfMjE5LnosIHNwb3Mudyk7CiAgICB3cG9zaXRpb24gPSB2ZWM0KFcgKiBzcG9zKS54eXo7CiAgICB3bm9ybWFsID0gbm9ybWFsaXplKE4gKiAobm9yICsgKGNyb3NzKHNraW5BLnh5eiwgY3Jvc3Moc2tpbkEueHl6LCBub3IpICsgKG5vciAqIHNraW5BLncpKSAqIDIuMCkpKTsKICAgIGdsX1Bvc2l0aW9uID0gV1ZQICogc3BvczsKICAgIGxpZ2h0UG9zaXRpb24gPSBMV1ZQICogc3BvczsKfQoK",Ne.Body_armskin_mesh_vertData2="s2254:I3ZlcnNpb24gMzAwIGVzCgp1bmlmb3JtIHZlYzQgc2tpbkJvbmVzWzEzNF07CnVuaWZvcm0gbWF0NCBXOwp1bmlmb3JtIG1hdDMgTjsKdW5pZm9ybSBtYXQ0IFdWUDsKdW5pZm9ybSBtYXQ0IExXVlA7CgppbiB2ZWMzIHBvczsKb3V0IHZlYzIgdGV4Q29vcmQ7CmluIHZlYzIgdGV4OwppbiB2ZWM0IGJvbmU7CmluIHZlYzQgd2VpZ2h0OwpvdXQgdmVjMyB3cG9zaXRpb247Cm91dCB2ZWMzIHdub3JtYWw7CmluIHZlYzMgbm9yOwpvdXQgdmVjNCBsaWdodFBvc2l0aW9uOwoKdm9pZCBnZXRTa2lubmluZ0R1YWxRdWF0KGl2ZWM0IGJvbmVfMSwgaW5vdXQgdmVjNCB3ZWlnaHRfMSwgaW5vdXQgdmVjNCBBLCBpbm91dCB2ZWM0IEIpCnsKICAgIGl2ZWM0IGJvbmVpID0gYm9uZV8xICogaXZlYzQoMik7CiAgICBtYXQ0IG1hdEEgPSBtYXQ0KHZlYzQoc2tpbkJvbmVzW2JvbmVpLnhdKSwgdmVjNChza2luQm9uZXNbYm9uZWkueV0pLCB2ZWM0KHNraW5Cb25lc1tib25laS56XSksIHZlYzQoc2tpbkJvbmVzW2JvbmVpLnddKSk7CiAgICBtYXQ0IG1hdEIgPSBtYXQ0KHZlYzQoc2tpbkJvbmVzW2JvbmVpLnggKyAxXSksIHZlYzQoc2tpbkJvbmVzW2JvbmVpLnkgKyAxXSksIHZlYzQoc2tpbkJvbmVzW2JvbmVpLnogKyAxXSksIHZlYzQoc2tpbkJvbmVzW2JvbmVpLncgKyAxXSkpOwogICAgdmVjMyBfMTI5ID0gd2VpZ2h0XzEueHl6ICogc2lnbihtYXRBWzNdICogbWF0QSkueHl6OwogICAgd2VpZ2h0XzEgPSB2ZWM0KF8xMjkueCwgXzEyOS55LCBfMTI5LnosIHdlaWdodF8xLncpOwogICAgQSA9IG1hdEEgKiB3ZWlnaHRfMTsKICAgIEIgPSBtYXRCICogd2VpZ2h0XzE7CiAgICBmbG9hdCBpbnZOb3JtQSA9IDEuMCAvIGxlbmd0aChBKTsKICAgIEEgKj0gaW52Tm9ybUE7CiAgICBCICo9IGludk5vcm1BOwp9Cgp2b2lkIG1haW4oKQp7CiAgICB2ZWM0IHNwb3MgPSB2ZWM0KHBvcywgMS4wKTsKICAgIHRleENvb3JkID0gdGV4OwogICAgdmVjNCBwYXJhbSA9IHdlaWdodDsKICAgIHZlYzQgc2tpbkI7CiAgICB2ZWM0IHBhcmFtXzIgPSBza2luQjsKICAgIHZlYzQgcGFyYW1fMTsKICAgIGdldFNraW5uaW5nRHVhbFF1YXQoaXZlYzQoYm9uZSksIHBhcmFtLCBwYXJhbV8xLCBwYXJhbV8yKTsKICAgIHZlYzQgc2tpbkEgPSBwYXJhbV8xOwogICAgc2tpbkIgPSBwYXJhbV8yOwogICAgdmVjMyBfMTk2ID0gc3Bvcy54eXogKyAoY3Jvc3Moc2tpbkEueHl6LCBjcm9zcyhza2luQS54eXosIHNwb3MueHl6KSArIChzcG9zLnh5eiAqIHNraW5BLncpKSAqIDIuMCk7CiAgICBzcG9zID0gdmVjNChfMTk2LngsIF8xOTYueSwgXzE5Ni56LCBzcG9zLncpOwogICAgdmVjMyBfMjE5ID0gc3Bvcy54eXogKyAoKCgoc2tpbkIueHl6ICogc2tpbkEudykgLSAoc2tpbkEueHl6ICogc2tpbkIudykpICsgY3Jvc3Moc2tpbkEueHl6LCBza2luQi54eXopKSAqIDIuMCk7CiAgICBzcG9zID0gdmVjNChfMjE5LngsIF8yMTkueSwgXzIxOS56LCBzcG9zLncpOwogICAgd3Bvc2l0aW9uID0gdmVjNChXICogc3BvcykueHl6OwogICAgd25vcm1hbCA9IG5vcm1hbGl6ZShOICogKG5vciArIChjcm9zcyhza2luQS54eXosIGNyb3NzKHNraW5BLnh5eiwgbm9yKSArIChub3IgKiBza2luQS53KSkgKiAyLjApKSk7CiAgICBnbF9Qb3NpdGlvbiA9IFdWUCAqIHNwb3M7CiAgICBsaWdodFBvc2l0aW9uID0gTFdWUCAqIHNwb3M7Cn0KCg",Ne.Ground_mesh_fragData0="s4766:I3ZlcnNpb24gMTAwCnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OwpwcmVjaXNpb24gaGlnaHAgaW50OwoKdW5pZm9ybSBoaWdocCB2ZWM0IHNoaXJyWzddOwp1bmlmb3JtIGhpZ2hwIHNhbXBsZXIyRCBJbWFnZVRleHR1cmU7CnVuaWZvcm0gaGlnaHAgc2FtcGxlcjJEIEltYWdlVGV4dHVyZV8wMDE7CnVuaWZvcm0gaGlnaHAgdmVjMyBsaWdodERpcjsKdW5pZm9ybSBoaWdocCBzYW1wbGVyMkQgc2hhZG93TWFwOwp1bmlmb3JtIGhpZ2hwIGZsb2F0IHNoYWRvd3NCaWFzOwp1bmlmb3JtIGhpZ2hwIHZlYzMgbGlnaHRDb2xvcjsKdW5pZm9ybSBoaWdocCB2ZWMzIGxpZ2h0UG9zOwp1bmlmb3JtIGhpZ2hwIGZsb2F0IGVudm1hcFN0cmVuZ3RoOwoKdmFyeWluZyBoaWdocCB2ZWMzIHdub3JtYWw7CnZhcnlpbmcgaGlnaHAgdmVjMiB0ZXhDb29yZDsKdmFyeWluZyBoaWdocCB2ZWM0IGxpZ2h0UG9zaXRpb247CnZhcnlpbmcgaGlnaHAgdmVjMyB3cG9zaXRpb247CgpoaWdocCBmbG9hdCBhdHRlbnVhdGUoaGlnaHAgZmxvYXQgZGlzdCkKewogICAgcmV0dXJuIDEuMCAvIChkaXN0ICogZGlzdCk7Cn0KCmhpZ2hwIHZlYzMgc2hJcnJhZGlhbmNlKGhpZ2hwIHZlYzMgbm9yKQp7CiAgICBoaWdocCB2ZWMzIGNsMDAgPSB2ZWMzKHNoaXJyWzBdLngsIHNoaXJyWzBdLnksIHNoaXJyWzBdLnopOwogICAgaGlnaHAgdmVjMyBjbDFtMSA9IHZlYzMoc2hpcnJbMF0udywgc2hpcnJbMV0ueCwgc2hpcnJbMV0ueSk7CiAgICBoaWdocCB2ZWMzIGNsMTAgPSB2ZWMzKHNoaXJyWzFdLnosIHNoaXJyWzFdLncsIHNoaXJyWzJdLngpOwogICAgaGlnaHAgdmVjMyBjbDExID0gdmVjMyhzaGlyclsyXS55LCBzaGlyclsyXS56LCBzaGlyclsyXS53KTsKICAgIGhpZ2hwIHZlYzMgY2wybTIgPSB2ZWMzKHNoaXJyWzNdLngsIHNoaXJyWzNdLnksIHNoaXJyWzNdLnopOwogICAgaGlnaHAgdmVjMyBjbDJtMSA9IHZlYzMoc2hpcnJbM10udywgc2hpcnJbNF0ueCwgc2hpcnJbNF0ueSk7CiAgICBoaWdocCB2ZWMzIGNsMjAgPSB2ZWMzKHNoaXJyWzRdLnosIHNoaXJyWzRdLncsIHNoaXJyWzVdLngpOwogICAgaGlnaHAgdmVjMyBjbDIxID0gdmVjMyhzaGlycls1XS55LCBzaGlycls1XS56LCBzaGlycls1XS53KTsKICAgIGhpZ2hwIHZlYzMgY2wyMiA9IHZlYzMoc2hpcnJbNl0ueCwgc2hpcnJbNl0ueSwgc2hpcnJbNl0ueik7CiAgICByZXR1cm4gKCgoKCgoKCgoKGNsMjIgKiAwLjQyOTA0Mjk5NDk3NjA0MzcwMTE3MTg3NSkgKiAoKG5vci55ICogbm9yLnkpIC0gKCgtbm9yLnopICogKC1ub3IueikpKSkgKyAoKChjbDIwICogMC43NDMxMjUwMjE0NTc2NzIxMTkxNDA2MjUpICogbm9yLngpICogbm9yLngpKSArIChjbDAwICogMC44ODYyMjcwMTE2ODA2MDMwMjczNDM3NSkpIC0gKGNsMjAgKiAwLjI0NzcwNzk5Mjc5MjEyOTUxNjYwMTU2MjUpKSArICgoKGNsMm0yICogMC44NTgwODU5ODk5NTIwODc0MDIzNDM3NSkgKiBub3IueSkgKiAoLW5vci56KSkpICsgKCgoY2wyMSAqIDAuODU4MDg1OTg5OTUyMDg3NDAyMzQzNzUpICogbm9yLnkpICogbm9yLngpKSArICgoKGNsMm0xICogMC44NTgwODU5ODk5NTIwODc0MDIzNDM3NSkgKiAoLW5vci56KSkgKiBub3IueCkpICsgKChjbDExICogMS4wMjMzMjc5NDY2NjI5MDI4MzIwMzEyNSkgKiBub3IueSkpICsgKChjbDFtMSAqIDEuMDIzMzI3OTQ2NjYyOTAyODMyMDMxMjUpICogKC1ub3IueikpKSArICgoY2wxMCAqIDEuMDIzMzI3OTQ2NjYyOTAyODMyMDMxMjUpICogbm9yLngpOwp9Cgp2b2lkIG1haW4oKQp7CiAgICBoaWdocCB2ZWMzIG4gPSBub3JtYWxpemUod25vcm1hbCk7CiAgICBoaWdocCB2ZWM0IEltYWdlVGV4dHVyZV9zdG9yZSA9IHRleHR1cmUyRChJbWFnZVRleHR1cmUsIHRleENvb3JkKTsKICAgIGhpZ2hwIHZlYzMgXzIwNiA9IHBvdyhJbWFnZVRleHR1cmVfc3RvcmUueHl6LCB2ZWMzKDIuMjAwMDAwMDQ3NjgzNzE1ODIwMzEyNSkpOwogICAgSW1hZ2VUZXh0dXJlX3N0b3JlID0gdmVjNChfMjA2LngsIF8yMDYueSwgXzIwNi56LCBJbWFnZVRleHR1cmVfc3RvcmUudyk7CiAgICBoaWdocCB2ZWM0IEltYWdlVGV4dHVyZV8wMDFfc3RvcmUgPSB0ZXh0dXJlMkQoSW1hZ2VUZXh0dXJlXzAwMSwgdGV4Q29vcmQpOwogICAgaGlnaHAgdmVjMyBJbWFnZVRleHR1cmVfQ29sb3JfcmVzID0gSW1hZ2VUZXh0dXJlX3N0b3JlLnh5ejsKICAgIGhpZ2hwIHZlYzMgSW1hZ2VUZXh0dXJlXzAwMV9Db2xvcl9yZXMgPSBJbWFnZVRleHR1cmVfMDAxX3N0b3JlLnh5ejsKICAgIGhpZ2hwIHZlYzMgYmFzZWNvbCA9IEltYWdlVGV4dHVyZV9Db2xvcl9yZXM7CiAgICBoaWdocCBmbG9hdCByb3VnaG5lc3MgPSBJbWFnZVRleHR1cmVfMDAxX0NvbG9yX3Jlcy54OwogICAgaGlnaHAgZmxvYXQgbWV0YWxsaWMgPSAwLjA7CiAgICBoaWdocCBmbG9hdCBvY2NsdXNpb24gPSAxLjA7CiAgICBoaWdocCBmbG9hdCBzcGVjdWxhciA9IDEuMDsKICAgIGhpZ2hwIGZsb2F0IHZpc2liaWxpdHkgPSAxLjA7CiAgICBoaWdocCBmbG9hdCBkb3ROTCA9IG1heChkb3QobiwgbGlnaHREaXIpLCAwLjApOwogICAgaWYgKGxpZ2h0UG9zaXRpb24udyA%IDAuMCkKICAgIHsKICAgICAgICBoaWdocCB2ZWMzIGxQb3MgPSBsaWdodFBvc2l0aW9uLnh5eiAvIHZlYzMobGlnaHRQb3NpdGlvbi53KTsKICAgICAgICB2aXNpYmlsaXR5ID0gMC4wOwogICAgICAgIHZpc2liaWxpdHkgKz0gZmxvYXQoKHRleHR1cmUyRChzaGFkb3dNYXAsIGxQb3MueHkpLnggKyBzaGFkb3dzQmlhcykgPiBsUG9zLnopOwogICAgICAgIHZpc2liaWxpdHkgKz0gKGZsb2F0KCh0ZXh0dXJlMkQoc2hhZG93TWFwLCBsUG9zLnh5ICsgdmVjMigwLjAwMDQ4ODI4MTI1LCAwLjApKS54ICsgc2hhZG93c0JpYXMpID4gbFBvcy56KSAqIDAuNSk7CiAgICAgICAgdmlzaWJpbGl0eSArPSAoZmxvYXQoKHRleHR1cmUyRChzaGFkb3dNYXAsIGxQb3MueHkgKyB2ZWMyKC0wLjAwMDQ4ODI4MTI1LCAwLjApKS54ICsgc2hhZG93c0JpYXMpID4gbFBvcy56KSAqIDAuMjUpOwogICAgICAgIHZpc2liaWxpdHkgKz0gKGZsb2F0KCh0ZXh0dXJlMkQoc2hhZG93TWFwLCBsUG9zLnh5ICsgdmVjMigwLjAsIDAuMDAwNDg4MjgxMjUpKS54ICsgc2hhZG93c0JpYXMpID4gbFBvcy56KSAqIDAuNSk7CiAgICAgICAgdmlzaWJpbGl0eSArPSAoZmxvYXQoKHRleHR1cmUyRChzaGFkb3dNYXAsIGxQb3MueHkgKyB2ZWMyKDAuMCwgLTAuMDAwNDg4MjgxMjUpKS54ICsgc2hhZG93c0JpYXMpID4gbFBvcy56KSAqIDAuMjUpOwogICAgICAgIHZpc2liaWxpdHkgLz0gMi41OwogICAgICAgIHZpc2liaWxpdHkgPSBtYXgodmlzaWJpbGl0eSwgMC4yMDAwMDAwMDI5ODAyMzIyMzg3Njk1MzEyNSk7CiAgICB9CiAgICBoaWdocCB2ZWMzIGRpcmVjdCA9IChiYXNlY29sICogZG90TkwpICogbGlnaHRDb2xvcjsKICAgIGRpcmVjdCAqPSBhdHRlbnVhdGUoZGlzdGFuY2Uod3Bvc2l0aW9uLCBsaWdodFBvcykpOwogICAgZ2xfRnJhZ0RhdGFbMF0gPSB2ZWM0KChkaXJlY3QgKiB2aXNpYmlsaXR5KSArICgoYmFzZWNvbCAqIHNoSXJyYWRpYW5jZShuKSkgKiBlbnZtYXBTdHJlbmd0aCksIDEuMCk7Cn0KCg",Ne.Ground_mesh_fragData1="s4472:I3ZlcnNpb24gMTAwCnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OwpwcmVjaXNpb24gbWVkaXVtcCBpbnQ7Cgp1bmlmb3JtIHZlYzQgc2hpcnJbN107CnVuaWZvcm0gbWVkaXVtcCBzYW1wbGVyMkQgSW1hZ2VUZXh0dXJlOwp1bmlmb3JtIG1lZGl1bXAgc2FtcGxlcjJEIEltYWdlVGV4dHVyZV8wMDE7CnVuaWZvcm0gdmVjMyBsaWdodERpcjsKdW5pZm9ybSBtZWRpdW1wIHNhbXBsZXIyRCBzaGFkb3dNYXA7CnVuaWZvcm0gZmxvYXQgc2hhZG93c0JpYXM7CnVuaWZvcm0gdmVjMyBsaWdodENvbG9yOwp1bmlmb3JtIHZlYzMgbGlnaHRQb3M7CnVuaWZvcm0gZmxvYXQgZW52bWFwU3RyZW5ndGg7Cgp2YXJ5aW5nIHZlYzMgd25vcm1hbDsKdmFyeWluZyB2ZWMyIHRleENvb3JkOwp2YXJ5aW5nIHZlYzQgbGlnaHRQb3NpdGlvbjsKdmFyeWluZyB2ZWMzIHdwb3NpdGlvbjsKCmZsb2F0IGF0dGVudWF0ZShmbG9hdCBkaXN0KQp7CiAgICByZXR1cm4gMS4wIC8gKGRpc3QgKiBkaXN0KTsKfQoKdmVjMyBzaElycmFkaWFuY2UodmVjMyBub3IpCnsKICAgIHZlYzMgY2wwMCA9IHZlYzMoc2hpcnJbMF0ueCwgc2hpcnJbMF0ueSwgc2hpcnJbMF0ueik7CiAgICB2ZWMzIGNsMW0xID0gdmVjMyhzaGlyclswXS53LCBzaGlyclsxXS54LCBzaGlyclsxXS55KTsKICAgIHZlYzMgY2wxMCA9IHZlYzMoc2hpcnJbMV0ueiwgc2hpcnJbMV0udywgc2hpcnJbMl0ueCk7CiAgICB2ZWMzIGNsMTEgPSB2ZWMzKHNoaXJyWzJdLnksIHNoaXJyWzJdLnosIHNoaXJyWzJdLncpOwogICAgdmVjMyBjbDJtMiA9IHZlYzMoc2hpcnJbM10ueCwgc2hpcnJbM10ueSwgc2hpcnJbM10ueik7CiAgICB2ZWMzIGNsMm0xID0gdmVjMyhzaGlyclszXS53LCBzaGlycls0XS54LCBzaGlycls0XS55KTsKICAgIHZlYzMgY2wyMCA9IHZlYzMoc2hpcnJbNF0ueiwgc2hpcnJbNF0udywgc2hpcnJbNV0ueCk7CiAgICB2ZWMzIGNsMjEgPSB2ZWMzKHNoaXJyWzVdLnksIHNoaXJyWzVdLnosIHNoaXJyWzVdLncpOwogICAgdmVjMyBjbDIyID0gdmVjMyhzaGlycls2XS54LCBzaGlycls2XS55LCBzaGlycls2XS56KTsKICAgIHJldHVybiAoKCgoKCgoKCgoY2wyMiAqIDAuNDI5MDQyOTk0OTc2MDQzNzAxMTcxODc1KSAqICgobm9yLnkgKiBub3IueSkgLSAoKC1ub3IueikgKiAoLW5vci56KSkpKSArICgoKGNsMjAgKiAwLjc0MzEyNTAyMTQ1NzY3MjExOTE0MDYyNSkgKiBub3IueCkgKiBub3IueCkpICsgKGNsMDAgKiAwLjg4NjIyNzAxMTY4MDYwMzAyNzM0Mzc1KSkgLSAoY2wyMCAqIDAuMjQ3NzA3OTkyNzkyMTI5NTE2NjAxNTYyNSkpICsgKCgoY2wybTIgKiAwLjg1ODA4NTk4OTk1MjA4NzQwMjM0Mzc1KSAqIG5vci55KSAqICgtbm9yLnopKSkgKyAoKChjbDIxICogMC44NTgwODU5ODk5NTIwODc0MDIzNDM3NSkgKiBub3IueSkgKiBub3IueCkpICsgKCgoY2wybTEgKiAwLjg1ODA4NTk4OTk1MjA4NzQwMjM0Mzc1KSAqICgtbm9yLnopKSAqIG5vci54KSkgKyAoKGNsMTEgKiAxLjAyMzMyNzk0NjY2MjkwMjgzMjAzMTI1KSAqIG5vci55KSkgKyAoKGNsMW0xICogMS4wMjMzMjc5NDY2NjI5MDI4MzIwMzEyNSkgKiAoLW5vci56KSkpICsgKChjbDEwICogMS4wMjMzMjc5NDY2NjI5MDI4MzIwMzEyNSkgKiBub3IueCk7Cn0KCnZvaWQgbWFpbigpCnsKICAgIHZlYzMgbiA9IG5vcm1hbGl6ZSh3bm9ybWFsKTsKICAgIHZlYzQgSW1hZ2VUZXh0dXJlX3N0b3JlID0gdGV4dHVyZTJEKEltYWdlVGV4dHVyZSwgdGV4Q29vcmQpOwogICAgdmVjMyBfMjA2ID0gcG93KEltYWdlVGV4dHVyZV9zdG9yZS54eXosIHZlYzMoMi4yMDAwMDAwNDc2ODM3MTU4MjAzMTI1KSk7CiAgICBJbWFnZVRleHR1cmVfc3RvcmUgPSB2ZWM0KF8yMDYueCwgXzIwNi55LCBfMjA2LnosIEltYWdlVGV4dHVyZV9zdG9yZS53KTsKICAgIHZlYzQgSW1hZ2VUZXh0dXJlXzAwMV9zdG9yZSA9IHRleHR1cmUyRChJbWFnZVRleHR1cmVfMDAxLCB0ZXhDb29yZCk7CiAgICB2ZWMzIEltYWdlVGV4dHVyZV9Db2xvcl9yZXMgPSBJbWFnZVRleHR1cmVfc3RvcmUueHl6OwogICAgdmVjMyBJbWFnZVRleHR1cmVfMDAxX0NvbG9yX3JlcyA9IEltYWdlVGV4dHVyZV8wMDFfc3RvcmUueHl6OwogICAgdmVjMyBiYXNlY29sID0gSW1hZ2VUZXh0dXJlX0NvbG9yX3JlczsKICAgIGZsb2F0IHJvdWdobmVzcyA9IEltYWdlVGV4dHVyZV8wMDFfQ29sb3JfcmVzLng7CiAgICBmbG9hdCBtZXRhbGxpYyA9IDAuMDsKICAgIGZsb2F0IG9jY2x1c2lvbiA9IDEuMDsKICAgIGZsb2F0IHNwZWN1bGFyID0gMS4wOwogICAgZmxvYXQgdmlzaWJpbGl0eSA9IDEuMDsKICAgIGZsb2F0IGRvdE5MID0gbWF4KGRvdChuLCBsaWdodERpciksIDAuMCk7CiAgICBpZiAobGlnaHRQb3NpdGlvbi53ID4gMC4wKQogICAgewogICAgICAgIHZlYzMgbFBvcyA9IGxpZ2h0UG9zaXRpb24ueHl6IC8gdmVjMyhsaWdodFBvc2l0aW9uLncpOwogICAgICAgIHZpc2liaWxpdHkgPSAwLjA7CiAgICAgICAgdmlzaWJpbGl0eSArPSBmbG9hdCgodGV4dHVyZTJEKHNoYWRvd01hcCwgbFBvcy54eSkueCArIHNoYWRvd3NCaWFzKSA%IGxQb3Mueik7CiAgICAgICAgdmlzaWJpbGl0eSArPSAoZmxvYXQoKHRleHR1cmUyRChzaGFkb3dNYXAsIGxQb3MueHkgKyB2ZWMyKDAuMDAwNDg4MjgxMjUsIDAuMCkpLnggKyBzaGFkb3dzQmlhcykgPiBsUG9zLnopICogMC41KTsKICAgICAgICB2aXNpYmlsaXR5ICs9IChmbG9hdCgodGV4dHVyZTJEKHNoYWRvd01hcCwgbFBvcy54eSArIHZlYzIoLTAuMDAwNDg4MjgxMjUsIDAuMCkpLnggKyBzaGFkb3dzQmlhcykgPiBsUG9zLnopICogMC4yNSk7CiAgICAgICAgdmlzaWJpbGl0eSArPSAoZmxvYXQoKHRleHR1cmUyRChzaGFkb3dNYXAsIGxQb3MueHkgKyB2ZWMyKDAuMCwgMC4wMDA0ODgyODEyNSkpLnggKyBzaGFkb3dzQmlhcykgPiBsUG9zLnopICogMC41KTsKICAgICAgICB2aXNpYmlsaXR5ICs9IChmbG9hdCgodGV4dHVyZTJEKHNoYWRvd01hcCwgbFBvcy54eSArIHZlYzIoMC4wLCAtMC4wMDA0ODgyODEyNSkpLnggKyBzaGFkb3dzQmlhcykgPiBsUG9zLnopICogMC4yNSk7CiAgICAgICAgdmlzaWJpbGl0eSAvPSAyLjU7CiAgICAgICAgdmlzaWJpbGl0eSA9IG1heCh2aXNpYmlsaXR5LCAwLjIwMDAwMDAwMjk4MDIzMjIzODc2OTUzMTI1KTsKICAgIH0KICAgIHZlYzMgZGlyZWN0ID0gKGJhc2Vjb2wgKiBkb3ROTCkgKiBsaWdodENvbG9yOwogICAgZGlyZWN0ICo9IGF0dGVudWF0ZShkaXN0YW5jZSh3cG9zaXRpb24sIGxpZ2h0UG9zKSk7CiAgICBnbF9GcmFnRGF0YVswXSA9IHZlYzQoKGRpcmVjdCAqIHZpc2liaWxpdHkpICsgKChiYXNlY29sICogc2hJcnJhZGlhbmNlKG4pKSAqIGVudm1hcFN0cmVuZ3RoKSwgMS4wKTsKfQoK",Ne.Ground_mesh_fragData2="s4752:I3ZlcnNpb24gMzAwIGVzCnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OwpwcmVjaXNpb24gaGlnaHAgaW50OwoKdW5pZm9ybSBoaWdocCB2ZWM0IHNoaXJyWzddOwp1bmlmb3JtIGhpZ2hwIHNhbXBsZXIyRCBJbWFnZVRleHR1cmU7CnVuaWZvcm0gaGlnaHAgc2FtcGxlcjJEIEltYWdlVGV4dHVyZV8wMDE7CnVuaWZvcm0gaGlnaHAgdmVjMyBsaWdodERpcjsKdW5pZm9ybSBoaWdocCBzYW1wbGVyMkQgc2hhZG93TWFwOwp1bmlmb3JtIGhpZ2hwIGZsb2F0IHNoYWRvd3NCaWFzOwp1bmlmb3JtIGhpZ2hwIHZlYzMgbGlnaHRDb2xvcjsKdW5pZm9ybSBoaWdocCB2ZWMzIGxpZ2h0UG9zOwp1bmlmb3JtIGhpZ2hwIGZsb2F0IGVudm1hcFN0cmVuZ3RoOwoKaW4gaGlnaHAgdmVjMyB3bm9ybWFsOwppbiBoaWdocCB2ZWMyIHRleENvb3JkOwppbiBoaWdocCB2ZWM0IGxpZ2h0UG9zaXRpb247CmluIGhpZ2hwIHZlYzMgd3Bvc2l0aW9uOwpvdXQgaGlnaHAgdmVjNCBmcmFnQ29sb3I7CgpoaWdocCBmbG9hdCBhdHRlbnVhdGUoaGlnaHAgZmxvYXQgZGlzdCkKewogICAgcmV0dXJuIDEuMCAvIChkaXN0ICogZGlzdCk7Cn0KCmhpZ2hwIHZlYzMgc2hJcnJhZGlhbmNlKGhpZ2hwIHZlYzMgbm9yKQp7CiAgICBoaWdocCB2ZWMzIGNsMDAgPSB2ZWMzKHNoaXJyWzBdLngsIHNoaXJyWzBdLnksIHNoaXJyWzBdLnopOwogICAgaGlnaHAgdmVjMyBjbDFtMSA9IHZlYzMoc2hpcnJbMF0udywgc2hpcnJbMV0ueCwgc2hpcnJbMV0ueSk7CiAgICBoaWdocCB2ZWMzIGNsMTAgPSB2ZWMzKHNoaXJyWzFdLnosIHNoaXJyWzFdLncsIHNoaXJyWzJdLngpOwogICAgaGlnaHAgdmVjMyBjbDExID0gdmVjMyhzaGlyclsyXS55LCBzaGlyclsyXS56LCBzaGlyclsyXS53KTsKICAgIGhpZ2hwIHZlYzMgY2wybTIgPSB2ZWMzKHNoaXJyWzNdLngsIHNoaXJyWzNdLnksIHNoaXJyWzNdLnopOwogICAgaGlnaHAgdmVjMyBjbDJtMSA9IHZlYzMoc2hpcnJbM10udywgc2hpcnJbNF0ueCwgc2hpcnJbNF0ueSk7CiAgICBoaWdocCB2ZWMzIGNsMjAgPSB2ZWMzKHNoaXJyWzRdLnosIHNoaXJyWzRdLncsIHNoaXJyWzVdLngpOwogICAgaGlnaHAgdmVjMyBjbDIxID0gdmVjMyhzaGlycls1XS55LCBzaGlycls1XS56LCBzaGlycls1XS53KTsKICAgIGhpZ2hwIHZlYzMgY2wyMiA9IHZlYzMoc2hpcnJbNl0ueCwgc2hpcnJbNl0ueSwgc2hpcnJbNl0ueik7CiAgICByZXR1cm4gKCgoKCgoKCgoKGNsMjIgKiAwLjQyOTA0Mjk5NDk3NjA0MzcwMTE3MTg3NSkgKiAoKG5vci55ICogbm9yLnkpIC0gKCgtbm9yLnopICogKC1ub3IueikpKSkgKyAoKChjbDIwICogMC43NDMxMjUwMjE0NTc2NzIxMTkxNDA2MjUpICogbm9yLngpICogbm9yLngpKSArIChjbDAwICogMC44ODYyMjcwMTE2ODA2MDMwMjczNDM3NSkpIC0gKGNsMjAgKiAwLjI0NzcwNzk5Mjc5MjEyOTUxNjYwMTU2MjUpKSArICgoKGNsMm0yICogMC44NTgwODU5ODk5NTIwODc0MDIzNDM3NSkgKiBub3IueSkgKiAoLW5vci56KSkpICsgKCgoY2wyMSAqIDAuODU4MDg1OTg5OTUyMDg3NDAyMzQzNzUpICogbm9yLnkpICogbm9yLngpKSArICgoKGNsMm0xICogMC44NTgwODU5ODk5NTIwODc0MDIzNDM3NSkgKiAoLW5vci56KSkgKiBub3IueCkpICsgKChjbDExICogMS4wMjMzMjc5NDY2NjI5MDI4MzIwMzEyNSkgKiBub3IueSkpICsgKChjbDFtMSAqIDEuMDIzMzI3OTQ2NjYyOTAyODMyMDMxMjUpICogKC1ub3IueikpKSArICgoY2wxMCAqIDEuMDIzMzI3OTQ2NjYyOTAyODMyMDMxMjUpICogbm9yLngpOwp9Cgp2b2lkIG1haW4oKQp7CiAgICBoaWdocCB2ZWMzIG4gPSBub3JtYWxpemUod25vcm1hbCk7CiAgICBoaWdocCB2ZWM0IEltYWdlVGV4dHVyZV9zdG9yZSA9IHRleHR1cmUoSW1hZ2VUZXh0dXJlLCB0ZXhDb29yZCk7CiAgICBoaWdocCB2ZWMzIF8yMDYgPSBwb3coSW1hZ2VUZXh0dXJlX3N0b3JlLnh5eiwgdmVjMygyLjIwMDAwMDA0NzY4MzcxNTgyMDMxMjUpKTsKICAgIEltYWdlVGV4dHVyZV9zdG9yZSA9IHZlYzQoXzIwNi54LCBfMjA2LnksIF8yMDYueiwgSW1hZ2VUZXh0dXJlX3N0b3JlLncpOwogICAgaGlnaHAgdmVjNCBJbWFnZVRleHR1cmVfMDAxX3N0b3JlID0gdGV4dHVyZShJbWFnZVRleHR1cmVfMDAxLCB0ZXhDb29yZCk7CiAgICBoaWdocCB2ZWMzIEltYWdlVGV4dHVyZV9Db2xvcl9yZXMgPSBJbWFnZVRleHR1cmVfc3RvcmUueHl6OwogICAgaGlnaHAgdmVjMyBJbWFnZVRleHR1cmVfMDAxX0NvbG9yX3JlcyA9IEltYWdlVGV4dHVyZV8wMDFfc3RvcmUueHl6OwogICAgaGlnaHAgdmVjMyBiYXNlY29sID0gSW1hZ2VUZXh0dXJlX0NvbG9yX3JlczsKICAgIGhpZ2hwIGZsb2F0IHJvdWdobmVzcyA9IEltYWdlVGV4dHVyZV8wMDFfQ29sb3JfcmVzLng7CiAgICBoaWdocCBmbG9hdCBtZXRhbGxpYyA9IDAuMDsKICAgIGhpZ2hwIGZsb2F0IG9jY2x1c2lvbiA9IDEuMDsKICAgIGhpZ2hwIGZsb2F0IHNwZWN1bGFyID0gMS4wOwogICAgaGlnaHAgZmxvYXQgdmlzaWJpbGl0eSA9IDEuMDsKICAgIGhpZ2hwIGZsb2F0IGRvdE5MID0gbWF4KGRvdChuLCBsaWdodERpciksIDAuMCk7CiAgICBpZiAobGlnaHRQb3NpdGlvbi53ID4gMC4wKQogICAgewogICAgICAgIGhpZ2hwIHZlYzMgbFBvcyA9IGxpZ2h0UG9zaXRpb24ueHl6IC8gdmVjMyhsaWdodFBvc2l0aW9uLncpOwogICAgICAgIHZpc2liaWxpdHkgPSAwLjA7CiAgICAgICAgdmlzaWJpbGl0eSArPSBmbG9hdCgodGV4dHVyZShzaGFkb3dNYXAsIGxQb3MueHkpLnggKyBzaGFkb3dzQmlhcykgPiBsUG9zLnopOwogICAgICAgIHZpc2liaWxpdHkgKz0gKGZsb2F0KCh0ZXh0dXJlKHNoYWRvd01hcCwgbFBvcy54eSArIHZlYzIoMC4wMDA0ODgyODEyNSwgMC4wKSkueCArIHNoYWRvd3NCaWFzKSA%IGxQb3MueikgKiAwLjUpOwogICAgICAgIHZpc2liaWxpdHkgKz0gKGZsb2F0KCh0ZXh0dXJlKHNoYWRvd01hcCwgbFBvcy54eSArIHZlYzIoLTAuMDAwNDg4MjgxMjUsIDAuMCkpLnggKyBzaGFkb3dzQmlhcykgPiBsUG9zLnopICogMC4yNSk7CiAgICAgICAgdmlzaWJpbGl0eSArPSAoZmxvYXQoKHRleHR1cmUoc2hhZG93TWFwLCBsUG9zLnh5ICsgdmVjMigwLjAsIDAuMDAwNDg4MjgxMjUpKS54ICsgc2hhZG93c0JpYXMpID4gbFBvcy56KSAqIDAuNSk7CiAgICAgICAgdmlzaWJpbGl0eSArPSAoZmxvYXQoKHRleHR1cmUoc2hhZG93TWFwLCBsUG9zLnh5ICsgdmVjMigwLjAsIC0wLjAwMDQ4ODI4MTI1KSkueCArIHNoYWRvd3NCaWFzKSA%IGxQb3MueikgKiAwLjI1KTsKICAgICAgICB2aXNpYmlsaXR5IC89IDIuNTsKICAgICAgICB2aXNpYmlsaXR5ID0gbWF4KHZpc2liaWxpdHksIDAuMjAwMDAwMDAyOTgwMjMyMjM4NzY5NTMxMjUpOwogICAgfQogICAgaGlnaHAgdmVjMyBkaXJlY3QgPSAoYmFzZWNvbCAqIGRvdE5MKSAqIGxpZ2h0Q29sb3I7CiAgICBkaXJlY3QgKj0gYXR0ZW51YXRlKGRpc3RhbmNlKHdwb3NpdGlvbiwgbGlnaHRQb3MpKTsKICAgIGZyYWdDb2xvciA9IHZlYzQoKGRpcmVjdCAqIHZpc2liaWxpdHkpICsgKChiYXNlY29sICogc2hJcnJhZGlhbmNlKG4pKSAqIGVudm1hcFN0cmVuZ3RoKSwgMS4wKTsKfQoK",Ne.Gun_mesh_fragData0="s4382:I3ZlcnNpb24gMTAwCnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OwpwcmVjaXNpb24gaGlnaHAgaW50OwoKdW5pZm9ybSBoaWdocCB2ZWM0IHNoaXJyWzddOwp1bmlmb3JtIGhpZ2hwIHNhbXBsZXIyRCBJbWFnZVRleHR1cmU7CnVuaWZvcm0gaGlnaHAgdmVjMyBsaWdodERpcjsKdW5pZm9ybSBoaWdocCBzYW1wbGVyMkQgc2hhZG93TWFwOwp1bmlmb3JtIGhpZ2hwIGZsb2F0IHNoYWRvd3NCaWFzOwp1bmlmb3JtIGhpZ2hwIHZlYzMgbGlnaHRDb2xvcjsKdW5pZm9ybSBoaWdocCB2ZWMzIGxpZ2h0UG9zOwp1bmlmb3JtIGhpZ2hwIGZsb2F0IGVudm1hcFN0cmVuZ3RoOwoKdmFyeWluZyBoaWdocCB2ZWMzIHdub3JtYWw7CnZhcnlpbmcgaGlnaHAgdmVjMiB0ZXhDb29yZDsKdmFyeWluZyBoaWdocCB2ZWM0IGxpZ2h0UG9zaXRpb247CnZhcnlpbmcgaGlnaHAgdmVjMyB3cG9zaXRpb247CgpoaWdocCBmbG9hdCBhdHRlbnVhdGUoaGlnaHAgZmxvYXQgZGlzdCkKewogICAgcmV0dXJuIDEuMCAvIChkaXN0ICogZGlzdCk7Cn0KCmhpZ2hwIHZlYzMgc2hJcnJhZGlhbmNlKGhpZ2hwIHZlYzMgbm9yKQp7CiAgICBoaWdocCB2ZWMzIGNsMDAgPSB2ZWMzKHNoaXJyWzBdLngsIHNoaXJyWzBdLnksIHNoaXJyWzBdLnopOwogICAgaGlnaHAgdmVjMyBjbDFtMSA9IHZlYzMoc2hpcnJbMF0udywgc2hpcnJbMV0ueCwgc2hpcnJbMV0ueSk7CiAgICBoaWdocCB2ZWMzIGNsMTAgPSB2ZWMzKHNoaXJyWzFdLnosIHNoaXJyWzFdLncsIHNoaXJyWzJdLngpOwogICAgaGlnaHAgdmVjMyBjbDExID0gdmVjMyhzaGlyclsyXS55LCBzaGlyclsyXS56LCBzaGlyclsyXS53KTsKICAgIGhpZ2hwIHZlYzMgY2wybTIgPSB2ZWMzKHNoaXJyWzNdLngsIHNoaXJyWzNdLnksIHNoaXJyWzNdLnopOwogICAgaGlnaHAgdmVjMyBjbDJtMSA9IHZlYzMoc2hpcnJbM10udywgc2hpcnJbNF0ueCwgc2hpcnJbNF0ueSk7CiAgICBoaWdocCB2ZWMzIGNsMjAgPSB2ZWMzKHNoaXJyWzRdLnosIHNoaXJyWzRdLncsIHNoaXJyWzVdLngpOwogICAgaGlnaHAgdmVjMyBjbDIxID0gdmVjMyhzaGlycls1XS55LCBzaGlycls1XS56LCBzaGlycls1XS53KTsKICAgIGhpZ2hwIHZlYzMgY2wyMiA9IHZlYzMoc2hpcnJbNl0ueCwgc2hpcnJbNl0ueSwgc2hpcnJbNl0ueik7CiAgICByZXR1cm4gKCgoKCgoKCgoKGNsMjIgKiAwLjQyOTA0Mjk5NDk3NjA0MzcwMTE3MTg3NSkgKiAoKG5vci55ICogbm9yLnkpIC0gKCgtbm9yLnopICogKC1ub3IueikpKSkgKyAoKChjbDIwICogMC43NDMxMjUwMjE0NTc2NzIxMTkxNDA2MjUpICogbm9yLngpICogbm9yLngpKSArIChjbDAwICogMC44ODYyMjcwMTE2ODA2MDMwMjczNDM3NSkpIC0gKGNsMjAgKiAwLjI0NzcwNzk5Mjc5MjEyOTUxNjYwMTU2MjUpKSArICgoKGNsMm0yICogMC44NTgwODU5ODk5NTIwODc0MDIzNDM3NSkgKiBub3IueSkgKiAoLW5vci56KSkpICsgKCgoY2wyMSAqIDAuODU4MDg1OTg5OTUyMDg3NDAyMzQzNzUpICogbm9yLnkpICogbm9yLngpKSArICgoKGNsMm0xICogMC44NTgwODU5ODk5NTIwODc0MDIzNDM3NSkgKiAoLW5vci56KSkgKiBub3IueCkpICsgKChjbDExICogMS4wMjMzMjc5NDY2NjI5MDI4MzIwMzEyNSkgKiBub3IueSkpICsgKChjbDFtMSAqIDEuMDIzMzI3OTQ2NjYyOTAyODMyMDMxMjUpICogKC1ub3IueikpKSArICgoY2wxMCAqIDEuMDIzMzI3OTQ2NjYyOTAyODMyMDMxMjUpICogbm9yLngpOwp9Cgp2b2lkIG1haW4oKQp7CiAgICBoaWdocCB2ZWMzIG4gPSBub3JtYWxpemUod25vcm1hbCk7CiAgICBoaWdocCB2ZWM0IEltYWdlVGV4dHVyZV9zdG9yZSA9IHRleHR1cmUyRChJbWFnZVRleHR1cmUsIHRleENvb3JkKTsKICAgIGhpZ2hwIHZlYzMgSW1hZ2VUZXh0dXJlX0NvbG9yX3JlcyA9IEltYWdlVGV4dHVyZV9zdG9yZS54eXo7CiAgICBoaWdocCB2ZWMzIGJhc2Vjb2wgPSB2ZWMzKDAuMTk5NDQ5OTQxNTE1OTIyNTQ2Mzg2NzE4NzUsIDAuMTc5MTM5NTI0Njk4MjU3NDQ2Mjg5MDYyNSwgMC45MzAxMTExMTAyMTA0MTg3MDExNzE4NzUpOwogICAgaGlnaHAgZmxvYXQgcm91Z2huZXNzID0gSW1hZ2VUZXh0dXJlX0NvbG9yX3Jlcy54OwogICAgaGlnaHAgZmxvYXQgbWV0YWxsaWMgPSAwLjA7CiAgICBoaWdocCBmbG9hdCBvY2NsdXNpb24gPSAxLjA7CiAgICBoaWdocCBmbG9hdCBzcGVjdWxhciA9IDEuMDsKICAgIGhpZ2hwIGZsb2F0IHZpc2liaWxpdHkgPSAxLjA7CiAgICBoaWdocCBmbG9hdCBkb3ROTCA9IG1heChkb3QobiwgbGlnaHREaXIpLCAwLjApOwogICAgaWYgKGxpZ2h0UG9zaXRpb24udyA%IDAuMCkKICAgIHsKICAgICAgICBoaWdocCB2ZWMzIGxQb3MgPSBsaWdodFBvc2l0aW9uLnh5eiAvIHZlYzMobGlnaHRQb3NpdGlvbi53KTsKICAgICAgICB2aXNpYmlsaXR5ID0gMC4wOwogICAgICAgIHZpc2liaWxpdHkgKz0gZmxvYXQoKHRleHR1cmUyRChzaGFkb3dNYXAsIGxQb3MueHkpLnggKyBzaGFkb3dzQmlhcykgPiBsUG9zLnopOwogICAgICAgIHZpc2liaWxpdHkgKz0gKGZsb2F0KCh0ZXh0dXJlMkQoc2hhZG93TWFwLCBsUG9zLnh5ICsgdmVjMigwLjAwMDQ4ODI4MTI1LCAwLjApKS54ICsgc2hhZG93c0JpYXMpID4gbFBvcy56KSAqIDAuNSk7CiAgICAgICAgdmlzaWJpbGl0eSArPSAoZmxvYXQoKHRleHR1cmUyRChzaGFkb3dNYXAsIGxQb3MueHkgKyB2ZWMyKC0wLjAwMDQ4ODI4MTI1LCAwLjApKS54ICsgc2hhZG93c0JpYXMpID4gbFBvcy56KSAqIDAuMjUpOwogICAgICAgIHZpc2liaWxpdHkgKz0gKGZsb2F0KCh0ZXh0dXJlMkQoc2hhZG93TWFwLCBsUG9zLnh5ICsgdmVjMigwLjAsIDAuMDAwNDg4MjgxMjUpKS54ICsgc2hhZG93c0JpYXMpID4gbFBvcy56KSAqIDAuNSk7CiAgICAgICAgdmlzaWJpbGl0eSArPSAoZmxvYXQoKHRleHR1cmUyRChzaGFkb3dNYXAsIGxQb3MueHkgKyB2ZWMyKDAuMCwgLTAuMDAwNDg4MjgxMjUpKS54ICsgc2hhZG93c0JpYXMpID4gbFBvcy56KSAqIDAuMjUpOwogICAgICAgIHZpc2liaWxpdHkgLz0gMi41OwogICAgICAgIHZpc2liaWxpdHkgPSBtYXgodmlzaWJpbGl0eSwgMC4yMDAwMDAwMDI5ODAyMzIyMzg3Njk1MzEyNSk7CiAgICB9CiAgICBoaWdocCB2ZWMzIGRpcmVjdCA9IChiYXNlY29sICogZG90TkwpICogbGlnaHRDb2xvcjsKICAgIGRpcmVjdCAqPSBhdHRlbnVhdGUoZGlzdGFuY2Uod3Bvc2l0aW9uLCBsaWdodFBvcykpOwogICAgZ2xfRnJhZ0RhdGFbMF0gPSB2ZWM0KChkaXJlY3QgKiB2aXNpYmlsaXR5KSArICgoYmFzZWNvbCAqIHNoSXJyYWRpYW5jZShuKSkgKiBlbnZtYXBTdHJlbmd0aCksIDEuMCk7Cn0KCg",Ne.Gun_mesh_fragData1="s4110:I3ZlcnNpb24gMTAwCnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OwpwcmVjaXNpb24gbWVkaXVtcCBpbnQ7Cgp1bmlmb3JtIHZlYzQgc2hpcnJbN107CnVuaWZvcm0gbWVkaXVtcCBzYW1wbGVyMkQgSW1hZ2VUZXh0dXJlOwp1bmlmb3JtIHZlYzMgbGlnaHREaXI7CnVuaWZvcm0gbWVkaXVtcCBzYW1wbGVyMkQgc2hhZG93TWFwOwp1bmlmb3JtIGZsb2F0IHNoYWRvd3NCaWFzOwp1bmlmb3JtIHZlYzMgbGlnaHRDb2xvcjsKdW5pZm9ybSB2ZWMzIGxpZ2h0UG9zOwp1bmlmb3JtIGZsb2F0IGVudm1hcFN0cmVuZ3RoOwoKdmFyeWluZyB2ZWMzIHdub3JtYWw7CnZhcnlpbmcgdmVjMiB0ZXhDb29yZDsKdmFyeWluZyB2ZWM0IGxpZ2h0UG9zaXRpb247CnZhcnlpbmcgdmVjMyB3cG9zaXRpb247CgpmbG9hdCBhdHRlbnVhdGUoZmxvYXQgZGlzdCkKewogICAgcmV0dXJuIDEuMCAvIChkaXN0ICogZGlzdCk7Cn0KCnZlYzMgc2hJcnJhZGlhbmNlKHZlYzMgbm9yKQp7CiAgICB2ZWMzIGNsMDAgPSB2ZWMzKHNoaXJyWzBdLngsIHNoaXJyWzBdLnksIHNoaXJyWzBdLnopOwogICAgdmVjMyBjbDFtMSA9IHZlYzMoc2hpcnJbMF0udywgc2hpcnJbMV0ueCwgc2hpcnJbMV0ueSk7CiAgICB2ZWMzIGNsMTAgPSB2ZWMzKHNoaXJyWzFdLnosIHNoaXJyWzFdLncsIHNoaXJyWzJdLngpOwogICAgdmVjMyBjbDExID0gdmVjMyhzaGlyclsyXS55LCBzaGlyclsyXS56LCBzaGlyclsyXS53KTsKICAgIHZlYzMgY2wybTIgPSB2ZWMzKHNoaXJyWzNdLngsIHNoaXJyWzNdLnksIHNoaXJyWzNdLnopOwogICAgdmVjMyBjbDJtMSA9IHZlYzMoc2hpcnJbM10udywgc2hpcnJbNF0ueCwgc2hpcnJbNF0ueSk7CiAgICB2ZWMzIGNsMjAgPSB2ZWMzKHNoaXJyWzRdLnosIHNoaXJyWzRdLncsIHNoaXJyWzVdLngpOwogICAgdmVjMyBjbDIxID0gdmVjMyhzaGlycls1XS55LCBzaGlycls1XS56LCBzaGlycls1XS53KTsKICAgIHZlYzMgY2wyMiA9IHZlYzMoc2hpcnJbNl0ueCwgc2hpcnJbNl0ueSwgc2hpcnJbNl0ueik7CiAgICByZXR1cm4gKCgoKCgoKCgoKGNsMjIgKiAwLjQyOTA0Mjk5NDk3NjA0MzcwMTE3MTg3NSkgKiAoKG5vci55ICogbm9yLnkpIC0gKCgtbm9yLnopICogKC1ub3IueikpKSkgKyAoKChjbDIwICogMC43NDMxMjUwMjE0NTc2NzIxMTkxNDA2MjUpICogbm9yLngpICogbm9yLngpKSArIChjbDAwICogMC44ODYyMjcwMTE2ODA2MDMwMjczNDM3NSkpIC0gKGNsMjAgKiAwLjI0NzcwNzk5Mjc5MjEyOTUxNjYwMTU2MjUpKSArICgoKGNsMm0yICogMC44NTgwODU5ODk5NTIwODc0MDIzNDM3NSkgKiBub3IueSkgKiAoLW5vci56KSkpICsgKCgoY2wyMSAqIDAuODU4MDg1OTg5OTUyMDg3NDAyMzQzNzUpICogbm9yLnkpICogbm9yLngpKSArICgoKGNsMm0xICogMC44NTgwODU5ODk5NTIwODc0MDIzNDM3NSkgKiAoLW5vci56KSkgKiBub3IueCkpICsgKChjbDExICogMS4wMjMzMjc5NDY2NjI5MDI4MzIwMzEyNSkgKiBub3IueSkpICsgKChjbDFtMSAqIDEuMDIzMzI3OTQ2NjYyOTAyODMyMDMxMjUpICogKC1ub3IueikpKSArICgoY2wxMCAqIDEuMDIzMzI3OTQ2NjYyOTAyODMyMDMxMjUpICogbm9yLngpOwp9Cgp2b2lkIG1haW4oKQp7CiAgICB2ZWMzIG4gPSBub3JtYWxpemUod25vcm1hbCk7CiAgICB2ZWM0IEltYWdlVGV4dHVyZV9zdG9yZSA9IHRleHR1cmUyRChJbWFnZVRleHR1cmUsIHRleENvb3JkKTsKICAgIHZlYzMgSW1hZ2VUZXh0dXJlX0NvbG9yX3JlcyA9IEltYWdlVGV4dHVyZV9zdG9yZS54eXo7CiAgICB2ZWMzIGJhc2Vjb2wgPSB2ZWMzKDAuMTk5NDQ5OTQxNTE1OTIyNTQ2Mzg2NzE4NzUsIDAuMTc5MTM5NTI0Njk4MjU3NDQ2Mjg5MDYyNSwgMC45MzAxMTExMTAyMTA0MTg3MDExNzE4NzUpOwogICAgZmxvYXQgcm91Z2huZXNzID0gSW1hZ2VUZXh0dXJlX0NvbG9yX3Jlcy54OwogICAgZmxvYXQgbWV0YWxsaWMgPSAwLjA7CiAgICBmbG9hdCBvY2NsdXNpb24gPSAxLjA7CiAgICBmbG9hdCBzcGVjdWxhciA9IDEuMDsKICAgIGZsb2F0IHZpc2liaWxpdHkgPSAxLjA7CiAgICBmbG9hdCBkb3ROTCA9IG1heChkb3QobiwgbGlnaHREaXIpLCAwLjApOwogICAgaWYgKGxpZ2h0UG9zaXRpb24udyA%IDAuMCkKICAgIHsKICAgICAgICB2ZWMzIGxQb3MgPSBsaWdodFBvc2l0aW9uLnh5eiAvIHZlYzMobGlnaHRQb3NpdGlvbi53KTsKICAgICAgICB2aXNpYmlsaXR5ID0gMC4wOwogICAgICAgIHZpc2liaWxpdHkgKz0gZmxvYXQoKHRleHR1cmUyRChzaGFkb3dNYXAsIGxQb3MueHkpLnggKyBzaGFkb3dzQmlhcykgPiBsUG9zLnopOwogICAgICAgIHZpc2liaWxpdHkgKz0gKGZsb2F0KCh0ZXh0dXJlMkQoc2hhZG93TWFwLCBsUG9zLnh5ICsgdmVjMigwLjAwMDQ4ODI4MTI1LCAwLjApKS54ICsgc2hhZG93c0JpYXMpID4gbFBvcy56KSAqIDAuNSk7CiAgICAgICAgdmlzaWJpbGl0eSArPSAoZmxvYXQoKHRleHR1cmUyRChzaGFkb3dNYXAsIGxQb3MueHkgKyB2ZWMyKC0wLjAwMDQ4ODI4MTI1LCAwLjApKS54ICsgc2hhZG93c0JpYXMpID4gbFBvcy56KSAqIDAuMjUpOwogICAgICAgIHZpc2liaWxpdHkgKz0gKGZsb2F0KCh0ZXh0dXJlMkQoc2hhZG93TWFwLCBsUG9zLnh5ICsgdmVjMigwLjAsIDAuMDAwNDg4MjgxMjUpKS54ICsgc2hhZG93c0JpYXMpID4gbFBvcy56KSAqIDAuNSk7CiAgICAgICAgdmlzaWJpbGl0eSArPSAoZmxvYXQoKHRleHR1cmUyRChzaGFkb3dNYXAsIGxQb3MueHkgKyB2ZWMyKDAuMCwgLTAuMDAwNDg4MjgxMjUpKS54ICsgc2hhZG93c0JpYXMpID4gbFBvcy56KSAqIDAuMjUpOwogICAgICAgIHZpc2liaWxpdHkgLz0gMi41OwogICAgICAgIHZpc2liaWxpdHkgPSBtYXgodmlzaWJpbGl0eSwgMC4yMDAwMDAwMDI5ODAyMzIyMzg3Njk1MzEyNSk7CiAgICB9CiAgICB2ZWMzIGRpcmVjdCA9IChiYXNlY29sICogZG90TkwpICogbGlnaHRDb2xvcjsKICAgIGRpcmVjdCAqPSBhdHRlbnVhdGUoZGlzdGFuY2Uod3Bvc2l0aW9uLCBsaWdodFBvcykpOwogICAgZ2xfRnJhZ0RhdGFbMF0gPSB2ZWM0KChkaXJlY3QgKiB2aXNpYmlsaXR5KSArICgoYmFzZWNvbCAqIHNoSXJyYWRpYW5jZShuKSkgKiBlbnZtYXBTdHJlbmd0aCksIDEuMCk7Cn0KCg",Ne.Gun_mesh_fragData2="s4371:I3ZlcnNpb24gMzAwIGVzCnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OwpwcmVjaXNpb24gaGlnaHAgaW50OwoKdW5pZm9ybSBoaWdocCB2ZWM0IHNoaXJyWzddOwp1bmlmb3JtIGhpZ2hwIHNhbXBsZXIyRCBJbWFnZVRleHR1cmU7CnVuaWZvcm0gaGlnaHAgdmVjMyBsaWdodERpcjsKdW5pZm9ybSBoaWdocCBzYW1wbGVyMkQgc2hhZG93TWFwOwp1bmlmb3JtIGhpZ2hwIGZsb2F0IHNoYWRvd3NCaWFzOwp1bmlmb3JtIGhpZ2hwIHZlYzMgbGlnaHRDb2xvcjsKdW5pZm9ybSBoaWdocCB2ZWMzIGxpZ2h0UG9zOwp1bmlmb3JtIGhpZ2hwIGZsb2F0IGVudm1hcFN0cmVuZ3RoOwoKaW4gaGlnaHAgdmVjMyB3bm9ybWFsOwppbiBoaWdocCB2ZWMyIHRleENvb3JkOwppbiBoaWdocCB2ZWM0IGxpZ2h0UG9zaXRpb247CmluIGhpZ2hwIHZlYzMgd3Bvc2l0aW9uOwpvdXQgaGlnaHAgdmVjNCBmcmFnQ29sb3I7CgpoaWdocCBmbG9hdCBhdHRlbnVhdGUoaGlnaHAgZmxvYXQgZGlzdCkKewogICAgcmV0dXJuIDEuMCAvIChkaXN0ICogZGlzdCk7Cn0KCmhpZ2hwIHZlYzMgc2hJcnJhZGlhbmNlKGhpZ2hwIHZlYzMgbm9yKQp7CiAgICBoaWdocCB2ZWMzIGNsMDAgPSB2ZWMzKHNoaXJyWzBdLngsIHNoaXJyWzBdLnksIHNoaXJyWzBdLnopOwogICAgaGlnaHAgdmVjMyBjbDFtMSA9IHZlYzMoc2hpcnJbMF0udywgc2hpcnJbMV0ueCwgc2hpcnJbMV0ueSk7CiAgICBoaWdocCB2ZWMzIGNsMTAgPSB2ZWMzKHNoaXJyWzFdLnosIHNoaXJyWzFdLncsIHNoaXJyWzJdLngpOwogICAgaGlnaHAgdmVjMyBjbDExID0gdmVjMyhzaGlyclsyXS55LCBzaGlyclsyXS56LCBzaGlyclsyXS53KTsKICAgIGhpZ2hwIHZlYzMgY2wybTIgPSB2ZWMzKHNoaXJyWzNdLngsIHNoaXJyWzNdLnksIHNoaXJyWzNdLnopOwogICAgaGlnaHAgdmVjMyBjbDJtMSA9IHZlYzMoc2hpcnJbM10udywgc2hpcnJbNF0ueCwgc2hpcnJbNF0ueSk7CiAgICBoaWdocCB2ZWMzIGNsMjAgPSB2ZWMzKHNoaXJyWzRdLnosIHNoaXJyWzRdLncsIHNoaXJyWzVdLngpOwogICAgaGlnaHAgdmVjMyBjbDIxID0gdmVjMyhzaGlycls1XS55LCBzaGlycls1XS56LCBzaGlycls1XS53KTsKICAgIGhpZ2hwIHZlYzMgY2wyMiA9IHZlYzMoc2hpcnJbNl0ueCwgc2hpcnJbNl0ueSwgc2hpcnJbNl0ueik7CiAgICByZXR1cm4gKCgoKCgoKCgoKGNsMjIgKiAwLjQyOTA0Mjk5NDk3NjA0MzcwMTE3MTg3NSkgKiAoKG5vci55ICogbm9yLnkpIC0gKCgtbm9yLnopICogKC1ub3IueikpKSkgKyAoKChjbDIwICogMC43NDMxMjUwMjE0NTc2NzIxMTkxNDA2MjUpICogbm9yLngpICogbm9yLngpKSArIChjbDAwICogMC44ODYyMjcwMTE2ODA2MDMwMjczNDM3NSkpIC0gKGNsMjAgKiAwLjI0NzcwNzk5Mjc5MjEyOTUxNjYwMTU2MjUpKSArICgoKGNsMm0yICogMC44NTgwODU5ODk5NTIwODc0MDIzNDM3NSkgKiBub3IueSkgKiAoLW5vci56KSkpICsgKCgoY2wyMSAqIDAuODU4MDg1OTg5OTUyMDg3NDAyMzQzNzUpICogbm9yLnkpICogbm9yLngpKSArICgoKGNsMm0xICogMC44NTgwODU5ODk5NTIwODc0MDIzNDM3NSkgKiAoLW5vci56KSkgKiBub3IueCkpICsgKChjbDExICogMS4wMjMzMjc5NDY2NjI5MDI4MzIwMzEyNSkgKiBub3IueSkpICsgKChjbDFtMSAqIDEuMDIzMzI3OTQ2NjYyOTAyODMyMDMxMjUpICogKC1ub3IueikpKSArICgoY2wxMCAqIDEuMDIzMzI3OTQ2NjYyOTAyODMyMDMxMjUpICogbm9yLngpOwp9Cgp2b2lkIG1haW4oKQp7CiAgICBoaWdocCB2ZWMzIG4gPSBub3JtYWxpemUod25vcm1hbCk7CiAgICBoaWdocCB2ZWM0IEltYWdlVGV4dHVyZV9zdG9yZSA9IHRleHR1cmUoSW1hZ2VUZXh0dXJlLCB0ZXhDb29yZCk7CiAgICBoaWdocCB2ZWMzIEltYWdlVGV4dHVyZV9Db2xvcl9yZXMgPSBJbWFnZVRleHR1cmVfc3RvcmUueHl6OwogICAgaGlnaHAgdmVjMyBiYXNlY29sID0gdmVjMygwLjE5OTQ0OTk0MTUxNTkyMjU0NjM4NjcxODc1LCAwLjE3OTEzOTUyNDY5ODI1NzQ0NjI4OTA2MjUsIDAuOTMwMTExMTEwMjEwNDE4NzAxMTcxODc1KTsKICAgIGhpZ2hwIGZsb2F0IHJvdWdobmVzcyA9IEltYWdlVGV4dHVyZV9Db2xvcl9yZXMueDsKICAgIGhpZ2hwIGZsb2F0IG1ldGFsbGljID0gMC4wOwogICAgaGlnaHAgZmxvYXQgb2NjbHVzaW9uID0gMS4wOwogICAgaGlnaHAgZmxvYXQgc3BlY3VsYXIgPSAxLjA7CiAgICBoaWdocCBmbG9hdCB2aXNpYmlsaXR5ID0gMS4wOwogICAgaGlnaHAgZmxvYXQgZG90TkwgPSBtYXgoZG90KG4sIGxpZ2h0RGlyKSwgMC4wKTsKICAgIGlmIChsaWdodFBvc2l0aW9uLncgPiAwLjApCiAgICB7CiAgICAgICAgaGlnaHAgdmVjMyBsUG9zID0gbGlnaHRQb3NpdGlvbi54eXogLyB2ZWMzKGxpZ2h0UG9zaXRpb24udyk7CiAgICAgICAgdmlzaWJpbGl0eSA9IDAuMDsKICAgICAgICB2aXNpYmlsaXR5ICs9IGZsb2F0KCh0ZXh0dXJlKHNoYWRvd01hcCwgbFBvcy54eSkueCArIHNoYWRvd3NCaWFzKSA%IGxQb3Mueik7CiAgICAgICAgdmlzaWJpbGl0eSArPSAoZmxvYXQoKHRleHR1cmUoc2hhZG93TWFwLCBsUG9zLnh5ICsgdmVjMigwLjAwMDQ4ODI4MTI1LCAwLjApKS54ICsgc2hhZG93c0JpYXMpID4gbFBvcy56KSAqIDAuNSk7CiAgICAgICAgdmlzaWJpbGl0eSArPSAoZmxvYXQoKHRleHR1cmUoc2hhZG93TWFwLCBsUG9zLnh5ICsgdmVjMigtMC4wMDA0ODgyODEyNSwgMC4wKSkueCArIHNoYWRvd3NCaWFzKSA%IGxQb3MueikgKiAwLjI1KTsKICAgICAgICB2aXNpYmlsaXR5ICs9IChmbG9hdCgodGV4dHVyZShzaGFkb3dNYXAsIGxQb3MueHkgKyB2ZWMyKDAuMCwgMC4wMDA0ODgyODEyNSkpLnggKyBzaGFkb3dzQmlhcykgPiBsUG9zLnopICogMC41KTsKICAgICAgICB2aXNpYmlsaXR5ICs9IChmbG9hdCgodGV4dHVyZShzaGFkb3dNYXAsIGxQb3MueHkgKyB2ZWMyKDAuMCwgLTAuMDAwNDg4MjgxMjUpKS54ICsgc2hhZG93c0JpYXMpID4gbFBvcy56KSAqIDAuMjUpOwogICAgICAgIHZpc2liaWxpdHkgLz0gMi41OwogICAgICAgIHZpc2liaWxpdHkgPSBtYXgodmlzaWJpbGl0eSwgMC4yMDAwMDAwMDI5ODAyMzIyMzg3Njk1MzEyNSk7CiAgICB9CiAgICBoaWdocCB2ZWMzIGRpcmVjdCA9IChiYXNlY29sICogZG90TkwpICogbGlnaHRDb2xvcjsKICAgIGRpcmVjdCAqPSBhdHRlbnVhdGUoZGlzdGFuY2Uod3Bvc2l0aW9uLCBsaWdodFBvcykpOwogICAgZnJhZ0NvbG9yID0gdmVjNCgoZGlyZWN0ICogdmlzaWJpbGl0eSkgKyAoKGJhc2Vjb2wgKiBzaElycmFkaWFuY2UobikpICogZW52bWFwU3RyZW5ndGgpLCAxLjApOwp9Cgo",Ne.Gun2_mesh_fragData0="s4308:I3ZlcnNpb24gMTAwCnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OwpwcmVjaXNpb24gaGlnaHAgaW50OwoKdW5pZm9ybSBoaWdocCB2ZWM0IHNoaXJyWzddOwp1bmlmb3JtIGhpZ2hwIHNhbXBsZXIyRCBJbWFnZVRleHR1cmU7CnVuaWZvcm0gaGlnaHAgdmVjMyBsaWdodERpcjsKdW5pZm9ybSBoaWdocCBzYW1wbGVyMkQgc2hhZG93TWFwOwp1bmlmb3JtIGhpZ2hwIGZsb2F0IHNoYWRvd3NCaWFzOwp1bmlmb3JtIGhpZ2hwIHZlYzMgbGlnaHRDb2xvcjsKdW5pZm9ybSBoaWdocCB2ZWMzIGxpZ2h0UG9zOwp1bmlmb3JtIGhpZ2hwIGZsb2F0IGVudm1hcFN0cmVuZ3RoOwoKdmFyeWluZyBoaWdocCB2ZWMzIHdub3JtYWw7CnZhcnlpbmcgaGlnaHAgdmVjMiB0ZXhDb29yZDsKdmFyeWluZyBoaWdocCB2ZWM0IGxpZ2h0UG9zaXRpb247CnZhcnlpbmcgaGlnaHAgdmVjMyB3cG9zaXRpb247CgpoaWdocCBmbG9hdCBhdHRlbnVhdGUoaGlnaHAgZmxvYXQgZGlzdCkKewogICAgcmV0dXJuIDEuMCAvIChkaXN0ICogZGlzdCk7Cn0KCmhpZ2hwIHZlYzMgc2hJcnJhZGlhbmNlKGhpZ2hwIHZlYzMgbm9yKQp7CiAgICBoaWdocCB2ZWMzIGNsMDAgPSB2ZWMzKHNoaXJyWzBdLngsIHNoaXJyWzBdLnksIHNoaXJyWzBdLnopOwogICAgaGlnaHAgdmVjMyBjbDFtMSA9IHZlYzMoc2hpcnJbMF0udywgc2hpcnJbMV0ueCwgc2hpcnJbMV0ueSk7CiAgICBoaWdocCB2ZWMzIGNsMTAgPSB2ZWMzKHNoaXJyWzFdLnosIHNoaXJyWzFdLncsIHNoaXJyWzJdLngpOwogICAgaGlnaHAgdmVjMyBjbDExID0gdmVjMyhzaGlyclsyXS55LCBzaGlyclsyXS56LCBzaGlyclsyXS53KTsKICAgIGhpZ2hwIHZlYzMgY2wybTIgPSB2ZWMzKHNoaXJyWzNdLngsIHNoaXJyWzNdLnksIHNoaXJyWzNdLnopOwogICAgaGlnaHAgdmVjMyBjbDJtMSA9IHZlYzMoc2hpcnJbM10udywgc2hpcnJbNF0ueCwgc2hpcnJbNF0ueSk7CiAgICBoaWdocCB2ZWMzIGNsMjAgPSB2ZWMzKHNoaXJyWzRdLnosIHNoaXJyWzRdLncsIHNoaXJyWzVdLngpOwogICAgaGlnaHAgdmVjMyBjbDIxID0gdmVjMyhzaGlycls1XS55LCBzaGlycls1XS56LCBzaGlycls1XS53KTsKICAgIGhpZ2hwIHZlYzMgY2wyMiA9IHZlYzMoc2hpcnJbNl0ueCwgc2hpcnJbNl0ueSwgc2hpcnJbNl0ueik7CiAgICByZXR1cm4gKCgoKCgoKCgoKGNsMjIgKiAwLjQyOTA0Mjk5NDk3NjA0MzcwMTE3MTg3NSkgKiAoKG5vci55ICogbm9yLnkpIC0gKCgtbm9yLnopICogKC1ub3IueikpKSkgKyAoKChjbDIwICogMC43NDMxMjUwMjE0NTc2NzIxMTkxNDA2MjUpICogbm9yLngpICogbm9yLngpKSArIChjbDAwICogMC44ODYyMjcwMTE2ODA2MDMwMjczNDM3NSkpIC0gKGNsMjAgKiAwLjI0NzcwNzk5Mjc5MjEyOTUxNjYwMTU2MjUpKSArICgoKGNsMm0yICogMC44NTgwODU5ODk5NTIwODc0MDIzNDM3NSkgKiBub3IueSkgKiAoLW5vci56KSkpICsgKCgoY2wyMSAqIDAuODU4MDg1OTg5OTUyMDg3NDAyMzQzNzUpICogbm9yLnkpICogbm9yLngpKSArICgoKGNsMm0xICogMC44NTgwODU5ODk5NTIwODc0MDIzNDM3NSkgKiAoLW5vci56KSkgKiBub3IueCkpICsgKChjbDExICogMS4wMjMzMjc5NDY2NjI5MDI4MzIwMzEyNSkgKiBub3IueSkpICsgKChjbDFtMSAqIDEuMDIzMzI3OTQ2NjYyOTAyODMyMDMxMjUpICogKC1ub3IueikpKSArICgoY2wxMCAqIDEuMDIzMzI3OTQ2NjYyOTAyODMyMDMxMjUpICogbm9yLngpOwp9Cgp2b2lkIG1haW4oKQp7CiAgICBoaWdocCB2ZWMzIG4gPSBub3JtYWxpemUod25vcm1hbCk7CiAgICBoaWdocCB2ZWM0IEltYWdlVGV4dHVyZV9zdG9yZSA9IHRleHR1cmUyRChJbWFnZVRleHR1cmUsIHRleENvb3JkKTsKICAgIGhpZ2hwIHZlYzMgSW1hZ2VUZXh0dXJlX0NvbG9yX3JlcyA9IEltYWdlVGV4dHVyZV9zdG9yZS54eXo7CiAgICBoaWdocCB2ZWMzIGJhc2Vjb2wgPSB2ZWMzKDAuMDI3MTU3NjYwNTczNzIwOTMyMDA2ODM1OTM3NSk7CiAgICBoaWdocCBmbG9hdCByb3VnaG5lc3MgPSBJbWFnZVRleHR1cmVfQ29sb3JfcmVzLng7CiAgICBoaWdocCBmbG9hdCBtZXRhbGxpYyA9IDAuMDsKICAgIGhpZ2hwIGZsb2F0IG9jY2x1c2lvbiA9IDEuMDsKICAgIGhpZ2hwIGZsb2F0IHNwZWN1bGFyID0gMS4wOwogICAgaGlnaHAgZmxvYXQgdmlzaWJpbGl0eSA9IDEuMDsKICAgIGhpZ2hwIGZsb2F0IGRvdE5MID0gbWF4KGRvdChuLCBsaWdodERpciksIDAuMCk7CiAgICBpZiAobGlnaHRQb3NpdGlvbi53ID4gMC4wKQogICAgewogICAgICAgIGhpZ2hwIHZlYzMgbFBvcyA9IGxpZ2h0UG9zaXRpb24ueHl6IC8gdmVjMyhsaWdodFBvc2l0aW9uLncpOwogICAgICAgIHZpc2liaWxpdHkgPSAwLjA7CiAgICAgICAgdmlzaWJpbGl0eSArPSBmbG9hdCgodGV4dHVyZTJEKHNoYWRvd01hcCwgbFBvcy54eSkueCArIHNoYWRvd3NCaWFzKSA%IGxQb3Mueik7CiAgICAgICAgdmlzaWJpbGl0eSArPSAoZmxvYXQoKHRleHR1cmUyRChzaGFkb3dNYXAsIGxQb3MueHkgKyB2ZWMyKDAuMDAwNDg4MjgxMjUsIDAuMCkpLnggKyBzaGFkb3dzQmlhcykgPiBsUG9zLnopICogMC41KTsKICAgICAgICB2aXNpYmlsaXR5ICs9IChmbG9hdCgodGV4dHVyZTJEKHNoYWRvd01hcCwgbFBvcy54eSArIHZlYzIoLTAuMDAwNDg4MjgxMjUsIDAuMCkpLnggKyBzaGFkb3dzQmlhcykgPiBsUG9zLnopICogMC4yNSk7CiAgICAgICAgdmlzaWJpbGl0eSArPSAoZmxvYXQoKHRleHR1cmUyRChzaGFkb3dNYXAsIGxQb3MueHkgKyB2ZWMyKDAuMCwgMC4wMDA0ODgyODEyNSkpLnggKyBzaGFkb3dzQmlhcykgPiBsUG9zLnopICogMC41KTsKICAgICAgICB2aXNpYmlsaXR5ICs9IChmbG9hdCgodGV4dHVyZTJEKHNoYWRvd01hcCwgbFBvcy54eSArIHZlYzIoMC4wLCAtMC4wMDA0ODgyODEyNSkpLnggKyBzaGFkb3dzQmlhcykgPiBsUG9zLnopICogMC4yNSk7CiAgICAgICAgdmlzaWJpbGl0eSAvPSAyLjU7CiAgICAgICAgdmlzaWJpbGl0eSA9IG1heCh2aXNpYmlsaXR5LCAwLjIwMDAwMDAwMjk4MDIzMjIzODc2OTUzMTI1KTsKICAgIH0KICAgIGhpZ2hwIHZlYzMgZGlyZWN0ID0gKGJhc2Vjb2wgKiBkb3ROTCkgKiBsaWdodENvbG9yOwogICAgZGlyZWN0ICo9IGF0dGVudWF0ZShkaXN0YW5jZSh3cG9zaXRpb24sIGxpZ2h0UG9zKSk7CiAgICBnbF9GcmFnRGF0YVswXSA9IHZlYzQoKGRpcmVjdCAqIHZpc2liaWxpdHkpICsgKChiYXNlY29sICogc2hJcnJhZGlhbmNlKG4pKSAqIGVudm1hcFN0cmVuZ3RoKSwgMS4wKTsKfQoK",Ne.Gun2_mesh_fragData1="s4036:I3ZlcnNpb24gMTAwCnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OwpwcmVjaXNpb24gbWVkaXVtcCBpbnQ7Cgp1bmlmb3JtIHZlYzQgc2hpcnJbN107CnVuaWZvcm0gbWVkaXVtcCBzYW1wbGVyMkQgSW1hZ2VUZXh0dXJlOwp1bmlmb3JtIHZlYzMgbGlnaHREaXI7CnVuaWZvcm0gbWVkaXVtcCBzYW1wbGVyMkQgc2hhZG93TWFwOwp1bmlmb3JtIGZsb2F0IHNoYWRvd3NCaWFzOwp1bmlmb3JtIHZlYzMgbGlnaHRDb2xvcjsKdW5pZm9ybSB2ZWMzIGxpZ2h0UG9zOwp1bmlmb3JtIGZsb2F0IGVudm1hcFN0cmVuZ3RoOwoKdmFyeWluZyB2ZWMzIHdub3JtYWw7CnZhcnlpbmcgdmVjMiB0ZXhDb29yZDsKdmFyeWluZyB2ZWM0IGxpZ2h0UG9zaXRpb247CnZhcnlpbmcgdmVjMyB3cG9zaXRpb247CgpmbG9hdCBhdHRlbnVhdGUoZmxvYXQgZGlzdCkKewogICAgcmV0dXJuIDEuMCAvIChkaXN0ICogZGlzdCk7Cn0KCnZlYzMgc2hJcnJhZGlhbmNlKHZlYzMgbm9yKQp7CiAgICB2ZWMzIGNsMDAgPSB2ZWMzKHNoaXJyWzBdLngsIHNoaXJyWzBdLnksIHNoaXJyWzBdLnopOwogICAgdmVjMyBjbDFtMSA9IHZlYzMoc2hpcnJbMF0udywgc2hpcnJbMV0ueCwgc2hpcnJbMV0ueSk7CiAgICB2ZWMzIGNsMTAgPSB2ZWMzKHNoaXJyWzFdLnosIHNoaXJyWzFdLncsIHNoaXJyWzJdLngpOwogICAgdmVjMyBjbDExID0gdmVjMyhzaGlyclsyXS55LCBzaGlyclsyXS56LCBzaGlyclsyXS53KTsKICAgIHZlYzMgY2wybTIgPSB2ZWMzKHNoaXJyWzNdLngsIHNoaXJyWzNdLnksIHNoaXJyWzNdLnopOwogICAgdmVjMyBjbDJtMSA9IHZlYzMoc2hpcnJbM10udywgc2hpcnJbNF0ueCwgc2hpcnJbNF0ueSk7CiAgICB2ZWMzIGNsMjAgPSB2ZWMzKHNoaXJyWzRdLnosIHNoaXJyWzRdLncsIHNoaXJyWzVdLngpOwogICAgdmVjMyBjbDIxID0gdmVjMyhzaGlycls1XS55LCBzaGlycls1XS56LCBzaGlycls1XS53KTsKICAgIHZlYzMgY2wyMiA9IHZlYzMoc2hpcnJbNl0ueCwgc2hpcnJbNl0ueSwgc2hpcnJbNl0ueik7CiAgICByZXR1cm4gKCgoKCgoKCgoKGNsMjIgKiAwLjQyOTA0Mjk5NDk3NjA0MzcwMTE3MTg3NSkgKiAoKG5vci55ICogbm9yLnkpIC0gKCgtbm9yLnopICogKC1ub3IueikpKSkgKyAoKChjbDIwICogMC43NDMxMjUwMjE0NTc2NzIxMTkxNDA2MjUpICogbm9yLngpICogbm9yLngpKSArIChjbDAwICogMC44ODYyMjcwMTE2ODA2MDMwMjczNDM3NSkpIC0gKGNsMjAgKiAwLjI0NzcwNzk5Mjc5MjEyOTUxNjYwMTU2MjUpKSArICgoKGNsMm0yICogMC44NTgwODU5ODk5NTIwODc0MDIzNDM3NSkgKiBub3IueSkgKiAoLW5vci56KSkpICsgKCgoY2wyMSAqIDAuODU4MDg1OTg5OTUyMDg3NDAyMzQzNzUpICogbm9yLnkpICogbm9yLngpKSArICgoKGNsMm0xICogMC44NTgwODU5ODk5NTIwODc0MDIzNDM3NSkgKiAoLW5vci56KSkgKiBub3IueCkpICsgKChjbDExICogMS4wMjMzMjc5NDY2NjI5MDI4MzIwMzEyNSkgKiBub3IueSkpICsgKChjbDFtMSAqIDEuMDIzMzI3OTQ2NjYyOTAyODMyMDMxMjUpICogKC1ub3IueikpKSArICgoY2wxMCAqIDEuMDIzMzI3OTQ2NjYyOTAyODMyMDMxMjUpICogbm9yLngpOwp9Cgp2b2lkIG1haW4oKQp7CiAgICB2ZWMzIG4gPSBub3JtYWxpemUod25vcm1hbCk7CiAgICB2ZWM0IEltYWdlVGV4dHVyZV9zdG9yZSA9IHRleHR1cmUyRChJbWFnZVRleHR1cmUsIHRleENvb3JkKTsKICAgIHZlYzMgSW1hZ2VUZXh0dXJlX0NvbG9yX3JlcyA9IEltYWdlVGV4dHVyZV9zdG9yZS54eXo7CiAgICB2ZWMzIGJhc2Vjb2wgPSB2ZWMzKDAuMDI3MTU3NjYwNTczNzIwOTMyMDA2ODM1OTM3NSk7CiAgICBmbG9hdCByb3VnaG5lc3MgPSBJbWFnZVRleHR1cmVfQ29sb3JfcmVzLng7CiAgICBmbG9hdCBtZXRhbGxpYyA9IDAuMDsKICAgIGZsb2F0IG9jY2x1c2lvbiA9IDEuMDsKICAgIGZsb2F0IHNwZWN1bGFyID0gMS4wOwogICAgZmxvYXQgdmlzaWJpbGl0eSA9IDEuMDsKICAgIGZsb2F0IGRvdE5MID0gbWF4KGRvdChuLCBsaWdodERpciksIDAuMCk7CiAgICBpZiAobGlnaHRQb3NpdGlvbi53ID4gMC4wKQogICAgewogICAgICAgIHZlYzMgbFBvcyA9IGxpZ2h0UG9zaXRpb24ueHl6IC8gdmVjMyhsaWdodFBvc2l0aW9uLncpOwogICAgICAgIHZpc2liaWxpdHkgPSAwLjA7CiAgICAgICAgdmlzaWJpbGl0eSArPSBmbG9hdCgodGV4dHVyZTJEKHNoYWRvd01hcCwgbFBvcy54eSkueCArIHNoYWRvd3NCaWFzKSA%IGxQb3Mueik7CiAgICAgICAgdmlzaWJpbGl0eSArPSAoZmxvYXQoKHRleHR1cmUyRChzaGFkb3dNYXAsIGxQb3MueHkgKyB2ZWMyKDAuMDAwNDg4MjgxMjUsIDAuMCkpLnggKyBzaGFkb3dzQmlhcykgPiBsUG9zLnopICogMC41KTsKICAgICAgICB2aXNpYmlsaXR5ICs9IChmbG9hdCgodGV4dHVyZTJEKHNoYWRvd01hcCwgbFBvcy54eSArIHZlYzIoLTAuMDAwNDg4MjgxMjUsIDAuMCkpLnggKyBzaGFkb3dzQmlhcykgPiBsUG9zLnopICogMC4yNSk7CiAgICAgICAgdmlzaWJpbGl0eSArPSAoZmxvYXQoKHRleHR1cmUyRChzaGFkb3dNYXAsIGxQb3MueHkgKyB2ZWMyKDAuMCwgMC4wMDA0ODgyODEyNSkpLnggKyBzaGFkb3dzQmlhcykgPiBsUG9zLnopICogMC41KTsKICAgICAgICB2aXNpYmlsaXR5ICs9IChmbG9hdCgodGV4dHVyZTJEKHNoYWRvd01hcCwgbFBvcy54eSArIHZlYzIoMC4wLCAtMC4wMDA0ODgyODEyNSkpLnggKyBzaGFkb3dzQmlhcykgPiBsUG9zLnopICogMC4yNSk7CiAgICAgICAgdmlzaWJpbGl0eSAvPSAyLjU7CiAgICAgICAgdmlzaWJpbGl0eSA9IG1heCh2aXNpYmlsaXR5LCAwLjIwMDAwMDAwMjk4MDIzMjIzODc2OTUzMTI1KTsKICAgIH0KICAgIHZlYzMgZGlyZWN0ID0gKGJhc2Vjb2wgKiBkb3ROTCkgKiBsaWdodENvbG9yOwogICAgZGlyZWN0ICo9IGF0dGVudWF0ZShkaXN0YW5jZSh3cG9zaXRpb24sIGxpZ2h0UG9zKSk7CiAgICBnbF9GcmFnRGF0YVswXSA9IHZlYzQoKGRpcmVjdCAqIHZpc2liaWxpdHkpICsgKChiYXNlY29sICogc2hJcnJhZGlhbmNlKG4pKSAqIGVudm1hcFN0cmVuZ3RoKSwgMS4wKTsKfQoK",Ne.Gun2_mesh_fragData2="s4298:I3ZlcnNpb24gMzAwIGVzCnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OwpwcmVjaXNpb24gaGlnaHAgaW50OwoKdW5pZm9ybSBoaWdocCB2ZWM0IHNoaXJyWzddOwp1bmlmb3JtIGhpZ2hwIHNhbXBsZXIyRCBJbWFnZVRleHR1cmU7CnVuaWZvcm0gaGlnaHAgdmVjMyBsaWdodERpcjsKdW5pZm9ybSBoaWdocCBzYW1wbGVyMkQgc2hhZG93TWFwOwp1bmlmb3JtIGhpZ2hwIGZsb2F0IHNoYWRvd3NCaWFzOwp1bmlmb3JtIGhpZ2hwIHZlYzMgbGlnaHRDb2xvcjsKdW5pZm9ybSBoaWdocCB2ZWMzIGxpZ2h0UG9zOwp1bmlmb3JtIGhpZ2hwIGZsb2F0IGVudm1hcFN0cmVuZ3RoOwoKaW4gaGlnaHAgdmVjMyB3bm9ybWFsOwppbiBoaWdocCB2ZWMyIHRleENvb3JkOwppbiBoaWdocCB2ZWM0IGxpZ2h0UG9zaXRpb247CmluIGhpZ2hwIHZlYzMgd3Bvc2l0aW9uOwpvdXQgaGlnaHAgdmVjNCBmcmFnQ29sb3I7CgpoaWdocCBmbG9hdCBhdHRlbnVhdGUoaGlnaHAgZmxvYXQgZGlzdCkKewogICAgcmV0dXJuIDEuMCAvIChkaXN0ICogZGlzdCk7Cn0KCmhpZ2hwIHZlYzMgc2hJcnJhZGlhbmNlKGhpZ2hwIHZlYzMgbm9yKQp7CiAgICBoaWdocCB2ZWMzIGNsMDAgPSB2ZWMzKHNoaXJyWzBdLngsIHNoaXJyWzBdLnksIHNoaXJyWzBdLnopOwogICAgaGlnaHAgdmVjMyBjbDFtMSA9IHZlYzMoc2hpcnJbMF0udywgc2hpcnJbMV0ueCwgc2hpcnJbMV0ueSk7CiAgICBoaWdocCB2ZWMzIGNsMTAgPSB2ZWMzKHNoaXJyWzFdLnosIHNoaXJyWzFdLncsIHNoaXJyWzJdLngpOwogICAgaGlnaHAgdmVjMyBjbDExID0gdmVjMyhzaGlyclsyXS55LCBzaGlyclsyXS56LCBzaGlyclsyXS53KTsKICAgIGhpZ2hwIHZlYzMgY2wybTIgPSB2ZWMzKHNoaXJyWzNdLngsIHNoaXJyWzNdLnksIHNoaXJyWzNdLnopOwogICAgaGlnaHAgdmVjMyBjbDJtMSA9IHZlYzMoc2hpcnJbM10udywgc2hpcnJbNF0ueCwgc2hpcnJbNF0ueSk7CiAgICBoaWdocCB2ZWMzIGNsMjAgPSB2ZWMzKHNoaXJyWzRdLnosIHNoaXJyWzRdLncsIHNoaXJyWzVdLngpOwogICAgaGlnaHAgdmVjMyBjbDIxID0gdmVjMyhzaGlycls1XS55LCBzaGlycls1XS56LCBzaGlycls1XS53KTsKICAgIGhpZ2hwIHZlYzMgY2wyMiA9IHZlYzMoc2hpcnJbNl0ueCwgc2hpcnJbNl0ueSwgc2hpcnJbNl0ueik7CiAgICByZXR1cm4gKCgoKCgoKCgoKGNsMjIgKiAwLjQyOTA0Mjk5NDk3NjA0MzcwMTE3MTg3NSkgKiAoKG5vci55ICogbm9yLnkpIC0gKCgtbm9yLnopICogKC1ub3IueikpKSkgKyAoKChjbDIwICogMC43NDMxMjUwMjE0NTc2NzIxMTkxNDA2MjUpICogbm9yLngpICogbm9yLngpKSArIChjbDAwICogMC44ODYyMjcwMTE2ODA2MDMwMjczNDM3NSkpIC0gKGNsMjAgKiAwLjI0NzcwNzk5Mjc5MjEyOTUxNjYwMTU2MjUpKSArICgoKGNsMm0yICogMC44NTgwODU5ODk5NTIwODc0MDIzNDM3NSkgKiBub3IueSkgKiAoLW5vci56KSkpICsgKCgoY2wyMSAqIDAuODU4MDg1OTg5OTUyMDg3NDAyMzQzNzUpICogbm9yLnkpICogbm9yLngpKSArICgoKGNsMm0xICogMC44NTgwODU5ODk5NTIwODc0MDIzNDM3NSkgKiAoLW5vci56KSkgKiBub3IueCkpICsgKChjbDExICogMS4wMjMzMjc5NDY2NjI5MDI4MzIwMzEyNSkgKiBub3IueSkpICsgKChjbDFtMSAqIDEuMDIzMzI3OTQ2NjYyOTAyODMyMDMxMjUpICogKC1ub3IueikpKSArICgoY2wxMCAqIDEuMDIzMzI3OTQ2NjYyOTAyODMyMDMxMjUpICogbm9yLngpOwp9Cgp2b2lkIG1haW4oKQp7CiAgICBoaWdocCB2ZWMzIG4gPSBub3JtYWxpemUod25vcm1hbCk7CiAgICBoaWdocCB2ZWM0IEltYWdlVGV4dHVyZV9zdG9yZSA9IHRleHR1cmUoSW1hZ2VUZXh0dXJlLCB0ZXhDb29yZCk7CiAgICBoaWdocCB2ZWMzIEltYWdlVGV4dHVyZV9Db2xvcl9yZXMgPSBJbWFnZVRleHR1cmVfc3RvcmUueHl6OwogICAgaGlnaHAgdmVjMyBiYXNlY29sID0gdmVjMygwLjAyNzE1NzY2MDU3MzcyMDkzMjAwNjgzNTkzNzUpOwogICAgaGlnaHAgZmxvYXQgcm91Z2huZXNzID0gSW1hZ2VUZXh0dXJlX0NvbG9yX3Jlcy54OwogICAgaGlnaHAgZmxvYXQgbWV0YWxsaWMgPSAwLjA7CiAgICBoaWdocCBmbG9hdCBvY2NsdXNpb24gPSAxLjA7CiAgICBoaWdocCBmbG9hdCBzcGVjdWxhciA9IDEuMDsKICAgIGhpZ2hwIGZsb2F0IHZpc2liaWxpdHkgPSAxLjA7CiAgICBoaWdocCBmbG9hdCBkb3ROTCA9IG1heChkb3QobiwgbGlnaHREaXIpLCAwLjApOwogICAgaWYgKGxpZ2h0UG9zaXRpb24udyA%IDAuMCkKICAgIHsKICAgICAgICBoaWdocCB2ZWMzIGxQb3MgPSBsaWdodFBvc2l0aW9uLnh5eiAvIHZlYzMobGlnaHRQb3NpdGlvbi53KTsKICAgICAgICB2aXNpYmlsaXR5ID0gMC4wOwogICAgICAgIHZpc2liaWxpdHkgKz0gZmxvYXQoKHRleHR1cmUoc2hhZG93TWFwLCBsUG9zLnh5KS54ICsgc2hhZG93c0JpYXMpID4gbFBvcy56KTsKICAgICAgICB2aXNpYmlsaXR5ICs9IChmbG9hdCgodGV4dHVyZShzaGFkb3dNYXAsIGxQb3MueHkgKyB2ZWMyKDAuMDAwNDg4MjgxMjUsIDAuMCkpLnggKyBzaGFkb3dzQmlhcykgPiBsUG9zLnopICogMC41KTsKICAgICAgICB2aXNpYmlsaXR5ICs9IChmbG9hdCgodGV4dHVyZShzaGFkb3dNYXAsIGxQb3MueHkgKyB2ZWMyKC0wLjAwMDQ4ODI4MTI1LCAwLjApKS54ICsgc2hhZG93c0JpYXMpID4gbFBvcy56KSAqIDAuMjUpOwogICAgICAgIHZpc2liaWxpdHkgKz0gKGZsb2F0KCh0ZXh0dXJlKHNoYWRvd01hcCwgbFBvcy54eSArIHZlYzIoMC4wLCAwLjAwMDQ4ODI4MTI1KSkueCArIHNoYWRvd3NCaWFzKSA%IGxQb3MueikgKiAwLjUpOwogICAgICAgIHZpc2liaWxpdHkgKz0gKGZsb2F0KCh0ZXh0dXJlKHNoYWRvd01hcCwgbFBvcy54eSArIHZlYzIoMC4wLCAtMC4wMDA0ODgyODEyNSkpLnggKyBzaGFkb3dzQmlhcykgPiBsUG9zLnopICogMC4yNSk7CiAgICAgICAgdmlzaWJpbGl0eSAvPSAyLjU7CiAgICAgICAgdmlzaWJpbGl0eSA9IG1heCh2aXNpYmlsaXR5LCAwLjIwMDAwMDAwMjk4MDIzMjIzODc2OTUzMTI1KTsKICAgIH0KICAgIGhpZ2hwIHZlYzMgZGlyZWN0ID0gKGJhc2Vjb2wgKiBkb3ROTCkgKiBsaWdodENvbG9yOwogICAgZGlyZWN0ICo9IGF0dGVudWF0ZShkaXN0YW5jZSh3cG9zaXRpb24sIGxpZ2h0UG9zKSk7CiAgICBmcmFnQ29sb3IgPSB2ZWM0KChkaXJlY3QgKiB2aXNpYmlsaXR5KSArICgoYmFzZWNvbCAqIHNoSXJyYWRpYW5jZShuKSkgKiBlbnZtYXBTdHJlbmd0aCksIDEuMCk7Cn0KCg",Ne.Head_armskin_mesh_fragData0="s4303:I3ZlcnNpb24gMTAwCnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OwpwcmVjaXNpb24gaGlnaHAgaW50OwoKdW5pZm9ybSBoaWdocCB2ZWM0IHNoaXJyWzddOwp1bmlmb3JtIGhpZ2hwIHNhbXBsZXIyRCBJbWFnZVRleHR1cmU7CnVuaWZvcm0gaGlnaHAgdmVjMyBsaWdodERpcjsKdW5pZm9ybSBoaWdocCBzYW1wbGVyMkQgc2hhZG93TWFwOwp1bmlmb3JtIGhpZ2hwIGZsb2F0IHNoYWRvd3NCaWFzOwp1bmlmb3JtIGhpZ2hwIHZlYzMgbGlnaHRDb2xvcjsKdW5pZm9ybSBoaWdocCB2ZWMzIGxpZ2h0UG9zOwp1bmlmb3JtIGhpZ2hwIGZsb2F0IGVudm1hcFN0cmVuZ3RoOwoKdmFyeWluZyBoaWdocCB2ZWMzIHdub3JtYWw7CnZhcnlpbmcgaGlnaHAgdmVjMiB0ZXhDb29yZDsKdmFyeWluZyBoaWdocCB2ZWM0IGxpZ2h0UG9zaXRpb247CnZhcnlpbmcgaGlnaHAgdmVjMyB3cG9zaXRpb247CgpoaWdocCBmbG9hdCBhdHRlbnVhdGUoaGlnaHAgZmxvYXQgZGlzdCkKewogICAgcmV0dXJuIDEuMCAvIChkaXN0ICogZGlzdCk7Cn0KCmhpZ2hwIHZlYzMgc2hJcnJhZGlhbmNlKGhpZ2hwIHZlYzMgbm9yKQp7CiAgICBoaWdocCB2ZWMzIGNsMDAgPSB2ZWMzKHNoaXJyWzBdLngsIHNoaXJyWzBdLnksIHNoaXJyWzBdLnopOwogICAgaGlnaHAgdmVjMyBjbDFtMSA9IHZlYzMoc2hpcnJbMF0udywgc2hpcnJbMV0ueCwgc2hpcnJbMV0ueSk7CiAgICBoaWdocCB2ZWMzIGNsMTAgPSB2ZWMzKHNoaXJyWzFdLnosIHNoaXJyWzFdLncsIHNoaXJyWzJdLngpOwogICAgaGlnaHAgdmVjMyBjbDExID0gdmVjMyhzaGlyclsyXS55LCBzaGlyclsyXS56LCBzaGlyclsyXS53KTsKICAgIGhpZ2hwIHZlYzMgY2wybTIgPSB2ZWMzKHNoaXJyWzNdLngsIHNoaXJyWzNdLnksIHNoaXJyWzNdLnopOwogICAgaGlnaHAgdmVjMyBjbDJtMSA9IHZlYzMoc2hpcnJbM10udywgc2hpcnJbNF0ueCwgc2hpcnJbNF0ueSk7CiAgICBoaWdocCB2ZWMzIGNsMjAgPSB2ZWMzKHNoaXJyWzRdLnosIHNoaXJyWzRdLncsIHNoaXJyWzVdLngpOwogICAgaGlnaHAgdmVjMyBjbDIxID0gdmVjMyhzaGlycls1XS55LCBzaGlycls1XS56LCBzaGlycls1XS53KTsKICAgIGhpZ2hwIHZlYzMgY2wyMiA9IHZlYzMoc2hpcnJbNl0ueCwgc2hpcnJbNl0ueSwgc2hpcnJbNl0ueik7CiAgICByZXR1cm4gKCgoKCgoKCgoKGNsMjIgKiAwLjQyOTA0Mjk5NDk3NjA0MzcwMTE3MTg3NSkgKiAoKG5vci55ICogbm9yLnkpIC0gKCgtbm9yLnopICogKC1ub3IueikpKSkgKyAoKChjbDIwICogMC43NDMxMjUwMjE0NTc2NzIxMTkxNDA2MjUpICogbm9yLngpICogbm9yLngpKSArIChjbDAwICogMC44ODYyMjcwMTE2ODA2MDMwMjczNDM3NSkpIC0gKGNsMjAgKiAwLjI0NzcwNzk5Mjc5MjEyOTUxNjYwMTU2MjUpKSArICgoKGNsMm0yICogMC44NTgwODU5ODk5NTIwODc0MDIzNDM3NSkgKiBub3IueSkgKiAoLW5vci56KSkpICsgKCgoY2wyMSAqIDAuODU4MDg1OTg5OTUyMDg3NDAyMzQzNzUpICogbm9yLnkpICogbm9yLngpKSArICgoKGNsMm0xICogMC44NTgwODU5ODk5NTIwODc0MDIzNDM3NSkgKiAoLW5vci56KSkgKiBub3IueCkpICsgKChjbDExICogMS4wMjMzMjc5NDY2NjI5MDI4MzIwMzEyNSkgKiBub3IueSkpICsgKChjbDFtMSAqIDEuMDIzMzI3OTQ2NjYyOTAyODMyMDMxMjUpICogKC1ub3IueikpKSArICgoY2wxMCAqIDEuMDIzMzI3OTQ2NjYyOTAyODMyMDMxMjUpICogbm9yLngpOwp9Cgp2b2lkIG1haW4oKQp7CiAgICBoaWdocCB2ZWMzIG4gPSBub3JtYWxpemUod25vcm1hbCk7CiAgICBoaWdocCB2ZWM0IEltYWdlVGV4dHVyZV9zdG9yZSA9IHRleHR1cmUyRChJbWFnZVRleHR1cmUsIHRleENvb3JkKTsKICAgIGhpZ2hwIHZlYzMgSW1hZ2VUZXh0dXJlX0NvbG9yX3JlcyA9IEltYWdlVGV4dHVyZV9zdG9yZS54eXo7CiAgICBoaWdocCB2ZWMzIGJhc2Vjb2wgPSB2ZWMzKDAuODAwMDAwMDExOTIwOTI4OTU1MDc4MTI1KTsKICAgIGhpZ2hwIGZsb2F0IHJvdWdobmVzcyA9IEltYWdlVGV4dHVyZV9Db2xvcl9yZXMueDsKICAgIGhpZ2hwIGZsb2F0IG1ldGFsbGljID0gMC4wOwogICAgaGlnaHAgZmxvYXQgb2NjbHVzaW9uID0gMS4wOwogICAgaGlnaHAgZmxvYXQgc3BlY3VsYXIgPSAxLjA7CiAgICBoaWdocCBmbG9hdCB2aXNpYmlsaXR5ID0gMS4wOwogICAgaGlnaHAgZmxvYXQgZG90TkwgPSBtYXgoZG90KG4sIGxpZ2h0RGlyKSwgMC4wKTsKICAgIGlmIChsaWdodFBvc2l0aW9uLncgPiAwLjApCiAgICB7CiAgICAgICAgaGlnaHAgdmVjMyBsUG9zID0gbGlnaHRQb3NpdGlvbi54eXogLyB2ZWMzKGxpZ2h0UG9zaXRpb24udyk7CiAgICAgICAgdmlzaWJpbGl0eSA9IDAuMDsKICAgICAgICB2aXNpYmlsaXR5ICs9IGZsb2F0KCh0ZXh0dXJlMkQoc2hhZG93TWFwLCBsUG9zLnh5KS54ICsgc2hhZG93c0JpYXMpID4gbFBvcy56KTsKICAgICAgICB2aXNpYmlsaXR5ICs9IChmbG9hdCgodGV4dHVyZTJEKHNoYWRvd01hcCwgbFBvcy54eSArIHZlYzIoMC4wMDA0ODgyODEyNSwgMC4wKSkueCArIHNoYWRvd3NCaWFzKSA%IGxQb3MueikgKiAwLjUpOwogICAgICAgIHZpc2liaWxpdHkgKz0gKGZsb2F0KCh0ZXh0dXJlMkQoc2hhZG93TWFwLCBsUG9zLnh5ICsgdmVjMigtMC4wMDA0ODgyODEyNSwgMC4wKSkueCArIHNoYWRvd3NCaWFzKSA%IGxQb3MueikgKiAwLjI1KTsKICAgICAgICB2aXNpYmlsaXR5ICs9IChmbG9hdCgodGV4dHVyZTJEKHNoYWRvd01hcCwgbFBvcy54eSArIHZlYzIoMC4wLCAwLjAwMDQ4ODI4MTI1KSkueCArIHNoYWRvd3NCaWFzKSA%IGxQb3MueikgKiAwLjUpOwogICAgICAgIHZpc2liaWxpdHkgKz0gKGZsb2F0KCh0ZXh0dXJlMkQoc2hhZG93TWFwLCBsUG9zLnh5ICsgdmVjMigwLjAsIC0wLjAwMDQ4ODI4MTI1KSkueCArIHNoYWRvd3NCaWFzKSA%IGxQb3MueikgKiAwLjI1KTsKICAgICAgICB2aXNpYmlsaXR5IC89IDIuNTsKICAgICAgICB2aXNpYmlsaXR5ID0gbWF4KHZpc2liaWxpdHksIDAuMjAwMDAwMDAyOTgwMjMyMjM4NzY5NTMxMjUpOwogICAgfQogICAgaGlnaHAgdmVjMyBkaXJlY3QgPSAoYmFzZWNvbCAqIGRvdE5MKSAqIGxpZ2h0Q29sb3I7CiAgICBkaXJlY3QgKj0gYXR0ZW51YXRlKGRpc3RhbmNlKHdwb3NpdGlvbiwgbGlnaHRQb3MpKTsKICAgIGdsX0ZyYWdEYXRhWzBdID0gdmVjNCgoZGlyZWN0ICogdmlzaWJpbGl0eSkgKyAoKGJhc2Vjb2wgKiBzaElycmFkaWFuY2UobikpICogZW52bWFwU3RyZW5ndGgpLCAxLjApOwp9Cgo",Ne.Head_armskin_mesh_fragData1="s4031:I3ZlcnNpb24gMTAwCnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OwpwcmVjaXNpb24gbWVkaXVtcCBpbnQ7Cgp1bmlmb3JtIHZlYzQgc2hpcnJbN107CnVuaWZvcm0gbWVkaXVtcCBzYW1wbGVyMkQgSW1hZ2VUZXh0dXJlOwp1bmlmb3JtIHZlYzMgbGlnaHREaXI7CnVuaWZvcm0gbWVkaXVtcCBzYW1wbGVyMkQgc2hhZG93TWFwOwp1bmlmb3JtIGZsb2F0IHNoYWRvd3NCaWFzOwp1bmlmb3JtIHZlYzMgbGlnaHRDb2xvcjsKdW5pZm9ybSB2ZWMzIGxpZ2h0UG9zOwp1bmlmb3JtIGZsb2F0IGVudm1hcFN0cmVuZ3RoOwoKdmFyeWluZyB2ZWMzIHdub3JtYWw7CnZhcnlpbmcgdmVjMiB0ZXhDb29yZDsKdmFyeWluZyB2ZWM0IGxpZ2h0UG9zaXRpb247CnZhcnlpbmcgdmVjMyB3cG9zaXRpb247CgpmbG9hdCBhdHRlbnVhdGUoZmxvYXQgZGlzdCkKewogICAgcmV0dXJuIDEuMCAvIChkaXN0ICogZGlzdCk7Cn0KCnZlYzMgc2hJcnJhZGlhbmNlKHZlYzMgbm9yKQp7CiAgICB2ZWMzIGNsMDAgPSB2ZWMzKHNoaXJyWzBdLngsIHNoaXJyWzBdLnksIHNoaXJyWzBdLnopOwogICAgdmVjMyBjbDFtMSA9IHZlYzMoc2hpcnJbMF0udywgc2hpcnJbMV0ueCwgc2hpcnJbMV0ueSk7CiAgICB2ZWMzIGNsMTAgPSB2ZWMzKHNoaXJyWzFdLnosIHNoaXJyWzFdLncsIHNoaXJyWzJdLngpOwogICAgdmVjMyBjbDExID0gdmVjMyhzaGlyclsyXS55LCBzaGlyclsyXS56LCBzaGlyclsyXS53KTsKICAgIHZlYzMgY2wybTIgPSB2ZWMzKHNoaXJyWzNdLngsIHNoaXJyWzNdLnksIHNoaXJyWzNdLnopOwogICAgdmVjMyBjbDJtMSA9IHZlYzMoc2hpcnJbM10udywgc2hpcnJbNF0ueCwgc2hpcnJbNF0ueSk7CiAgICB2ZWMzIGNsMjAgPSB2ZWMzKHNoaXJyWzRdLnosIHNoaXJyWzRdLncsIHNoaXJyWzVdLngpOwogICAgdmVjMyBjbDIxID0gdmVjMyhzaGlycls1XS55LCBzaGlycls1XS56LCBzaGlycls1XS53KTsKICAgIHZlYzMgY2wyMiA9IHZlYzMoc2hpcnJbNl0ueCwgc2hpcnJbNl0ueSwgc2hpcnJbNl0ueik7CiAgICByZXR1cm4gKCgoKCgoKCgoKGNsMjIgKiAwLjQyOTA0Mjk5NDk3NjA0MzcwMTE3MTg3NSkgKiAoKG5vci55ICogbm9yLnkpIC0gKCgtbm9yLnopICogKC1ub3IueikpKSkgKyAoKChjbDIwICogMC43NDMxMjUwMjE0NTc2NzIxMTkxNDA2MjUpICogbm9yLngpICogbm9yLngpKSArIChjbDAwICogMC44ODYyMjcwMTE2ODA2MDMwMjczNDM3NSkpIC0gKGNsMjAgKiAwLjI0NzcwNzk5Mjc5MjEyOTUxNjYwMTU2MjUpKSArICgoKGNsMm0yICogMC44NTgwODU5ODk5NTIwODc0MDIzNDM3NSkgKiBub3IueSkgKiAoLW5vci56KSkpICsgKCgoY2wyMSAqIDAuODU4MDg1OTg5OTUyMDg3NDAyMzQzNzUpICogbm9yLnkpICogbm9yLngpKSArICgoKGNsMm0xICogMC44NTgwODU5ODk5NTIwODc0MDIzNDM3NSkgKiAoLW5vci56KSkgKiBub3IueCkpICsgKChjbDExICogMS4wMjMzMjc5NDY2NjI5MDI4MzIwMzEyNSkgKiBub3IueSkpICsgKChjbDFtMSAqIDEuMDIzMzI3OTQ2NjYyOTAyODMyMDMxMjUpICogKC1ub3IueikpKSArICgoY2wxMCAqIDEuMDIzMzI3OTQ2NjYyOTAyODMyMDMxMjUpICogbm9yLngpOwp9Cgp2b2lkIG1haW4oKQp7CiAgICB2ZWMzIG4gPSBub3JtYWxpemUod25vcm1hbCk7CiAgICB2ZWM0IEltYWdlVGV4dHVyZV9zdG9yZSA9IHRleHR1cmUyRChJbWFnZVRleHR1cmUsIHRleENvb3JkKTsKICAgIHZlYzMgSW1hZ2VUZXh0dXJlX0NvbG9yX3JlcyA9IEltYWdlVGV4dHVyZV9zdG9yZS54eXo7CiAgICB2ZWMzIGJhc2Vjb2wgPSB2ZWMzKDAuODAwMDAwMDExOTIwOTI4OTU1MDc4MTI1KTsKICAgIGZsb2F0IHJvdWdobmVzcyA9IEltYWdlVGV4dHVyZV9Db2xvcl9yZXMueDsKICAgIGZsb2F0IG1ldGFsbGljID0gMC4wOwogICAgZmxvYXQgb2NjbHVzaW9uID0gMS4wOwogICAgZmxvYXQgc3BlY3VsYXIgPSAxLjA7CiAgICBmbG9hdCB2aXNpYmlsaXR5ID0gMS4wOwogICAgZmxvYXQgZG90TkwgPSBtYXgoZG90KG4sIGxpZ2h0RGlyKSwgMC4wKTsKICAgIGlmIChsaWdodFBvc2l0aW9uLncgPiAwLjApCiAgICB7CiAgICAgICAgdmVjMyBsUG9zID0gbGlnaHRQb3NpdGlvbi54eXogLyB2ZWMzKGxpZ2h0UG9zaXRpb24udyk7CiAgICAgICAgdmlzaWJpbGl0eSA9IDAuMDsKICAgICAgICB2aXNpYmlsaXR5ICs9IGZsb2F0KCh0ZXh0dXJlMkQoc2hhZG93TWFwLCBsUG9zLnh5KS54ICsgc2hhZG93c0JpYXMpID4gbFBvcy56KTsKICAgICAgICB2aXNpYmlsaXR5ICs9IChmbG9hdCgodGV4dHVyZTJEKHNoYWRvd01hcCwgbFBvcy54eSArIHZlYzIoMC4wMDA0ODgyODEyNSwgMC4wKSkueCArIHNoYWRvd3NCaWFzKSA%IGxQb3MueikgKiAwLjUpOwogICAgICAgIHZpc2liaWxpdHkgKz0gKGZsb2F0KCh0ZXh0dXJlMkQoc2hhZG93TWFwLCBsUG9zLnh5ICsgdmVjMigtMC4wMDA0ODgyODEyNSwgMC4wKSkueCArIHNoYWRvd3NCaWFzKSA%IGxQb3MueikgKiAwLjI1KTsKICAgICAgICB2aXNpYmlsaXR5ICs9IChmbG9hdCgodGV4dHVyZTJEKHNoYWRvd01hcCwgbFBvcy54eSArIHZlYzIoMC4wLCAwLjAwMDQ4ODI4MTI1KSkueCArIHNoYWRvd3NCaWFzKSA%IGxQb3MueikgKiAwLjUpOwogICAgICAgIHZpc2liaWxpdHkgKz0gKGZsb2F0KCh0ZXh0dXJlMkQoc2hhZG93TWFwLCBsUG9zLnh5ICsgdmVjMigwLjAsIC0wLjAwMDQ4ODI4MTI1KSkueCArIHNoYWRvd3NCaWFzKSA%IGxQb3MueikgKiAwLjI1KTsKICAgICAgICB2aXNpYmlsaXR5IC89IDIuNTsKICAgICAgICB2aXNpYmlsaXR5ID0gbWF4KHZpc2liaWxpdHksIDAuMjAwMDAwMDAyOTgwMjMyMjM4NzY5NTMxMjUpOwogICAgfQogICAgdmVjMyBkaXJlY3QgPSAoYmFzZWNvbCAqIGRvdE5MKSAqIGxpZ2h0Q29sb3I7CiAgICBkaXJlY3QgKj0gYXR0ZW51YXRlKGRpc3RhbmNlKHdwb3NpdGlvbiwgbGlnaHRQb3MpKTsKICAgIGdsX0ZyYWdEYXRhWzBdID0gdmVjNCgoZGlyZWN0ICogdmlzaWJpbGl0eSkgKyAoKGJhc2Vjb2wgKiBzaElycmFkaWFuY2UobikpICogZW52bWFwU3RyZW5ndGgpLCAxLjApOwp9Cgo",Ne.Head_armskin_mesh_fragData2="s4292:I3ZlcnNpb24gMzAwIGVzCnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OwpwcmVjaXNpb24gaGlnaHAgaW50OwoKdW5pZm9ybSBoaWdocCB2ZWM0IHNoaXJyWzddOwp1bmlmb3JtIGhpZ2hwIHNhbXBsZXIyRCBJbWFnZVRleHR1cmU7CnVuaWZvcm0gaGlnaHAgdmVjMyBsaWdodERpcjsKdW5pZm9ybSBoaWdocCBzYW1wbGVyMkQgc2hhZG93TWFwOwp1bmlmb3JtIGhpZ2hwIGZsb2F0IHNoYWRvd3NCaWFzOwp1bmlmb3JtIGhpZ2hwIHZlYzMgbGlnaHRDb2xvcjsKdW5pZm9ybSBoaWdocCB2ZWMzIGxpZ2h0UG9zOwp1bmlmb3JtIGhpZ2hwIGZsb2F0IGVudm1hcFN0cmVuZ3RoOwoKaW4gaGlnaHAgdmVjMyB3bm9ybWFsOwppbiBoaWdocCB2ZWMyIHRleENvb3JkOwppbiBoaWdocCB2ZWM0IGxpZ2h0UG9zaXRpb247CmluIGhpZ2hwIHZlYzMgd3Bvc2l0aW9uOwpvdXQgaGlnaHAgdmVjNCBmcmFnQ29sb3I7CgpoaWdocCBmbG9hdCBhdHRlbnVhdGUoaGlnaHAgZmxvYXQgZGlzdCkKewogICAgcmV0dXJuIDEuMCAvIChkaXN0ICogZGlzdCk7Cn0KCmhpZ2hwIHZlYzMgc2hJcnJhZGlhbmNlKGhpZ2hwIHZlYzMgbm9yKQp7CiAgICBoaWdocCB2ZWMzIGNsMDAgPSB2ZWMzKHNoaXJyWzBdLngsIHNoaXJyWzBdLnksIHNoaXJyWzBdLnopOwogICAgaGlnaHAgdmVjMyBjbDFtMSA9IHZlYzMoc2hpcnJbMF0udywgc2hpcnJbMV0ueCwgc2hpcnJbMV0ueSk7CiAgICBoaWdocCB2ZWMzIGNsMTAgPSB2ZWMzKHNoaXJyWzFdLnosIHNoaXJyWzFdLncsIHNoaXJyWzJdLngpOwogICAgaGlnaHAgdmVjMyBjbDExID0gdmVjMyhzaGlyclsyXS55LCBzaGlyclsyXS56LCBzaGlyclsyXS53KTsKICAgIGhpZ2hwIHZlYzMgY2wybTIgPSB2ZWMzKHNoaXJyWzNdLngsIHNoaXJyWzNdLnksIHNoaXJyWzNdLnopOwogICAgaGlnaHAgdmVjMyBjbDJtMSA9IHZlYzMoc2hpcnJbM10udywgc2hpcnJbNF0ueCwgc2hpcnJbNF0ueSk7CiAgICBoaWdocCB2ZWMzIGNsMjAgPSB2ZWMzKHNoaXJyWzRdLnosIHNoaXJyWzRdLncsIHNoaXJyWzVdLngpOwogICAgaGlnaHAgdmVjMyBjbDIxID0gdmVjMyhzaGlycls1XS55LCBzaGlycls1XS56LCBzaGlycls1XS53KTsKICAgIGhpZ2hwIHZlYzMgY2wyMiA9IHZlYzMoc2hpcnJbNl0ueCwgc2hpcnJbNl0ueSwgc2hpcnJbNl0ueik7CiAgICByZXR1cm4gKCgoKCgoKCgoKGNsMjIgKiAwLjQyOTA0Mjk5NDk3NjA0MzcwMTE3MTg3NSkgKiAoKG5vci55ICogbm9yLnkpIC0gKCgtbm9yLnopICogKC1ub3IueikpKSkgKyAoKChjbDIwICogMC43NDMxMjUwMjE0NTc2NzIxMTkxNDA2MjUpICogbm9yLngpICogbm9yLngpKSArIChjbDAwICogMC44ODYyMjcwMTE2ODA2MDMwMjczNDM3NSkpIC0gKGNsMjAgKiAwLjI0NzcwNzk5Mjc5MjEyOTUxNjYwMTU2MjUpKSArICgoKGNsMm0yICogMC44NTgwODU5ODk5NTIwODc0MDIzNDM3NSkgKiBub3IueSkgKiAoLW5vci56KSkpICsgKCgoY2wyMSAqIDAuODU4MDg1OTg5OTUyMDg3NDAyMzQzNzUpICogbm9yLnkpICogbm9yLngpKSArICgoKGNsMm0xICogMC44NTgwODU5ODk5NTIwODc0MDIzNDM3NSkgKiAoLW5vci56KSkgKiBub3IueCkpICsgKChjbDExICogMS4wMjMzMjc5NDY2NjI5MDI4MzIwMzEyNSkgKiBub3IueSkpICsgKChjbDFtMSAqIDEuMDIzMzI3OTQ2NjYyOTAyODMyMDMxMjUpICogKC1ub3IueikpKSArICgoY2wxMCAqIDEuMDIzMzI3OTQ2NjYyOTAyODMyMDMxMjUpICogbm9yLngpOwp9Cgp2b2lkIG1haW4oKQp7CiAgICBoaWdocCB2ZWMzIG4gPSBub3JtYWxpemUod25vcm1hbCk7CiAgICBoaWdocCB2ZWM0IEltYWdlVGV4dHVyZV9zdG9yZSA9IHRleHR1cmUoSW1hZ2VUZXh0dXJlLCB0ZXhDb29yZCk7CiAgICBoaWdocCB2ZWMzIEltYWdlVGV4dHVyZV9Db2xvcl9yZXMgPSBJbWFnZVRleHR1cmVfc3RvcmUueHl6OwogICAgaGlnaHAgdmVjMyBiYXNlY29sID0gdmVjMygwLjgwMDAwMDAxMTkyMDkyODk1NTA3ODEyNSk7CiAgICBoaWdocCBmbG9hdCByb3VnaG5lc3MgPSBJbWFnZVRleHR1cmVfQ29sb3JfcmVzLng7CiAgICBoaWdocCBmbG9hdCBtZXRhbGxpYyA9IDAuMDsKICAgIGhpZ2hwIGZsb2F0IG9jY2x1c2lvbiA9IDEuMDsKICAgIGhpZ2hwIGZsb2F0IHNwZWN1bGFyID0gMS4wOwogICAgaGlnaHAgZmxvYXQgdmlzaWJpbGl0eSA9IDEuMDsKICAgIGhpZ2hwIGZsb2F0IGRvdE5MID0gbWF4KGRvdChuLCBsaWdodERpciksIDAuMCk7CiAgICBpZiAobGlnaHRQb3NpdGlvbi53ID4gMC4wKQogICAgewogICAgICAgIGhpZ2hwIHZlYzMgbFBvcyA9IGxpZ2h0UG9zaXRpb24ueHl6IC8gdmVjMyhsaWdodFBvc2l0aW9uLncpOwogICAgICAgIHZpc2liaWxpdHkgPSAwLjA7CiAgICAgICAgdmlzaWJpbGl0eSArPSBmbG9hdCgodGV4dHVyZShzaGFkb3dNYXAsIGxQb3MueHkpLnggKyBzaGFkb3dzQmlhcykgPiBsUG9zLnopOwogICAgICAgIHZpc2liaWxpdHkgKz0gKGZsb2F0KCh0ZXh0dXJlKHNoYWRvd01hcCwgbFBvcy54eSArIHZlYzIoMC4wMDA0ODgyODEyNSwgMC4wKSkueCArIHNoYWRvd3NCaWFzKSA%IGxQb3MueikgKiAwLjUpOwogICAgICAgIHZpc2liaWxpdHkgKz0gKGZsb2F0KCh0ZXh0dXJlKHNoYWRvd01hcCwgbFBvcy54eSArIHZlYzIoLTAuMDAwNDg4MjgxMjUsIDAuMCkpLnggKyBzaGFkb3dzQmlhcykgPiBsUG9zLnopICogMC4yNSk7CiAgICAgICAgdmlzaWJpbGl0eSArPSAoZmxvYXQoKHRleHR1cmUoc2hhZG93TWFwLCBsUG9zLnh5ICsgdmVjMigwLjAsIDAuMDAwNDg4MjgxMjUpKS54ICsgc2hhZG93c0JpYXMpID4gbFBvcy56KSAqIDAuNSk7CiAgICAgICAgdmlzaWJpbGl0eSArPSAoZmxvYXQoKHRleHR1cmUoc2hhZG93TWFwLCBsUG9zLnh5ICsgdmVjMigwLjAsIC0wLjAwMDQ4ODI4MTI1KSkueCArIHNoYWRvd3NCaWFzKSA%IGxQb3MueikgKiAwLjI1KTsKICAgICAgICB2aXNpYmlsaXR5IC89IDIuNTsKICAgICAgICB2aXNpYmlsaXR5ID0gbWF4KHZpc2liaWxpdHksIDAuMjAwMDAwMDAyOTgwMjMyMjM4NzY5NTMxMjUpOwogICAgfQogICAgaGlnaHAgdmVjMyBkaXJlY3QgPSAoYmFzZWNvbCAqIGRvdE5MKSAqIGxpZ2h0Q29sb3I7CiAgICBkaXJlY3QgKj0gYXR0ZW51YXRlKGRpc3RhbmNlKHdwb3NpdGlvbiwgbGlnaHRQb3MpKTsKICAgIGZyYWdDb2xvciA9IHZlYzQoKGRpcmVjdCAqIHZpc2liaWxpdHkpICsgKChiYXNlY29sICogc2hJcnJhZGlhbmNlKG4pKSAqIGVudm1hcFN0cmVuZ3RoKSwgMS4wKTsKfQoK",Ne.Joints_armskin_mesh_fragData0="s4307:I3ZlcnNpb24gMTAwCnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OwpwcmVjaXNpb24gaGlnaHAgaW50OwoKdW5pZm9ybSBoaWdocCB2ZWM0IHNoaXJyWzddOwp1bmlmb3JtIGhpZ2hwIHNhbXBsZXIyRCBJbWFnZVRleHR1cmU7CnVuaWZvcm0gaGlnaHAgdmVjMyBsaWdodERpcjsKdW5pZm9ybSBoaWdocCBzYW1wbGVyMkQgc2hhZG93TWFwOwp1bmlmb3JtIGhpZ2hwIGZsb2F0IHNoYWRvd3NCaWFzOwp1bmlmb3JtIGhpZ2hwIHZlYzMgbGlnaHRDb2xvcjsKdW5pZm9ybSBoaWdocCB2ZWMzIGxpZ2h0UG9zOwp1bmlmb3JtIGhpZ2hwIGZsb2F0IGVudm1hcFN0cmVuZ3RoOwoKdmFyeWluZyBoaWdocCB2ZWMzIHdub3JtYWw7CnZhcnlpbmcgaGlnaHAgdmVjMiB0ZXhDb29yZDsKdmFyeWluZyBoaWdocCB2ZWM0IGxpZ2h0UG9zaXRpb247CnZhcnlpbmcgaGlnaHAgdmVjMyB3cG9zaXRpb247CgpoaWdocCBmbG9hdCBhdHRlbnVhdGUoaGlnaHAgZmxvYXQgZGlzdCkKewogICAgcmV0dXJuIDEuMCAvIChkaXN0ICogZGlzdCk7Cn0KCmhpZ2hwIHZlYzMgc2hJcnJhZGlhbmNlKGhpZ2hwIHZlYzMgbm9yKQp7CiAgICBoaWdocCB2ZWMzIGNsMDAgPSB2ZWMzKHNoaXJyWzBdLngsIHNoaXJyWzBdLnksIHNoaXJyWzBdLnopOwogICAgaGlnaHAgdmVjMyBjbDFtMSA9IHZlYzMoc2hpcnJbMF0udywgc2hpcnJbMV0ueCwgc2hpcnJbMV0ueSk7CiAgICBoaWdocCB2ZWMzIGNsMTAgPSB2ZWMzKHNoaXJyWzFdLnosIHNoaXJyWzFdLncsIHNoaXJyWzJdLngpOwogICAgaGlnaHAgdmVjMyBjbDExID0gdmVjMyhzaGlyclsyXS55LCBzaGlyclsyXS56LCBzaGlyclsyXS53KTsKICAgIGhpZ2hwIHZlYzMgY2wybTIgPSB2ZWMzKHNoaXJyWzNdLngsIHNoaXJyWzNdLnksIHNoaXJyWzNdLnopOwogICAgaGlnaHAgdmVjMyBjbDJtMSA9IHZlYzMoc2hpcnJbM10udywgc2hpcnJbNF0ueCwgc2hpcnJbNF0ueSk7CiAgICBoaWdocCB2ZWMzIGNsMjAgPSB2ZWMzKHNoaXJyWzRdLnosIHNoaXJyWzRdLncsIHNoaXJyWzVdLngpOwogICAgaGlnaHAgdmVjMyBjbDIxID0gdmVjMyhzaGlycls1XS55LCBzaGlycls1XS56LCBzaGlycls1XS53KTsKICAgIGhpZ2hwIHZlYzMgY2wyMiA9IHZlYzMoc2hpcnJbNl0ueCwgc2hpcnJbNl0ueSwgc2hpcnJbNl0ueik7CiAgICByZXR1cm4gKCgoKCgoKCgoKGNsMjIgKiAwLjQyOTA0Mjk5NDk3NjA0MzcwMTE3MTg3NSkgKiAoKG5vci55ICogbm9yLnkpIC0gKCgtbm9yLnopICogKC1ub3IueikpKSkgKyAoKChjbDIwICogMC43NDMxMjUwMjE0NTc2NzIxMTkxNDA2MjUpICogbm9yLngpICogbm9yLngpKSArIChjbDAwICogMC44ODYyMjcwMTE2ODA2MDMwMjczNDM3NSkpIC0gKGNsMjAgKiAwLjI0NzcwNzk5Mjc5MjEyOTUxNjYwMTU2MjUpKSArICgoKGNsMm0yICogMC44NTgwODU5ODk5NTIwODc0MDIzNDM3NSkgKiBub3IueSkgKiAoLW5vci56KSkpICsgKCgoY2wyMSAqIDAuODU4MDg1OTg5OTUyMDg3NDAyMzQzNzUpICogbm9yLnkpICogbm9yLngpKSArICgoKGNsMm0xICogMC44NTgwODU5ODk5NTIwODc0MDIzNDM3NSkgKiAoLW5vci56KSkgKiBub3IueCkpICsgKChjbDExICogMS4wMjMzMjc5NDY2NjI5MDI4MzIwMzEyNSkgKiBub3IueSkpICsgKChjbDFtMSAqIDEuMDIzMzI3OTQ2NjYyOTAyODMyMDMxMjUpICogKC1ub3IueikpKSArICgoY2wxMCAqIDEuMDIzMzI3OTQ2NjYyOTAyODMyMDMxMjUpICogbm9yLngpOwp9Cgp2b2lkIG1haW4oKQp7CiAgICBoaWdocCB2ZWMzIG4gPSBub3JtYWxpemUod25vcm1hbCk7CiAgICBoaWdocCB2ZWM0IEltYWdlVGV4dHVyZV9zdG9yZSA9IHRleHR1cmUyRChJbWFnZVRleHR1cmUsIHRleENvb3JkKTsKICAgIGhpZ2hwIHZlYzMgSW1hZ2VUZXh0dXJlX0NvbG9yX3JlcyA9IEltYWdlVGV4dHVyZV9zdG9yZS54eXo7CiAgICBoaWdocCB2ZWMzIGJhc2Vjb2wgPSB2ZWMzKDAuMTE0ODg3NjAyNjI3Mjc3Mzc0MjY3NTc4MTI1KTsKICAgIGhpZ2hwIGZsb2F0IHJvdWdobmVzcyA9IEltYWdlVGV4dHVyZV9Db2xvcl9yZXMueDsKICAgIGhpZ2hwIGZsb2F0IG1ldGFsbGljID0gMC4wOwogICAgaGlnaHAgZmxvYXQgb2NjbHVzaW9uID0gMS4wOwogICAgaGlnaHAgZmxvYXQgc3BlY3VsYXIgPSAxLjA7CiAgICBoaWdocCBmbG9hdCB2aXNpYmlsaXR5ID0gMS4wOwogICAgaGlnaHAgZmxvYXQgZG90TkwgPSBtYXgoZG90KG4sIGxpZ2h0RGlyKSwgMC4wKTsKICAgIGlmIChsaWdodFBvc2l0aW9uLncgPiAwLjApCiAgICB7CiAgICAgICAgaGlnaHAgdmVjMyBsUG9zID0gbGlnaHRQb3NpdGlvbi54eXogLyB2ZWMzKGxpZ2h0UG9zaXRpb24udyk7CiAgICAgICAgdmlzaWJpbGl0eSA9IDAuMDsKICAgICAgICB2aXNpYmlsaXR5ICs9IGZsb2F0KCh0ZXh0dXJlMkQoc2hhZG93TWFwLCBsUG9zLnh5KS54ICsgc2hhZG93c0JpYXMpID4gbFBvcy56KTsKICAgICAgICB2aXNpYmlsaXR5ICs9IChmbG9hdCgodGV4dHVyZTJEKHNoYWRvd01hcCwgbFBvcy54eSArIHZlYzIoMC4wMDA0ODgyODEyNSwgMC4wKSkueCArIHNoYWRvd3NCaWFzKSA%IGxQb3MueikgKiAwLjUpOwogICAgICAgIHZpc2liaWxpdHkgKz0gKGZsb2F0KCh0ZXh0dXJlMkQoc2hhZG93TWFwLCBsUG9zLnh5ICsgdmVjMigtMC4wMDA0ODgyODEyNSwgMC4wKSkueCArIHNoYWRvd3NCaWFzKSA%IGxQb3MueikgKiAwLjI1KTsKICAgICAgICB2aXNpYmlsaXR5ICs9IChmbG9hdCgodGV4dHVyZTJEKHNoYWRvd01hcCwgbFBvcy54eSArIHZlYzIoMC4wLCAwLjAwMDQ4ODI4MTI1KSkueCArIHNoYWRvd3NCaWFzKSA%IGxQb3MueikgKiAwLjUpOwogICAgICAgIHZpc2liaWxpdHkgKz0gKGZsb2F0KCh0ZXh0dXJlMkQoc2hhZG93TWFwLCBsUG9zLnh5ICsgdmVjMigwLjAsIC0wLjAwMDQ4ODI4MTI1KSkueCArIHNoYWRvd3NCaWFzKSA%IGxQb3MueikgKiAwLjI1KTsKICAgICAgICB2aXNpYmlsaXR5IC89IDIuNTsKICAgICAgICB2aXNpYmlsaXR5ID0gbWF4KHZpc2liaWxpdHksIDAuMjAwMDAwMDAyOTgwMjMyMjM4NzY5NTMxMjUpOwogICAgfQogICAgaGlnaHAgdmVjMyBkaXJlY3QgPSAoYmFzZWNvbCAqIGRvdE5MKSAqIGxpZ2h0Q29sb3I7CiAgICBkaXJlY3QgKj0gYXR0ZW51YXRlKGRpc3RhbmNlKHdwb3NpdGlvbiwgbGlnaHRQb3MpKTsKICAgIGdsX0ZyYWdEYXRhWzBdID0gdmVjNCgoZGlyZWN0ICogdmlzaWJpbGl0eSkgKyAoKGJhc2Vjb2wgKiBzaElycmFkaWFuY2UobikpICogZW52bWFwU3RyZW5ndGgpLCAxLjApOwp9Cgo",Ne.Joints_armskin_mesh_fragData1="s4035:I3ZlcnNpb24gMTAwCnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OwpwcmVjaXNpb24gbWVkaXVtcCBpbnQ7Cgp1bmlmb3JtIHZlYzQgc2hpcnJbN107CnVuaWZvcm0gbWVkaXVtcCBzYW1wbGVyMkQgSW1hZ2VUZXh0dXJlOwp1bmlmb3JtIHZlYzMgbGlnaHREaXI7CnVuaWZvcm0gbWVkaXVtcCBzYW1wbGVyMkQgc2hhZG93TWFwOwp1bmlmb3JtIGZsb2F0IHNoYWRvd3NCaWFzOwp1bmlmb3JtIHZlYzMgbGlnaHRDb2xvcjsKdW5pZm9ybSB2ZWMzIGxpZ2h0UG9zOwp1bmlmb3JtIGZsb2F0IGVudm1hcFN0cmVuZ3RoOwoKdmFyeWluZyB2ZWMzIHdub3JtYWw7CnZhcnlpbmcgdmVjMiB0ZXhDb29yZDsKdmFyeWluZyB2ZWM0IGxpZ2h0UG9zaXRpb247CnZhcnlpbmcgdmVjMyB3cG9zaXRpb247CgpmbG9hdCBhdHRlbnVhdGUoZmxvYXQgZGlzdCkKewogICAgcmV0dXJuIDEuMCAvIChkaXN0ICogZGlzdCk7Cn0KCnZlYzMgc2hJcnJhZGlhbmNlKHZlYzMgbm9yKQp7CiAgICB2ZWMzIGNsMDAgPSB2ZWMzKHNoaXJyWzBdLngsIHNoaXJyWzBdLnksIHNoaXJyWzBdLnopOwogICAgdmVjMyBjbDFtMSA9IHZlYzMoc2hpcnJbMF0udywgc2hpcnJbMV0ueCwgc2hpcnJbMV0ueSk7CiAgICB2ZWMzIGNsMTAgPSB2ZWMzKHNoaXJyWzFdLnosIHNoaXJyWzFdLncsIHNoaXJyWzJdLngpOwogICAgdmVjMyBjbDExID0gdmVjMyhzaGlyclsyXS55LCBzaGlyclsyXS56LCBzaGlyclsyXS53KTsKICAgIHZlYzMgY2wybTIgPSB2ZWMzKHNoaXJyWzNdLngsIHNoaXJyWzNdLnksIHNoaXJyWzNdLnopOwogICAgdmVjMyBjbDJtMSA9IHZlYzMoc2hpcnJbM10udywgc2hpcnJbNF0ueCwgc2hpcnJbNF0ueSk7CiAgICB2ZWMzIGNsMjAgPSB2ZWMzKHNoaXJyWzRdLnosIHNoaXJyWzRdLncsIHNoaXJyWzVdLngpOwogICAgdmVjMyBjbDIxID0gdmVjMyhzaGlycls1XS55LCBzaGlycls1XS56LCBzaGlycls1XS53KTsKICAgIHZlYzMgY2wyMiA9IHZlYzMoc2hpcnJbNl0ueCwgc2hpcnJbNl0ueSwgc2hpcnJbNl0ueik7CiAgICByZXR1cm4gKCgoKCgoKCgoKGNsMjIgKiAwLjQyOTA0Mjk5NDk3NjA0MzcwMTE3MTg3NSkgKiAoKG5vci55ICogbm9yLnkpIC0gKCgtbm9yLnopICogKC1ub3IueikpKSkgKyAoKChjbDIwICogMC43NDMxMjUwMjE0NTc2NzIxMTkxNDA2MjUpICogbm9yLngpICogbm9yLngpKSArIChjbDAwICogMC44ODYyMjcwMTE2ODA2MDMwMjczNDM3NSkpIC0gKGNsMjAgKiAwLjI0NzcwNzk5Mjc5MjEyOTUxNjYwMTU2MjUpKSArICgoKGNsMm0yICogMC44NTgwODU5ODk5NTIwODc0MDIzNDM3NSkgKiBub3IueSkgKiAoLW5vci56KSkpICsgKCgoY2wyMSAqIDAuODU4MDg1OTg5OTUyMDg3NDAyMzQzNzUpICogbm9yLnkpICogbm9yLngpKSArICgoKGNsMm0xICogMC44NTgwODU5ODk5NTIwODc0MDIzNDM3NSkgKiAoLW5vci56KSkgKiBub3IueCkpICsgKChjbDExICogMS4wMjMzMjc5NDY2NjI5MDI4MzIwMzEyNSkgKiBub3IueSkpICsgKChjbDFtMSAqIDEuMDIzMzI3OTQ2NjYyOTAyODMyMDMxMjUpICogKC1ub3IueikpKSArICgoY2wxMCAqIDEuMDIzMzI3OTQ2NjYyOTAyODMyMDMxMjUpICogbm9yLngpOwp9Cgp2b2lkIG1haW4oKQp7CiAgICB2ZWMzIG4gPSBub3JtYWxpemUod25vcm1hbCk7CiAgICB2ZWM0IEltYWdlVGV4dHVyZV9zdG9yZSA9IHRleHR1cmUyRChJbWFnZVRleHR1cmUsIHRleENvb3JkKTsKICAgIHZlYzMgSW1hZ2VUZXh0dXJlX0NvbG9yX3JlcyA9IEltYWdlVGV4dHVyZV9zdG9yZS54eXo7CiAgICB2ZWMzIGJhc2Vjb2wgPSB2ZWMzKDAuMTE0ODg3NjAyNjI3Mjc3Mzc0MjY3NTc4MTI1KTsKICAgIGZsb2F0IHJvdWdobmVzcyA9IEltYWdlVGV4dHVyZV9Db2xvcl9yZXMueDsKICAgIGZsb2F0IG1ldGFsbGljID0gMC4wOwogICAgZmxvYXQgb2NjbHVzaW9uID0gMS4wOwogICAgZmxvYXQgc3BlY3VsYXIgPSAxLjA7CiAgICBmbG9hdCB2aXNpYmlsaXR5ID0gMS4wOwogICAgZmxvYXQgZG90TkwgPSBtYXgoZG90KG4sIGxpZ2h0RGlyKSwgMC4wKTsKICAgIGlmIChsaWdodFBvc2l0aW9uLncgPiAwLjApCiAgICB7CiAgICAgICAgdmVjMyBsUG9zID0gbGlnaHRQb3NpdGlvbi54eXogLyB2ZWMzKGxpZ2h0UG9zaXRpb24udyk7CiAgICAgICAgdmlzaWJpbGl0eSA9IDAuMDsKICAgICAgICB2aXNpYmlsaXR5ICs9IGZsb2F0KCh0ZXh0dXJlMkQoc2hhZG93TWFwLCBsUG9zLnh5KS54ICsgc2hhZG93c0JpYXMpID4gbFBvcy56KTsKICAgICAgICB2aXNpYmlsaXR5ICs9IChmbG9hdCgodGV4dHVyZTJEKHNoYWRvd01hcCwgbFBvcy54eSArIHZlYzIoMC4wMDA0ODgyODEyNSwgMC4wKSkueCArIHNoYWRvd3NCaWFzKSA%IGxQb3MueikgKiAwLjUpOwogICAgICAgIHZpc2liaWxpdHkgKz0gKGZsb2F0KCh0ZXh0dXJlMkQoc2hhZG93TWFwLCBsUG9zLnh5ICsgdmVjMigtMC4wMDA0ODgyODEyNSwgMC4wKSkueCArIHNoYWRvd3NCaWFzKSA%IGxQb3MueikgKiAwLjI1KTsKICAgICAgICB2aXNpYmlsaXR5ICs9IChmbG9hdCgodGV4dHVyZTJEKHNoYWRvd01hcCwgbFBvcy54eSArIHZlYzIoMC4wLCAwLjAwMDQ4ODI4MTI1KSkueCArIHNoYWRvd3NCaWFzKSA%IGxQb3MueikgKiAwLjUpOwogICAgICAgIHZpc2liaWxpdHkgKz0gKGZsb2F0KCh0ZXh0dXJlMkQoc2hhZG93TWFwLCBsUG9zLnh5ICsgdmVjMigwLjAsIC0wLjAwMDQ4ODI4MTI1KSkueCArIHNoYWRvd3NCaWFzKSA%IGxQb3MueikgKiAwLjI1KTsKICAgICAgICB2aXNpYmlsaXR5IC89IDIuNTsKICAgICAgICB2aXNpYmlsaXR5ID0gbWF4KHZpc2liaWxpdHksIDAuMjAwMDAwMDAyOTgwMjMyMjM4NzY5NTMxMjUpOwogICAgfQogICAgdmVjMyBkaXJlY3QgPSAoYmFzZWNvbCAqIGRvdE5MKSAqIGxpZ2h0Q29sb3I7CiAgICBkaXJlY3QgKj0gYXR0ZW51YXRlKGRpc3RhbmNlKHdwb3NpdGlvbiwgbGlnaHRQb3MpKTsKICAgIGdsX0ZyYWdEYXRhWzBdID0gdmVjNCgoZGlyZWN0ICogdmlzaWJpbGl0eSkgKyAoKGJhc2Vjb2wgKiBzaElycmFkaWFuY2UobikpICogZW52bWFwU3RyZW5ndGgpLCAxLjApOwp9Cgo",Ne.Joints_armskin_mesh_fragData2="s4296:I3ZlcnNpb24gMzAwIGVzCnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OwpwcmVjaXNpb24gaGlnaHAgaW50OwoKdW5pZm9ybSBoaWdocCB2ZWM0IHNoaXJyWzddOwp1bmlmb3JtIGhpZ2hwIHNhbXBsZXIyRCBJbWFnZVRleHR1cmU7CnVuaWZvcm0gaGlnaHAgdmVjMyBsaWdodERpcjsKdW5pZm9ybSBoaWdocCBzYW1wbGVyMkQgc2hhZG93TWFwOwp1bmlmb3JtIGhpZ2hwIGZsb2F0IHNoYWRvd3NCaWFzOwp1bmlmb3JtIGhpZ2hwIHZlYzMgbGlnaHRDb2xvcjsKdW5pZm9ybSBoaWdocCB2ZWMzIGxpZ2h0UG9zOwp1bmlmb3JtIGhpZ2hwIGZsb2F0IGVudm1hcFN0cmVuZ3RoOwoKaW4gaGlnaHAgdmVjMyB3bm9ybWFsOwppbiBoaWdocCB2ZWMyIHRleENvb3JkOwppbiBoaWdocCB2ZWM0IGxpZ2h0UG9zaXRpb247CmluIGhpZ2hwIHZlYzMgd3Bvc2l0aW9uOwpvdXQgaGlnaHAgdmVjNCBmcmFnQ29sb3I7CgpoaWdocCBmbG9hdCBhdHRlbnVhdGUoaGlnaHAgZmxvYXQgZGlzdCkKewogICAgcmV0dXJuIDEuMCAvIChkaXN0ICogZGlzdCk7Cn0KCmhpZ2hwIHZlYzMgc2hJcnJhZGlhbmNlKGhpZ2hwIHZlYzMgbm9yKQp7CiAgICBoaWdocCB2ZWMzIGNsMDAgPSB2ZWMzKHNoaXJyWzBdLngsIHNoaXJyWzBdLnksIHNoaXJyWzBdLnopOwogICAgaGlnaHAgdmVjMyBjbDFtMSA9IHZlYzMoc2hpcnJbMF0udywgc2hpcnJbMV0ueCwgc2hpcnJbMV0ueSk7CiAgICBoaWdocCB2ZWMzIGNsMTAgPSB2ZWMzKHNoaXJyWzFdLnosIHNoaXJyWzFdLncsIHNoaXJyWzJdLngpOwogICAgaGlnaHAgdmVjMyBjbDExID0gdmVjMyhzaGlyclsyXS55LCBzaGlyclsyXS56LCBzaGlyclsyXS53KTsKICAgIGhpZ2hwIHZlYzMgY2wybTIgPSB2ZWMzKHNoaXJyWzNdLngsIHNoaXJyWzNdLnksIHNoaXJyWzNdLnopOwogICAgaGlnaHAgdmVjMyBjbDJtMSA9IHZlYzMoc2hpcnJbM10udywgc2hpcnJbNF0ueCwgc2hpcnJbNF0ueSk7CiAgICBoaWdocCB2ZWMzIGNsMjAgPSB2ZWMzKHNoaXJyWzRdLnosIHNoaXJyWzRdLncsIHNoaXJyWzVdLngpOwogICAgaGlnaHAgdmVjMyBjbDIxID0gdmVjMyhzaGlycls1XS55LCBzaGlycls1XS56LCBzaGlycls1XS53KTsKICAgIGhpZ2hwIHZlYzMgY2wyMiA9IHZlYzMoc2hpcnJbNl0ueCwgc2hpcnJbNl0ueSwgc2hpcnJbNl0ueik7CiAgICByZXR1cm4gKCgoKCgoKCgoKGNsMjIgKiAwLjQyOTA0Mjk5NDk3NjA0MzcwMTE3MTg3NSkgKiAoKG5vci55ICogbm9yLnkpIC0gKCgtbm9yLnopICogKC1ub3IueikpKSkgKyAoKChjbDIwICogMC43NDMxMjUwMjE0NTc2NzIxMTkxNDA2MjUpICogbm9yLngpICogbm9yLngpKSArIChjbDAwICogMC44ODYyMjcwMTE2ODA2MDMwMjczNDM3NSkpIC0gKGNsMjAgKiAwLjI0NzcwNzk5Mjc5MjEyOTUxNjYwMTU2MjUpKSArICgoKGNsMm0yICogMC44NTgwODU5ODk5NTIwODc0MDIzNDM3NSkgKiBub3IueSkgKiAoLW5vci56KSkpICsgKCgoY2wyMSAqIDAuODU4MDg1OTg5OTUyMDg3NDAyMzQzNzUpICogbm9yLnkpICogbm9yLngpKSArICgoKGNsMm0xICogMC44NTgwODU5ODk5NTIwODc0MDIzNDM3NSkgKiAoLW5vci56KSkgKiBub3IueCkpICsgKChjbDExICogMS4wMjMzMjc5NDY2NjI5MDI4MzIwMzEyNSkgKiBub3IueSkpICsgKChjbDFtMSAqIDEuMDIzMzI3OTQ2NjYyOTAyODMyMDMxMjUpICogKC1ub3IueikpKSArICgoY2wxMCAqIDEuMDIzMzI3OTQ2NjYyOTAyODMyMDMxMjUpICogbm9yLngpOwp9Cgp2b2lkIG1haW4oKQp7CiAgICBoaWdocCB2ZWMzIG4gPSBub3JtYWxpemUod25vcm1hbCk7CiAgICBoaWdocCB2ZWM0IEltYWdlVGV4dHVyZV9zdG9yZSA9IHRleHR1cmUoSW1hZ2VUZXh0dXJlLCB0ZXhDb29yZCk7CiAgICBoaWdocCB2ZWMzIEltYWdlVGV4dHVyZV9Db2xvcl9yZXMgPSBJbWFnZVRleHR1cmVfc3RvcmUueHl6OwogICAgaGlnaHAgdmVjMyBiYXNlY29sID0gdmVjMygwLjExNDg4NzYwMjYyNzI3NzM3NDI2NzU3ODEyNSk7CiAgICBoaWdocCBmbG9hdCByb3VnaG5lc3MgPSBJbWFnZVRleHR1cmVfQ29sb3JfcmVzLng7CiAgICBoaWdocCBmbG9hdCBtZXRhbGxpYyA9IDAuMDsKICAgIGhpZ2hwIGZsb2F0IG9jY2x1c2lvbiA9IDEuMDsKICAgIGhpZ2hwIGZsb2F0IHNwZWN1bGFyID0gMS4wOwogICAgaGlnaHAgZmxvYXQgdmlzaWJpbGl0eSA9IDEuMDsKICAgIGhpZ2hwIGZsb2F0IGRvdE5MID0gbWF4KGRvdChuLCBsaWdodERpciksIDAuMCk7CiAgICBpZiAobGlnaHRQb3NpdGlvbi53ID4gMC4wKQogICAgewogICAgICAgIGhpZ2hwIHZlYzMgbFBvcyA9IGxpZ2h0UG9zaXRpb24ueHl6IC8gdmVjMyhsaWdodFBvc2l0aW9uLncpOwogICAgICAgIHZpc2liaWxpdHkgPSAwLjA7CiAgICAgICAgdmlzaWJpbGl0eSArPSBmbG9hdCgodGV4dHVyZShzaGFkb3dNYXAsIGxQb3MueHkpLnggKyBzaGFkb3dzQmlhcykgPiBsUG9zLnopOwogICAgICAgIHZpc2liaWxpdHkgKz0gKGZsb2F0KCh0ZXh0dXJlKHNoYWRvd01hcCwgbFBvcy54eSArIHZlYzIoMC4wMDA0ODgyODEyNSwgMC4wKSkueCArIHNoYWRvd3NCaWFzKSA%IGxQb3MueikgKiAwLjUpOwogICAgICAgIHZpc2liaWxpdHkgKz0gKGZsb2F0KCh0ZXh0dXJlKHNoYWRvd01hcCwgbFBvcy54eSArIHZlYzIoLTAuMDAwNDg4MjgxMjUsIDAuMCkpLnggKyBzaGFkb3dzQmlhcykgPiBsUG9zLnopICogMC4yNSk7CiAgICAgICAgdmlzaWJpbGl0eSArPSAoZmxvYXQoKHRleHR1cmUoc2hhZG93TWFwLCBsUG9zLnh5ICsgdmVjMigwLjAsIDAuMDAwNDg4MjgxMjUpKS54ICsgc2hhZG93c0JpYXMpID4gbFBvcy56KSAqIDAuNSk7CiAgICAgICAgdmlzaWJpbGl0eSArPSAoZmxvYXQoKHRleHR1cmUoc2hhZG93TWFwLCBsUG9zLnh5ICsgdmVjMigwLjAsIC0wLjAwMDQ4ODI4MTI1KSkueCArIHNoYWRvd3NCaWFzKSA%IGxQb3MueikgKiAwLjI1KTsKICAgICAgICB2aXNpYmlsaXR5IC89IDIuNTsKICAgICAgICB2aXNpYmlsaXR5ID0gbWF4KHZpc2liaWxpdHksIDAuMjAwMDAwMDAyOTgwMjMyMjM4NzY5NTMxMjUpOwogICAgfQogICAgaGlnaHAgdmVjMyBkaXJlY3QgPSAoYmFzZWNvbCAqIGRvdE5MKSAqIGxpZ2h0Q29sb3I7CiAgICBkaXJlY3QgKj0gYXR0ZW51YXRlKGRpc3RhbmNlKHdwb3NpdGlvbiwgbGlnaHRQb3MpKTsKICAgIGZyYWdDb2xvciA9IHZlYzQoKGRpcmVjdCAqIHZpc2liaWxpdHkpICsgKChiYXNlY29sICogc2hJcnJhZGlhbmNlKG4pKSAqIGVudm1hcFN0cmVuZ3RoKSwgMS4wKTsKfQoK",Ne.Projectile_mesh_vertData0="s508:I3ZlcnNpb24gMTAwCgp1bmlmb3JtIG1hdDQgVzsKdW5pZm9ybSBtYXQzIE47CnVuaWZvcm0gbWF0NCBXVlA7CnVuaWZvcm0gbWF0NCBMV1ZQOwoKYXR0cmlidXRlIHZlYzMgcG9zOwp2YXJ5aW5nIHZlYzMgd3Bvc2l0aW9uOwp2YXJ5aW5nIHZlYzMgd25vcm1hbDsKYXR0cmlidXRlIHZlYzMgbm9yOwp2YXJ5aW5nIHZlYzQgbGlnaHRQb3NpdGlvbjsKCnZvaWQgbWFpbigpCnsKICAgIHZlYzQgc3BvcyA9IHZlYzQocG9zLCAxLjApOwogICAgd3Bvc2l0aW9uID0gdmVjNChXICogc3BvcykueHl6OwogICAgd25vcm1hbCA9IG5vcm1hbGl6ZShOICogbm9yKTsKICAgIGdsX1Bvc2l0aW9uID0gV1ZQICogc3BvczsKICAgIGxpZ2h0UG9zaXRpb24gPSBMV1ZQICogc3BvczsKfQoK",Ne.Projectile_mesh_vertData1="s615:I3ZlcnNpb24gMTAwCgp1bmlmb3JtIG1lZGl1bXAgbWF0NCBXOwp1bmlmb3JtIG1lZGl1bXAgbWF0MyBOOwp1bmlmb3JtIG1lZGl1bXAgbWF0NCBXVlA7CnVuaWZvcm0gbWVkaXVtcCBtYXQ0IExXVlA7CgphdHRyaWJ1dGUgbWVkaXVtcCB2ZWMzIHBvczsKdmFyeWluZyBtZWRpdW1wIHZlYzMgd3Bvc2l0aW9uOwp2YXJ5aW5nIG1lZGl1bXAgdmVjMyB3bm9ybWFsOwphdHRyaWJ1dGUgbWVkaXVtcCB2ZWMzIG5vcjsKdmFyeWluZyBtZWRpdW1wIHZlYzQgbGlnaHRQb3NpdGlvbjsKCnZvaWQgbWFpbigpCnsKICAgIG1lZGl1bXAgdmVjNCBzcG9zID0gdmVjNChwb3MsIDEuMCk7CiAgICB3cG9zaXRpb24gPSB2ZWM0KFcgKiBzcG9zKS54eXo7CiAgICB3bm9ybWFsID0gbm9ybWFsaXplKE4gKiBub3IpOwogICAgZ2xfUG9zaXRpb24gPSBXVlAgKiBzcG9zOwogICAgbGlnaHRQb3NpdGlvbiA9IExXVlAgKiBzcG9zOwp9Cgo",Ne.Projectile_mesh_vertData2="s478:I3ZlcnNpb24gMzAwIGVzCgp1bmlmb3JtIG1hdDQgVzsKdW5pZm9ybSBtYXQzIE47CnVuaWZvcm0gbWF0NCBXVlA7CnVuaWZvcm0gbWF0NCBMV1ZQOwoKaW4gdmVjMyBwb3M7Cm91dCB2ZWMzIHdwb3NpdGlvbjsKb3V0IHZlYzMgd25vcm1hbDsKaW4gdmVjMyBub3I7Cm91dCB2ZWM0IGxpZ2h0UG9zaXRpb247Cgp2b2lkIG1haW4oKQp7CiAgICB2ZWM0IHNwb3MgPSB2ZWM0KHBvcywgMS4wKTsKICAgIHdwb3NpdGlvbiA9IHZlYzQoVyAqIHNwb3MpLnh5ejsKICAgIHdub3JtYWwgPSBub3JtYWxpemUoTiAqIG5vcik7CiAgICBnbF9Qb3NpdGlvbiA9IFdWUCAqIHNwb3M7CiAgICBsaWdodFBvc2l0aW9uID0gTFdWUCAqIHNwb3M7Cn0KCg",Ne.Projectile_mesh_fragData0="s4048:I3ZlcnNpb24gMTAwCnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OwpwcmVjaXNpb24gaGlnaHAgaW50OwoKdW5pZm9ybSBoaWdocCB2ZWM0IHNoaXJyWzddOwp1bmlmb3JtIGhpZ2hwIHZlYzMgbGlnaHREaXI7CnVuaWZvcm0gaGlnaHAgc2FtcGxlcjJEIHNoYWRvd01hcDsKdW5pZm9ybSBoaWdocCBmbG9hdCBzaGFkb3dzQmlhczsKdW5pZm9ybSBoaWdocCB2ZWMzIGxpZ2h0Q29sb3I7CnVuaWZvcm0gaGlnaHAgdmVjMyBsaWdodFBvczsKdW5pZm9ybSBoaWdocCBmbG9hdCBlbnZtYXBTdHJlbmd0aDsKCnZhcnlpbmcgaGlnaHAgdmVjMyB3bm9ybWFsOwp2YXJ5aW5nIGhpZ2hwIHZlYzQgbGlnaHRQb3NpdGlvbjsKdmFyeWluZyBoaWdocCB2ZWMzIHdwb3NpdGlvbjsKCmhpZ2hwIGZsb2F0IGF0dGVudWF0ZShoaWdocCBmbG9hdCBkaXN0KQp7CiAgICByZXR1cm4gMS4wIC8gKGRpc3QgKiBkaXN0KTsKfQoKaGlnaHAgdmVjMyBzaElycmFkaWFuY2UoaGlnaHAgdmVjMyBub3IpCnsKICAgIGhpZ2hwIHZlYzMgY2wwMCA9IHZlYzMoc2hpcnJbMF0ueCwgc2hpcnJbMF0ueSwgc2hpcnJbMF0ueik7CiAgICBoaWdocCB2ZWMzIGNsMW0xID0gdmVjMyhzaGlyclswXS53LCBzaGlyclsxXS54LCBzaGlyclsxXS55KTsKICAgIGhpZ2hwIHZlYzMgY2wxMCA9IHZlYzMoc2hpcnJbMV0ueiwgc2hpcnJbMV0udywgc2hpcnJbMl0ueCk7CiAgICBoaWdocCB2ZWMzIGNsMTEgPSB2ZWMzKHNoaXJyWzJdLnksIHNoaXJyWzJdLnosIHNoaXJyWzJdLncpOwogICAgaGlnaHAgdmVjMyBjbDJtMiA9IHZlYzMoc2hpcnJbM10ueCwgc2hpcnJbM10ueSwgc2hpcnJbM10ueik7CiAgICBoaWdocCB2ZWMzIGNsMm0xID0gdmVjMyhzaGlyclszXS53LCBzaGlycls0XS54LCBzaGlycls0XS55KTsKICAgIGhpZ2hwIHZlYzMgY2wyMCA9IHZlYzMoc2hpcnJbNF0ueiwgc2hpcnJbNF0udywgc2hpcnJbNV0ueCk7CiAgICBoaWdocCB2ZWMzIGNsMjEgPSB2ZWMzKHNoaXJyWzVdLnksIHNoaXJyWzVdLnosIHNoaXJyWzVdLncpOwogICAgaGlnaHAgdmVjMyBjbDIyID0gdmVjMyhzaGlycls2XS54LCBzaGlycls2XS55LCBzaGlycls2XS56KTsKICAgIHJldHVybiAoKCgoKCgoKCgoY2wyMiAqIDAuNDI5MDQyOTk0OTc2MDQzNzAxMTcxODc1KSAqICgobm9yLnkgKiBub3IueSkgLSAoKC1ub3IueikgKiAoLW5vci56KSkpKSArICgoKGNsMjAgKiAwLjc0MzEyNTAyMTQ1NzY3MjExOTE0MDYyNSkgKiBub3IueCkgKiBub3IueCkpICsgKGNsMDAgKiAwLjg4NjIyNzAxMTY4MDYwMzAyNzM0Mzc1KSkgLSAoY2wyMCAqIDAuMjQ3NzA3OTkyNzkyMTI5NTE2NjAxNTYyNSkpICsgKCgoY2wybTIgKiAwLjg1ODA4NTk4OTk1MjA4NzQwMjM0Mzc1KSAqIG5vci55KSAqICgtbm9yLnopKSkgKyAoKChjbDIxICogMC44NTgwODU5ODk5NTIwODc0MDIzNDM3NSkgKiBub3IueSkgKiBub3IueCkpICsgKCgoY2wybTEgKiAwLjg1ODA4NTk4OTk1MjA4NzQwMjM0Mzc1KSAqICgtbm9yLnopKSAqIG5vci54KSkgKyAoKGNsMTEgKiAxLjAyMzMyNzk0NjY2MjkwMjgzMjAzMTI1KSAqIG5vci55KSkgKyAoKGNsMW0xICogMS4wMjMzMjc5NDY2NjI5MDI4MzIwMzEyNSkgKiAoLW5vci56KSkpICsgKChjbDEwICogMS4wMjMzMjc5NDY2NjI5MDI4MzIwMzEyNSkgKiBub3IueCk7Cn0KCnZvaWQgbWFpbigpCnsKICAgIGhpZ2hwIHZlYzMgbiA9IG5vcm1hbGl6ZSh3bm9ybWFsKTsKICAgIGhpZ2hwIHZlYzMgYmFzZWNvbCA9IHZlYzMoMC44MDAwMDAwNzE1MjU1NzM3MzA0Njg3NSwgMC42MTIwNTE1NDY1NzM2Mzg5MTYwMTU2MjUsIDAuMCk7CiAgICBoaWdocCBmbG9hdCByb3VnaG5lc3MgPSAwLjA7CiAgICBoaWdocCBmbG9hdCBtZXRhbGxpYyA9IDAuMDsKICAgIGhpZ2hwIGZsb2F0IG9jY2x1c2lvbiA9IDEuMDsKICAgIGhpZ2hwIGZsb2F0IHNwZWN1bGFyID0gMC4wOwogICAgaGlnaHAgZmxvYXQgdmlzaWJpbGl0eSA9IDEuMDsKICAgIGhpZ2hwIGZsb2F0IGRvdE5MID0gbWF4KGRvdChuLCBsaWdodERpciksIDAuMCk7CiAgICBpZiAobGlnaHRQb3NpdGlvbi53ID4gMC4wKQogICAgewogICAgICAgIGhpZ2hwIHZlYzMgbFBvcyA9IGxpZ2h0UG9zaXRpb24ueHl6IC8gdmVjMyhsaWdodFBvc2l0aW9uLncpOwogICAgICAgIHZpc2liaWxpdHkgPSAwLjA7CiAgICAgICAgdmlzaWJpbGl0eSArPSBmbG9hdCgodGV4dHVyZTJEKHNoYWRvd01hcCwgbFBvcy54eSkueCArIHNoYWRvd3NCaWFzKSA%IGxQb3Mueik7CiAgICAgICAgdmlzaWJpbGl0eSArPSAoZmxvYXQoKHRleHR1cmUyRChzaGFkb3dNYXAsIGxQb3MueHkgKyB2ZWMyKDAuMDAwNDg4MjgxMjUsIDAuMCkpLnggKyBzaGFkb3dzQmlhcykgPiBsUG9zLnopICogMC41KTsKICAgICAgICB2aXNpYmlsaXR5ICs9IChmbG9hdCgodGV4dHVyZTJEKHNoYWRvd01hcCwgbFBvcy54eSArIHZlYzIoLTAuMDAwNDg4MjgxMjUsIDAuMCkpLnggKyBzaGFkb3dzQmlhcykgPiBsUG9zLnopICogMC4yNSk7CiAgICAgICAgdmlzaWJpbGl0eSArPSAoZmxvYXQoKHRleHR1cmUyRChzaGFkb3dNYXAsIGxQb3MueHkgKyB2ZWMyKDAuMCwgMC4wMDA0ODgyODEyNSkpLnggKyBzaGFkb3dzQmlhcykgPiBsUG9zLnopICogMC41KTsKICAgICAgICB2aXNpYmlsaXR5ICs9IChmbG9hdCgodGV4dHVyZTJEKHNoYWRvd01hcCwgbFBvcy54eSArIHZlYzIoMC4wLCAtMC4wMDA0ODgyODEyNSkpLnggKyBzaGFkb3dzQmlhcykgPiBsUG9zLnopICogMC4yNSk7CiAgICAgICAgdmlzaWJpbGl0eSAvPSAyLjU7CiAgICAgICAgdmlzaWJpbGl0eSA9IG1heCh2aXNpYmlsaXR5LCAwLjIwMDAwMDAwMjk4MDIzMjIzODc2OTUzMTI1KTsKICAgIH0KICAgIGhpZ2hwIHZlYzMgZGlyZWN0ID0gKGJhc2Vjb2wgKiBkb3ROTCkgKiBsaWdodENvbG9yOwogICAgZGlyZWN0ICo9IGF0dGVudWF0ZShkaXN0YW5jZSh3cG9zaXRpb24sIGxpZ2h0UG9zKSk7CiAgICBnbF9GcmFnRGF0YVswXSA9IHZlYzQoKGRpcmVjdCAqIHZpc2liaWxpdHkpICsgKChiYXNlY29sICogc2hJcnJhZGlhbmNlKG4pKSAqIGVudm1hcFN0cmVuZ3RoKSwgMS4wKTsKfQoK",Ne.Projectile_mesh_fragData1="s3798:I3ZlcnNpb24gMTAwCnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OwpwcmVjaXNpb24gbWVkaXVtcCBpbnQ7Cgp1bmlmb3JtIHZlYzQgc2hpcnJbN107CnVuaWZvcm0gdmVjMyBsaWdodERpcjsKdW5pZm9ybSBtZWRpdW1wIHNhbXBsZXIyRCBzaGFkb3dNYXA7CnVuaWZvcm0gZmxvYXQgc2hhZG93c0JpYXM7CnVuaWZvcm0gdmVjMyBsaWdodENvbG9yOwp1bmlmb3JtIHZlYzMgbGlnaHRQb3M7CnVuaWZvcm0gZmxvYXQgZW52bWFwU3RyZW5ndGg7Cgp2YXJ5aW5nIHZlYzMgd25vcm1hbDsKdmFyeWluZyB2ZWM0IGxpZ2h0UG9zaXRpb247CnZhcnlpbmcgdmVjMyB3cG9zaXRpb247CgpmbG9hdCBhdHRlbnVhdGUoZmxvYXQgZGlzdCkKewogICAgcmV0dXJuIDEuMCAvIChkaXN0ICogZGlzdCk7Cn0KCnZlYzMgc2hJcnJhZGlhbmNlKHZlYzMgbm9yKQp7CiAgICB2ZWMzIGNsMDAgPSB2ZWMzKHNoaXJyWzBdLngsIHNoaXJyWzBdLnksIHNoaXJyWzBdLnopOwogICAgdmVjMyBjbDFtMSA9IHZlYzMoc2hpcnJbMF0udywgc2hpcnJbMV0ueCwgc2hpcnJbMV0ueSk7CiAgICB2ZWMzIGNsMTAgPSB2ZWMzKHNoaXJyWzFdLnosIHNoaXJyWzFdLncsIHNoaXJyWzJdLngpOwogICAgdmVjMyBjbDExID0gdmVjMyhzaGlyclsyXS55LCBzaGlyclsyXS56LCBzaGlyclsyXS53KTsKICAgIHZlYzMgY2wybTIgPSB2ZWMzKHNoaXJyWzNdLngsIHNoaXJyWzNdLnksIHNoaXJyWzNdLnopOwogICAgdmVjMyBjbDJtMSA9IHZlYzMoc2hpcnJbM10udywgc2hpcnJbNF0ueCwgc2hpcnJbNF0ueSk7CiAgICB2ZWMzIGNsMjAgPSB2ZWMzKHNoaXJyWzRdLnosIHNoaXJyWzRdLncsIHNoaXJyWzVdLngpOwogICAgdmVjMyBjbDIxID0gdmVjMyhzaGlycls1XS55LCBzaGlycls1XS56LCBzaGlycls1XS53KTsKICAgIHZlYzMgY2wyMiA9IHZlYzMoc2hpcnJbNl0ueCwgc2hpcnJbNl0ueSwgc2hpcnJbNl0ueik7CiAgICByZXR1cm4gKCgoKCgoKCgoKGNsMjIgKiAwLjQyOTA0Mjk5NDk3NjA0MzcwMTE3MTg3NSkgKiAoKG5vci55ICogbm9yLnkpIC0gKCgtbm9yLnopICogKC1ub3IueikpKSkgKyAoKChjbDIwICogMC43NDMxMjUwMjE0NTc2NzIxMTkxNDA2MjUpICogbm9yLngpICogbm9yLngpKSArIChjbDAwICogMC44ODYyMjcwMTE2ODA2MDMwMjczNDM3NSkpIC0gKGNsMjAgKiAwLjI0NzcwNzk5Mjc5MjEyOTUxNjYwMTU2MjUpKSArICgoKGNsMm0yICogMC44NTgwODU5ODk5NTIwODc0MDIzNDM3NSkgKiBub3IueSkgKiAoLW5vci56KSkpICsgKCgoY2wyMSAqIDAuODU4MDg1OTg5OTUyMDg3NDAyMzQzNzUpICogbm9yLnkpICogbm9yLngpKSArICgoKGNsMm0xICogMC44NTgwODU5ODk5NTIwODc0MDIzNDM3NSkgKiAoLW5vci56KSkgKiBub3IueCkpICsgKChjbDExICogMS4wMjMzMjc5NDY2NjI5MDI4MzIwMzEyNSkgKiBub3IueSkpICsgKChjbDFtMSAqIDEuMDIzMzI3OTQ2NjYyOTAyODMyMDMxMjUpICogKC1ub3IueikpKSArICgoY2wxMCAqIDEuMDIzMzI3OTQ2NjYyOTAyODMyMDMxMjUpICogbm9yLngpOwp9Cgp2b2lkIG1haW4oKQp7CiAgICB2ZWMzIG4gPSBub3JtYWxpemUod25vcm1hbCk7CiAgICB2ZWMzIGJhc2Vjb2wgPSB2ZWMzKDAuODAwMDAwMDcxNTI1NTczNzMwNDY4NzUsIDAuNjEyMDUxNTQ2NTczNjM4OTE2MDE1NjI1LCAwLjApOwogICAgZmxvYXQgcm91Z2huZXNzID0gMC4wOwogICAgZmxvYXQgbWV0YWxsaWMgPSAwLjA7CiAgICBmbG9hdCBvY2NsdXNpb24gPSAxLjA7CiAgICBmbG9hdCBzcGVjdWxhciA9IDAuMDsKICAgIGZsb2F0IHZpc2liaWxpdHkgPSAxLjA7CiAgICBmbG9hdCBkb3ROTCA9IG1heChkb3QobiwgbGlnaHREaXIpLCAwLjApOwogICAgaWYgKGxpZ2h0UG9zaXRpb24udyA%IDAuMCkKICAgIHsKICAgICAgICB2ZWMzIGxQb3MgPSBsaWdodFBvc2l0aW9uLnh5eiAvIHZlYzMobGlnaHRQb3NpdGlvbi53KTsKICAgICAgICB2aXNpYmlsaXR5ID0gMC4wOwogICAgICAgIHZpc2liaWxpdHkgKz0gZmxvYXQoKHRleHR1cmUyRChzaGFkb3dNYXAsIGxQb3MueHkpLnggKyBzaGFkb3dzQmlhcykgPiBsUG9zLnopOwogICAgICAgIHZpc2liaWxpdHkgKz0gKGZsb2F0KCh0ZXh0dXJlMkQoc2hhZG93TWFwLCBsUG9zLnh5ICsgdmVjMigwLjAwMDQ4ODI4MTI1LCAwLjApKS54ICsgc2hhZG93c0JpYXMpID4gbFBvcy56KSAqIDAuNSk7CiAgICAgICAgdmlzaWJpbGl0eSArPSAoZmxvYXQoKHRleHR1cmUyRChzaGFkb3dNYXAsIGxQb3MueHkgKyB2ZWMyKC0wLjAwMDQ4ODI4MTI1LCAwLjApKS54ICsgc2hhZG93c0JpYXMpID4gbFBvcy56KSAqIDAuMjUpOwogICAgICAgIHZpc2liaWxpdHkgKz0gKGZsb2F0KCh0ZXh0dXJlMkQoc2hhZG93TWFwLCBsUG9zLnh5ICsgdmVjMigwLjAsIDAuMDAwNDg4MjgxMjUpKS54ICsgc2hhZG93c0JpYXMpID4gbFBvcy56KSAqIDAuNSk7CiAgICAgICAgdmlzaWJpbGl0eSArPSAoZmxvYXQoKHRleHR1cmUyRChzaGFkb3dNYXAsIGxQb3MueHkgKyB2ZWMyKDAuMCwgLTAuMDAwNDg4MjgxMjUpKS54ICsgc2hhZG93c0JpYXMpID4gbFBvcy56KSAqIDAuMjUpOwogICAgICAgIHZpc2liaWxpdHkgLz0gMi41OwogICAgICAgIHZpc2liaWxpdHkgPSBtYXgodmlzaWJpbGl0eSwgMC4yMDAwMDAwMDI5ODAyMzIyMzg3Njk1MzEyNSk7CiAgICB9CiAgICB2ZWMzIGRpcmVjdCA9IChiYXNlY29sICogZG90TkwpICogbGlnaHRDb2xvcjsKICAgIGRpcmVjdCAqPSBhdHRlbnVhdGUoZGlzdGFuY2Uod3Bvc2l0aW9uLCBsaWdodFBvcykpOwogICAgZ2xfRnJhZ0RhdGFbMF0gPSB2ZWM0KChkaXJlY3QgKiB2aXNpYmlsaXR5KSArICgoYmFzZWNvbCAqIHNoSXJyYWRpYW5jZShuKSkgKiBlbnZtYXBTdHJlbmd0aCksIDEuMCk7Cn0KCg",Ne.Projectile_mesh_fragData2="s4047:I3ZlcnNpb24gMzAwIGVzCnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OwpwcmVjaXNpb24gaGlnaHAgaW50OwoKdW5pZm9ybSBoaWdocCB2ZWM0IHNoaXJyWzddOwp1bmlmb3JtIGhpZ2hwIHZlYzMgbGlnaHREaXI7CnVuaWZvcm0gaGlnaHAgc2FtcGxlcjJEIHNoYWRvd01hcDsKdW5pZm9ybSBoaWdocCBmbG9hdCBzaGFkb3dzQmlhczsKdW5pZm9ybSBoaWdocCB2ZWMzIGxpZ2h0Q29sb3I7CnVuaWZvcm0gaGlnaHAgdmVjMyBsaWdodFBvczsKdW5pZm9ybSBoaWdocCBmbG9hdCBlbnZtYXBTdHJlbmd0aDsKCmluIGhpZ2hwIHZlYzMgd25vcm1hbDsKaW4gaGlnaHAgdmVjNCBsaWdodFBvc2l0aW9uOwppbiBoaWdocCB2ZWMzIHdwb3NpdGlvbjsKb3V0IGhpZ2hwIHZlYzQgZnJhZ0NvbG9yOwoKaGlnaHAgZmxvYXQgYXR0ZW51YXRlKGhpZ2hwIGZsb2F0IGRpc3QpCnsKICAgIHJldHVybiAxLjAgLyAoZGlzdCAqIGRpc3QpOwp9CgpoaWdocCB2ZWMzIHNoSXJyYWRpYW5jZShoaWdocCB2ZWMzIG5vcikKewogICAgaGlnaHAgdmVjMyBjbDAwID0gdmVjMyhzaGlyclswXS54LCBzaGlyclswXS55LCBzaGlyclswXS56KTsKICAgIGhpZ2hwIHZlYzMgY2wxbTEgPSB2ZWMzKHNoaXJyWzBdLncsIHNoaXJyWzFdLngsIHNoaXJyWzFdLnkpOwogICAgaGlnaHAgdmVjMyBjbDEwID0gdmVjMyhzaGlyclsxXS56LCBzaGlyclsxXS53LCBzaGlyclsyXS54KTsKICAgIGhpZ2hwIHZlYzMgY2wxMSA9IHZlYzMoc2hpcnJbMl0ueSwgc2hpcnJbMl0ueiwgc2hpcnJbMl0udyk7CiAgICBoaWdocCB2ZWMzIGNsMm0yID0gdmVjMyhzaGlyclszXS54LCBzaGlyclszXS55LCBzaGlyclszXS56KTsKICAgIGhpZ2hwIHZlYzMgY2wybTEgPSB2ZWMzKHNoaXJyWzNdLncsIHNoaXJyWzRdLngsIHNoaXJyWzRdLnkpOwogICAgaGlnaHAgdmVjMyBjbDIwID0gdmVjMyhzaGlycls0XS56LCBzaGlycls0XS53LCBzaGlycls1XS54KTsKICAgIGhpZ2hwIHZlYzMgY2wyMSA9IHZlYzMoc2hpcnJbNV0ueSwgc2hpcnJbNV0ueiwgc2hpcnJbNV0udyk7CiAgICBoaWdocCB2ZWMzIGNsMjIgPSB2ZWMzKHNoaXJyWzZdLngsIHNoaXJyWzZdLnksIHNoaXJyWzZdLnopOwogICAgcmV0dXJuICgoKCgoKCgoKChjbDIyICogMC40MjkwNDI5OTQ5NzYwNDM3MDExNzE4NzUpICogKChub3IueSAqIG5vci55KSAtICgoLW5vci56KSAqICgtbm9yLnopKSkpICsgKCgoY2wyMCAqIDAuNzQzMTI1MDIxNDU3NjcyMTE5MTQwNjI1KSAqIG5vci54KSAqIG5vci54KSkgKyAoY2wwMCAqIDAuODg2MjI3MDExNjgwNjAzMDI3MzQzNzUpKSAtIChjbDIwICogMC4yNDc3MDc5OTI3OTIxMjk1MTY2MDE1NjI1KSkgKyAoKChjbDJtMiAqIDAuODU4MDg1OTg5OTUyMDg3NDAyMzQzNzUpICogbm9yLnkpICogKC1ub3IueikpKSArICgoKGNsMjEgKiAwLjg1ODA4NTk4OTk1MjA4NzQwMjM0Mzc1KSAqIG5vci55KSAqIG5vci54KSkgKyAoKChjbDJtMSAqIDAuODU4MDg1OTg5OTUyMDg3NDAyMzQzNzUpICogKC1ub3IueikpICogbm9yLngpKSArICgoY2wxMSAqIDEuMDIzMzI3OTQ2NjYyOTAyODMyMDMxMjUpICogbm9yLnkpKSArICgoY2wxbTEgKiAxLjAyMzMyNzk0NjY2MjkwMjgzMjAzMTI1KSAqICgtbm9yLnopKSkgKyAoKGNsMTAgKiAxLjAyMzMyNzk0NjY2MjkwMjgzMjAzMTI1KSAqIG5vci54KTsKfQoKdm9pZCBtYWluKCkKewogICAgaGlnaHAgdmVjMyBuID0gbm9ybWFsaXplKHdub3JtYWwpOwogICAgaGlnaHAgdmVjMyBiYXNlY29sID0gdmVjMygwLjgwMDAwMDA3MTUyNTU3MzczMDQ2ODc1LCAwLjYxMjA1MTU0NjU3MzYzODkxNjAxNTYyNSwgMC4wKTsKICAgIGhpZ2hwIGZsb2F0IHJvdWdobmVzcyA9IDAuMDsKICAgIGhpZ2hwIGZsb2F0IG1ldGFsbGljID0gMC4wOwogICAgaGlnaHAgZmxvYXQgb2NjbHVzaW9uID0gMS4wOwogICAgaGlnaHAgZmxvYXQgc3BlY3VsYXIgPSAwLjA7CiAgICBoaWdocCBmbG9hdCB2aXNpYmlsaXR5ID0gMS4wOwogICAgaGlnaHAgZmxvYXQgZG90TkwgPSBtYXgoZG90KG4sIGxpZ2h0RGlyKSwgMC4wKTsKICAgIGlmIChsaWdodFBvc2l0aW9uLncgPiAwLjApCiAgICB7CiAgICAgICAgaGlnaHAgdmVjMyBsUG9zID0gbGlnaHRQb3NpdGlvbi54eXogLyB2ZWMzKGxpZ2h0UG9zaXRpb24udyk7CiAgICAgICAgdmlzaWJpbGl0eSA9IDAuMDsKICAgICAgICB2aXNpYmlsaXR5ICs9IGZsb2F0KCh0ZXh0dXJlKHNoYWRvd01hcCwgbFBvcy54eSkueCArIHNoYWRvd3NCaWFzKSA%IGxQb3Mueik7CiAgICAgICAgdmlzaWJpbGl0eSArPSAoZmxvYXQoKHRleHR1cmUoc2hhZG93TWFwLCBsUG9zLnh5ICsgdmVjMigwLjAwMDQ4ODI4MTI1LCAwLjApKS54ICsgc2hhZG93c0JpYXMpID4gbFBvcy56KSAqIDAuNSk7CiAgICAgICAgdmlzaWJpbGl0eSArPSAoZmxvYXQoKHRleHR1cmUoc2hhZG93TWFwLCBsUG9zLnh5ICsgdmVjMigtMC4wMDA0ODgyODEyNSwgMC4wKSkueCArIHNoYWRvd3NCaWFzKSA%IGxQb3MueikgKiAwLjI1KTsKICAgICAgICB2aXNpYmlsaXR5ICs9IChmbG9hdCgodGV4dHVyZShzaGFkb3dNYXAsIGxQb3MueHkgKyB2ZWMyKDAuMCwgMC4wMDA0ODgyODEyNSkpLnggKyBzaGFkb3dzQmlhcykgPiBsUG9zLnopICogMC41KTsKICAgICAgICB2aXNpYmlsaXR5ICs9IChmbG9hdCgodGV4dHVyZShzaGFkb3dNYXAsIGxQb3MueHkgKyB2ZWMyKDAuMCwgLTAuMDAwNDg4MjgxMjUpKS54ICsgc2hhZG93c0JpYXMpID4gbFBvcy56KSAqIDAuMjUpOwogICAgICAgIHZpc2liaWxpdHkgLz0gMi41OwogICAgICAgIHZpc2liaWxpdHkgPSBtYXgodmlzaWJpbGl0eSwgMC4yMDAwMDAwMDI5ODAyMzIyMzg3Njk1MzEyNSk7CiAgICB9CiAgICBoaWdocCB2ZWMzIGRpcmVjdCA9IChiYXNlY29sICogZG90TkwpICogbGlnaHRDb2xvcjsKICAgIGRpcmVjdCAqPSBhdHRlbnVhdGUoZGlzdGFuY2Uod3Bvc2l0aW9uLCBsaWdodFBvcykpOwogICAgZnJhZ0NvbG9yID0gdmVjNCgoZGlyZWN0ICogdmlzaWJpbGl0eSkgKyAoKGJhc2Vjb2wgKiBzaElycmFkaWFuY2UobikpICogZW52bWFwU3RyZW5ndGgpLCAxLjApOwp9Cgo",Ne.Red_mesh_fragData0="s4380:I3ZlcnNpb24gMTAwCnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OwpwcmVjaXNpb24gaGlnaHAgaW50OwoKdW5pZm9ybSBoaWdocCB2ZWM0IHNoaXJyWzddOwp1bmlmb3JtIGhpZ2hwIHNhbXBsZXIyRCBJbWFnZVRleHR1cmU7CnVuaWZvcm0gaGlnaHAgdmVjMyBsaWdodERpcjsKdW5pZm9ybSBoaWdocCBzYW1wbGVyMkQgc2hhZG93TWFwOwp1bmlmb3JtIGhpZ2hwIGZsb2F0IHNoYWRvd3NCaWFzOwp1bmlmb3JtIGhpZ2hwIHZlYzMgbGlnaHRDb2xvcjsKdW5pZm9ybSBoaWdocCB2ZWMzIGxpZ2h0UG9zOwp1bmlmb3JtIGhpZ2hwIGZsb2F0IGVudm1hcFN0cmVuZ3RoOwoKdmFyeWluZyBoaWdocCB2ZWMzIHdub3JtYWw7CnZhcnlpbmcgaGlnaHAgdmVjMiB0ZXhDb29yZDsKdmFyeWluZyBoaWdocCB2ZWM0IGxpZ2h0UG9zaXRpb247CnZhcnlpbmcgaGlnaHAgdmVjMyB3cG9zaXRpb247CgpoaWdocCBmbG9hdCBhdHRlbnVhdGUoaGlnaHAgZmxvYXQgZGlzdCkKewogICAgcmV0dXJuIDEuMCAvIChkaXN0ICogZGlzdCk7Cn0KCmhpZ2hwIHZlYzMgc2hJcnJhZGlhbmNlKGhpZ2hwIHZlYzMgbm9yKQp7CiAgICBoaWdocCB2ZWMzIGNsMDAgPSB2ZWMzKHNoaXJyWzBdLngsIHNoaXJyWzBdLnksIHNoaXJyWzBdLnopOwogICAgaGlnaHAgdmVjMyBjbDFtMSA9IHZlYzMoc2hpcnJbMF0udywgc2hpcnJbMV0ueCwgc2hpcnJbMV0ueSk7CiAgICBoaWdocCB2ZWMzIGNsMTAgPSB2ZWMzKHNoaXJyWzFdLnosIHNoaXJyWzFdLncsIHNoaXJyWzJdLngpOwogICAgaGlnaHAgdmVjMyBjbDExID0gdmVjMyhzaGlyclsyXS55LCBzaGlyclsyXS56LCBzaGlyclsyXS53KTsKICAgIGhpZ2hwIHZlYzMgY2wybTIgPSB2ZWMzKHNoaXJyWzNdLngsIHNoaXJyWzNdLnksIHNoaXJyWzNdLnopOwogICAgaGlnaHAgdmVjMyBjbDJtMSA9IHZlYzMoc2hpcnJbM10udywgc2hpcnJbNF0ueCwgc2hpcnJbNF0ueSk7CiAgICBoaWdocCB2ZWMzIGNsMjAgPSB2ZWMzKHNoaXJyWzRdLnosIHNoaXJyWzRdLncsIHNoaXJyWzVdLngpOwogICAgaGlnaHAgdmVjMyBjbDIxID0gdmVjMyhzaGlycls1XS55LCBzaGlycls1XS56LCBzaGlycls1XS53KTsKICAgIGhpZ2hwIHZlYzMgY2wyMiA9IHZlYzMoc2hpcnJbNl0ueCwgc2hpcnJbNl0ueSwgc2hpcnJbNl0ueik7CiAgICByZXR1cm4gKCgoKCgoKCgoKGNsMjIgKiAwLjQyOTA0Mjk5NDk3NjA0MzcwMTE3MTg3NSkgKiAoKG5vci55ICogbm9yLnkpIC0gKCgtbm9yLnopICogKC1ub3IueikpKSkgKyAoKChjbDIwICogMC43NDMxMjUwMjE0NTc2NzIxMTkxNDA2MjUpICogbm9yLngpICogbm9yLngpKSArIChjbDAwICogMC44ODYyMjcwMTE2ODA2MDMwMjczNDM3NSkpIC0gKGNsMjAgKiAwLjI0NzcwNzk5Mjc5MjEyOTUxNjYwMTU2MjUpKSArICgoKGNsMm0yICogMC44NTgwODU5ODk5NTIwODc0MDIzNDM3NSkgKiBub3IueSkgKiAoLW5vci56KSkpICsgKCgoY2wyMSAqIDAuODU4MDg1OTg5OTUyMDg3NDAyMzQzNzUpICogbm9yLnkpICogbm9yLngpKSArICgoKGNsMm0xICogMC44NTgwODU5ODk5NTIwODc0MDIzNDM3NSkgKiAoLW5vci56KSkgKiBub3IueCkpICsgKChjbDExICogMS4wMjMzMjc5NDY2NjI5MDI4MzIwMzEyNSkgKiBub3IueSkpICsgKChjbDFtMSAqIDEuMDIzMzI3OTQ2NjYyOTAyODMyMDMxMjUpICogKC1ub3IueikpKSArICgoY2wxMCAqIDEuMDIzMzI3OTQ2NjYyOTAyODMyMDMxMjUpICogbm9yLngpOwp9Cgp2b2lkIG1haW4oKQp7CiAgICBoaWdocCB2ZWMzIG4gPSBub3JtYWxpemUod25vcm1hbCk7CiAgICBoaWdocCB2ZWM0IEltYWdlVGV4dHVyZV9zdG9yZSA9IHRleHR1cmUyRChJbWFnZVRleHR1cmUsIHRleENvb3JkKTsKICAgIGhpZ2hwIHZlYzMgSW1hZ2VUZXh0dXJlX0NvbG9yX3JlcyA9IEltYWdlVGV4dHVyZV9zdG9yZS54eXo7CiAgICBoaWdocCB2ZWMzIGJhc2Vjb2wgPSB2ZWMzKDAuOTU4NzgwMTY5NDg2OTk5NTExNzE4NzUsIDAuMDgzODA0NTQ3Nzg2NzEyNjQ2NDg0Mzc1LCAwLjA4NzI2MTM4NjIxNTY4Njc5ODA5NTcwMzEyNSk7CiAgICBoaWdocCBmbG9hdCByb3VnaG5lc3MgPSBJbWFnZVRleHR1cmVfQ29sb3JfcmVzLng7CiAgICBoaWdocCBmbG9hdCBtZXRhbGxpYyA9IDAuMDsKICAgIGhpZ2hwIGZsb2F0IG9jY2x1c2lvbiA9IDEuMDsKICAgIGhpZ2hwIGZsb2F0IHNwZWN1bGFyID0gMS4wOwogICAgaGlnaHAgZmxvYXQgdmlzaWJpbGl0eSA9IDEuMDsKICAgIGhpZ2hwIGZsb2F0IGRvdE5MID0gbWF4KGRvdChuLCBsaWdodERpciksIDAuMCk7CiAgICBpZiAobGlnaHRQb3NpdGlvbi53ID4gMC4wKQogICAgewogICAgICAgIGhpZ2hwIHZlYzMgbFBvcyA9IGxpZ2h0UG9zaXRpb24ueHl6IC8gdmVjMyhsaWdodFBvc2l0aW9uLncpOwogICAgICAgIHZpc2liaWxpdHkgPSAwLjA7CiAgICAgICAgdmlzaWJpbGl0eSArPSBmbG9hdCgodGV4dHVyZTJEKHNoYWRvd01hcCwgbFBvcy54eSkueCArIHNoYWRvd3NCaWFzKSA%IGxQb3Mueik7CiAgICAgICAgdmlzaWJpbGl0eSArPSAoZmxvYXQoKHRleHR1cmUyRChzaGFkb3dNYXAsIGxQb3MueHkgKyB2ZWMyKDAuMDAwNDg4MjgxMjUsIDAuMCkpLnggKyBzaGFkb3dzQmlhcykgPiBsUG9zLnopICogMC41KTsKICAgICAgICB2aXNpYmlsaXR5ICs9IChmbG9hdCgodGV4dHVyZTJEKHNoYWRvd01hcCwgbFBvcy54eSArIHZlYzIoLTAuMDAwNDg4MjgxMjUsIDAuMCkpLnggKyBzaGFkb3dzQmlhcykgPiBsUG9zLnopICogMC4yNSk7CiAgICAgICAgdmlzaWJpbGl0eSArPSAoZmxvYXQoKHRleHR1cmUyRChzaGFkb3dNYXAsIGxQb3MueHkgKyB2ZWMyKDAuMCwgMC4wMDA0ODgyODEyNSkpLnggKyBzaGFkb3dzQmlhcykgPiBsUG9zLnopICogMC41KTsKICAgICAgICB2aXNpYmlsaXR5ICs9IChmbG9hdCgodGV4dHVyZTJEKHNoYWRvd01hcCwgbFBvcy54eSArIHZlYzIoMC4wLCAtMC4wMDA0ODgyODEyNSkpLnggKyBzaGFkb3dzQmlhcykgPiBsUG9zLnopICogMC4yNSk7CiAgICAgICAgdmlzaWJpbGl0eSAvPSAyLjU7CiAgICAgICAgdmlzaWJpbGl0eSA9IG1heCh2aXNpYmlsaXR5LCAwLjIwMDAwMDAwMjk4MDIzMjIzODc2OTUzMTI1KTsKICAgIH0KICAgIGhpZ2hwIHZlYzMgZGlyZWN0ID0gKGJhc2Vjb2wgKiBkb3ROTCkgKiBsaWdodENvbG9yOwogICAgZGlyZWN0ICo9IGF0dGVudWF0ZShkaXN0YW5jZSh3cG9zaXRpb24sIGxpZ2h0UG9zKSk7CiAgICBnbF9GcmFnRGF0YVswXSA9IHZlYzQoKGRpcmVjdCAqIHZpc2liaWxpdHkpICsgKChiYXNlY29sICogc2hJcnJhZGlhbmNlKG4pKSAqIGVudm1hcFN0cmVuZ3RoKSwgMS4wKTsKfQoK",Ne.Red_mesh_fragData1="s4108:I3ZlcnNpb24gMTAwCnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OwpwcmVjaXNpb24gbWVkaXVtcCBpbnQ7Cgp1bmlmb3JtIHZlYzQgc2hpcnJbN107CnVuaWZvcm0gbWVkaXVtcCBzYW1wbGVyMkQgSW1hZ2VUZXh0dXJlOwp1bmlmb3JtIHZlYzMgbGlnaHREaXI7CnVuaWZvcm0gbWVkaXVtcCBzYW1wbGVyMkQgc2hhZG93TWFwOwp1bmlmb3JtIGZsb2F0IHNoYWRvd3NCaWFzOwp1bmlmb3JtIHZlYzMgbGlnaHRDb2xvcjsKdW5pZm9ybSB2ZWMzIGxpZ2h0UG9zOwp1bmlmb3JtIGZsb2F0IGVudm1hcFN0cmVuZ3RoOwoKdmFyeWluZyB2ZWMzIHdub3JtYWw7CnZhcnlpbmcgdmVjMiB0ZXhDb29yZDsKdmFyeWluZyB2ZWM0IGxpZ2h0UG9zaXRpb247CnZhcnlpbmcgdmVjMyB3cG9zaXRpb247CgpmbG9hdCBhdHRlbnVhdGUoZmxvYXQgZGlzdCkKewogICAgcmV0dXJuIDEuMCAvIChkaXN0ICogZGlzdCk7Cn0KCnZlYzMgc2hJcnJhZGlhbmNlKHZlYzMgbm9yKQp7CiAgICB2ZWMzIGNsMDAgPSB2ZWMzKHNoaXJyWzBdLngsIHNoaXJyWzBdLnksIHNoaXJyWzBdLnopOwogICAgdmVjMyBjbDFtMSA9IHZlYzMoc2hpcnJbMF0udywgc2hpcnJbMV0ueCwgc2hpcnJbMV0ueSk7CiAgICB2ZWMzIGNsMTAgPSB2ZWMzKHNoaXJyWzFdLnosIHNoaXJyWzFdLncsIHNoaXJyWzJdLngpOwogICAgdmVjMyBjbDExID0gdmVjMyhzaGlyclsyXS55LCBzaGlyclsyXS56LCBzaGlyclsyXS53KTsKICAgIHZlYzMgY2wybTIgPSB2ZWMzKHNoaXJyWzNdLngsIHNoaXJyWzNdLnksIHNoaXJyWzNdLnopOwogICAgdmVjMyBjbDJtMSA9IHZlYzMoc2hpcnJbM10udywgc2hpcnJbNF0ueCwgc2hpcnJbNF0ueSk7CiAgICB2ZWMzIGNsMjAgPSB2ZWMzKHNoaXJyWzRdLnosIHNoaXJyWzRdLncsIHNoaXJyWzVdLngpOwogICAgdmVjMyBjbDIxID0gdmVjMyhzaGlycls1XS55LCBzaGlycls1XS56LCBzaGlycls1XS53KTsKICAgIHZlYzMgY2wyMiA9IHZlYzMoc2hpcnJbNl0ueCwgc2hpcnJbNl0ueSwgc2hpcnJbNl0ueik7CiAgICByZXR1cm4gKCgoKCgoKCgoKGNsMjIgKiAwLjQyOTA0Mjk5NDk3NjA0MzcwMTE3MTg3NSkgKiAoKG5vci55ICogbm9yLnkpIC0gKCgtbm9yLnopICogKC1ub3IueikpKSkgKyAoKChjbDIwICogMC43NDMxMjUwMjE0NTc2NzIxMTkxNDA2MjUpICogbm9yLngpICogbm9yLngpKSArIChjbDAwICogMC44ODYyMjcwMTE2ODA2MDMwMjczNDM3NSkpIC0gKGNsMjAgKiAwLjI0NzcwNzk5Mjc5MjEyOTUxNjYwMTU2MjUpKSArICgoKGNsMm0yICogMC44NTgwODU5ODk5NTIwODc0MDIzNDM3NSkgKiBub3IueSkgKiAoLW5vci56KSkpICsgKCgoY2wyMSAqIDAuODU4MDg1OTg5OTUyMDg3NDAyMzQzNzUpICogbm9yLnkpICogbm9yLngpKSArICgoKGNsMm0xICogMC44NTgwODU5ODk5NTIwODc0MDIzNDM3NSkgKiAoLW5vci56KSkgKiBub3IueCkpICsgKChjbDExICogMS4wMjMzMjc5NDY2NjI5MDI4MzIwMzEyNSkgKiBub3IueSkpICsgKChjbDFtMSAqIDEuMDIzMzI3OTQ2NjYyOTAyODMyMDMxMjUpICogKC1ub3IueikpKSArICgoY2wxMCAqIDEuMDIzMzI3OTQ2NjYyOTAyODMyMDMxMjUpICogbm9yLngpOwp9Cgp2b2lkIG1haW4oKQp7CiAgICB2ZWMzIG4gPSBub3JtYWxpemUod25vcm1hbCk7CiAgICB2ZWM0IEltYWdlVGV4dHVyZV9zdG9yZSA9IHRleHR1cmUyRChJbWFnZVRleHR1cmUsIHRleENvb3JkKTsKICAgIHZlYzMgSW1hZ2VUZXh0dXJlX0NvbG9yX3JlcyA9IEltYWdlVGV4dHVyZV9zdG9yZS54eXo7CiAgICB2ZWMzIGJhc2Vjb2wgPSB2ZWMzKDAuOTU4NzgwMTY5NDg2OTk5NTExNzE4NzUsIDAuMDgzODA0NTQ3Nzg2NzEyNjQ2NDg0Mzc1LCAwLjA4NzI2MTM4NjIxNTY4Njc5ODA5NTcwMzEyNSk7CiAgICBmbG9hdCByb3VnaG5lc3MgPSBJbWFnZVRleHR1cmVfQ29sb3JfcmVzLng7CiAgICBmbG9hdCBtZXRhbGxpYyA9IDAuMDsKICAgIGZsb2F0IG9jY2x1c2lvbiA9IDEuMDsKICAgIGZsb2F0IHNwZWN1bGFyID0gMS4wOwogICAgZmxvYXQgdmlzaWJpbGl0eSA9IDEuMDsKICAgIGZsb2F0IGRvdE5MID0gbWF4KGRvdChuLCBsaWdodERpciksIDAuMCk7CiAgICBpZiAobGlnaHRQb3NpdGlvbi53ID4gMC4wKQogICAgewogICAgICAgIHZlYzMgbFBvcyA9IGxpZ2h0UG9zaXRpb24ueHl6IC8gdmVjMyhsaWdodFBvc2l0aW9uLncpOwogICAgICAgIHZpc2liaWxpdHkgPSAwLjA7CiAgICAgICAgdmlzaWJpbGl0eSArPSBmbG9hdCgodGV4dHVyZTJEKHNoYWRvd01hcCwgbFBvcy54eSkueCArIHNoYWRvd3NCaWFzKSA%IGxQb3Mueik7CiAgICAgICAgdmlzaWJpbGl0eSArPSAoZmxvYXQoKHRleHR1cmUyRChzaGFkb3dNYXAsIGxQb3MueHkgKyB2ZWMyKDAuMDAwNDg4MjgxMjUsIDAuMCkpLnggKyBzaGFkb3dzQmlhcykgPiBsUG9zLnopICogMC41KTsKICAgICAgICB2aXNpYmlsaXR5ICs9IChmbG9hdCgodGV4dHVyZTJEKHNoYWRvd01hcCwgbFBvcy54eSArIHZlYzIoLTAuMDAwNDg4MjgxMjUsIDAuMCkpLnggKyBzaGFkb3dzQmlhcykgPiBsUG9zLnopICogMC4yNSk7CiAgICAgICAgdmlzaWJpbGl0eSArPSAoZmxvYXQoKHRleHR1cmUyRChzaGFkb3dNYXAsIGxQb3MueHkgKyB2ZWMyKDAuMCwgMC4wMDA0ODgyODEyNSkpLnggKyBzaGFkb3dzQmlhcykgPiBsUG9zLnopICogMC41KTsKICAgICAgICB2aXNpYmlsaXR5ICs9IChmbG9hdCgodGV4dHVyZTJEKHNoYWRvd01hcCwgbFBvcy54eSArIHZlYzIoMC4wLCAtMC4wMDA0ODgyODEyNSkpLnggKyBzaGFkb3dzQmlhcykgPiBsUG9zLnopICogMC4yNSk7CiAgICAgICAgdmlzaWJpbGl0eSAvPSAyLjU7CiAgICAgICAgdmlzaWJpbGl0eSA9IG1heCh2aXNpYmlsaXR5LCAwLjIwMDAwMDAwMjk4MDIzMjIzODc2OTUzMTI1KTsKICAgIH0KICAgIHZlYzMgZGlyZWN0ID0gKGJhc2Vjb2wgKiBkb3ROTCkgKiBsaWdodENvbG9yOwogICAgZGlyZWN0ICo9IGF0dGVudWF0ZShkaXN0YW5jZSh3cG9zaXRpb24sIGxpZ2h0UG9zKSk7CiAgICBnbF9GcmFnRGF0YVswXSA9IHZlYzQoKGRpcmVjdCAqIHZpc2liaWxpdHkpICsgKChiYXNlY29sICogc2hJcnJhZGlhbmNlKG4pKSAqIGVudm1hcFN0cmVuZ3RoKSwgMS4wKTsKfQoK",Ne.Red_mesh_fragData2="s4370:I3ZlcnNpb24gMzAwIGVzCnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OwpwcmVjaXNpb24gaGlnaHAgaW50OwoKdW5pZm9ybSBoaWdocCB2ZWM0IHNoaXJyWzddOwp1bmlmb3JtIGhpZ2hwIHNhbXBsZXIyRCBJbWFnZVRleHR1cmU7CnVuaWZvcm0gaGlnaHAgdmVjMyBsaWdodERpcjsKdW5pZm9ybSBoaWdocCBzYW1wbGVyMkQgc2hhZG93TWFwOwp1bmlmb3JtIGhpZ2hwIGZsb2F0IHNoYWRvd3NCaWFzOwp1bmlmb3JtIGhpZ2hwIHZlYzMgbGlnaHRDb2xvcjsKdW5pZm9ybSBoaWdocCB2ZWMzIGxpZ2h0UG9zOwp1bmlmb3JtIGhpZ2hwIGZsb2F0IGVudm1hcFN0cmVuZ3RoOwoKaW4gaGlnaHAgdmVjMyB3bm9ybWFsOwppbiBoaWdocCB2ZWMyIHRleENvb3JkOwppbiBoaWdocCB2ZWM0IGxpZ2h0UG9zaXRpb247CmluIGhpZ2hwIHZlYzMgd3Bvc2l0aW9uOwpvdXQgaGlnaHAgdmVjNCBmcmFnQ29sb3I7CgpoaWdocCBmbG9hdCBhdHRlbnVhdGUoaGlnaHAgZmxvYXQgZGlzdCkKewogICAgcmV0dXJuIDEuMCAvIChkaXN0ICogZGlzdCk7Cn0KCmhpZ2hwIHZlYzMgc2hJcnJhZGlhbmNlKGhpZ2hwIHZlYzMgbm9yKQp7CiAgICBoaWdocCB2ZWMzIGNsMDAgPSB2ZWMzKHNoaXJyWzBdLngsIHNoaXJyWzBdLnksIHNoaXJyWzBdLnopOwogICAgaGlnaHAgdmVjMyBjbDFtMSA9IHZlYzMoc2hpcnJbMF0udywgc2hpcnJbMV0ueCwgc2hpcnJbMV0ueSk7CiAgICBoaWdocCB2ZWMzIGNsMTAgPSB2ZWMzKHNoaXJyWzFdLnosIHNoaXJyWzFdLncsIHNoaXJyWzJdLngpOwogICAgaGlnaHAgdmVjMyBjbDExID0gdmVjMyhzaGlyclsyXS55LCBzaGlyclsyXS56LCBzaGlyclsyXS53KTsKICAgIGhpZ2hwIHZlYzMgY2wybTIgPSB2ZWMzKHNoaXJyWzNdLngsIHNoaXJyWzNdLnksIHNoaXJyWzNdLnopOwogICAgaGlnaHAgdmVjMyBjbDJtMSA9IHZlYzMoc2hpcnJbM10udywgc2hpcnJbNF0ueCwgc2hpcnJbNF0ueSk7CiAgICBoaWdocCB2ZWMzIGNsMjAgPSB2ZWMzKHNoaXJyWzRdLnosIHNoaXJyWzRdLncsIHNoaXJyWzVdLngpOwogICAgaGlnaHAgdmVjMyBjbDIxID0gdmVjMyhzaGlycls1XS55LCBzaGlycls1XS56LCBzaGlycls1XS53KTsKICAgIGhpZ2hwIHZlYzMgY2wyMiA9IHZlYzMoc2hpcnJbNl0ueCwgc2hpcnJbNl0ueSwgc2hpcnJbNl0ueik7CiAgICByZXR1cm4gKCgoKCgoKCgoKGNsMjIgKiAwLjQyOTA0Mjk5NDk3NjA0MzcwMTE3MTg3NSkgKiAoKG5vci55ICogbm9yLnkpIC0gKCgtbm9yLnopICogKC1ub3IueikpKSkgKyAoKChjbDIwICogMC43NDMxMjUwMjE0NTc2NzIxMTkxNDA2MjUpICogbm9yLngpICogbm9yLngpKSArIChjbDAwICogMC44ODYyMjcwMTE2ODA2MDMwMjczNDM3NSkpIC0gKGNsMjAgKiAwLjI0NzcwNzk5Mjc5MjEyOTUxNjYwMTU2MjUpKSArICgoKGNsMm0yICogMC44NTgwODU5ODk5NTIwODc0MDIzNDM3NSkgKiBub3IueSkgKiAoLW5vci56KSkpICsgKCgoY2wyMSAqIDAuODU4MDg1OTg5OTUyMDg3NDAyMzQzNzUpICogbm9yLnkpICogbm9yLngpKSArICgoKGNsMm0xICogMC44NTgwODU5ODk5NTIwODc0MDIzNDM3NSkgKiAoLW5vci56KSkgKiBub3IueCkpICsgKChjbDExICogMS4wMjMzMjc5NDY2NjI5MDI4MzIwMzEyNSkgKiBub3IueSkpICsgKChjbDFtMSAqIDEuMDIzMzI3OTQ2NjYyOTAyODMyMDMxMjUpICogKC1ub3IueikpKSArICgoY2wxMCAqIDEuMDIzMzI3OTQ2NjYyOTAyODMyMDMxMjUpICogbm9yLngpOwp9Cgp2b2lkIG1haW4oKQp7CiAgICBoaWdocCB2ZWMzIG4gPSBub3JtYWxpemUod25vcm1hbCk7CiAgICBoaWdocCB2ZWM0IEltYWdlVGV4dHVyZV9zdG9yZSA9IHRleHR1cmUoSW1hZ2VUZXh0dXJlLCB0ZXhDb29yZCk7CiAgICBoaWdocCB2ZWMzIEltYWdlVGV4dHVyZV9Db2xvcl9yZXMgPSBJbWFnZVRleHR1cmVfc3RvcmUueHl6OwogICAgaGlnaHAgdmVjMyBiYXNlY29sID0gdmVjMygwLjk1ODc4MDE2OTQ4Njk5OTUxMTcxODc1LCAwLjA4MzgwNDU0Nzc4NjcxMjY0NjQ4NDM3NSwgMC4wODcyNjEzODYyMTU2ODY3OTgwOTU3MDMxMjUpOwogICAgaGlnaHAgZmxvYXQgcm91Z2huZXNzID0gSW1hZ2VUZXh0dXJlX0NvbG9yX3Jlcy54OwogICAgaGlnaHAgZmxvYXQgbWV0YWxsaWMgPSAwLjA7CiAgICBoaWdocCBmbG9hdCBvY2NsdXNpb24gPSAxLjA7CiAgICBoaWdocCBmbG9hdCBzcGVjdWxhciA9IDEuMDsKICAgIGhpZ2hwIGZsb2F0IHZpc2liaWxpdHkgPSAxLjA7CiAgICBoaWdocCBmbG9hdCBkb3ROTCA9IG1heChkb3QobiwgbGlnaHREaXIpLCAwLjApOwogICAgaWYgKGxpZ2h0UG9zaXRpb24udyA%IDAuMCkKICAgIHsKICAgICAgICBoaWdocCB2ZWMzIGxQb3MgPSBsaWdodFBvc2l0aW9uLnh5eiAvIHZlYzMobGlnaHRQb3NpdGlvbi53KTsKICAgICAgICB2aXNpYmlsaXR5ID0gMC4wOwogICAgICAgIHZpc2liaWxpdHkgKz0gZmxvYXQoKHRleHR1cmUoc2hhZG93TWFwLCBsUG9zLnh5KS54ICsgc2hhZG93c0JpYXMpID4gbFBvcy56KTsKICAgICAgICB2aXNpYmlsaXR5ICs9IChmbG9hdCgodGV4dHVyZShzaGFkb3dNYXAsIGxQb3MueHkgKyB2ZWMyKDAuMDAwNDg4MjgxMjUsIDAuMCkpLnggKyBzaGFkb3dzQmlhcykgPiBsUG9zLnopICogMC41KTsKICAgICAgICB2aXNpYmlsaXR5ICs9IChmbG9hdCgodGV4dHVyZShzaGFkb3dNYXAsIGxQb3MueHkgKyB2ZWMyKC0wLjAwMDQ4ODI4MTI1LCAwLjApKS54ICsgc2hhZG93c0JpYXMpID4gbFBvcy56KSAqIDAuMjUpOwogICAgICAgIHZpc2liaWxpdHkgKz0gKGZsb2F0KCh0ZXh0dXJlKHNoYWRvd01hcCwgbFBvcy54eSArIHZlYzIoMC4wLCAwLjAwMDQ4ODI4MTI1KSkueCArIHNoYWRvd3NCaWFzKSA%IGxQb3MueikgKiAwLjUpOwogICAgICAgIHZpc2liaWxpdHkgKz0gKGZsb2F0KCh0ZXh0dXJlKHNoYWRvd01hcCwgbFBvcy54eSArIHZlYzIoMC4wLCAtMC4wMDA0ODgyODEyNSkpLnggKyBzaGFkb3dzQmlhcykgPiBsUG9zLnopICogMC4yNSk7CiAgICAgICAgdmlzaWJpbGl0eSAvPSAyLjU7CiAgICAgICAgdmlzaWJpbGl0eSA9IG1heCh2aXNpYmlsaXR5LCAwLjIwMDAwMDAwMjk4MDIzMjIzODc2OTUzMTI1KTsKICAgIH0KICAgIGhpZ2hwIHZlYzMgZGlyZWN0ID0gKGJhc2Vjb2wgKiBkb3ROTCkgKiBsaWdodENvbG9yOwogICAgZGlyZWN0ICo9IGF0dGVudWF0ZShkaXN0YW5jZSh3cG9zaXRpb24sIGxpZ2h0UG9zKSk7CiAgICBmcmFnQ29sb3IgPSB2ZWM0KChkaXJlY3QgKiB2aXNpYmlsaXR5KSArICgoYmFzZWNvbCAqIHNoSXJyYWRpYW5jZShuKSkgKiBlbnZtYXBTdHJlbmd0aCksIDEuMCk7Cn0KCg",Ne.Wall_mesh_fragData0="s4782:I3ZlcnNpb24gMTAwCnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OwpwcmVjaXNpb24gaGlnaHAgaW50OwoKdW5pZm9ybSBoaWdocCB2ZWM0IHNoaXJyWzddOwp1bmlmb3JtIGhpZ2hwIHNhbXBsZXIyRCBJbWFnZVRleHR1cmVfMDAxOwp1bmlmb3JtIGhpZ2hwIHNhbXBsZXIyRCBJbWFnZVRleHR1cmU7CnVuaWZvcm0gaGlnaHAgdmVjMyBsaWdodERpcjsKdW5pZm9ybSBoaWdocCBzYW1wbGVyMkQgc2hhZG93TWFwOwp1bmlmb3JtIGhpZ2hwIGZsb2F0IHNoYWRvd3NCaWFzOwp1bmlmb3JtIGhpZ2hwIHZlYzMgbGlnaHRDb2xvcjsKdW5pZm9ybSBoaWdocCB2ZWMzIGxpZ2h0UG9zOwp1bmlmb3JtIGhpZ2hwIGZsb2F0IGVudm1hcFN0cmVuZ3RoOwoKdmFyeWluZyBoaWdocCB2ZWMzIHdub3JtYWw7CnZhcnlpbmcgaGlnaHAgdmVjMiB0ZXhDb29yZDsKdmFyeWluZyBoaWdocCB2ZWM0IGxpZ2h0UG9zaXRpb247CnZhcnlpbmcgaGlnaHAgdmVjMyB3cG9zaXRpb247CgpoaWdocCBmbG9hdCBhdHRlbnVhdGUoaGlnaHAgZmxvYXQgZGlzdCkKewogICAgcmV0dXJuIDEuMCAvIChkaXN0ICogZGlzdCk7Cn0KCmhpZ2hwIHZlYzMgc2hJcnJhZGlhbmNlKGhpZ2hwIHZlYzMgbm9yKQp7CiAgICBoaWdocCB2ZWMzIGNsMDAgPSB2ZWMzKHNoaXJyWzBdLngsIHNoaXJyWzBdLnksIHNoaXJyWzBdLnopOwogICAgaGlnaHAgdmVjMyBjbDFtMSA9IHZlYzMoc2hpcnJbMF0udywgc2hpcnJbMV0ueCwgc2hpcnJbMV0ueSk7CiAgICBoaWdocCB2ZWMzIGNsMTAgPSB2ZWMzKHNoaXJyWzFdLnosIHNoaXJyWzFdLncsIHNoaXJyWzJdLngpOwogICAgaGlnaHAgdmVjMyBjbDExID0gdmVjMyhzaGlyclsyXS55LCBzaGlyclsyXS56LCBzaGlyclsyXS53KTsKICAgIGhpZ2hwIHZlYzMgY2wybTIgPSB2ZWMzKHNoaXJyWzNdLngsIHNoaXJyWzNdLnksIHNoaXJyWzNdLnopOwogICAgaGlnaHAgdmVjMyBjbDJtMSA9IHZlYzMoc2hpcnJbM10udywgc2hpcnJbNF0ueCwgc2hpcnJbNF0ueSk7CiAgICBoaWdocCB2ZWMzIGNsMjAgPSB2ZWMzKHNoaXJyWzRdLnosIHNoaXJyWzRdLncsIHNoaXJyWzVdLngpOwogICAgaGlnaHAgdmVjMyBjbDIxID0gdmVjMyhzaGlycls1XS55LCBzaGlycls1XS56LCBzaGlycls1XS53KTsKICAgIGhpZ2hwIHZlYzMgY2wyMiA9IHZlYzMoc2hpcnJbNl0ueCwgc2hpcnJbNl0ueSwgc2hpcnJbNl0ueik7CiAgICByZXR1cm4gKCgoKCgoKCgoKGNsMjIgKiAwLjQyOTA0Mjk5NDk3NjA0MzcwMTE3MTg3NSkgKiAoKG5vci55ICogbm9yLnkpIC0gKCgtbm9yLnopICogKC1ub3IueikpKSkgKyAoKChjbDIwICogMC43NDMxMjUwMjE0NTc2NzIxMTkxNDA2MjUpICogbm9yLngpICogbm9yLngpKSArIChjbDAwICogMC44ODYyMjcwMTE2ODA2MDMwMjczNDM3NSkpIC0gKGNsMjAgKiAwLjI0NzcwNzk5Mjc5MjEyOTUxNjYwMTU2MjUpKSArICgoKGNsMm0yICogMC44NTgwODU5ODk5NTIwODc0MDIzNDM3NSkgKiBub3IueSkgKiAoLW5vci56KSkpICsgKCgoY2wyMSAqIDAuODU4MDg1OTg5OTUyMDg3NDAyMzQzNzUpICogbm9yLnkpICogbm9yLngpKSArICgoKGNsMm0xICogMC44NTgwODU5ODk5NTIwODc0MDIzNDM3NSkgKiAoLW5vci56KSkgKiBub3IueCkpICsgKChjbDExICogMS4wMjMzMjc5NDY2NjI5MDI4MzIwMzEyNSkgKiBub3IueSkpICsgKChjbDFtMSAqIDEuMDIzMzI3OTQ2NjYyOTAyODMyMDMxMjUpICogKC1ub3IueikpKSArICgoY2wxMCAqIDEuMDIzMzI3OTQ2NjYyOTAyODMyMDMxMjUpICogbm9yLngpOwp9Cgp2b2lkIG1haW4oKQp7CiAgICBoaWdocCB2ZWMzIG4gPSBub3JtYWxpemUod25vcm1hbCk7CiAgICBoaWdocCB2ZWM0IEltYWdlVGV4dHVyZV8wMDFfc3RvcmUgPSB0ZXh0dXJlMkQoSW1hZ2VUZXh0dXJlXzAwMSwgdGV4Q29vcmQpOwogICAgaGlnaHAgdmVjMyBfMjA2ID0gcG93KEltYWdlVGV4dHVyZV8wMDFfc3RvcmUueHl6LCB2ZWMzKDIuMjAwMDAwMDQ3NjgzNzE1ODIwMzEyNSkpOwogICAgSW1hZ2VUZXh0dXJlXzAwMV9zdG9yZSA9IHZlYzQoXzIwNi54LCBfMjA2LnksIF8yMDYueiwgSW1hZ2VUZXh0dXJlXzAwMV9zdG9yZS53KTsKICAgIGhpZ2hwIHZlYzQgSW1hZ2VUZXh0dXJlX3N0b3JlID0gdGV4dHVyZTJEKEltYWdlVGV4dHVyZSwgdGV4Q29vcmQpOwogICAgaGlnaHAgdmVjMyBJbWFnZVRleHR1cmVfMDAxX0NvbG9yX3JlcyA9IEltYWdlVGV4dHVyZV8wMDFfc3RvcmUueHl6OwogICAgaGlnaHAgdmVjMyBJbWFnZVRleHR1cmVfQ29sb3JfcmVzID0gSW1hZ2VUZXh0dXJlX3N0b3JlLnh5ejsKICAgIGhpZ2hwIHZlYzMgYmFzZWNvbCA9IEltYWdlVGV4dHVyZV8wMDFfQ29sb3JfcmVzOwogICAgaGlnaHAgZmxvYXQgcm91Z2huZXNzID0gSW1hZ2VUZXh0dXJlX0NvbG9yX3Jlcy54OwogICAgaGlnaHAgZmxvYXQgbWV0YWxsaWMgPSAwLjA7CiAgICBoaWdocCBmbG9hdCBvY2NsdXNpb24gPSAxLjA7CiAgICBoaWdocCBmbG9hdCBzcGVjdWxhciA9IDEuMDsKICAgIGhpZ2hwIGZsb2F0IHZpc2liaWxpdHkgPSAxLjA7CiAgICBoaWdocCBmbG9hdCBkb3ROTCA9IG1heChkb3QobiwgbGlnaHREaXIpLCAwLjApOwogICAgaWYgKGxpZ2h0UG9zaXRpb24udyA%IDAuMCkKICAgIHsKICAgICAgICBoaWdocCB2ZWMzIGxQb3MgPSBsaWdodFBvc2l0aW9uLnh5eiAvIHZlYzMobGlnaHRQb3NpdGlvbi53KTsKICAgICAgICB2aXNpYmlsaXR5ID0gMC4wOwogICAgICAgIHZpc2liaWxpdHkgKz0gZmxvYXQoKHRleHR1cmUyRChzaGFkb3dNYXAsIGxQb3MueHkpLnggKyBzaGFkb3dzQmlhcykgPiBsUG9zLnopOwogICAgICAgIHZpc2liaWxpdHkgKz0gKGZsb2F0KCh0ZXh0dXJlMkQoc2hhZG93TWFwLCBsUG9zLnh5ICsgdmVjMigwLjAwMDQ4ODI4MTI1LCAwLjApKS54ICsgc2hhZG93c0JpYXMpID4gbFBvcy56KSAqIDAuNSk7CiAgICAgICAgdmlzaWJpbGl0eSArPSAoZmxvYXQoKHRleHR1cmUyRChzaGFkb3dNYXAsIGxQb3MueHkgKyB2ZWMyKC0wLjAwMDQ4ODI4MTI1LCAwLjApKS54ICsgc2hhZG93c0JpYXMpID4gbFBvcy56KSAqIDAuMjUpOwogICAgICAgIHZpc2liaWxpdHkgKz0gKGZsb2F0KCh0ZXh0dXJlMkQoc2hhZG93TWFwLCBsUG9zLnh5ICsgdmVjMigwLjAsIDAuMDAwNDg4MjgxMjUpKS54ICsgc2hhZG93c0JpYXMpID4gbFBvcy56KSAqIDAuNSk7CiAgICAgICAgdmlzaWJpbGl0eSArPSAoZmxvYXQoKHRleHR1cmUyRChzaGFkb3dNYXAsIGxQb3MueHkgKyB2ZWMyKDAuMCwgLTAuMDAwNDg4MjgxMjUpKS54ICsgc2hhZG93c0JpYXMpID4gbFBvcy56KSAqIDAuMjUpOwogICAgICAgIHZpc2liaWxpdHkgLz0gMi41OwogICAgICAgIHZpc2liaWxpdHkgPSBtYXgodmlzaWJpbGl0eSwgMC4yMDAwMDAwMDI5ODAyMzIyMzg3Njk1MzEyNSk7CiAgICB9CiAgICBoaWdocCB2ZWMzIGRpcmVjdCA9IChiYXNlY29sICogZG90TkwpICogbGlnaHRDb2xvcjsKICAgIGRpcmVjdCAqPSBhdHRlbnVhdGUoZGlzdGFuY2Uod3Bvc2l0aW9uLCBsaWdodFBvcykpOwogICAgZ2xfRnJhZ0RhdGFbMF0gPSB2ZWM0KChkaXJlY3QgKiB2aXNpYmlsaXR5KSArICgoYmFzZWNvbCAqIHNoSXJyYWRpYW5jZShuKSkgKiBlbnZtYXBTdHJlbmd0aCksIDEuMCk7Cn0KCg",Ne.Wall_mesh_fragData1="s4488:I3ZlcnNpb24gMTAwCnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OwpwcmVjaXNpb24gbWVkaXVtcCBpbnQ7Cgp1bmlmb3JtIHZlYzQgc2hpcnJbN107CnVuaWZvcm0gbWVkaXVtcCBzYW1wbGVyMkQgSW1hZ2VUZXh0dXJlXzAwMTsKdW5pZm9ybSBtZWRpdW1wIHNhbXBsZXIyRCBJbWFnZVRleHR1cmU7CnVuaWZvcm0gdmVjMyBsaWdodERpcjsKdW5pZm9ybSBtZWRpdW1wIHNhbXBsZXIyRCBzaGFkb3dNYXA7CnVuaWZvcm0gZmxvYXQgc2hhZG93c0JpYXM7CnVuaWZvcm0gdmVjMyBsaWdodENvbG9yOwp1bmlmb3JtIHZlYzMgbGlnaHRQb3M7CnVuaWZvcm0gZmxvYXQgZW52bWFwU3RyZW5ndGg7Cgp2YXJ5aW5nIHZlYzMgd25vcm1hbDsKdmFyeWluZyB2ZWMyIHRleENvb3JkOwp2YXJ5aW5nIHZlYzQgbGlnaHRQb3NpdGlvbjsKdmFyeWluZyB2ZWMzIHdwb3NpdGlvbjsKCmZsb2F0IGF0dGVudWF0ZShmbG9hdCBkaXN0KQp7CiAgICByZXR1cm4gMS4wIC8gKGRpc3QgKiBkaXN0KTsKfQoKdmVjMyBzaElycmFkaWFuY2UodmVjMyBub3IpCnsKICAgIHZlYzMgY2wwMCA9IHZlYzMoc2hpcnJbMF0ueCwgc2hpcnJbMF0ueSwgc2hpcnJbMF0ueik7CiAgICB2ZWMzIGNsMW0xID0gdmVjMyhzaGlyclswXS53LCBzaGlyclsxXS54LCBzaGlyclsxXS55KTsKICAgIHZlYzMgY2wxMCA9IHZlYzMoc2hpcnJbMV0ueiwgc2hpcnJbMV0udywgc2hpcnJbMl0ueCk7CiAgICB2ZWMzIGNsMTEgPSB2ZWMzKHNoaXJyWzJdLnksIHNoaXJyWzJdLnosIHNoaXJyWzJdLncpOwogICAgdmVjMyBjbDJtMiA9IHZlYzMoc2hpcnJbM10ueCwgc2hpcnJbM10ueSwgc2hpcnJbM10ueik7CiAgICB2ZWMzIGNsMm0xID0gdmVjMyhzaGlyclszXS53LCBzaGlycls0XS54LCBzaGlycls0XS55KTsKICAgIHZlYzMgY2wyMCA9IHZlYzMoc2hpcnJbNF0ueiwgc2hpcnJbNF0udywgc2hpcnJbNV0ueCk7CiAgICB2ZWMzIGNsMjEgPSB2ZWMzKHNoaXJyWzVdLnksIHNoaXJyWzVdLnosIHNoaXJyWzVdLncpOwogICAgdmVjMyBjbDIyID0gdmVjMyhzaGlycls2XS54LCBzaGlycls2XS55LCBzaGlycls2XS56KTsKICAgIHJldHVybiAoKCgoKCgoKCgoY2wyMiAqIDAuNDI5MDQyOTk0OTc2MDQzNzAxMTcxODc1KSAqICgobm9yLnkgKiBub3IueSkgLSAoKC1ub3IueikgKiAoLW5vci56KSkpKSArICgoKGNsMjAgKiAwLjc0MzEyNTAyMTQ1NzY3MjExOTE0MDYyNSkgKiBub3IueCkgKiBub3IueCkpICsgKGNsMDAgKiAwLjg4NjIyNzAxMTY4MDYwMzAyNzM0Mzc1KSkgLSAoY2wyMCAqIDAuMjQ3NzA3OTkyNzkyMTI5NTE2NjAxNTYyNSkpICsgKCgoY2wybTIgKiAwLjg1ODA4NTk4OTk1MjA4NzQwMjM0Mzc1KSAqIG5vci55KSAqICgtbm9yLnopKSkgKyAoKChjbDIxICogMC44NTgwODU5ODk5NTIwODc0MDIzNDM3NSkgKiBub3IueSkgKiBub3IueCkpICsgKCgoY2wybTEgKiAwLjg1ODA4NTk4OTk1MjA4NzQwMjM0Mzc1KSAqICgtbm9yLnopKSAqIG5vci54KSkgKyAoKGNsMTEgKiAxLjAyMzMyNzk0NjY2MjkwMjgzMjAzMTI1KSAqIG5vci55KSkgKyAoKGNsMW0xICogMS4wMjMzMjc5NDY2NjI5MDI4MzIwMzEyNSkgKiAoLW5vci56KSkpICsgKChjbDEwICogMS4wMjMzMjc5NDY2NjI5MDI4MzIwMzEyNSkgKiBub3IueCk7Cn0KCnZvaWQgbWFpbigpCnsKICAgIHZlYzMgbiA9IG5vcm1hbGl6ZSh3bm9ybWFsKTsKICAgIHZlYzQgSW1hZ2VUZXh0dXJlXzAwMV9zdG9yZSA9IHRleHR1cmUyRChJbWFnZVRleHR1cmVfMDAxLCB0ZXhDb29yZCk7CiAgICB2ZWMzIF8yMDYgPSBwb3coSW1hZ2VUZXh0dXJlXzAwMV9zdG9yZS54eXosIHZlYzMoMi4yMDAwMDAwNDc2ODM3MTU4MjAzMTI1KSk7CiAgICBJbWFnZVRleHR1cmVfMDAxX3N0b3JlID0gdmVjNChfMjA2LngsIF8yMDYueSwgXzIwNi56LCBJbWFnZVRleHR1cmVfMDAxX3N0b3JlLncpOwogICAgdmVjNCBJbWFnZVRleHR1cmVfc3RvcmUgPSB0ZXh0dXJlMkQoSW1hZ2VUZXh0dXJlLCB0ZXhDb29yZCk7CiAgICB2ZWMzIEltYWdlVGV4dHVyZV8wMDFfQ29sb3JfcmVzID0gSW1hZ2VUZXh0dXJlXzAwMV9zdG9yZS54eXo7CiAgICB2ZWMzIEltYWdlVGV4dHVyZV9Db2xvcl9yZXMgPSBJbWFnZVRleHR1cmVfc3RvcmUueHl6OwogICAgdmVjMyBiYXNlY29sID0gSW1hZ2VUZXh0dXJlXzAwMV9Db2xvcl9yZXM7CiAgICBmbG9hdCByb3VnaG5lc3MgPSBJbWFnZVRleHR1cmVfQ29sb3JfcmVzLng7CiAgICBmbG9hdCBtZXRhbGxpYyA9IDAuMDsKICAgIGZsb2F0IG9jY2x1c2lvbiA9IDEuMDsKICAgIGZsb2F0IHNwZWN1bGFyID0gMS4wOwogICAgZmxvYXQgdmlzaWJpbGl0eSA9IDEuMDsKICAgIGZsb2F0IGRvdE5MID0gbWF4KGRvdChuLCBsaWdodERpciksIDAuMCk7CiAgICBpZiAobGlnaHRQb3NpdGlvbi53ID4gMC4wKQogICAgewogICAgICAgIHZlYzMgbFBvcyA9IGxpZ2h0UG9zaXRpb24ueHl6IC8gdmVjMyhsaWdodFBvc2l0aW9uLncpOwogICAgICAgIHZpc2liaWxpdHkgPSAwLjA7CiAgICAgICAgdmlzaWJpbGl0eSArPSBmbG9hdCgodGV4dHVyZTJEKHNoYWRvd01hcCwgbFBvcy54eSkueCArIHNoYWRvd3NCaWFzKSA%IGxQb3Mueik7CiAgICAgICAgdmlzaWJpbGl0eSArPSAoZmxvYXQoKHRleHR1cmUyRChzaGFkb3dNYXAsIGxQb3MueHkgKyB2ZWMyKDAuMDAwNDg4MjgxMjUsIDAuMCkpLnggKyBzaGFkb3dzQmlhcykgPiBsUG9zLnopICogMC41KTsKICAgICAgICB2aXNpYmlsaXR5ICs9IChmbG9hdCgodGV4dHVyZTJEKHNoYWRvd01hcCwgbFBvcy54eSArIHZlYzIoLTAuMDAwNDg4MjgxMjUsIDAuMCkpLnggKyBzaGFkb3dzQmlhcykgPiBsUG9zLnopICogMC4yNSk7CiAgICAgICAgdmlzaWJpbGl0eSArPSAoZmxvYXQoKHRleHR1cmUyRChzaGFkb3dNYXAsIGxQb3MueHkgKyB2ZWMyKDAuMCwgMC4wMDA0ODgyODEyNSkpLnggKyBzaGFkb3dzQmlhcykgPiBsUG9zLnopICogMC41KTsKICAgICAgICB2aXNpYmlsaXR5ICs9IChmbG9hdCgodGV4dHVyZTJEKHNoYWRvd01hcCwgbFBvcy54eSArIHZlYzIoMC4wLCAtMC4wMDA0ODgyODEyNSkpLnggKyBzaGFkb3dzQmlhcykgPiBsUG9zLnopICogMC4yNSk7CiAgICAgICAgdmlzaWJpbGl0eSAvPSAyLjU7CiAgICAgICAgdmlzaWJpbGl0eSA9IG1heCh2aXNpYmlsaXR5LCAwLjIwMDAwMDAwMjk4MDIzMjIzODc2OTUzMTI1KTsKICAgIH0KICAgIHZlYzMgZGlyZWN0ID0gKGJhc2Vjb2wgKiBkb3ROTCkgKiBsaWdodENvbG9yOwogICAgZGlyZWN0ICo9IGF0dGVudWF0ZShkaXN0YW5jZSh3cG9zaXRpb24sIGxpZ2h0UG9zKSk7CiAgICBnbF9GcmFnRGF0YVswXSA9IHZlYzQoKGRpcmVjdCAqIHZpc2liaWxpdHkpICsgKChiYXNlY29sICogc2hJcnJhZGlhbmNlKG4pKSAqIGVudm1hcFN0cmVuZ3RoKSwgMS4wKTsKfQoK",Ne.Wall_mesh_fragData2="s4768:I3ZlcnNpb24gMzAwIGVzCnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OwpwcmVjaXNpb24gaGlnaHAgaW50OwoKdW5pZm9ybSBoaWdocCB2ZWM0IHNoaXJyWzddOwp1bmlmb3JtIGhpZ2hwIHNhbXBsZXIyRCBJbWFnZVRleHR1cmVfMDAxOwp1bmlmb3JtIGhpZ2hwIHNhbXBsZXIyRCBJbWFnZVRleHR1cmU7CnVuaWZvcm0gaGlnaHAgdmVjMyBsaWdodERpcjsKdW5pZm9ybSBoaWdocCBzYW1wbGVyMkQgc2hhZG93TWFwOwp1bmlmb3JtIGhpZ2hwIGZsb2F0IHNoYWRvd3NCaWFzOwp1bmlmb3JtIGhpZ2hwIHZlYzMgbGlnaHRDb2xvcjsKdW5pZm9ybSBoaWdocCB2ZWMzIGxpZ2h0UG9zOwp1bmlmb3JtIGhpZ2hwIGZsb2F0IGVudm1hcFN0cmVuZ3RoOwoKaW4gaGlnaHAgdmVjMyB3bm9ybWFsOwppbiBoaWdocCB2ZWMyIHRleENvb3JkOwppbiBoaWdocCB2ZWM0IGxpZ2h0UG9zaXRpb247CmluIGhpZ2hwIHZlYzMgd3Bvc2l0aW9uOwpvdXQgaGlnaHAgdmVjNCBmcmFnQ29sb3I7CgpoaWdocCBmbG9hdCBhdHRlbnVhdGUoaGlnaHAgZmxvYXQgZGlzdCkKewogICAgcmV0dXJuIDEuMCAvIChkaXN0ICogZGlzdCk7Cn0KCmhpZ2hwIHZlYzMgc2hJcnJhZGlhbmNlKGhpZ2hwIHZlYzMgbm9yKQp7CiAgICBoaWdocCB2ZWMzIGNsMDAgPSB2ZWMzKHNoaXJyWzBdLngsIHNoaXJyWzBdLnksIHNoaXJyWzBdLnopOwogICAgaGlnaHAgdmVjMyBjbDFtMSA9IHZlYzMoc2hpcnJbMF0udywgc2hpcnJbMV0ueCwgc2hpcnJbMV0ueSk7CiAgICBoaWdocCB2ZWMzIGNsMTAgPSB2ZWMzKHNoaXJyWzFdLnosIHNoaXJyWzFdLncsIHNoaXJyWzJdLngpOwogICAgaGlnaHAgdmVjMyBjbDExID0gdmVjMyhzaGlyclsyXS55LCBzaGlyclsyXS56LCBzaGlyclsyXS53KTsKICAgIGhpZ2hwIHZlYzMgY2wybTIgPSB2ZWMzKHNoaXJyWzNdLngsIHNoaXJyWzNdLnksIHNoaXJyWzNdLnopOwogICAgaGlnaHAgdmVjMyBjbDJtMSA9IHZlYzMoc2hpcnJbM10udywgc2hpcnJbNF0ueCwgc2hpcnJbNF0ueSk7CiAgICBoaWdocCB2ZWMzIGNsMjAgPSB2ZWMzKHNoaXJyWzRdLnosIHNoaXJyWzRdLncsIHNoaXJyWzVdLngpOwogICAgaGlnaHAgdmVjMyBjbDIxID0gdmVjMyhzaGlycls1XS55LCBzaGlycls1XS56LCBzaGlycls1XS53KTsKICAgIGhpZ2hwIHZlYzMgY2wyMiA9IHZlYzMoc2hpcnJbNl0ueCwgc2hpcnJbNl0ueSwgc2hpcnJbNl0ueik7CiAgICByZXR1cm4gKCgoKCgoKCgoKGNsMjIgKiAwLjQyOTA0Mjk5NDk3NjA0MzcwMTE3MTg3NSkgKiAoKG5vci55ICogbm9yLnkpIC0gKCgtbm9yLnopICogKC1ub3IueikpKSkgKyAoKChjbDIwICogMC43NDMxMjUwMjE0NTc2NzIxMTkxNDA2MjUpICogbm9yLngpICogbm9yLngpKSArIChjbDAwICogMC44ODYyMjcwMTE2ODA2MDMwMjczNDM3NSkpIC0gKGNsMjAgKiAwLjI0NzcwNzk5Mjc5MjEyOTUxNjYwMTU2MjUpKSArICgoKGNsMm0yICogMC44NTgwODU5ODk5NTIwODc0MDIzNDM3NSkgKiBub3IueSkgKiAoLW5vci56KSkpICsgKCgoY2wyMSAqIDAuODU4MDg1OTg5OTUyMDg3NDAyMzQzNzUpICogbm9yLnkpICogbm9yLngpKSArICgoKGNsMm0xICogMC44NTgwODU5ODk5NTIwODc0MDIzNDM3NSkgKiAoLW5vci56KSkgKiBub3IueCkpICsgKChjbDExICogMS4wMjMzMjc5NDY2NjI5MDI4MzIwMzEyNSkgKiBub3IueSkpICsgKChjbDFtMSAqIDEuMDIzMzI3OTQ2NjYyOTAyODMyMDMxMjUpICogKC1ub3IueikpKSArICgoY2wxMCAqIDEuMDIzMzI3OTQ2NjYyOTAyODMyMDMxMjUpICogbm9yLngpOwp9Cgp2b2lkIG1haW4oKQp7CiAgICBoaWdocCB2ZWMzIG4gPSBub3JtYWxpemUod25vcm1hbCk7CiAgICBoaWdocCB2ZWM0IEltYWdlVGV4dHVyZV8wMDFfc3RvcmUgPSB0ZXh0dXJlKEltYWdlVGV4dHVyZV8wMDEsIHRleENvb3JkKTsKICAgIGhpZ2hwIHZlYzMgXzIwNiA9IHBvdyhJbWFnZVRleHR1cmVfMDAxX3N0b3JlLnh5eiwgdmVjMygyLjIwMDAwMDA0NzY4MzcxNTgyMDMxMjUpKTsKICAgIEltYWdlVGV4dHVyZV8wMDFfc3RvcmUgPSB2ZWM0KF8yMDYueCwgXzIwNi55LCBfMjA2LnosIEltYWdlVGV4dHVyZV8wMDFfc3RvcmUudyk7CiAgICBoaWdocCB2ZWM0IEltYWdlVGV4dHVyZV9zdG9yZSA9IHRleHR1cmUoSW1hZ2VUZXh0dXJlLCB0ZXhDb29yZCk7CiAgICBoaWdocCB2ZWMzIEltYWdlVGV4dHVyZV8wMDFfQ29sb3JfcmVzID0gSW1hZ2VUZXh0dXJlXzAwMV9zdG9yZS54eXo7CiAgICBoaWdocCB2ZWMzIEltYWdlVGV4dHVyZV9Db2xvcl9yZXMgPSBJbWFnZVRleHR1cmVfc3RvcmUueHl6OwogICAgaGlnaHAgdmVjMyBiYXNlY29sID0gSW1hZ2VUZXh0dXJlXzAwMV9Db2xvcl9yZXM7CiAgICBoaWdocCBmbG9hdCByb3VnaG5lc3MgPSBJbWFnZVRleHR1cmVfQ29sb3JfcmVzLng7CiAgICBoaWdocCBmbG9hdCBtZXRhbGxpYyA9IDAuMDsKICAgIGhpZ2hwIGZsb2F0IG9jY2x1c2lvbiA9IDEuMDsKICAgIGhpZ2hwIGZsb2F0IHNwZWN1bGFyID0gMS4wOwogICAgaGlnaHAgZmxvYXQgdmlzaWJpbGl0eSA9IDEuMDsKICAgIGhpZ2hwIGZsb2F0IGRvdE5MID0gbWF4KGRvdChuLCBsaWdodERpciksIDAuMCk7CiAgICBpZiAobGlnaHRQb3NpdGlvbi53ID4gMC4wKQogICAgewogICAgICAgIGhpZ2hwIHZlYzMgbFBvcyA9IGxpZ2h0UG9zaXRpb24ueHl6IC8gdmVjMyhsaWdodFBvc2l0aW9uLncpOwogICAgICAgIHZpc2liaWxpdHkgPSAwLjA7CiAgICAgICAgdmlzaWJpbGl0eSArPSBmbG9hdCgodGV4dHVyZShzaGFkb3dNYXAsIGxQb3MueHkpLnggKyBzaGFkb3dzQmlhcykgPiBsUG9zLnopOwogICAgICAgIHZpc2liaWxpdHkgKz0gKGZsb2F0KCh0ZXh0dXJlKHNoYWRvd01hcCwgbFBvcy54eSArIHZlYzIoMC4wMDA0ODgyODEyNSwgMC4wKSkueCArIHNoYWRvd3NCaWFzKSA%IGxQb3MueikgKiAwLjUpOwogICAgICAgIHZpc2liaWxpdHkgKz0gKGZsb2F0KCh0ZXh0dXJlKHNoYWRvd01hcCwgbFBvcy54eSArIHZlYzIoLTAuMDAwNDg4MjgxMjUsIDAuMCkpLnggKyBzaGFkb3dzQmlhcykgPiBsUG9zLnopICogMC4yNSk7CiAgICAgICAgdmlzaWJpbGl0eSArPSAoZmxvYXQoKHRleHR1cmUoc2hhZG93TWFwLCBsUG9zLnh5ICsgdmVjMigwLjAsIDAuMDAwNDg4MjgxMjUpKS54ICsgc2hhZG93c0JpYXMpID4gbFBvcy56KSAqIDAuNSk7CiAgICAgICAgdmlzaWJpbGl0eSArPSAoZmxvYXQoKHRleHR1cmUoc2hhZG93TWFwLCBsUG9zLnh5ICsgdmVjMigwLjAsIC0wLjAwMDQ4ODI4MTI1KSkueCArIHNoYWRvd3NCaWFzKSA%IGxQb3MueikgKiAwLjI1KTsKICAgICAgICB2aXNpYmlsaXR5IC89IDIuNTsKICAgICAgICB2aXNpYmlsaXR5ID0gbWF4KHZpc2liaWxpdHksIDAuMjAwMDAwMDAyOTgwMjMyMjM4NzY5NTMxMjUpOwogICAgfQogICAgaGlnaHAgdmVjMyBkaXJlY3QgPSAoYmFzZWNvbCAqIGRvdE5MKSAqIGxpZ2h0Q29sb3I7CiAgICBkaXJlY3QgKj0gYXR0ZW51YXRlKGRpc3RhbmNlKHdwb3NpdGlvbiwgbGlnaHRQb3MpKTsKICAgIGZyYWdDb2xvciA9IHZlYzQoKGRpcmVjdCAqIHZpc2liaWxpdHkpICsgKChiYXNlY29sICogc2hJcnJhZGlhbmNlKG4pKSAqIGVudm1hcFN0cmVuZ3RoKSwgMS4wKTsKfQoK",Ne.armdefault_mesh_fragData0="s4006:I3ZlcnNpb24gMTAwCnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OwpwcmVjaXNpb24gaGlnaHAgaW50OwoKdW5pZm9ybSBoaWdocCB2ZWM0IHNoaXJyWzddOwp1bmlmb3JtIGhpZ2hwIHZlYzMgbGlnaHREaXI7CnVuaWZvcm0gaGlnaHAgc2FtcGxlcjJEIHNoYWRvd01hcDsKdW5pZm9ybSBoaWdocCBmbG9hdCBzaGFkb3dzQmlhczsKdW5pZm9ybSBoaWdocCB2ZWMzIGxpZ2h0Q29sb3I7CnVuaWZvcm0gaGlnaHAgdmVjMyBsaWdodFBvczsKdW5pZm9ybSBoaWdocCBmbG9hdCBlbnZtYXBTdHJlbmd0aDsKCnZhcnlpbmcgaGlnaHAgdmVjMyB3bm9ybWFsOwp2YXJ5aW5nIGhpZ2hwIHZlYzQgbGlnaHRQb3NpdGlvbjsKdmFyeWluZyBoaWdocCB2ZWMzIHdwb3NpdGlvbjsKCmhpZ2hwIGZsb2F0IGF0dGVudWF0ZShoaWdocCBmbG9hdCBkaXN0KQp7CiAgICByZXR1cm4gMS4wIC8gKGRpc3QgKiBkaXN0KTsKfQoKaGlnaHAgdmVjMyBzaElycmFkaWFuY2UoaGlnaHAgdmVjMyBub3IpCnsKICAgIGhpZ2hwIHZlYzMgY2wwMCA9IHZlYzMoc2hpcnJbMF0ueCwgc2hpcnJbMF0ueSwgc2hpcnJbMF0ueik7CiAgICBoaWdocCB2ZWMzIGNsMW0xID0gdmVjMyhzaGlyclswXS53LCBzaGlyclsxXS54LCBzaGlyclsxXS55KTsKICAgIGhpZ2hwIHZlYzMgY2wxMCA9IHZlYzMoc2hpcnJbMV0ueiwgc2hpcnJbMV0udywgc2hpcnJbMl0ueCk7CiAgICBoaWdocCB2ZWMzIGNsMTEgPSB2ZWMzKHNoaXJyWzJdLnksIHNoaXJyWzJdLnosIHNoaXJyWzJdLncpOwogICAgaGlnaHAgdmVjMyBjbDJtMiA9IHZlYzMoc2hpcnJbM10ueCwgc2hpcnJbM10ueSwgc2hpcnJbM10ueik7CiAgICBoaWdocCB2ZWMzIGNsMm0xID0gdmVjMyhzaGlyclszXS53LCBzaGlycls0XS54LCBzaGlycls0XS55KTsKICAgIGhpZ2hwIHZlYzMgY2wyMCA9IHZlYzMoc2hpcnJbNF0ueiwgc2hpcnJbNF0udywgc2hpcnJbNV0ueCk7CiAgICBoaWdocCB2ZWMzIGNsMjEgPSB2ZWMzKHNoaXJyWzVdLnksIHNoaXJyWzVdLnosIHNoaXJyWzVdLncpOwogICAgaGlnaHAgdmVjMyBjbDIyID0gdmVjMyhzaGlycls2XS54LCBzaGlycls2XS55LCBzaGlycls2XS56KTsKICAgIHJldHVybiAoKCgoKCgoKCgoY2wyMiAqIDAuNDI5MDQyOTk0OTc2MDQzNzAxMTcxODc1KSAqICgobm9yLnkgKiBub3IueSkgLSAoKC1ub3IueikgKiAoLW5vci56KSkpKSArICgoKGNsMjAgKiAwLjc0MzEyNTAyMTQ1NzY3MjExOTE0MDYyNSkgKiBub3IueCkgKiBub3IueCkpICsgKGNsMDAgKiAwLjg4NjIyNzAxMTY4MDYwMzAyNzM0Mzc1KSkgLSAoY2wyMCAqIDAuMjQ3NzA3OTkyNzkyMTI5NTE2NjAxNTYyNSkpICsgKCgoY2wybTIgKiAwLjg1ODA4NTk4OTk1MjA4NzQwMjM0Mzc1KSAqIG5vci55KSAqICgtbm9yLnopKSkgKyAoKChjbDIxICogMC44NTgwODU5ODk5NTIwODc0MDIzNDM3NSkgKiBub3IueSkgKiBub3IueCkpICsgKCgoY2wybTEgKiAwLjg1ODA4NTk4OTk1MjA4NzQwMjM0Mzc1KSAqICgtbm9yLnopKSAqIG5vci54KSkgKyAoKGNsMTEgKiAxLjAyMzMyNzk0NjY2MjkwMjgzMjAzMTI1KSAqIG5vci55KSkgKyAoKGNsMW0xICogMS4wMjMzMjc5NDY2NjI5MDI4MzIwMzEyNSkgKiAoLW5vci56KSkpICsgKChjbDEwICogMS4wMjMzMjc5NDY2NjI5MDI4MzIwMzEyNSkgKiBub3IueCk7Cn0KCnZvaWQgbWFpbigpCnsKICAgIGhpZ2hwIHZlYzMgbiA9IG5vcm1hbGl6ZSh3bm9ybWFsKTsKICAgIGhpZ2hwIHZlYzMgYmFzZWNvbCA9IHZlYzMoMC44MDAwMDAwMTE5MjA5Mjg5NTUwNzgxMjUpOwogICAgaGlnaHAgZmxvYXQgcm91Z2huZXNzID0gMC4wOwogICAgaGlnaHAgZmxvYXQgbWV0YWxsaWMgPSAwLjA7CiAgICBoaWdocCBmbG9hdCBvY2NsdXNpb24gPSAxLjA7CiAgICBoaWdocCBmbG9hdCBzcGVjdWxhciA9IDAuMDsKICAgIGhpZ2hwIGZsb2F0IHZpc2liaWxpdHkgPSAxLjA7CiAgICBoaWdocCBmbG9hdCBkb3ROTCA9IG1heChkb3QobiwgbGlnaHREaXIpLCAwLjApOwogICAgaWYgKGxpZ2h0UG9zaXRpb24udyA%IDAuMCkKICAgIHsKICAgICAgICBoaWdocCB2ZWMzIGxQb3MgPSBsaWdodFBvc2l0aW9uLnh5eiAvIHZlYzMobGlnaHRQb3NpdGlvbi53KTsKICAgICAgICB2aXNpYmlsaXR5ID0gMC4wOwogICAgICAgIHZpc2liaWxpdHkgKz0gZmxvYXQoKHRleHR1cmUyRChzaGFkb3dNYXAsIGxQb3MueHkpLnggKyBzaGFkb3dzQmlhcykgPiBsUG9zLnopOwogICAgICAgIHZpc2liaWxpdHkgKz0gKGZsb2F0KCh0ZXh0dXJlMkQoc2hhZG93TWFwLCBsUG9zLnh5ICsgdmVjMigwLjAwMDQ4ODI4MTI1LCAwLjApKS54ICsgc2hhZG93c0JpYXMpID4gbFBvcy56KSAqIDAuNSk7CiAgICAgICAgdmlzaWJpbGl0eSArPSAoZmxvYXQoKHRleHR1cmUyRChzaGFkb3dNYXAsIGxQb3MueHkgKyB2ZWMyKC0wLjAwMDQ4ODI4MTI1LCAwLjApKS54ICsgc2hhZG93c0JpYXMpID4gbFBvcy56KSAqIDAuMjUpOwogICAgICAgIHZpc2liaWxpdHkgKz0gKGZsb2F0KCh0ZXh0dXJlMkQoc2hhZG93TWFwLCBsUG9zLnh5ICsgdmVjMigwLjAsIDAuMDAwNDg4MjgxMjUpKS54ICsgc2hhZG93c0JpYXMpID4gbFBvcy56KSAqIDAuNSk7CiAgICAgICAgdmlzaWJpbGl0eSArPSAoZmxvYXQoKHRleHR1cmUyRChzaGFkb3dNYXAsIGxQb3MueHkgKyB2ZWMyKDAuMCwgLTAuMDAwNDg4MjgxMjUpKS54ICsgc2hhZG93c0JpYXMpID4gbFBvcy56KSAqIDAuMjUpOwogICAgICAgIHZpc2liaWxpdHkgLz0gMi41OwogICAgICAgIHZpc2liaWxpdHkgPSBtYXgodmlzaWJpbGl0eSwgMC4yMDAwMDAwMDI5ODAyMzIyMzg3Njk1MzEyNSk7CiAgICB9CiAgICBoaWdocCB2ZWMzIGRpcmVjdCA9IChiYXNlY29sICogZG90TkwpICogbGlnaHRDb2xvcjsKICAgIGRpcmVjdCAqPSBhdHRlbnVhdGUoZGlzdGFuY2Uod3Bvc2l0aW9uLCBsaWdodFBvcykpOwogICAgZ2xfRnJhZ0RhdGFbMF0gPSB2ZWM0KChkaXJlY3QgKiB2aXNpYmlsaXR5KSArICgoYmFzZWNvbCAqIHNoSXJyYWRpYW5jZShuKSkgKiBlbnZtYXBTdHJlbmd0aCksIDEuMCk7Cn0KCg",Ne.armdefault_mesh_fragData1="s3755:I3ZlcnNpb24gMTAwCnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OwpwcmVjaXNpb24gbWVkaXVtcCBpbnQ7Cgp1bmlmb3JtIHZlYzQgc2hpcnJbN107CnVuaWZvcm0gdmVjMyBsaWdodERpcjsKdW5pZm9ybSBtZWRpdW1wIHNhbXBsZXIyRCBzaGFkb3dNYXA7CnVuaWZvcm0gZmxvYXQgc2hhZG93c0JpYXM7CnVuaWZvcm0gdmVjMyBsaWdodENvbG9yOwp1bmlmb3JtIHZlYzMgbGlnaHRQb3M7CnVuaWZvcm0gZmxvYXQgZW52bWFwU3RyZW5ndGg7Cgp2YXJ5aW5nIHZlYzMgd25vcm1hbDsKdmFyeWluZyB2ZWM0IGxpZ2h0UG9zaXRpb247CnZhcnlpbmcgdmVjMyB3cG9zaXRpb247CgpmbG9hdCBhdHRlbnVhdGUoZmxvYXQgZGlzdCkKewogICAgcmV0dXJuIDEuMCAvIChkaXN0ICogZGlzdCk7Cn0KCnZlYzMgc2hJcnJhZGlhbmNlKHZlYzMgbm9yKQp7CiAgICB2ZWMzIGNsMDAgPSB2ZWMzKHNoaXJyWzBdLngsIHNoaXJyWzBdLnksIHNoaXJyWzBdLnopOwogICAgdmVjMyBjbDFtMSA9IHZlYzMoc2hpcnJbMF0udywgc2hpcnJbMV0ueCwgc2hpcnJbMV0ueSk7CiAgICB2ZWMzIGNsMTAgPSB2ZWMzKHNoaXJyWzFdLnosIHNoaXJyWzFdLncsIHNoaXJyWzJdLngpOwogICAgdmVjMyBjbDExID0gdmVjMyhzaGlyclsyXS55LCBzaGlyclsyXS56LCBzaGlyclsyXS53KTsKICAgIHZlYzMgY2wybTIgPSB2ZWMzKHNoaXJyWzNdLngsIHNoaXJyWzNdLnksIHNoaXJyWzNdLnopOwogICAgdmVjMyBjbDJtMSA9IHZlYzMoc2hpcnJbM10udywgc2hpcnJbNF0ueCwgc2hpcnJbNF0ueSk7CiAgICB2ZWMzIGNsMjAgPSB2ZWMzKHNoaXJyWzRdLnosIHNoaXJyWzRdLncsIHNoaXJyWzVdLngpOwogICAgdmVjMyBjbDIxID0gdmVjMyhzaGlycls1XS55LCBzaGlycls1XS56LCBzaGlycls1XS53KTsKICAgIHZlYzMgY2wyMiA9IHZlYzMoc2hpcnJbNl0ueCwgc2hpcnJbNl0ueSwgc2hpcnJbNl0ueik7CiAgICByZXR1cm4gKCgoKCgoKCgoKGNsMjIgKiAwLjQyOTA0Mjk5NDk3NjA0MzcwMTE3MTg3NSkgKiAoKG5vci55ICogbm9yLnkpIC0gKCgtbm9yLnopICogKC1ub3IueikpKSkgKyAoKChjbDIwICogMC43NDMxMjUwMjE0NTc2NzIxMTkxNDA2MjUpICogbm9yLngpICogbm9yLngpKSArIChjbDAwICogMC44ODYyMjcwMTE2ODA2MDMwMjczNDM3NSkpIC0gKGNsMjAgKiAwLjI0NzcwNzk5Mjc5MjEyOTUxNjYwMTU2MjUpKSArICgoKGNsMm0yICogMC44NTgwODU5ODk5NTIwODc0MDIzNDM3NSkgKiBub3IueSkgKiAoLW5vci56KSkpICsgKCgoY2wyMSAqIDAuODU4MDg1OTg5OTUyMDg3NDAyMzQzNzUpICogbm9yLnkpICogbm9yLngpKSArICgoKGNsMm0xICogMC44NTgwODU5ODk5NTIwODc0MDIzNDM3NSkgKiAoLW5vci56KSkgKiBub3IueCkpICsgKChjbDExICogMS4wMjMzMjc5NDY2NjI5MDI4MzIwMzEyNSkgKiBub3IueSkpICsgKChjbDFtMSAqIDEuMDIzMzI3OTQ2NjYyOTAyODMyMDMxMjUpICogKC1ub3IueikpKSArICgoY2wxMCAqIDEuMDIzMzI3OTQ2NjYyOTAyODMyMDMxMjUpICogbm9yLngpOwp9Cgp2b2lkIG1haW4oKQp7CiAgICB2ZWMzIG4gPSBub3JtYWxpemUod25vcm1hbCk7CiAgICB2ZWMzIGJhc2Vjb2wgPSB2ZWMzKDAuODAwMDAwMDExOTIwOTI4OTU1MDc4MTI1KTsKICAgIGZsb2F0IHJvdWdobmVzcyA9IDAuMDsKICAgIGZsb2F0IG1ldGFsbGljID0gMC4wOwogICAgZmxvYXQgb2NjbHVzaW9uID0gMS4wOwogICAgZmxvYXQgc3BlY3VsYXIgPSAwLjA7CiAgICBmbG9hdCB2aXNpYmlsaXR5ID0gMS4wOwogICAgZmxvYXQgZG90TkwgPSBtYXgoZG90KG4sIGxpZ2h0RGlyKSwgMC4wKTsKICAgIGlmIChsaWdodFBvc2l0aW9uLncgPiAwLjApCiAgICB7CiAgICAgICAgdmVjMyBsUG9zID0gbGlnaHRQb3NpdGlvbi54eXogLyB2ZWMzKGxpZ2h0UG9zaXRpb24udyk7CiAgICAgICAgdmlzaWJpbGl0eSA9IDAuMDsKICAgICAgICB2aXNpYmlsaXR5ICs9IGZsb2F0KCh0ZXh0dXJlMkQoc2hhZG93TWFwLCBsUG9zLnh5KS54ICsgc2hhZG93c0JpYXMpID4gbFBvcy56KTsKICAgICAgICB2aXNpYmlsaXR5ICs9IChmbG9hdCgodGV4dHVyZTJEKHNoYWRvd01hcCwgbFBvcy54eSArIHZlYzIoMC4wMDA0ODgyODEyNSwgMC4wKSkueCArIHNoYWRvd3NCaWFzKSA%IGxQb3MueikgKiAwLjUpOwogICAgICAgIHZpc2liaWxpdHkgKz0gKGZsb2F0KCh0ZXh0dXJlMkQoc2hhZG93TWFwLCBsUG9zLnh5ICsgdmVjMigtMC4wMDA0ODgyODEyNSwgMC4wKSkueCArIHNoYWRvd3NCaWFzKSA%IGxQb3MueikgKiAwLjI1KTsKICAgICAgICB2aXNpYmlsaXR5ICs9IChmbG9hdCgodGV4dHVyZTJEKHNoYWRvd01hcCwgbFBvcy54eSArIHZlYzIoMC4wLCAwLjAwMDQ4ODI4MTI1KSkueCArIHNoYWRvd3NCaWFzKSA%IGxQb3MueikgKiAwLjUpOwogICAgICAgIHZpc2liaWxpdHkgKz0gKGZsb2F0KCh0ZXh0dXJlMkQoc2hhZG93TWFwLCBsUG9zLnh5ICsgdmVjMigwLjAsIC0wLjAwMDQ4ODI4MTI1KSkueCArIHNoYWRvd3NCaWFzKSA%IGxQb3MueikgKiAwLjI1KTsKICAgICAgICB2aXNpYmlsaXR5IC89IDIuNTsKICAgICAgICB2aXNpYmlsaXR5ID0gbWF4KHZpc2liaWxpdHksIDAuMjAwMDAwMDAyOTgwMjMyMjM4NzY5NTMxMjUpOwogICAgfQogICAgdmVjMyBkaXJlY3QgPSAoYmFzZWNvbCAqIGRvdE5MKSAqIGxpZ2h0Q29sb3I7CiAgICBkaXJlY3QgKj0gYXR0ZW51YXRlKGRpc3RhbmNlKHdwb3NpdGlvbiwgbGlnaHRQb3MpKTsKICAgIGdsX0ZyYWdEYXRhWzBdID0gdmVjNCgoZGlyZWN0ICogdmlzaWJpbGl0eSkgKyAoKGJhc2Vjb2wgKiBzaElycmFkaWFuY2UobikpICogZW52bWFwU3RyZW5ndGgpLCAxLjApOwp9Cgo",Ne.armdefault_mesh_fragData2="s4004:I3ZlcnNpb24gMzAwIGVzCnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OwpwcmVjaXNpb24gaGlnaHAgaW50OwoKdW5pZm9ybSBoaWdocCB2ZWM0IHNoaXJyWzddOwp1bmlmb3JtIGhpZ2hwIHZlYzMgbGlnaHREaXI7CnVuaWZvcm0gaGlnaHAgc2FtcGxlcjJEIHNoYWRvd01hcDsKdW5pZm9ybSBoaWdocCBmbG9hdCBzaGFkb3dzQmlhczsKdW5pZm9ybSBoaWdocCB2ZWMzIGxpZ2h0Q29sb3I7CnVuaWZvcm0gaGlnaHAgdmVjMyBsaWdodFBvczsKdW5pZm9ybSBoaWdocCBmbG9hdCBlbnZtYXBTdHJlbmd0aDsKCmluIGhpZ2hwIHZlYzMgd25vcm1hbDsKaW4gaGlnaHAgdmVjNCBsaWdodFBvc2l0aW9uOwppbiBoaWdocCB2ZWMzIHdwb3NpdGlvbjsKb3V0IGhpZ2hwIHZlYzQgZnJhZ0NvbG9yOwoKaGlnaHAgZmxvYXQgYXR0ZW51YXRlKGhpZ2hwIGZsb2F0IGRpc3QpCnsKICAgIHJldHVybiAxLjAgLyAoZGlzdCAqIGRpc3QpOwp9CgpoaWdocCB2ZWMzIHNoSXJyYWRpYW5jZShoaWdocCB2ZWMzIG5vcikKewogICAgaGlnaHAgdmVjMyBjbDAwID0gdmVjMyhzaGlyclswXS54LCBzaGlyclswXS55LCBzaGlyclswXS56KTsKICAgIGhpZ2hwIHZlYzMgY2wxbTEgPSB2ZWMzKHNoaXJyWzBdLncsIHNoaXJyWzFdLngsIHNoaXJyWzFdLnkpOwogICAgaGlnaHAgdmVjMyBjbDEwID0gdmVjMyhzaGlyclsxXS56LCBzaGlyclsxXS53LCBzaGlyclsyXS54KTsKICAgIGhpZ2hwIHZlYzMgY2wxMSA9IHZlYzMoc2hpcnJbMl0ueSwgc2hpcnJbMl0ueiwgc2hpcnJbMl0udyk7CiAgICBoaWdocCB2ZWMzIGNsMm0yID0gdmVjMyhzaGlyclszXS54LCBzaGlyclszXS55LCBzaGlyclszXS56KTsKICAgIGhpZ2hwIHZlYzMgY2wybTEgPSB2ZWMzKHNoaXJyWzNdLncsIHNoaXJyWzRdLngsIHNoaXJyWzRdLnkpOwogICAgaGlnaHAgdmVjMyBjbDIwID0gdmVjMyhzaGlycls0XS56LCBzaGlycls0XS53LCBzaGlycls1XS54KTsKICAgIGhpZ2hwIHZlYzMgY2wyMSA9IHZlYzMoc2hpcnJbNV0ueSwgc2hpcnJbNV0ueiwgc2hpcnJbNV0udyk7CiAgICBoaWdocCB2ZWMzIGNsMjIgPSB2ZWMzKHNoaXJyWzZdLngsIHNoaXJyWzZdLnksIHNoaXJyWzZdLnopOwogICAgcmV0dXJuICgoKCgoKCgoKChjbDIyICogMC40MjkwNDI5OTQ5NzYwNDM3MDExNzE4NzUpICogKChub3IueSAqIG5vci55KSAtICgoLW5vci56KSAqICgtbm9yLnopKSkpICsgKCgoY2wyMCAqIDAuNzQzMTI1MDIxNDU3NjcyMTE5MTQwNjI1KSAqIG5vci54KSAqIG5vci54KSkgKyAoY2wwMCAqIDAuODg2MjI3MDExNjgwNjAzMDI3MzQzNzUpKSAtIChjbDIwICogMC4yNDc3MDc5OTI3OTIxMjk1MTY2MDE1NjI1KSkgKyAoKChjbDJtMiAqIDAuODU4MDg1OTg5OTUyMDg3NDAyMzQzNzUpICogbm9yLnkpICogKC1ub3IueikpKSArICgoKGNsMjEgKiAwLjg1ODA4NTk4OTk1MjA4NzQwMjM0Mzc1KSAqIG5vci55KSAqIG5vci54KSkgKyAoKChjbDJtMSAqIDAuODU4MDg1OTg5OTUyMDg3NDAyMzQzNzUpICogKC1ub3IueikpICogbm9yLngpKSArICgoY2wxMSAqIDEuMDIzMzI3OTQ2NjYyOTAyODMyMDMxMjUpICogbm9yLnkpKSArICgoY2wxbTEgKiAxLjAyMzMyNzk0NjY2MjkwMjgzMjAzMTI1KSAqICgtbm9yLnopKSkgKyAoKGNsMTAgKiAxLjAyMzMyNzk0NjY2MjkwMjgzMjAzMTI1KSAqIG5vci54KTsKfQoKdm9pZCBtYWluKCkKewogICAgaGlnaHAgdmVjMyBuID0gbm9ybWFsaXplKHdub3JtYWwpOwogICAgaGlnaHAgdmVjMyBiYXNlY29sID0gdmVjMygwLjgwMDAwMDAxMTkyMDkyODk1NTA3ODEyNSk7CiAgICBoaWdocCBmbG9hdCByb3VnaG5lc3MgPSAwLjA7CiAgICBoaWdocCBmbG9hdCBtZXRhbGxpYyA9IDAuMDsKICAgIGhpZ2hwIGZsb2F0IG9jY2x1c2lvbiA9IDEuMDsKICAgIGhpZ2hwIGZsb2F0IHNwZWN1bGFyID0gMC4wOwogICAgaGlnaHAgZmxvYXQgdmlzaWJpbGl0eSA9IDEuMDsKICAgIGhpZ2hwIGZsb2F0IGRvdE5MID0gbWF4KGRvdChuLCBsaWdodERpciksIDAuMCk7CiAgICBpZiAobGlnaHRQb3NpdGlvbi53ID4gMC4wKQogICAgewogICAgICAgIGhpZ2hwIHZlYzMgbFBvcyA9IGxpZ2h0UG9zaXRpb24ueHl6IC8gdmVjMyhsaWdodFBvc2l0aW9uLncpOwogICAgICAgIHZpc2liaWxpdHkgPSAwLjA7CiAgICAgICAgdmlzaWJpbGl0eSArPSBmbG9hdCgodGV4dHVyZShzaGFkb3dNYXAsIGxQb3MueHkpLnggKyBzaGFkb3dzQmlhcykgPiBsUG9zLnopOwogICAgICAgIHZpc2liaWxpdHkgKz0gKGZsb2F0KCh0ZXh0dXJlKHNoYWRvd01hcCwgbFBvcy54eSArIHZlYzIoMC4wMDA0ODgyODEyNSwgMC4wKSkueCArIHNoYWRvd3NCaWFzKSA%IGxQb3MueikgKiAwLjUpOwogICAgICAgIHZpc2liaWxpdHkgKz0gKGZsb2F0KCh0ZXh0dXJlKHNoYWRvd01hcCwgbFBvcy54eSArIHZlYzIoLTAuMDAwNDg4MjgxMjUsIDAuMCkpLnggKyBzaGFkb3dzQmlhcykgPiBsUG9zLnopICogMC4yNSk7CiAgICAgICAgdmlzaWJpbGl0eSArPSAoZmxvYXQoKHRleHR1cmUoc2hhZG93TWFwLCBsUG9zLnh5ICsgdmVjMigwLjAsIDAuMDAwNDg4MjgxMjUpKS54ICsgc2hhZG93c0JpYXMpID4gbFBvcy56KSAqIDAuNSk7CiAgICAgICAgdmlzaWJpbGl0eSArPSAoZmxvYXQoKHRleHR1cmUoc2hhZG93TWFwLCBsUG9zLnh5ICsgdmVjMigwLjAsIC0wLjAwMDQ4ODI4MTI1KSkueCArIHNoYWRvd3NCaWFzKSA%IGxQb3MueikgKiAwLjI1KTsKICAgICAgICB2aXNpYmlsaXR5IC89IDIuNTsKICAgICAgICB2aXNpYmlsaXR5ID0gbWF4KHZpc2liaWxpdHksIDAuMjAwMDAwMDAyOTgwMjMyMjM4NzY5NTMxMjUpOwogICAgfQogICAgaGlnaHAgdmVjMyBkaXJlY3QgPSAoYmFzZWNvbCAqIGRvdE5MKSAqIGxpZ2h0Q29sb3I7CiAgICBkaXJlY3QgKj0gYXR0ZW51YXRlKGRpc3RhbmNlKHdwb3NpdGlvbiwgbGlnaHRQb3MpKTsKICAgIGZyYWdDb2xvciA9IHZlYzQoKGRpcmVjdCAqIHZpc2liaWxpdHkpICsgKChiYXNlY29sICogc2hJcnJhZGlhbmNlKG4pKSAqIGVudm1hcFN0cmVuZ3RoKSwgMS4wKTsKfQoK",Ne.compositor_pass_vertData0="s214:I3ZlcnNpb24gMTAwCgp2YXJ5aW5nIHZlYzIgdGV4Q29vcmQ7CmF0dHJpYnV0ZSB2ZWMyIHBvczsKCnZvaWQgbWFpbigpCnsKICAgIHRleENvb3JkID0gKHBvcyAqIHZlYzIoMC41KSkgKyB2ZWMyKDAuNSk7CiAgICBnbF9Qb3NpdGlvbiA9IHZlYzQocG9zLCAwLjAsIDEuMCk7Cn0KCg",Ne.compositor_pass_vertData1="s235:I3ZlcnNpb24gMTAwCgp2YXJ5aW5nIG1lZGl1bXAgdmVjMiB0ZXhDb29yZDsKYXR0cmlidXRlIG1lZGl1bXAgdmVjMiBwb3M7Cgp2b2lkIG1haW4oKQp7CiAgICB0ZXhDb29yZCA9IChwb3MgKiB2ZWMyKDAuNSkpICsgdmVjMigwLjUpOwogICAgZ2xfUG9zaXRpb24gPSB2ZWM0KHBvcywgMC4wLCAxLjApOwp9Cgo",Ne.compositor_pass_vertData2="s203:I3ZlcnNpb24gMzAwIGVzCgpvdXQgdmVjMiB0ZXhDb29yZDsKaW4gdmVjMiBwb3M7Cgp2b2lkIG1haW4oKQp7CiAgICB0ZXhDb29yZCA9IChwb3MgKiB2ZWMyKDAuNSkpICsgdmVjMigwLjUpOwogICAgZ2xfUG9zaXRpb24gPSB2ZWM0KHBvcywgMC4wLCAxLjApOwp9Cgo",Ne.compositor_pass_fragData0="s3506:I3ZlcnNpb24gMTAwCnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OwpwcmVjaXNpb24gaGlnaHAgaW50OwoKdW5pZm9ybSBoaWdocCB2ZWMyIHRleFN0ZXA7CnVuaWZvcm0gaGlnaHAgc2FtcGxlcjJEIHRleDsKdW5pZm9ybSBoaWdocCBzYW1wbGVyMkQgZ2J1ZmZlckQ7Cgp2YXJ5aW5nIGhpZ2hwIHZlYzIgdGV4Q29vcmQ7CgpoaWdocCB2ZWMzIHRvbmVtYXBGaWxtaWMoaGlnaHAgdmVjMyBjb2xvcikKewogICAgaGlnaHAgdmVjMyB4ID0gbWF4KHZlYzMoMC4wKSwgY29sb3IgLSB2ZWMzKDAuMDA0MDAwMDAwMTg5OTg5ODA1MjIxNTU3NjE3MTg3NSkpOwogICAgcmV0dXJuICh4ICogKCh4ICogNi4xOTk5OTk4MDkyNjUxMzY3MTg3NSkgKyB2ZWMzKDAuNSkpKSAvICgoeCAqICgoeCAqIDYuMTk5OTk5ODA5MjY1MTM2NzE4NzUpICsgdmVjMygxLjcwMDAwMDA0NzY4MzcxNTgyMDMxMjUpKSkgKyB2ZWMzKDAuMDU5OTk5OTk4NjU4ODk1NDkyNTUzNzEwOTM3NSkpOwp9Cgp2b2lkIG1haW4oKQp7CiAgICBoaWdocCB2ZWMyIHRleENvID0gdGV4Q29vcmQ7CiAgICBoaWdocCB2ZWMyIHRjcmdiTlcgPSB0ZXhDbyArICh2ZWMyKC0xLjApICogdGV4U3RlcCk7CiAgICBoaWdocCB2ZWMyIHRjcmdiTkUgPSB0ZXhDbyArICh2ZWMyKDEuMCwgLTEuMCkgKiB0ZXhTdGVwKTsKICAgIGhpZ2hwIHZlYzIgdGNyZ2JTVyA9IHRleENvICsgKHZlYzIoLTEuMCwgMS4wKSAqIHRleFN0ZXApOwogICAgaGlnaHAgdmVjMiB0Y3JnYlNFID0gdGV4Q28gKyAodmVjMigxLjApICogdGV4U3RlcCk7CiAgICBoaWdocCB2ZWMyIHRjcmdiTSA9IHZlYzIodGV4Q28pOwogICAgaGlnaHAgdmVjMyByZ2JOVyA9IHRleHR1cmUyRCh0ZXgsIHRjcmdiTlcpLnh5ejsKICAgIGhpZ2hwIHZlYzMgcmdiTkUgPSB0ZXh0dXJlMkQodGV4LCB0Y3JnYk5FKS54eXo7CiAgICBoaWdocCB2ZWMzIHJnYlNXID0gdGV4dHVyZTJEKHRleCwgdGNyZ2JTVykueHl6OwogICAgaGlnaHAgdmVjMyByZ2JTRSA9IHRleHR1cmUyRCh0ZXgsIHRjcmdiU0UpLnh5ejsKICAgIGhpZ2hwIHZlYzMgcmdiTSA9IHRleHR1cmUyRCh0ZXgsIHRjcmdiTSkueHl6OwogICAgaGlnaHAgdmVjMyBsdW1hID0gdmVjMygwLjI5ODk5OTk5NDk5MzIwOTgzODg2NzE4NzUsIDAuNTg3MDAwMDEyMzk3NzY2MTEzMjgxMjUsIDAuMTE0MDAwMDAwMDU5NjA0NjQ0Nzc1MzkwNjI1KTsKICAgIGhpZ2hwIGZsb2F0IGx1bWFOVyA9IGRvdChyZ2JOVywgbHVtYSk7CiAgICBoaWdocCBmbG9hdCBsdW1hTkUgPSBkb3QocmdiTkUsIGx1bWEpOwogICAgaGlnaHAgZmxvYXQgbHVtYVNXID0gZG90KHJnYlNXLCBsdW1hKTsKICAgIGhpZ2hwIGZsb2F0IGx1bWFTRSA9IGRvdChyZ2JTRSwgbHVtYSk7CiAgICBoaWdocCBmbG9hdCBsdW1hTSA9IGRvdChyZ2JNLCBsdW1hKTsKICAgIGhpZ2hwIGZsb2F0IGx1bWFNaW4gPSBtaW4obHVtYU0sIG1pbihtaW4obHVtYU5XLCBsdW1hTkUpLCBtaW4obHVtYVNXLCBsdW1hU0UpKSk7CiAgICBoaWdocCBmbG9hdCBsdW1hTWF4ID0gbWF4KGx1bWFNLCBtYXgobWF4KGx1bWFOVywgbHVtYU5FKSwgbWF4KGx1bWFTVywgbHVtYVNFKSkpOwogICAgaGlnaHAgdmVjMiBkaXI7CiAgICBkaXIueCA9IC0oKGx1bWFOVyArIGx1bWFORSkgLSAobHVtYVNXICsgbHVtYVNFKSk7CiAgICBkaXIueSA9IChsdW1hTlcgKyBsdW1hU1cpIC0gKGx1bWFORSArIGx1bWFTRSk7CiAgICBoaWdocCBmbG9hdCBkaXJSZWR1Y2UgPSBtYXgoKCgobHVtYU5XICsgbHVtYU5FKSArIGx1bWFTVykgKyBsdW1hU0UpICogMC4wMzEyNSwgMC4wMDc4MTI1KTsKICAgIGhpZ2hwIGZsb2F0IHJjcERpck1pbiA9IDEuMCAvIChtaW4oYWJzKGRpci54KSwgYWJzKGRpci55KSkgKyBkaXJSZWR1Y2UpOwogICAgZGlyID0gbWluKHZlYzIoOC4wKSwgbWF4KHZlYzIoLTguMCksIGRpciAqIHJjcERpck1pbikpICogdGV4U3RlcDsKICAgIGhpZ2hwIHZlYzMgcmdiQSA9ICh0ZXh0dXJlMkQodGV4LCB0ZXhDbyArIChkaXIgKiAoLTAuMTY2NjY2NjcxNjMzNzIwMzk3OTQ5MjE4NzUpKSkueHl6ICsgdGV4dHVyZTJEKHRleCwgdGV4Q28gKyAoZGlyICogMC4xNjY2NjY2NzE2MzM3MjAzOTc5NDkyMTg3NSkpLnh5eikgKiAwLjU7CiAgICBoaWdocCB2ZWMzIHJnYkIgPSAocmdiQSAqIDAuNSkgKyAoKHRleHR1cmUyRCh0ZXgsIHRleENvICsgKGRpciAqICgtMC41KSkpLnh5eiArIHRleHR1cmUyRCh0ZXgsIHRleENvICsgKGRpciAqIDAuNSkpLnh5eikgKiAwLjI1KTsKICAgIGhpZ2hwIGZsb2F0IGx1bWFCID0gZG90KHJnYkIsIGx1bWEpOwogICAgaWYgKChsdW1hQiA8IGx1bWFNaW4pIHx8IChsdW1hQiA%IGx1bWFNYXgpKQogICAgewogICAgICAgIGdsX0ZyYWdEYXRhWzBdID0gdmVjNChyZ2JBLngsIHJnYkEueSwgcmdiQS56LCBnbF9GcmFnRGF0YVswXS53KTsKICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICBnbF9GcmFnRGF0YVswXSA9IHZlYzQocmdiQi54LCByZ2JCLnksIHJnYkIueiwgZ2xfRnJhZ0RhdGFbMF0udyk7CiAgICB9CiAgICBoaWdocCB2ZWMzIF8yNzcgPSB0b25lbWFwRmlsbWljKGdsX0ZyYWdEYXRhWzBdLnh5eik7CiAgICBnbF9GcmFnRGF0YVswXSA9IHZlYzQoXzI3Ny54LCBfMjc3LnksIF8yNzcueiwgZ2xfRnJhZ0RhdGFbMF0udyk7Cn0KCg",Ne.compositor_pass_fragData1="s3266:I3ZlcnNpb24gMTAwCnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OwpwcmVjaXNpb24gbWVkaXVtcCBpbnQ7Cgp1bmlmb3JtIHZlYzIgdGV4U3RlcDsKdW5pZm9ybSBtZWRpdW1wIHNhbXBsZXIyRCB0ZXg7CnVuaWZvcm0gbWVkaXVtcCBzYW1wbGVyMkQgZ2J1ZmZlckQ7Cgp2YXJ5aW5nIHZlYzIgdGV4Q29vcmQ7Cgp2ZWMzIHRvbmVtYXBGaWxtaWModmVjMyBjb2xvcikKewogICAgdmVjMyB4ID0gbWF4KHZlYzMoMC4wKSwgY29sb3IgLSB2ZWMzKDAuMDA0MDAwMDAwMTg5OTg5ODA1MjIxNTU3NjE3MTg3NSkpOwogICAgcmV0dXJuICh4ICogKCh4ICogNi4xOTk5OTk4MDkyNjUxMzY3MTg3NSkgKyB2ZWMzKDAuNSkpKSAvICgoeCAqICgoeCAqIDYuMTk5OTk5ODA5MjY1MTM2NzE4NzUpICsgdmVjMygxLjcwMDAwMDA0NzY4MzcxNTgyMDMxMjUpKSkgKyB2ZWMzKDAuMDU5OTk5OTk4NjU4ODk1NDkyNTUzNzEwOTM3NSkpOwp9Cgp2b2lkIG1haW4oKQp7CiAgICB2ZWMyIHRleENvID0gdGV4Q29vcmQ7CiAgICB2ZWMyIHRjcmdiTlcgPSB0ZXhDbyArICh2ZWMyKC0xLjApICogdGV4U3RlcCk7CiAgICB2ZWMyIHRjcmdiTkUgPSB0ZXhDbyArICh2ZWMyKDEuMCwgLTEuMCkgKiB0ZXhTdGVwKTsKICAgIHZlYzIgdGNyZ2JTVyA9IHRleENvICsgKHZlYzIoLTEuMCwgMS4wKSAqIHRleFN0ZXApOwogICAgdmVjMiB0Y3JnYlNFID0gdGV4Q28gKyAodmVjMigxLjApICogdGV4U3RlcCk7CiAgICB2ZWMyIHRjcmdiTSA9IHZlYzIodGV4Q28pOwogICAgdmVjMyByZ2JOVyA9IHRleHR1cmUyRCh0ZXgsIHRjcmdiTlcpLnh5ejsKICAgIHZlYzMgcmdiTkUgPSB0ZXh0dXJlMkQodGV4LCB0Y3JnYk5FKS54eXo7CiAgICB2ZWMzIHJnYlNXID0gdGV4dHVyZTJEKHRleCwgdGNyZ2JTVykueHl6OwogICAgdmVjMyByZ2JTRSA9IHRleHR1cmUyRCh0ZXgsIHRjcmdiU0UpLnh5ejsKICAgIHZlYzMgcmdiTSA9IHRleHR1cmUyRCh0ZXgsIHRjcmdiTSkueHl6OwogICAgdmVjMyBsdW1hID0gdmVjMygwLjI5ODk5OTk5NDk5MzIwOTgzODg2NzE4NzUsIDAuNTg3MDAwMDEyMzk3NzY2MTEzMjgxMjUsIDAuMTE0MDAwMDAwMDU5NjA0NjQ0Nzc1MzkwNjI1KTsKICAgIGZsb2F0IGx1bWFOVyA9IGRvdChyZ2JOVywgbHVtYSk7CiAgICBmbG9hdCBsdW1hTkUgPSBkb3QocmdiTkUsIGx1bWEpOwogICAgZmxvYXQgbHVtYVNXID0gZG90KHJnYlNXLCBsdW1hKTsKICAgIGZsb2F0IGx1bWFTRSA9IGRvdChyZ2JTRSwgbHVtYSk7CiAgICBmbG9hdCBsdW1hTSA9IGRvdChyZ2JNLCBsdW1hKTsKICAgIGZsb2F0IGx1bWFNaW4gPSBtaW4obHVtYU0sIG1pbihtaW4obHVtYU5XLCBsdW1hTkUpLCBtaW4obHVtYVNXLCBsdW1hU0UpKSk7CiAgICBmbG9hdCBsdW1hTWF4ID0gbWF4KGx1bWFNLCBtYXgobWF4KGx1bWFOVywgbHVtYU5FKSwgbWF4KGx1bWFTVywgbHVtYVNFKSkpOwogICAgdmVjMiBkaXI7CiAgICBkaXIueCA9IC0oKGx1bWFOVyArIGx1bWFORSkgLSAobHVtYVNXICsgbHVtYVNFKSk7CiAgICBkaXIueSA9IChsdW1hTlcgKyBsdW1hU1cpIC0gKGx1bWFORSArIGx1bWFTRSk7CiAgICBmbG9hdCBkaXJSZWR1Y2UgPSBtYXgoKCgobHVtYU5XICsgbHVtYU5FKSArIGx1bWFTVykgKyBsdW1hU0UpICogMC4wMzEyNSwgMC4wMDc4MTI1KTsKICAgIGZsb2F0IHJjcERpck1pbiA9IDEuMCAvIChtaW4oYWJzKGRpci54KSwgYWJzKGRpci55KSkgKyBkaXJSZWR1Y2UpOwogICAgZGlyID0gbWluKHZlYzIoOC4wKSwgbWF4KHZlYzIoLTguMCksIGRpciAqIHJjcERpck1pbikpICogdGV4U3RlcDsKICAgIHZlYzMgcmdiQSA9ICh0ZXh0dXJlMkQodGV4LCB0ZXhDbyArIChkaXIgKiAoLTAuMTY2NjY2NjcxNjMzNzIwMzk3OTQ5MjE4NzUpKSkueHl6ICsgdGV4dHVyZTJEKHRleCwgdGV4Q28gKyAoZGlyICogMC4xNjY2NjY2NzE2MzM3MjAzOTc5NDkyMTg3NSkpLnh5eikgKiAwLjU7CiAgICB2ZWMzIHJnYkIgPSAocmdiQSAqIDAuNSkgKyAoKHRleHR1cmUyRCh0ZXgsIHRleENvICsgKGRpciAqICgtMC41KSkpLnh5eiArIHRleHR1cmUyRCh0ZXgsIHRleENvICsgKGRpciAqIDAuNSkpLnh5eikgKiAwLjI1KTsKICAgIGZsb2F0IGx1bWFCID0gZG90KHJnYkIsIGx1bWEpOwogICAgaWYgKChsdW1hQiA8IGx1bWFNaW4pIHx8IChsdW1hQiA%IGx1bWFNYXgpKQogICAgewogICAgICAgIGdsX0ZyYWdEYXRhWzBdID0gdmVjNChyZ2JBLngsIHJnYkEueSwgcmdiQS56LCBnbF9GcmFnRGF0YVswXS53KTsKICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICBnbF9GcmFnRGF0YVswXSA9IHZlYzQocmdiQi54LCByZ2JCLnksIHJnYkIueiwgZ2xfRnJhZ0RhdGFbMF0udyk7CiAgICB9CiAgICB2ZWMzIF8yNzcgPSB0b25lbWFwRmlsbWljKGdsX0ZyYWdEYXRhWzBdLnh5eik7CiAgICBnbF9GcmFnRGF0YVswXSA9IHZlYzQoXzI3Ny54LCBfMjc3LnksIF8yNzcueiwgZ2xfRnJhZ0RhdGFbMF0udyk7Cn0KCg",Ne.compositor_pass_fragData2="s3467:I3ZlcnNpb24gMzAwIGVzCnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OwpwcmVjaXNpb24gaGlnaHAgaW50OwoKdW5pZm9ybSBoaWdocCB2ZWMyIHRleFN0ZXA7CnVuaWZvcm0gaGlnaHAgc2FtcGxlcjJEIHRleDsKdW5pZm9ybSBoaWdocCBzYW1wbGVyMkQgZ2J1ZmZlckQ7CgppbiBoaWdocCB2ZWMyIHRleENvb3JkOwpvdXQgaGlnaHAgdmVjNCBmcmFnQ29sb3I7CgpoaWdocCB2ZWMzIHRvbmVtYXBGaWxtaWMoaGlnaHAgdmVjMyBjb2xvcikKewogICAgaGlnaHAgdmVjMyB4ID0gbWF4KHZlYzMoMC4wKSwgY29sb3IgLSB2ZWMzKDAuMDA0MDAwMDAwMTg5OTg5ODA1MjIxNTU3NjE3MTg3NSkpOwogICAgcmV0dXJuICh4ICogKCh4ICogNi4xOTk5OTk4MDkyNjUxMzY3MTg3NSkgKyB2ZWMzKDAuNSkpKSAvICgoeCAqICgoeCAqIDYuMTk5OTk5ODA5MjY1MTM2NzE4NzUpICsgdmVjMygxLjcwMDAwMDA0NzY4MzcxNTgyMDMxMjUpKSkgKyB2ZWMzKDAuMDU5OTk5OTk4NjU4ODk1NDkyNTUzNzEwOTM3NSkpOwp9Cgp2b2lkIG1haW4oKQp7CiAgICBoaWdocCB2ZWMyIHRleENvID0gdGV4Q29vcmQ7CiAgICBoaWdocCB2ZWMyIHRjcmdiTlcgPSB0ZXhDbyArICh2ZWMyKC0xLjApICogdGV4U3RlcCk7CiAgICBoaWdocCB2ZWMyIHRjcmdiTkUgPSB0ZXhDbyArICh2ZWMyKDEuMCwgLTEuMCkgKiB0ZXhTdGVwKTsKICAgIGhpZ2hwIHZlYzIgdGNyZ2JTVyA9IHRleENvICsgKHZlYzIoLTEuMCwgMS4wKSAqIHRleFN0ZXApOwogICAgaGlnaHAgdmVjMiB0Y3JnYlNFID0gdGV4Q28gKyAodmVjMigxLjApICogdGV4U3RlcCk7CiAgICBoaWdocCB2ZWMyIHRjcmdiTSA9IHZlYzIodGV4Q28pOwogICAgaGlnaHAgdmVjMyByZ2JOVyA9IHRleHR1cmUodGV4LCB0Y3JnYk5XKS54eXo7CiAgICBoaWdocCB2ZWMzIHJnYk5FID0gdGV4dHVyZSh0ZXgsIHRjcmdiTkUpLnh5ejsKICAgIGhpZ2hwIHZlYzMgcmdiU1cgPSB0ZXh0dXJlKHRleCwgdGNyZ2JTVykueHl6OwogICAgaGlnaHAgdmVjMyByZ2JTRSA9IHRleHR1cmUodGV4LCB0Y3JnYlNFKS54eXo7CiAgICBoaWdocCB2ZWMzIHJnYk0gPSB0ZXh0dXJlKHRleCwgdGNyZ2JNKS54eXo7CiAgICBoaWdocCB2ZWMzIGx1bWEgPSB2ZWMzKDAuMjk4OTk5OTk0OTkzMjA5ODM4ODY3MTg3NSwgMC41ODcwMDAwMTIzOTc3NjYxMTMyODEyNSwgMC4xMTQwMDAwMDAwNTk2MDQ2NDQ3NzUzOTA2MjUpOwogICAgaGlnaHAgZmxvYXQgbHVtYU5XID0gZG90KHJnYk5XLCBsdW1hKTsKICAgIGhpZ2hwIGZsb2F0IGx1bWFORSA9IGRvdChyZ2JORSwgbHVtYSk7CiAgICBoaWdocCBmbG9hdCBsdW1hU1cgPSBkb3QocmdiU1csIGx1bWEpOwogICAgaGlnaHAgZmxvYXQgbHVtYVNFID0gZG90KHJnYlNFLCBsdW1hKTsKICAgIGhpZ2hwIGZsb2F0IGx1bWFNID0gZG90KHJnYk0sIGx1bWEpOwogICAgaGlnaHAgZmxvYXQgbHVtYU1pbiA9IG1pbihsdW1hTSwgbWluKG1pbihsdW1hTlcsIGx1bWFORSksIG1pbihsdW1hU1csIGx1bWFTRSkpKTsKICAgIGhpZ2hwIGZsb2F0IGx1bWFNYXggPSBtYXgobHVtYU0sIG1heChtYXgobHVtYU5XLCBsdW1hTkUpLCBtYXgobHVtYVNXLCBsdW1hU0UpKSk7CiAgICBoaWdocCB2ZWMyIGRpcjsKICAgIGRpci54ID0gLSgobHVtYU5XICsgbHVtYU5FKSAtIChsdW1hU1cgKyBsdW1hU0UpKTsKICAgIGRpci55ID0gKGx1bWFOVyArIGx1bWFTVykgLSAobHVtYU5FICsgbHVtYVNFKTsKICAgIGhpZ2hwIGZsb2F0IGRpclJlZHVjZSA9IG1heCgoKChsdW1hTlcgKyBsdW1hTkUpICsgbHVtYVNXKSArIGx1bWFTRSkgKiAwLjAzMTI1LCAwLjAwNzgxMjUpOwogICAgaGlnaHAgZmxvYXQgcmNwRGlyTWluID0gMS4wIC8gKG1pbihhYnMoZGlyLngpLCBhYnMoZGlyLnkpKSArIGRpclJlZHVjZSk7CiAgICBkaXIgPSBtaW4odmVjMig4LjApLCBtYXgodmVjMigtOC4wKSwgZGlyICogcmNwRGlyTWluKSkgKiB0ZXhTdGVwOwogICAgaGlnaHAgdmVjMyByZ2JBID0gKHRleHR1cmUodGV4LCB0ZXhDbyArIChkaXIgKiAoLTAuMTY2NjY2NjcxNjMzNzIwMzk3OTQ5MjE4NzUpKSkueHl6ICsgdGV4dHVyZSh0ZXgsIHRleENvICsgKGRpciAqIDAuMTY2NjY2NjcxNjMzNzIwMzk3OTQ5MjE4NzUpKS54eXopICogMC41OwogICAgaGlnaHAgdmVjMyByZ2JCID0gKHJnYkEgKiAwLjUpICsgKCh0ZXh0dXJlKHRleCwgdGV4Q28gKyAoZGlyICogKC0wLjUpKSkueHl6ICsgdGV4dHVyZSh0ZXgsIHRleENvICsgKGRpciAqIDAuNSkpLnh5eikgKiAwLjI1KTsKICAgIGhpZ2hwIGZsb2F0IGx1bWFCID0gZG90KHJnYkIsIGx1bWEpOwogICAgaWYgKChsdW1hQiA8IGx1bWFNaW4pIHx8IChsdW1hQiA%IGx1bWFNYXgpKQogICAgewogICAgICAgIGZyYWdDb2xvciA9IHZlYzQocmdiQS54LCByZ2JBLnksIHJnYkEueiwgZnJhZ0NvbG9yLncpOwogICAgfQogICAgZWxzZQogICAgewogICAgICAgIGZyYWdDb2xvciA9IHZlYzQocmdiQi54LCByZ2JCLnksIHJnYkIueiwgZnJhZ0NvbG9yLncpOwogICAgfQogICAgaGlnaHAgdmVjMyBfMjc3ID0gdG9uZW1hcEZpbG1pYyhmcmFnQ29sb3IueHl6KTsKICAgIGZyYWdDb2xvciA9IHZlYzQoXzI3Ny54LCBfMjc3LnksIF8yNzcueiwgZnJhZ0NvbG9yLncpOwp9Cgo",Ne.painter_colored_vertData0="s331:I3ZlcnNpb24gMTAwCgp1bmlmb3JtIG1hdDQgcHJvamVjdGlvbk1hdHJpeDsKCmF0dHJpYnV0ZSB2ZWMzIHZlcnRleFBvc2l0aW9uOwp2YXJ5aW5nIHZlYzQgZnJhZ21lbnRDb2xvcjsKYXR0cmlidXRlIHZlYzQgdmVydGV4Q29sb3I7Cgp2b2lkIG1haW4oKQp7CiAgICBnbF9Qb3NpdGlvbiA9IHByb2plY3Rpb25NYXRyaXggKiB2ZWM0KHZlcnRleFBvc2l0aW9uLCAxLjApOwogICAgZnJhZ21lbnRDb2xvciA9IHZlcnRleENvbG9yOwp9Cgo",Ne.painter_colored_vertData1="s374:I3ZlcnNpb24gMTAwCgp1bmlmb3JtIG1lZGl1bXAgbWF0NCBwcm9qZWN0aW9uTWF0cml4OwoKYXR0cmlidXRlIG1lZGl1bXAgdmVjMyB2ZXJ0ZXhQb3NpdGlvbjsKdmFyeWluZyBtZWRpdW1wIHZlYzQgZnJhZ21lbnRDb2xvcjsKYXR0cmlidXRlIG1lZGl1bXAgdmVjNCB2ZXJ0ZXhDb2xvcjsKCnZvaWQgbWFpbigpCnsKICAgIGdsX1Bvc2l0aW9uID0gcHJvamVjdGlvbk1hdHJpeCAqIHZlYzQodmVydGV4UG9zaXRpb24sIDEuMCk7CiAgICBmcmFnbWVudENvbG9yID0gdmVydGV4Q29sb3I7Cn0KCg",Ne.painter_colored_vertData2="s311:I3ZlcnNpb24gMzAwIGVzCgp1bmlmb3JtIG1hdDQgcHJvamVjdGlvbk1hdHJpeDsKCmluIHZlYzMgdmVydGV4UG9zaXRpb247Cm91dCB2ZWM0IGZyYWdtZW50Q29sb3I7CmluIHZlYzQgdmVydGV4Q29sb3I7Cgp2b2lkIG1haW4oKQp7CiAgICBnbF9Qb3NpdGlvbiA9IHByb2plY3Rpb25NYXRyaXggKiB2ZWM0KHZlcnRleFBvc2l0aW9uLCAxLjApOwogICAgZnJhZ21lbnRDb2xvciA9IHZlcnRleENvbG9yOwp9Cgo",Ne.painter_colored_fragData0="s198:I3ZlcnNpb24gMTAwCnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OwpwcmVjaXNpb24gaGlnaHAgaW50OwoKdmFyeWluZyBoaWdocCB2ZWM0IGZyYWdtZW50Q29sb3I7Cgp2b2lkIG1haW4oKQp7CiAgICBnbF9GcmFnRGF0YVswXSA9IGZyYWdtZW50Q29sb3I7Cn0KCg",Ne.painter_colored_fragData1="s192:I3ZlcnNpb24gMTAwCnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OwpwcmVjaXNpb24gbWVkaXVtcCBpbnQ7Cgp2YXJ5aW5nIHZlYzQgZnJhZ21lbnRDb2xvcjsKCnZvaWQgbWFpbigpCnsKICAgIGdsX0ZyYWdEYXRhWzBdID0gZnJhZ21lbnRDb2xvcjsKfQoK",Ne.painter_colored_fragData2="s223:I3ZlcnNpb24gMzAwIGVzCnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OwpwcmVjaXNpb24gaGlnaHAgaW50OwoKb3V0IGhpZ2hwIHZlYzQgRnJhZ0NvbG9yOwppbiBoaWdocCB2ZWM0IGZyYWdtZW50Q29sb3I7Cgp2b2lkIG1haW4oKQp7CiAgICBGcmFnQ29sb3IgPSBmcmFnbWVudENvbG9yOwp9Cgo",Ne.painter_image_vertData0="s415:I3ZlcnNpb24gMTAwCgp1bmlmb3JtIG1hdDQgcHJvamVjdGlvbk1hdHJpeDsKCmF0dHJpYnV0ZSB2ZWMzIHZlcnRleFBvc2l0aW9uOwp2YXJ5aW5nIHZlYzIgdGV4Q29vcmQ7CmF0dHJpYnV0ZSB2ZWMyIHRleFBvc2l0aW9uOwp2YXJ5aW5nIHZlYzQgY29sb3I7CmF0dHJpYnV0ZSB2ZWM0IHZlcnRleENvbG9yOwoKdm9pZCBtYWluKCkKewogICAgZ2xfUG9zaXRpb24gPSBwcm9qZWN0aW9uTWF0cml4ICogdmVjNCh2ZXJ0ZXhQb3NpdGlvbiwgMS4wKTsKICAgIHRleENvb3JkID0gdGV4UG9zaXRpb247CiAgICBjb2xvciA9IHZlcnRleENvbG9yOwp9Cgo",Ne.painter_image_vertData1="s479:I3ZlcnNpb24gMTAwCgp1bmlmb3JtIG1lZGl1bXAgbWF0NCBwcm9qZWN0aW9uTWF0cml4OwoKYXR0cmlidXRlIG1lZGl1bXAgdmVjMyB2ZXJ0ZXhQb3NpdGlvbjsKdmFyeWluZyBtZWRpdW1wIHZlYzIgdGV4Q29vcmQ7CmF0dHJpYnV0ZSBtZWRpdW1wIHZlYzIgdGV4UG9zaXRpb247CnZhcnlpbmcgbWVkaXVtcCB2ZWM0IGNvbG9yOwphdHRyaWJ1dGUgbWVkaXVtcCB2ZWM0IHZlcnRleENvbG9yOwoKdm9pZCBtYWluKCkKewogICAgZ2xfUG9zaXRpb24gPSBwcm9qZWN0aW9uTWF0cml4ICogdmVjNCh2ZXJ0ZXhQb3NpdGlvbiwgMS4wKTsKICAgIHRleENvb3JkID0gdGV4UG9zaXRpb247CiAgICBjb2xvciA9IHZlcnRleENvbG9yOwp9Cgo",Ne.painter_image_vertData2="s380:I3ZlcnNpb24gMzAwIGVzCgp1bmlmb3JtIG1hdDQgcHJvamVjdGlvbk1hdHJpeDsKCmluIHZlYzMgdmVydGV4UG9zaXRpb247Cm91dCB2ZWMyIHRleENvb3JkOwppbiB2ZWMyIHRleFBvc2l0aW9uOwpvdXQgdmVjNCBjb2xvcjsKaW4gdmVjNCB2ZXJ0ZXhDb2xvcjsKCnZvaWQgbWFpbigpCnsKICAgIGdsX1Bvc2l0aW9uID0gcHJvamVjdGlvbk1hdHJpeCAqIHZlYzQodmVydGV4UG9zaXRpb24sIDEuMCk7CiAgICB0ZXhDb29yZCA9IHRleFBvc2l0aW9uOwogICAgY29sb3IgPSB2ZXJ0ZXhDb2xvcjsKfQoK",Ne.painter_image_fragData0="s471:I3ZlcnNpb24gMTAwCnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OwpwcmVjaXNpb24gaGlnaHAgaW50OwoKdW5pZm9ybSBoaWdocCBzYW1wbGVyMkQgdGV4OwoKdmFyeWluZyBoaWdocCB2ZWMyIHRleENvb3JkOwp2YXJ5aW5nIGhpZ2hwIHZlYzQgY29sb3I7Cgp2b2lkIG1haW4oKQp7CiAgICBoaWdocCB2ZWM0IHRleGNvbG9yID0gdGV4dHVyZTJEKHRleCwgdGV4Q29vcmQpICogY29sb3I7CiAgICBoaWdocCB2ZWMzIF8zMiA9IHRleGNvbG9yLnh5eiAqIGNvbG9yLnc7CiAgICB0ZXhjb2xvciA9IHZlYzQoXzMyLngsIF8zMi55LCBfMzIueiwgdGV4Y29sb3Iudyk7CiAgICBnbF9GcmFnRGF0YVswXSA9IHRleGNvbG9yOwp9Cgo",Ne.painter_image_fragData1="s444:I3ZlcnNpb24gMTAwCnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OwpwcmVjaXNpb24gbWVkaXVtcCBpbnQ7Cgp1bmlmb3JtIG1lZGl1bXAgc2FtcGxlcjJEIHRleDsKCnZhcnlpbmcgdmVjMiB0ZXhDb29yZDsKdmFyeWluZyB2ZWM0IGNvbG9yOwoKdm9pZCBtYWluKCkKewogICAgdmVjNCB0ZXhjb2xvciA9IHRleHR1cmUyRCh0ZXgsIHRleENvb3JkKSAqIGNvbG9yOwogICAgdmVjMyBfMzIgPSB0ZXhjb2xvci54eXogKiBjb2xvci53OwogICAgdGV4Y29sb3IgPSB2ZWM0KF8zMi54LCBfMzIueSwgXzMyLnosIHRleGNvbG9yLncpOwogICAgZ2xfRnJhZ0RhdGFbMF0gPSB0ZXhjb2xvcjsKfQoK",Ne.painter_image_fragData2="s487:I3ZlcnNpb24gMzAwIGVzCnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OwpwcmVjaXNpb24gaGlnaHAgaW50OwoKdW5pZm9ybSBoaWdocCBzYW1wbGVyMkQgdGV4OwoKaW4gaGlnaHAgdmVjMiB0ZXhDb29yZDsKaW4gaGlnaHAgdmVjNCBjb2xvcjsKb3V0IGhpZ2hwIHZlYzQgRnJhZ0NvbG9yOwoKdm9pZCBtYWluKCkKewogICAgaGlnaHAgdmVjNCB0ZXhjb2xvciA9IHRleHR1cmUodGV4LCB0ZXhDb29yZCkgKiBjb2xvcjsKICAgIGhpZ2hwIHZlYzMgXzMyID0gdGV4Y29sb3IueHl6ICogY29sb3IudzsKICAgIHRleGNvbG9yID0gdmVjNChfMzIueCwgXzMyLnksIF8zMi56LCB0ZXhjb2xvci53KTsKICAgIEZyYWdDb2xvciA9IHRleGNvbG9yOwp9Cgo",Ne.painter_text_fragData0="s351:I3ZlcnNpb24gMTAwCnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OwpwcmVjaXNpb24gaGlnaHAgaW50OwoKdW5pZm9ybSBoaWdocCBzYW1wbGVyMkQgdGV4OwoKdmFyeWluZyBoaWdocCB2ZWM0IGZyYWdtZW50Q29sb3I7CnZhcnlpbmcgaGlnaHAgdmVjMiB0ZXhDb29yZDsKCnZvaWQgbWFpbigpCnsKICAgIGdsX0ZyYWdEYXRhWzBdID0gdmVjNChmcmFnbWVudENvbG9yLnh5eiwgdGV4dHVyZTJEKHRleCwgdGV4Q29vcmQpLnggKiBmcmFnbWVudENvbG9yLncpOwp9Cgo",Ne.painter_text_fragData1="s340:I3ZlcnNpb24gMTAwCnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OwpwcmVjaXNpb24gbWVkaXVtcCBpbnQ7Cgp1bmlmb3JtIG1lZGl1bXAgc2FtcGxlcjJEIHRleDsKCnZhcnlpbmcgdmVjNCBmcmFnbWVudENvbG9yOwp2YXJ5aW5nIHZlYzIgdGV4Q29vcmQ7Cgp2b2lkIG1haW4oKQp7CiAgICBnbF9GcmFnRGF0YVswXSA9IHZlYzQoZnJhZ21lbnRDb2xvci54eXosIHRleHR1cmUyRCh0ZXgsIHRleENvb3JkKS54ICogZnJhZ21lbnRDb2xvci53KTsKfQoK",Ne.painter_text_fragData2="s367:I3ZlcnNpb24gMzAwIGVzCnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OwpwcmVjaXNpb24gaGlnaHAgaW50OwoKdW5pZm9ybSBoaWdocCBzYW1wbGVyMkQgdGV4OwoKb3V0IGhpZ2hwIHZlYzQgRnJhZ0NvbG9yOwppbiBoaWdocCB2ZWM0IGZyYWdtZW50Q29sb3I7CmluIGhpZ2hwIHZlYzIgdGV4Q29vcmQ7Cgp2b2lkIG1haW4oKQp7CiAgICBGcmFnQ29sb3IgPSB2ZWM0KGZyYWdtZW50Q29sb3IueHl6LCB0ZXh0dXJlKHRleCwgdGV4Q29vcmQpLnggKiBmcmFnbWVudENvbG9yLncpOwp9Cgo",Ne.painter_text_vertData0="s436:I3ZlcnNpb24gMTAwCgp1bmlmb3JtIG1hdDQgcHJvamVjdGlvbk1hdHJpeDsKCmF0dHJpYnV0ZSB2ZWMzIHZlcnRleFBvc2l0aW9uOwp2YXJ5aW5nIHZlYzIgdGV4Q29vcmQ7CmF0dHJpYnV0ZSB2ZWMyIHRleFBvc2l0aW9uOwp2YXJ5aW5nIHZlYzQgZnJhZ21lbnRDb2xvcjsKYXR0cmlidXRlIHZlYzQgdmVydGV4Q29sb3I7Cgp2b2lkIG1haW4oKQp7CiAgICBnbF9Qb3NpdGlvbiA9IHByb2plY3Rpb25NYXRyaXggKiB2ZWM0KHZlcnRleFBvc2l0aW9uLCAxLjApOwogICAgdGV4Q29vcmQgPSB0ZXhQb3NpdGlvbjsKICAgIGZyYWdtZW50Q29sb3IgPSB2ZXJ0ZXhDb2xvcjsKfQoK",Ne.painter_text_vertData1="s500:I3ZlcnNpb24gMTAwCgp1bmlmb3JtIG1lZGl1bXAgbWF0NCBwcm9qZWN0aW9uTWF0cml4OwoKYXR0cmlidXRlIG1lZGl1bXAgdmVjMyB2ZXJ0ZXhQb3NpdGlvbjsKdmFyeWluZyBtZWRpdW1wIHZlYzIgdGV4Q29vcmQ7CmF0dHJpYnV0ZSBtZWRpdW1wIHZlYzIgdGV4UG9zaXRpb247CnZhcnlpbmcgbWVkaXVtcCB2ZWM0IGZyYWdtZW50Q29sb3I7CmF0dHJpYnV0ZSBtZWRpdW1wIHZlYzQgdmVydGV4Q29sb3I7Cgp2b2lkIG1haW4oKQp7CiAgICBnbF9Qb3NpdGlvbiA9IHByb2plY3Rpb25NYXRyaXggKiB2ZWM0KHZlcnRleFBvc2l0aW9uLCAxLjApOwogICAgdGV4Q29vcmQgPSB0ZXhQb3NpdGlvbjsKICAgIGZyYWdtZW50Q29sb3IgPSB2ZXJ0ZXhDb2xvcjsKfQoK",Ne.painter_text_vertData2="s402:I3ZlcnNpb24gMzAwIGVzCgp1bmlmb3JtIG1hdDQgcHJvamVjdGlvbk1hdHJpeDsKCmluIHZlYzMgdmVydGV4UG9zaXRpb247Cm91dCB2ZWMyIHRleENvb3JkOwppbiB2ZWMyIHRleFBvc2l0aW9uOwpvdXQgdmVjNCBmcmFnbWVudENvbG9yOwppbiB2ZWM0IHZlcnRleENvbG9yOwoKdm9pZCBtYWluKCkKewogICAgZ2xfUG9zaXRpb24gPSBwcm9qZWN0aW9uTWF0cml4ICogdmVjNCh2ZXJ0ZXhQb3NpdGlvbiwgMS4wKTsKICAgIHRleENvb3JkID0gdGV4UG9zaXRpb247CiAgICBmcmFnbWVudENvbG9yID0gdmVydGV4Q29sb3I7Cn0KCg",Ne.painter_video_vertData0="s415:I3ZlcnNpb24gMTAwCgp1bmlmb3JtIG1hdDQgcHJvamVjdGlvbk1hdHJpeDsKCmF0dHJpYnV0ZSB2ZWMzIHZlcnRleFBvc2l0aW9uOwp2YXJ5aW5nIHZlYzIgdGV4Q29vcmQ7CmF0dHJpYnV0ZSB2ZWMyIHRleFBvc2l0aW9uOwp2YXJ5aW5nIHZlYzQgY29sb3I7CmF0dHJpYnV0ZSB2ZWM0IHZlcnRleENvbG9yOwoKdm9pZCBtYWluKCkKewogICAgZ2xfUG9zaXRpb24gPSBwcm9qZWN0aW9uTWF0cml4ICogdmVjNCh2ZXJ0ZXhQb3NpdGlvbiwgMS4wKTsKICAgIHRleENvb3JkID0gdGV4UG9zaXRpb247CiAgICBjb2xvciA9IHZlcnRleENvbG9yOwp9Cgo",Ne.painter_video_vertData1="s479:I3ZlcnNpb24gMTAwCgp1bmlmb3JtIG1lZGl1bXAgbWF0NCBwcm9qZWN0aW9uTWF0cml4OwoKYXR0cmlidXRlIG1lZGl1bXAgdmVjMyB2ZXJ0ZXhQb3NpdGlvbjsKdmFyeWluZyBtZWRpdW1wIHZlYzIgdGV4Q29vcmQ7CmF0dHJpYnV0ZSBtZWRpdW1wIHZlYzIgdGV4UG9zaXRpb247CnZhcnlpbmcgbWVkaXVtcCB2ZWM0IGNvbG9yOwphdHRyaWJ1dGUgbWVkaXVtcCB2ZWM0IHZlcnRleENvbG9yOwoKdm9pZCBtYWluKCkKewogICAgZ2xfUG9zaXRpb24gPSBwcm9qZWN0aW9uTWF0cml4ICogdmVjNCh2ZXJ0ZXhQb3NpdGlvbiwgMS4wKTsKICAgIHRleENvb3JkID0gdGV4UG9zaXRpb247CiAgICBjb2xvciA9IHZlcnRleENvbG9yOwp9Cgo",Ne.painter_video_vertData2="s380:I3ZlcnNpb24gMzAwIGVzCgp1bmlmb3JtIG1hdDQgcHJvamVjdGlvbk1hdHJpeDsKCmluIHZlYzMgdmVydGV4UG9zaXRpb247Cm91dCB2ZWMyIHRleENvb3JkOwppbiB2ZWMyIHRleFBvc2l0aW9uOwpvdXQgdmVjNCBjb2xvcjsKaW4gdmVjNCB2ZXJ0ZXhDb2xvcjsKCnZvaWQgbWFpbigpCnsKICAgIGdsX1Bvc2l0aW9uID0gcHJvamVjdGlvbk1hdHJpeCAqIHZlYzQodmVydGV4UG9zaXRpb24sIDEuMCk7CiAgICB0ZXhDb29yZCA9IHRleFBvc2l0aW9uOwogICAgY29sb3IgPSB2ZXJ0ZXhDb2xvcjsKfQoK",Ne.painter_video_fragData0="s471:I3ZlcnNpb24gMTAwCnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OwpwcmVjaXNpb24gaGlnaHAgaW50OwoKdW5pZm9ybSBoaWdocCBzYW1wbGVyMkQgdGV4OwoKdmFyeWluZyBoaWdocCB2ZWMyIHRleENvb3JkOwp2YXJ5aW5nIGhpZ2hwIHZlYzQgY29sb3I7Cgp2b2lkIG1haW4oKQp7CiAgICBoaWdocCB2ZWM0IHRleGNvbG9yID0gdGV4dHVyZTJEKHRleCwgdGV4Q29vcmQpICogY29sb3I7CiAgICBoaWdocCB2ZWMzIF8zMiA9IHRleGNvbG9yLnh5eiAqIGNvbG9yLnc7CiAgICB0ZXhjb2xvciA9IHZlYzQoXzMyLngsIF8zMi55LCBfMzIueiwgdGV4Y29sb3Iudyk7CiAgICBnbF9GcmFnRGF0YVswXSA9IHRleGNvbG9yOwp9Cgo",Ne.painter_video_fragData1="s444:I3ZlcnNpb24gMTAwCnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OwpwcmVjaXNpb24gbWVkaXVtcCBpbnQ7Cgp1bmlmb3JtIG1lZGl1bXAgc2FtcGxlcjJEIHRleDsKCnZhcnlpbmcgdmVjMiB0ZXhDb29yZDsKdmFyeWluZyB2ZWM0IGNvbG9yOwoKdm9pZCBtYWluKCkKewogICAgdmVjNCB0ZXhjb2xvciA9IHRleHR1cmUyRCh0ZXgsIHRleENvb3JkKSAqIGNvbG9yOwogICAgdmVjMyBfMzIgPSB0ZXhjb2xvci54eXogKiBjb2xvci53OwogICAgdGV4Y29sb3IgPSB2ZWM0KF8zMi54LCBfMzIueSwgXzMyLnosIHRleGNvbG9yLncpOwogICAgZ2xfRnJhZ0RhdGFbMF0gPSB0ZXhjb2xvcjsKfQoK",Ne.painter_video_fragData2="s487:I3ZlcnNpb24gMzAwIGVzCnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OwpwcmVjaXNpb24gaGlnaHAgaW50OwoKdW5pZm9ybSBoaWdocCBzYW1wbGVyMkQgdGV4OwoKaW4gaGlnaHAgdmVjMiB0ZXhDb29yZDsKaW4gaGlnaHAgdmVjNCBjb2xvcjsKb3V0IGhpZ2hwIHZlYzQgRnJhZ0NvbG9yOwoKdm9pZCBtYWluKCkKewogICAgaGlnaHAgdmVjNCB0ZXhjb2xvciA9IHRleHR1cmUodGV4LCB0ZXhDb29yZCkgKiBjb2xvcjsKICAgIGhpZ2hwIHZlYzMgXzMyID0gdGV4Y29sb3IueHl6ICogY29sb3IudzsKICAgIHRleGNvbG9yID0gdmVjNChfMzIueCwgXzMyLnksIF8zMi56LCB0ZXhjb2xvci53KTsKICAgIEZyYWdDb2xvciA9IHRleGNvbG9yOwp9Cgo",uo.renderListeners=[],uo.foregroundListeners=[],uo.backgroundListeners=[],he.mobile=!1,he.ios=!1,he.mobileAudioPlaying=!1,he.chrome=!1,he.firefox=!1,he.ie=!1,he.insideInputEvent=!1,he.leftMouseCtrlDown=!1,he.minimumScroll=999,he.lastFirstTouchX=0,he.lastFirstTouchY=0,he.iosSoundEnabled=!1,he.soundEnabled=!1,he.iosTouchs=[],ue.windows=[],we.INVALID_BITS=-1,Ge.INVERSE_DB_TABLE=[1.0649863e-7,1.1341951e-7,1.2079015e-7,1.2863978e-7,1.3699951e-7,1.4590251e-7,1.5538408e-7,1.6548181e-7,1.7623575e-7,1.8768855e-7,1.9988561e-7,2.128753e-7,2.2670913e-7,2.4144197e-7,2.5713223e-7,2.7384213e-7,2.9163793e-7,3.1059021e-7,3.3077411e-7,3.5226968e-7,3.7516214e-7,3.9954229e-7,4.255068e-7,4.5315863e-7,4.8260743e-7,5.1396998e-7,5.4737065e-7,5.8294187e-7,6.2082472e-7,6.6116941e-7,7.0413592e-7,7.4989464e-7,7.9862701e-7,8.505263e-7,9.0579828e-7,9.6466216e-7,10273513e-13,10941144e-13,11652161e-13,12409384e-13,13215816e-13,14074654e-13,14989305e-13,15963394e-13,17000785e-13,18105592e-13,19282195e-13,20535261e-13,21869758e-13,23290978e-13,24804557e-13,26416497e-13,2813319e-12,29961443e-13,31908506e-13,33982101e-13,36190449e-13,38542308e-13,41047004e-13,4371447e-12,46555282e-13,49580707e-13,5280274e-12,5623416e-12,59888572e-13,63780469e-13,67925283e-13,72339451e-13,77040476e-13,82047e-10,87378876e-13,93057248e-13,99104632e-13,10554501e-12,11240392e-12,11970856e-12,12748789e-12,13577278e-12,14459606e-12,15399272e-12,16400004e-12,17465768e-12,18600792e-12,19809576e-12,21096914e-12,22467911e-12,23928002e-12,25482978e-12,27139006e-12,28902651e-12,30780908e-12,32781225e-12,34911534e-12,37180282e-12,39596466e-12,42169667e-12,4491009e-11,47828601e-12,50936773e-12,54246931e-12,57772202e-12,61526565e-12,65524908e-12,69783085e-12,74317983e-12,79147585e-12,8429104e-11,89768747e-12,95602426e-12,.00010181521,.00010843174,.00011547824,.00012298267,.00013097477,.00013948625,.00014855085,.00015820453,.00016848555,.00017943469,.00019109536,.00020351382,.00021673929,.00023082423,.00024582449,.00026179955,.00027881276,.00029693158,.00031622787,.00033677814,.00035866388,.00038197188,.00040679456,.00043323036,.00046138411,.00049136745,.00052329927,.00055730621,.00059352311,.00063209358,.00067317058,716917e-9,.0007635063,.00081312324,.00086596457,.00092223983,.00098217216,.0010459992,.0011139742,.0011863665,.0012634633,.0013455702,.0014330129,.0015261382,.0016253153,.0017309374,.0018434235,.0019632195,.0020908006,.0022266726,.0023713743,.0025254795,.0026895994,.0028643847,.0030505286,.0032487691,.0034598925,.0036847358,.0039241906,.0041792066,.004450795,.0047400328,.0050480668,.0053761186,.0057254891,.0060975636,.0064938176,.0069158225,.0073652516,.0078438871,.0083536271,.0088964928,.009474637,.010090352,.01074608,.011444421,.012188144,.012980198,.013823725,.014722068,.015678791,.016697687,.017782797,.018938423,.020169149,.021479854,.022875735,.02436233,.025945531,.027631618,.029427276,.031339626,.033376252,.035545228,.037855157,.040315199,.042935108,.045725273,.048696758,.051861348,.055231591,.05882085,.062643361,.066714279,.071049749,.075666962,.080584227,.085821044,.091398179,.097337747,.1036633,.11039993,.11757434,.12521498,.13335215,.14201813,.15124727,.16107617,.1715438,.18269168,.19456402,.20720788,.22067342,.23501402,.25028656,.26655159,.28387361,.30232132,.32196786,.34289114,.36517414,.38890521,.41417847,.44109412,.4697589,.50028648,.53279791,.56742212,.6042964,.64356699,.68538959,.72993007,.77736504,.8278826,.88168307,.9389798,1],Qe.fontGlyphs=function(t){for(var e=[],a=32;a<256;){var i=a++;e.push(i)}return e}(),pa.GL_RGBA16F=34842,pa.GL_RGBA32F=34836,pa.GL_R16F=33325,pa.GL_R32F=33326,pa.GL_DEPTH_COMPONENT24=33190,pa.GL_DEPTH24_STENCIL8=35056,pa.GL_DEPTH32F_STENCIL8=36013,ja.__meta__={statics:{sendConnectEvent:{input:null},sendDisconnectEvent:{input:null}},fields:{sendAxisEvent:{input:null},sendButtonEvent:{input:null}}},ja.instances=[],ja.connectListeners=[],ja.disconnectListeners=[],Ra.__meta__={fields:{sendDownEvent:{input:null},sendUpEvent:{input:null},sendPressEvent:{input:null}}},Fa.__meta__={fields:{sendLeaveEvent:{input:null},sendDownEvent:{input:null},sendUpEvent:{input:null},sendMoveEvent:{input:null},sendWheelEvent:{input:null}}},Ea.bufferSize=2e3,Ua.exposurePattern=new r("EXPOSURE=\\s*([0-9]*[.][0-9]*)","i"),Ua.formatPattern=new r("FORMAT=32-bit_rle_rgbe","i"),Ua.widthHeightPattern=new r("-Y ([0-9]+) \\+X ([0-9]+)","i"),Qa.todo=[],ni.loading=[],fi.nextId=0,wn.defaultFriction=.2,wn.defaultRestitution=.2,wn.defaultDensity=1,wn.defaultCollisionGroup=1,wn.defaultCollisionMask=1,wn.maxTranslationPerStep=20,wn.maxRotationPerStep=3.14159265358979,wn.bvhProxyPadding=.1,wn.bvhIncrementalCollisionThreshold=.45,wn.defaultGJKMargin=.05,wn.enableGJKCaching=!0,wn.maxEPAVertices=128,wn.contactEnableBounceThreshold=.5,wn.velocityBaumgarte=.2,wn.positionSplitImpulseBaumgarte=.4,wn.positionNgsBaumgarte=1,wn.contactUseAlternativePositionCorrectionAlgorithmDepthThreshold=.05,wn.defaultContactPositionCorrectionAlgorithm=0,wn.alternativeContactPositionCorrectionAlgorithm=1,wn.contactPersistenceThreshold=.05,wn.maxManifoldPoints=4,wn.defaultJointConstraintSolverType=0,wn.defaultJointPositionCorrectionAlgorithm=0,wn.jointWarmStartingFactorForBaungarte=.8,wn.jointWarmStartingFactor=.95,wn.maxJacobianRows=6,wn.directMlcpSolverEps=1e-9,wn.islandInitialRigidBodyArraySize=128,wn.islandInitialConstraintArraySize=128,wn.sleepingVelocityThreshold=.2,wn.sleepingAngularVelocityThreshold=.5,wn.sleepingTimeThreshold=1,wn.disableSleeping=!1,wn.linearSlop=.005,en.instance=new en,an.SUCCEEDED=0,an.EPA_FAILED_TO_INIT=257,an.EPA_FAILED_TO_ADD_VERTEX=258,an.EPA_DID_NOT_CONVERGE=259,nn.numCreations=0,In.broadPhaseCollisionTime=0,In.narrowPhaseCollisionTime=0,In.dynamicsTime=0,In.totalTime=0,Mn.BAUMGARTE=0,Mn.SPLIT_IMPULSE=1,Mn.NGS=2,En.DYNAMIC=0,En.STATIC=1,o.main()}("undefined"!=typeof exports?exports:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this,"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this);